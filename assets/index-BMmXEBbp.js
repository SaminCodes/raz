(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=r(a);fetch(a.href,d)}})();function _p(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var sc={exports:{}},Xs={},ic={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh;function Bg(){if(uh)return De;uh=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),y=Symbol.iterator;function v(w){return w===null||typeof w!="object"?null:(w=y&&w[y]||w["@@iterator"],typeof w=="function"?w:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,U={};function X(w,D,Z){this.props=w,this.context=D,this.refs=U,this.updater=Z||T}X.prototype.isReactComponent={},X.prototype.setState=function(w,D){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,D,"setState")},X.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function ie(){}ie.prototype=X.prototype;function re(w,D,Z){this.props=w,this.context=D,this.refs=U,this.updater=Z||T}var Ie=re.prototype=new ie;Ie.constructor=re,L(Ie,X.prototype),Ie.isPureReactComponent=!0;var ce=Array.isArray,Fe=Object.prototype.hasOwnProperty,G={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(w,D,Z){var Ee,M={},B=null,J=null;if(D!=null)for(Ee in D.ref!==void 0&&(J=D.ref),D.key!==void 0&&(B=""+D.key),D)Fe.call(D,Ee)&&!P.hasOwnProperty(Ee)&&(M[Ee]=D[Ee]);var Ce=arguments.length-2;if(Ce===1)M.children=Z;else if(1<Ce){for(var j=Array(Ce),q=0;q<Ce;q++)j[q]=arguments[q+2];M.children=j}if(w&&w.defaultProps)for(Ee in Ce=w.defaultProps,Ce)M[Ee]===void 0&&(M[Ee]=Ce[Ee]);return{$$typeof:s,type:w,key:B,ref:J,props:M,_owner:G.current}}function _e(w,D){return{$$typeof:s,type:w.type,key:D,ref:w.ref,props:w.props,_owner:w._owner}}function oe(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function pe(w){var D={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(Z){return D[Z]})}var me=/\/+/g;function Pe(w,D){return typeof w=="object"&&w!==null&&w.key!=null?pe(""+w.key):D.toString(36)}function He(w,D,Z,Ee,M){var B=typeof w;(B==="undefined"||B==="boolean")&&(w=null);var J=!1;if(w===null)J=!0;else switch(B){case"string":case"number":J=!0;break;case"object":switch(w.$$typeof){case s:case t:J=!0}}if(J)return J=w,M=M(J),w=Ee===""?"."+Pe(J,0):Ee,ce(M)?(Z="",w!=null&&(Z=w.replace(me,"$&/")+"/"),He(M,D,Z,"",function(q){return q})):M!=null&&(oe(M)&&(M=_e(M,Z+(!M.key||J&&J.key===M.key?"":(""+M.key).replace(me,"$&/")+"/")+w)),D.push(M)),1;if(J=0,Ee=Ee===""?".":Ee+":",ce(w))for(var Ce=0;Ce<w.length;Ce++){B=w[Ce];var j=Ee+Pe(B,Ce);J+=He(B,D,Z,j,M)}else if(j=v(w),typeof j=="function")for(w=j.call(w),Ce=0;!(B=w.next()).done;)B=B.value,j=Ee+Pe(B,Ce++),J+=He(B,D,Z,j,M);else if(B==="object")throw D=String(w),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return J}function ee(w,D,Z){if(w==null)return w;var Ee=[],M=0;return He(w,Ee,"","",function(B){return D.call(Z,B,M++)}),Ee}function he(w){if(w._status===-1){var D=w._result;D=D(),D.then(function(Z){(w._status===0||w._status===-1)&&(w._status=1,w._result=Z)},function(Z){(w._status===0||w._status===-1)&&(w._status=2,w._result=Z)}),w._status===-1&&(w._status=0,w._result=D)}if(w._status===1)return w._result.default;throw w._result}var we={current:null},$={transition:null},K={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:$,ReactCurrentOwner:G};return De.Children={map:ee,forEach:function(w,D,Z){ee(w,function(){D.apply(this,arguments)},Z)},count:function(w){var D=0;return ee(w,function(){D++}),D},toArray:function(w){return ee(w,function(D){return D})||[]},only:function(w){if(!oe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},De.Component=X,De.Fragment=r,De.Profiler=a,De.PureComponent=re,De.StrictMode=o,De.Suspense=g,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,De.cloneElement=function(w,D,Z){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var Ee=L({},w.props),M=w.key,B=w.ref,J=w._owner;if(D!=null){if(D.ref!==void 0&&(B=D.ref,J=G.current),D.key!==void 0&&(M=""+D.key),w.type&&w.type.defaultProps)var Ce=w.type.defaultProps;for(j in D)Fe.call(D,j)&&!P.hasOwnProperty(j)&&(Ee[j]=D[j]===void 0&&Ce!==void 0?Ce[j]:D[j])}var j=arguments.length-2;if(j===1)Ee.children=Z;else if(1<j){Ce=Array(j);for(var q=0;q<j;q++)Ce[q]=arguments[q+2];Ee.children=Ce}return{$$typeof:s,type:w.type,key:M,ref:B,props:Ee,_owner:J}},De.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:d,_context:w},w.Consumer=w},De.createElement=R,De.createFactory=function(w){var D=R.bind(null,w);return D.type=w,D},De.createRef=function(){return{current:null}},De.forwardRef=function(w){return{$$typeof:p,render:w}},De.isValidElement=oe,De.lazy=function(w){return{$$typeof:N,_payload:{_status:-1,_result:w},_init:he}},De.memo=function(w,D){return{$$typeof:x,type:w,compare:D===void 0?null:D}},De.startTransition=function(w){var D=$.transition;$.transition={};try{w()}finally{$.transition=D}},De.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},De.useCallback=function(w,D){return we.current.useCallback(w,D)},De.useContext=function(w){return we.current.useContext(w)},De.useDebugValue=function(){},De.useDeferredValue=function(w){return we.current.useDeferredValue(w)},De.useEffect=function(w,D){return we.current.useEffect(w,D)},De.useId=function(){return we.current.useId()},De.useImperativeHandle=function(w,D,Z){return we.current.useImperativeHandle(w,D,Z)},De.useInsertionEffect=function(w,D){return we.current.useInsertionEffect(w,D)},De.useLayoutEffect=function(w,D){return we.current.useLayoutEffect(w,D)},De.useMemo=function(w,D){return we.current.useMemo(w,D)},De.useReducer=function(w,D,Z){return we.current.useReducer(w,D,Z)},De.useRef=function(w){return we.current.useRef(w)},De.useState=function(w){return we.current.useState(w)},De.useSyncExternalStore=function(w,D,Z){return we.current.useSyncExternalStore(w,D,Z)},De.useTransition=function(){return we.current.useTransition()},De.version="18.2.0",De}var dh;function $c(){return dh||(dh=1,ic.exports=Bg()),ic.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function Wg(){if(fh)return Xs;fh=1;var s=$c(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,x){var N,y={},v=null,T=null;x!==void 0&&(v=""+x),g.key!==void 0&&(v=""+g.key),g.ref!==void 0&&(T=g.ref);for(N in g)o.call(g,N)&&!d.hasOwnProperty(N)&&(y[N]=g[N]);if(p&&p.defaultProps)for(N in g=p.defaultProps,g)y[N]===void 0&&(y[N]=g[N]);return{$$typeof:t,type:p,key:v,ref:T,props:y,_owner:a.current}}return Xs.Fragment=r,Xs.jsx=h,Xs.jsxs=h,Xs}var hh;function Hg(){return hh||(hh=1,sc.exports=Wg()),sc.exports}var c=Hg(),W=$c();const Vg=_p(W);var Lo={},oc={exports:{}},At={},lc={exports:{}},ac={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph;function Yg(){return ph||(ph=1,(function(s){function t($,K){var w=$.length;$.push(K);e:for(;0<w;){var D=w-1>>>1,Z=$[D];if(0<a(Z,K))$[D]=K,$[w]=Z,w=D;else break e}}function r($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var K=$[0],w=$.pop();if(w!==K){$[0]=w;e:for(var D=0,Z=$.length,Ee=Z>>>1;D<Ee;){var M=2*(D+1)-1,B=$[M],J=M+1,Ce=$[J];if(0>a(B,w))J<Z&&0>a(Ce,B)?($[D]=Ce,$[J]=w,D=J):($[D]=B,$[M]=w,D=M);else if(J<Z&&0>a(Ce,w))$[D]=Ce,$[J]=w,D=J;else break e}}return K}function a($,K){var w=$.sortIndex-K.sortIndex;return w!==0?w:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],x=[],N=1,y=null,v=3,T=!1,L=!1,U=!1,X=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ie($){for(var K=r(x);K!==null;){if(K.callback===null)o(x);else if(K.startTime<=$)o(x),K.sortIndex=K.expirationTime,t(g,K);else break;K=r(x)}}function ce($){if(U=!1,Ie($),!L)if(r(g)!==null)L=!0,he(Fe);else{var K=r(x);K!==null&&we(ce,K.startTime-$)}}function Fe($,K){L=!1,U&&(U=!1,ie(R),R=-1),T=!0;var w=v;try{for(Ie(K),y=r(g);y!==null&&(!(y.expirationTime>K)||$&&!pe());){var D=y.callback;if(typeof D=="function"){y.callback=null,v=y.priorityLevel;var Z=D(y.expirationTime<=K);K=s.unstable_now(),typeof Z=="function"?y.callback=Z:y===r(g)&&o(g),Ie(K)}else o(g);y=r(g)}if(y!==null)var Ee=!0;else{var M=r(x);M!==null&&we(ce,M.startTime-K),Ee=!1}return Ee}finally{y=null,v=w,T=!1}}var G=!1,P=null,R=-1,_e=5,oe=-1;function pe(){return!(s.unstable_now()-oe<_e)}function me(){if(P!==null){var $=s.unstable_now();oe=$;var K=!0;try{K=P(!0,$)}finally{K?Pe():(G=!1,P=null)}}else G=!1}var Pe;if(typeof re=="function")Pe=function(){re(me)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,ee=He.port2;He.port1.onmessage=me,Pe=function(){ee.postMessage(null)}}else Pe=function(){X(me,0)};function he($){P=$,G||(G=!0,Pe())}function we($,K){R=X(function(){$(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_continueExecution=function(){L||T||(L=!0,he(Fe))},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_getFirstCallbackNode=function(){return r(g)},s.unstable_next=function($){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var w=v;v=K;try{return $()}finally{v=w}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var w=v;v=$;try{return K()}finally{v=w}},s.unstable_scheduleCallback=function($,K,w){var D=s.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?D+w:D):w=D,$){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=w+Z,$={id:N++,callback:K,priorityLevel:$,startTime:w,expirationTime:Z,sortIndex:-1},w>D?($.sortIndex=w,t(x,$),r(g)===null&&$===r(x)&&(U?(ie(R),R=-1):U=!0,we(ce,w-D))):($.sortIndex=Z,t(g,$),L||T||(L=!0,he(Fe))),$},s.unstable_shouldYield=pe,s.unstable_wrapCallback=function($){var K=v;return function(){var w=v;v=K;try{return $.apply(this,arguments)}finally{v=w}}}})(ac)),ac}var mh;function Qg(){return mh||(mh=1,lc.exports=Yg()),lc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh;function Gg(){if(gh)return At;gh=1;var s=$c(),t=Qg();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function d(e,n){h(e,n),h(e+"Capture",n)}function h(e,n){for(a[e]=n,e=0;e<n.length;e++)o.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},y={};function v(e){return g.call(y,e)?!0:g.call(N,e)?!1:x.test(e)?y[e]=!0:(N[e]=!0,!1)}function T(e,n,i,l){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L(e,n,i,l){if(n===null||typeof n>"u"||T(e,n,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function U(e,n,i,l,u,f,m){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=n,this.sanitizeURL=f,this.removeEmptyString=m}var X={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){X[e]=new U(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];X[n]=new U(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){X[e]=new U(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){X[e]=new U(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){X[e]=new U(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){X[e]=new U(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){X[e]=new U(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){X[e]=new U(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){X[e]=new U(e,5,!1,e.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function re(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(ie,re);X[n]=new U(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(ie,re);X[n]=new U(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(ie,re);X[n]=new U(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){X[e]=new U(e,1,!1,e.toLowerCase(),null,!1,!1)}),X.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){X[e]=new U(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ie(e,n,i,l){var u=X.hasOwnProperty(n)?X[n]:null;(u!==null?u.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(L(n,i,u,l)&&(i=null),l||u===null?v(n)&&(i===null?e.removeAttribute(n):e.setAttribute(n,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(n=u.attributeName,l=u.attributeNamespace,i===null?e.removeAttribute(n):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,l?e.setAttributeNS(l,n,i):e.setAttribute(n,i))))}var ce=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fe=Symbol.for("react.element"),G=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),pe=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),$=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var w=Object.assign,D;function Z(e){if(D===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);D=n&&n[1]||""}return`
`+D+e}var Ee=!1;function M(e,n){if(!e||Ee)return"";Ee=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(I){var l=I}Reflect.construct(e,[],n)}else{try{n.call()}catch(I){l=I}e.call(n.prototype)}else{try{throw Error()}catch(I){l=I}e()}}catch(I){if(I&&l&&typeof I.stack=="string"){for(var u=I.stack.split(`
`),f=l.stack.split(`
`),m=u.length-1,_=f.length-1;1<=m&&0<=_&&u[m]!==f[_];)_--;for(;1<=m&&0<=_;m--,_--)if(u[m]!==f[_]){if(m!==1||_!==1)do if(m--,_--,0>_||u[m]!==f[_]){var b=`
`+u[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=_);break}}}finally{Ee=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Z(e):""}function B(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1),e;case 11:return e=M(e.type.render,!1),e;case 1:return e=M(e.type,!0),e;default:return""}}function J(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case G:return"Portal";case _e:return"Profiler";case R:return"StrictMode";case Pe:return"Suspense";case He:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pe:return(e.displayName||"Context")+".Consumer";case oe:return(e._context.displayName||"Context")+".Provider";case me:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return n=e.displayName||null,n!==null?n:J(e.type)||"Memo";case he:n=e._payload,e=e._init;try{return J(e(n))}catch{}}return null}function Ce(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(n);case 8:return n===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function q(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ge(e){var n=q(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(m){l=""+m,f.call(this,m)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(m){l=""+m},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ze(e){e._valueTracker||(e._valueTracker=ge(e))}function Ct(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=q(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function fn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function E(e,n){var i=n.checked;return w({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function le(e,n){var i=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;i=j(n.value!=null?n.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function xe(e,n){n=n.checked,n!=null&&Ie(e,"checked",n,!1)}function je(e,n){xe(e,n);var i=j(n.value),l=n.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Ue(e,n.type,i):n.hasOwnProperty("defaultValue")&&Ue(e,n.type,j(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Se(e,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,i||n===e.value||(e.value=n),e.defaultValue=n}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Ue(e,n,i){(n!=="number"||fn(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Te=Array.isArray;function Ve(e,n,i,l){if(e=e.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=n.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&l&&(e[i].defaultSelected=!0)}else{for(i=""+j(i),n=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function nt(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return w({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function O(e,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(r(92));if(Te(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}n==null&&(n=""),i=n}e._wrapperState={initialValue:j(i)}}function ne(e,n){var i=j(n.value),l=j(n.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),n.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function be(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Q(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Q(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var de,Re=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,l,u){MSApp.execUnsafeLocalFunction(function(){return e(n,i,l,u)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(de=de||document.createElement("div"),de.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Ae(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_n=["Webkit","ms","Moz","O"];Object.keys(Qe).forEach(function(e){_n.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Qe[n]=Qe[e]})});function Bt(e,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Qe.hasOwnProperty(e)&&Qe[e]?(""+n).trim():n+"px"}function ir(e,n){e=e.style;for(var i in n)if(n.hasOwnProperty(i)){var l=i.indexOf("--")===0,u=Bt(i,n[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,u):e[i]=u}}var or=w({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gl(e,n){if(n){if(or[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function xl(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vl=null;function yl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _l=null,Rr=null,Pr=null;function ku(e){if(e=Os(e)){if(typeof _l!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Qi(n),_l(e.stateNode,e.type,n))}}function Su(e){Rr?Pr?Pr.push(e):Pr=[e]:Rr=e}function Eu(){if(Rr){var e=Rr,n=Pr;if(Pr=Rr=null,ku(e),n)for(e=0;e<n.length;e++)ku(n[e])}}function ju(e,n){return e(n)}function Iu(){}var wl=!1;function Tu(e,n,i){if(wl)return e(n,i);wl=!0;try{return ju(e,n,i)}finally{wl=!1,(Rr!==null||Pr!==null)&&(Iu(),Eu())}}function ms(e,n){var i=e.stateNode;if(i===null)return null;var l=Qi(i);if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var bl=!1;if(p)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){bl=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{bl=!1}function Gm(e,n,i,l,u,f,m,_,b){var I=Array.prototype.slice.call(arguments,3);try{n.apply(i,I)}catch(z){this.onError(z)}}var xs=!1,ki=null,Si=!1,Nl=null,Km={onError:function(e){xs=!0,ki=e}};function qm(e,n,i,l,u,f,m,_,b){xs=!1,ki=null,Gm.apply(Km,arguments)}function Xm(e,n,i,l,u,f,m,_,b){if(qm.apply(this,arguments),xs){if(xs){var I=ki;xs=!1,ki=null}else throw Error(r(198));Si||(Si=!0,Nl=I)}}function lr(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function Ru(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Pu(e){if(lr(e)!==e)throw Error(r(188))}function Jm(e){var n=e.alternate;if(!n){if(n=lr(e),n===null)throw Error(r(188));return n!==e?null:e}for(var i=e,l=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return Pu(u),e;if(f===l)return Pu(u),n;f=f.sibling}throw Error(r(188))}if(i.return!==l.return)i=u,l=f;else{for(var m=!1,_=u.child;_;){if(_===i){m=!0,i=u,l=f;break}if(_===l){m=!0,l=u,i=f;break}_=_.sibling}if(!m){for(_=f.child;_;){if(_===i){m=!0,i=f,l=u;break}if(_===l){m=!0,l=f,i=u;break}_=_.sibling}if(!m)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:n}function Lu(e){return e=Jm(e),e!==null?Mu(e):null}function Mu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Mu(e);if(n!==null)return n;e=e.sibling}return null}var Du=t.unstable_scheduleCallback,Ou=t.unstable_cancelCallback,Zm=t.unstable_shouldYield,e0=t.unstable_requestPaint,lt=t.unstable_now,t0=t.unstable_getCurrentPriorityLevel,Cl=t.unstable_ImmediatePriority,Au=t.unstable_UserBlockingPriority,Ei=t.unstable_NormalPriority,n0=t.unstable_LowPriority,Fu=t.unstable_IdlePriority,ji=null,hn=null;function r0(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ji,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:o0,s0=Math.log,i0=Math.LN2;function o0(e){return e>>>=0,e===0?32:31-(s0(e)/i0|0)|0}var Ii=64,Ti=4194304;function vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ri(e,n){var i=e.pendingLanes;if(i===0)return 0;var l=0,u=e.suspendedLanes,f=e.pingedLanes,m=i&268435455;if(m!==0){var _=m&~u;_!==0?l=vs(_):(f&=m,f!==0&&(l=vs(f)))}else m=i&~u,m!==0?l=vs(m):f!==0&&(l=vs(f));if(l===0)return 0;if(n!==0&&n!==l&&(n&u)===0&&(u=l&-l,f=n&-n,u>=f||u===16&&(f&4194240)!==0))return n;if((l&4)!==0&&(l|=i&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)i=31-Zt(n),u=1<<i,l|=e[i],n&=~u;return l}function l0(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a0(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var m=31-Zt(f),_=1<<m,b=u[m];b===-1?((_&i)===0||(_&l)!==0)&&(u[m]=l0(_,n)):b<=n&&(e.expiredLanes|=_),f&=~_}}function kl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zu(){var e=Ii;return Ii<<=1,(Ii&4194240)===0&&(Ii=64),e}function Sl(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function ys(e,n,i){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Zt(n),e[n]=i}function c0(e,n){var i=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-Zt(i),f=1<<u;n[u]=0,l[u]=-1,e[u]=-1,i&=~f}}function El(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-Zt(i),u=1<<l;u&n|e[l]&n&&(e[l]|=n),i&=~u}}var Ye=0;function Uu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var $u,jl,Bu,Wu,Hu,Il=!1,Pi=[],Dn=null,On=null,An=null,_s=new Map,ws=new Map,Fn=[],u0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vu(e,n){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":_s.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(n.pointerId)}}function bs(e,n,i,l,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Os(n),n!==null&&jl(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function d0(e,n,i,l,u){switch(n){case"focusin":return Dn=bs(Dn,e,n,i,l,u),!0;case"dragenter":return On=bs(On,e,n,i,l,u),!0;case"mouseover":return An=bs(An,e,n,i,l,u),!0;case"pointerover":var f=u.pointerId;return _s.set(f,bs(_s.get(f)||null,e,n,i,l,u)),!0;case"gotpointercapture":return f=u.pointerId,ws.set(f,bs(ws.get(f)||null,e,n,i,l,u)),!0}return!1}function Yu(e){var n=ar(e.target);if(n!==null){var i=lr(n);if(i!==null){if(n=i.tag,n===13){if(n=Ru(i),n!==null){e.blockedOn=n,Hu(e.priority,function(){Bu(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Li(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Rl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);vl=l,i.target.dispatchEvent(l),vl=null}else return n=Os(i),n!==null&&jl(n),e.blockedOn=i,!1;n.shift()}return!0}function Qu(e,n,i){Li(e)&&i.delete(n)}function f0(){Il=!1,Dn!==null&&Li(Dn)&&(Dn=null),On!==null&&Li(On)&&(On=null),An!==null&&Li(An)&&(An=null),_s.forEach(Qu),ws.forEach(Qu)}function Ns(e,n){e.blockedOn===n&&(e.blockedOn=null,Il||(Il=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,f0)))}function Cs(e){function n(u){return Ns(u,e)}if(0<Pi.length){Ns(Pi[0],e);for(var i=1;i<Pi.length;i++){var l=Pi[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Dn!==null&&Ns(Dn,e),On!==null&&Ns(On,e),An!==null&&Ns(An,e),_s.forEach(n),ws.forEach(n),i=0;i<Fn.length;i++)l=Fn[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<Fn.length&&(i=Fn[0],i.blockedOn===null);)Yu(i),i.blockedOn===null&&Fn.shift()}var Lr=ce.ReactCurrentBatchConfig,Mi=!0;function h0(e,n,i,l){var u=Ye,f=Lr.transition;Lr.transition=null;try{Ye=1,Tl(e,n,i,l)}finally{Ye=u,Lr.transition=f}}function p0(e,n,i,l){var u=Ye,f=Lr.transition;Lr.transition=null;try{Ye=4,Tl(e,n,i,l)}finally{Ye=u,Lr.transition=f}}function Tl(e,n,i,l){if(Mi){var u=Rl(e,n,i,l);if(u===null)Gl(e,n,l,Di,i),Vu(e,l);else if(d0(u,e,n,i,l))l.stopPropagation();else if(Vu(e,l),n&4&&-1<u0.indexOf(e)){for(;u!==null;){var f=Os(u);if(f!==null&&$u(f),f=Rl(e,n,i,l),f===null&&Gl(e,n,l,Di,i),f===u)break;u=f}u!==null&&l.stopPropagation()}else Gl(e,n,l,null,i)}}var Di=null;function Rl(e,n,i,l){if(Di=null,e=yl(l),e=ar(e),e!==null)if(n=lr(e),n===null)e=null;else if(i=n.tag,i===13){if(e=Ru(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Di=e,null}function Gu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t0()){case Cl:return 1;case Au:return 4;case Ei:case n0:return 16;case Fu:return 536870912;default:return 16}default:return 16}}var zn=null,Pl=null,Oi=null;function Ku(){if(Oi)return Oi;var e,n=Pl,i=n.length,l,u="value"in zn?zn.value:zn.textContent,f=u.length;for(e=0;e<i&&n[e]===u[e];e++);var m=i-e;for(l=1;l<=m&&n[i-l]===u[f-l];l++);return Oi=u.slice(e,1<l?1-l:void 0)}function Ai(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Fi(){return!0}function qu(){return!1}function Wt(e){function n(i,l,u,f,m){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Fi:qu,this.isPropagationStopped=qu,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),n}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=Wt(Mr),ks=w({},Mr,{view:0,detail:0}),m0=Wt(ks),Ml,Dl,Ss,zi=w({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Al,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(Ml=e.screenX-Ss.screenX,Dl=e.screenY-Ss.screenY):Dl=Ml=0,Ss=e),Ml)},movementY:function(e){return"movementY"in e?e.movementY:Dl}}),Xu=Wt(zi),g0=w({},zi,{dataTransfer:0}),x0=Wt(g0),v0=w({},ks,{relatedTarget:0}),Ol=Wt(v0),y0=w({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=Wt(y0),w0=w({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),b0=Wt(w0),N0=w({},Mr,{data:0}),Ju=Wt(N0),C0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=S0[e])?!!n[e]:!1}function Al(){return E0}var j0=w({},ks,{key:function(e){if(e.key){var n=C0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?k0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Al,charCode:function(e){return e.type==="keypress"?Ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),I0=Wt(j0),T0=w({},zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zu=Wt(T0),R0=w({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Al}),P0=Wt(R0),L0=w({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=Wt(L0),D0=w({},zi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O0=Wt(D0),A0=[9,13,27,32],Fl=p&&"CompositionEvent"in window,Es=null;p&&"documentMode"in document&&(Es=document.documentMode);var F0=p&&"TextEvent"in window&&!Es,ed=p&&(!Fl||Es&&8<Es&&11>=Es),td=" ",nd=!1;function rd(e,n){switch(e){case"keyup":return A0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function z0(e,n){switch(e){case"compositionend":return sd(n);case"keypress":return n.which!==32?null:(nd=!0,td);case"textInput":return e=n.data,e===td&&nd?null:e;default:return null}}function U0(e,n){if(Dr)return e==="compositionend"||!Fl&&rd(e,n)?(e=Ku(),Oi=Pl=zn=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ed&&n.locale!=="ko"?null:n.data;default:return null}}var $0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function id(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!$0[e.type]:n==="textarea"}function od(e,n,i,l){Su(l),n=Hi(n,"onChange"),0<n.length&&(i=new Ll("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var js=null,Is=null;function B0(e){Cd(e,0)}function Ui(e){var n=Ur(e);if(Ct(n))return e}function W0(e,n){if(e==="change")return n}var ld=!1;if(p){var zl;if(p){var Ul="oninput"in document;if(!Ul){var ad=document.createElement("div");ad.setAttribute("oninput","return;"),Ul=typeof ad.oninput=="function"}zl=Ul}else zl=!1;ld=zl&&(!document.documentMode||9<document.documentMode)}function cd(){js&&(js.detachEvent("onpropertychange",ud),Is=js=null)}function ud(e){if(e.propertyName==="value"&&Ui(Is)){var n=[];od(n,Is,e,yl(e)),Tu(B0,n)}}function H0(e,n,i){e==="focusin"?(cd(),js=n,Is=i,js.attachEvent("onpropertychange",ud)):e==="focusout"&&cd()}function V0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ui(Is)}function Y0(e,n){if(e==="click")return Ui(n)}function Q0(e,n){if(e==="input"||e==="change")return Ui(n)}function G0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var en=typeof Object.is=="function"?Object.is:G0;function Ts(e,n){if(en(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!g.call(n,u)||!en(e[u],n[u]))return!1}return!0}function dd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fd(e,n){var i=dd(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=dd(i)}}function hd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?hd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function pd(){for(var e=window,n=fn();n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=fn(e.document)}return n}function $l(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function K0(e){var n=pd(),i=e.focusedElem,l=e.selectionRange;if(n!==i&&i&&i.ownerDocument&&hd(i.ownerDocument.documentElement,i)){if(l!==null&&$l(i)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(e,i.value.length);else if(e=(n=i.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,f=Math.min(l.start,u);l=l.end===void 0?f:Math.min(l.end,u),!e.extend&&f>l&&(u=l,l=f,f=u),u=fd(i,f);var m=fd(i,l);u&&m&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(n=n.createRange(),n.setStart(u.node,u.offset),e.removeAllRanges(),f>l?(e.addRange(n),e.extend(m.node,m.offset)):(n.setEnd(m.node,m.offset),e.addRange(n)))}}for(n=[],e=i;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)e=n[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var q0=p&&"documentMode"in document&&11>=document.documentMode,Or=null,Bl=null,Rs=null,Wl=!1;function md(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Wl||Or==null||Or!==fn(l)||(l=Or,"selectionStart"in l&&$l(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rs&&Ts(Rs,l)||(Rs=l,l=Hi(Bl,"onSelect"),0<l.length&&(n=new Ll("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=Or)))}function $i(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Ar={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionend:$i("Transition","TransitionEnd")},Hl={},gd={};p&&(gd=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function Bi(e){if(Hl[e])return Hl[e];if(!Ar[e])return e;var n=Ar[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in gd)return Hl[e]=n[i];return e}var xd=Bi("animationend"),vd=Bi("animationiteration"),yd=Bi("animationstart"),_d=Bi("transitionend"),wd=new Map,bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(e,n){wd.set(e,n),d(n,[e])}for(var Vl=0;Vl<bd.length;Vl++){var Yl=bd[Vl],X0=Yl.toLowerCase(),J0=Yl[0].toUpperCase()+Yl.slice(1);Un(X0,"on"+J0)}Un(xd,"onAnimationEnd"),Un(vd,"onAnimationIteration"),Un(yd,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(_d,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function Nd(e,n,i){var l=e.type||"unknown-event";e.currentTarget=i,Xm(l,n,void 0,e),e.currentTarget=null}function Cd(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],u=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var m=l.length-1;0<=m;m--){var _=l[m],b=_.instance,I=_.currentTarget;if(_=_.listener,b!==f&&u.isPropagationStopped())break e;Nd(u,_,I),f=b}else for(m=0;m<l.length;m++){if(_=l[m],b=_.instance,I=_.currentTarget,_=_.listener,b!==f&&u.isPropagationStopped())break e;Nd(u,_,I),f=b}}}if(Si)throw e=Nl,Si=!1,Nl=null,e}function Je(e,n){var i=n[ea];i===void 0&&(i=n[ea]=new Set);var l=e+"__bubble";i.has(l)||(kd(n,e,2,!1),i.add(l))}function Ql(e,n,i){var l=0;n&&(l|=4),kd(i,e,l,n)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function Ls(e){if(!e[Wi]){e[Wi]=!0,o.forEach(function(i){i!=="selectionchange"&&(Z0.has(i)||Ql(i,!1,e),Ql(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Wi]||(n[Wi]=!0,Ql("selectionchange",!1,n))}}function kd(e,n,i,l){switch(Gu(n)){case 1:var u=h0;break;case 4:u=p0;break;default:u=Tl}i=u.bind(null,n,i,e),u=void 0,!bl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,i,{capture:!0,passive:u}):e.addEventListener(n,i,!0):u!==void 0?e.addEventListener(n,i,{passive:u}):e.addEventListener(n,i,!1)}function Gl(e,n,i,l,u){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var _=l.stateNode.containerInfo;if(_===u||_.nodeType===8&&_.parentNode===u)break;if(m===4)for(m=l.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===u||b.nodeType===8&&b.parentNode===u))return;m=m.return}for(;_!==null;){if(m=ar(_),m===null)return;if(b=m.tag,b===5||b===6){l=f=m;continue e}_=_.parentNode}}l=l.return}Tu(function(){var I=f,z=yl(i),H=[];e:{var A=wd.get(e);if(A!==void 0){var te=Ll,ae=e;switch(e){case"keypress":if(Ai(i)===0)break e;case"keydown":case"keyup":te=I0;break;case"focusin":ae="focus",te=Ol;break;case"focusout":ae="blur",te=Ol;break;case"beforeblur":case"afterblur":te=Ol;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=x0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=P0;break;case xd:case vd:case yd:te=_0;break;case _d:te=M0;break;case"scroll":te=m0;break;case"wheel":te=O0;break;case"copy":case"cut":case"paste":te=b0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Zu}var ue=(n&4)!==0,at=!ue&&e==="scroll",k=ue?A!==null?A+"Capture":null:A;ue=[];for(var C=I,S;C!==null;){S=C;var V=S.stateNode;if(S.tag===5&&V!==null&&(S=V,k!==null&&(V=ms(C,k),V!=null&&ue.push(Ms(C,V,S)))),at)break;C=C.return}0<ue.length&&(A=new te(A,ae,null,i,z),H.push({event:A,listeners:ue}))}}if((n&7)===0){e:{if(A=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",A&&i!==vl&&(ae=i.relatedTarget||i.fromElement)&&(ar(ae)||ae[wn]))break e;if((te||A)&&(A=z.window===z?z:(A=z.ownerDocument)?A.defaultView||A.parentWindow:window,te?(ae=i.relatedTarget||i.toElement,te=I,ae=ae?ar(ae):null,ae!==null&&(at=lr(ae),ae!==at||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(te=null,ae=I),te!==ae)){if(ue=Xu,V="onMouseLeave",k="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(ue=Zu,V="onPointerLeave",k="onPointerEnter",C="pointer"),at=te==null?A:Ur(te),S=ae==null?A:Ur(ae),A=new ue(V,C+"leave",te,i,z),A.target=at,A.relatedTarget=S,V=null,ar(z)===I&&(ue=new ue(k,C+"enter",ae,i,z),ue.target=S,ue.relatedTarget=at,V=ue),at=V,te&&ae)t:{for(ue=te,k=ae,C=0,S=ue;S;S=Fr(S))C++;for(S=0,V=k;V;V=Fr(V))S++;for(;0<C-S;)ue=Fr(ue),C--;for(;0<S-C;)k=Fr(k),S--;for(;C--;){if(ue===k||k!==null&&ue===k.alternate)break t;ue=Fr(ue),k=Fr(k)}ue=null}else ue=null;te!==null&&Sd(H,A,te,ue,!1),ae!==null&&at!==null&&Sd(H,at,ae,ue,!0)}}e:{if(A=I?Ur(I):window,te=A.nodeName&&A.nodeName.toLowerCase(),te==="select"||te==="input"&&A.type==="file")var fe=W0;else if(id(A))if(ld)fe=Q0;else{fe=V0;var ve=H0}else(te=A.nodeName)&&te.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(fe=Y0);if(fe&&(fe=fe(e,I))){od(H,fe,i,z);break e}ve&&ve(e,A,I),e==="focusout"&&(ve=A._wrapperState)&&ve.controlled&&A.type==="number"&&Ue(A,"number",A.value)}switch(ve=I?Ur(I):window,e){case"focusin":(id(ve)||ve.contentEditable==="true")&&(Or=ve,Bl=I,Rs=null);break;case"focusout":Rs=Bl=Or=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,md(H,i,z);break;case"selectionchange":if(q0)break;case"keydown":case"keyup":md(H,i,z)}var ye;if(Fl)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Dr?rd(e,i)&&(ke="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ke="onCompositionStart");ke&&(ed&&i.locale!=="ko"&&(Dr||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Dr&&(ye=Ku()):(zn=z,Pl="value"in zn?zn.value:zn.textContent,Dr=!0)),ve=Hi(I,ke),0<ve.length&&(ke=new Ju(ke,e,null,i,z),H.push({event:ke,listeners:ve}),ye?ke.data=ye:(ye=sd(i),ye!==null&&(ke.data=ye)))),(ye=F0?z0(e,i):U0(e,i))&&(I=Hi(I,"onBeforeInput"),0<I.length&&(z=new Ju("onBeforeInput","beforeinput",null,i,z),H.push({event:z,listeners:I}),z.data=ye))}Cd(H,n)})}function Ms(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Hi(e,n){for(var i=n+"Capture",l=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=ms(e,i),f!=null&&l.unshift(Ms(e,f,u)),f=ms(e,n),f!=null&&l.push(Ms(e,f,u))),e=e.return}return l}function Fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sd(e,n,i,l,u){for(var f=n._reactName,m=[];i!==null&&i!==l;){var _=i,b=_.alternate,I=_.stateNode;if(b!==null&&b===l)break;_.tag===5&&I!==null&&(_=I,u?(b=ms(i,f),b!=null&&m.unshift(Ms(i,b,_))):u||(b=ms(i,f),b!=null&&m.push(Ms(i,b,_)))),i=i.return}m.length!==0&&e.push({event:n,listeners:m})}var eg=/\r\n?/g,tg=/\u0000|\uFFFD/g;function Ed(e){return(typeof e=="string"?e:""+e).replace(eg,`
`).replace(tg,"")}function Vi(e,n,i){if(n=Ed(n),Ed(e)!==n&&i)throw Error(r(425))}function Yi(){}var Kl=null,ql=null;function Xl(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Jl=typeof setTimeout=="function"?setTimeout:void 0,ng=typeof clearTimeout=="function"?clearTimeout:void 0,jd=typeof Promise=="function"?Promise:void 0,rg=typeof queueMicrotask=="function"?queueMicrotask:typeof jd<"u"?function(e){return jd.resolve(null).then(e).catch(sg)}:Jl;function sg(e){setTimeout(function(){throw e})}function Zl(e,n){var i=n,l=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(l===0){e.removeChild(u),Cs(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=u}while(i);Cs(n)}function $n(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Id(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}var zr=Math.random().toString(36).slice(2),pn="__reactFiber$"+zr,Ds="__reactProps$"+zr,wn="__reactContainer$"+zr,ea="__reactEvents$"+zr,ig="__reactListeners$"+zr,og="__reactHandles$"+zr;function ar(e){var n=e[pn];if(n)return n;for(var i=e.parentNode;i;){if(n=i[wn]||i[pn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Id(e);e!==null;){if(i=e[pn])return i;e=Id(e)}return n}e=i,i=e.parentNode}return null}function Os(e){return e=e[pn]||e[wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Qi(e){return e[Ds]||null}var ta=[],$r=-1;function Bn(e){return{current:e}}function Ze(e){0>$r||(e.current=ta[$r],ta[$r]=null,$r--)}function Ke(e,n){$r++,ta[$r]=e.current,e.current=n}var Wn={},kt=Bn(Wn),Pt=Bn(!1),cr=Wn;function Br(e,n){var i=e.type.contextTypes;if(!i)return Wn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in i)u[f]=n[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),u}function Lt(e){return e=e.childContextTypes,e!=null}function Gi(){Ze(Pt),Ze(kt)}function Td(e,n,i){if(kt.current!==Wn)throw Error(r(168));Ke(kt,n),Ke(Pt,i)}function Rd(e,n,i){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var u in l)if(!(u in n))throw Error(r(108,Ce(e)||"Unknown",u));return w({},i,l)}function Ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,cr=kt.current,Ke(kt,e),Ke(Pt,Pt.current),!0}function Pd(e,n,i){var l=e.stateNode;if(!l)throw Error(r(169));i?(e=Rd(e,n,cr),l.__reactInternalMemoizedMergedChildContext=e,Ze(Pt),Ze(kt),Ke(kt,e)):Ze(Pt),Ke(Pt,i)}var bn=null,qi=!1,na=!1;function Ld(e){bn===null?bn=[e]:bn.push(e)}function lg(e){qi=!0,Ld(e)}function Hn(){if(!na&&bn!==null){na=!0;var e=0,n=Ye;try{var i=bn;for(Ye=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}bn=null,qi=!1}catch(u){throw bn!==null&&(bn=bn.slice(e+1)),Du(Cl,Hn),u}finally{Ye=n,na=!1}}return null}var Wr=[],Hr=0,Xi=null,Ji=0,Qt=[],Gt=0,ur=null,Nn=1,Cn="";function dr(e,n){Wr[Hr++]=Ji,Wr[Hr++]=Xi,Xi=e,Ji=n}function Md(e,n,i){Qt[Gt++]=Nn,Qt[Gt++]=Cn,Qt[Gt++]=ur,ur=e;var l=Nn;e=Cn;var u=32-Zt(l)-1;l&=~(1<<u),i+=1;var f=32-Zt(n)+u;if(30<f){var m=u-u%5;f=(l&(1<<m)-1).toString(32),l>>=m,u-=m,Nn=1<<32-Zt(n)+u|i<<u|l,Cn=f+e}else Nn=1<<f|i<<u|l,Cn=e}function ra(e){e.return!==null&&(dr(e,1),Md(e,1,0))}function sa(e){for(;e===Xi;)Xi=Wr[--Hr],Wr[Hr]=null,Ji=Wr[--Hr],Wr[Hr]=null;for(;e===ur;)ur=Qt[--Gt],Qt[Gt]=null,Cn=Qt[--Gt],Qt[Gt]=null,Nn=Qt[--Gt],Qt[Gt]=null}var Ht=null,Vt=null,tt=!1,tn=null;function Dd(e,n){var i=Jt(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=e,n=e.deletions,n===null?(e.deletions=[i],e.flags|=16):n.push(i)}function Od(e,n){switch(e.tag){case 5:var i=e.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Ht=e,Vt=$n(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Ht=e,Vt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=ur!==null?{id:Nn,overflow:Cn}:null,e.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=Jt(18,null,null,0),i.stateNode=n,i.return=e,e.child=i,Ht=e,Vt=null,!0):!1;default:return!1}}function ia(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oa(e){if(tt){var n=Vt;if(n){var i=n;if(!Od(e,n)){if(ia(e))throw Error(r(418));n=$n(i.nextSibling);var l=Ht;n&&Od(e,n)?Dd(l,i):(e.flags=e.flags&-4097|2,tt=!1,Ht=e)}}else{if(ia(e))throw Error(r(418));e.flags=e.flags&-4097|2,tt=!1,Ht=e}}}function Ad(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ht=e}function Zi(e){if(e!==Ht)return!1;if(!tt)return Ad(e),tt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Xl(e.type,e.memoizedProps)),n&&(n=Vt)){if(ia(e))throw Fd(),Error(r(418));for(;n;)Dd(e,n),n=$n(n.nextSibling)}if(Ad(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(n===0){Vt=$n(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}e=e.nextSibling}Vt=null}}else Vt=Ht?$n(e.stateNode.nextSibling):null;return!0}function Fd(){for(var e=Vt;e;)e=$n(e.nextSibling)}function Vr(){Vt=Ht=null,tt=!1}function la(e){tn===null?tn=[e]:tn.push(e)}var ag=ce.ReactCurrentBatchConfig;function nn(e,n){if(e&&e.defaultProps){n=w({},n),e=e.defaultProps;for(var i in e)n[i]===void 0&&(n[i]=e[i]);return n}return n}var eo=Bn(null),to=null,Yr=null,aa=null;function ca(){aa=Yr=to=null}function ua(e){var n=eo.current;Ze(eo),e._currentValue=n}function da(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function Qr(e,n){to=e,aa=Yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Mt=!0),e.firstContext=null)}function Kt(e){var n=e._currentValue;if(aa!==e)if(e={context:e,memoizedValue:n,next:null},Yr===null){if(to===null)throw Error(r(308));Yr=e,to.dependencies={lanes:0,firstContext:e}}else Yr=Yr.next=e;return n}var fr=null;function fa(e){fr===null?fr=[e]:fr.push(e)}function zd(e,n,i,l){var u=n.interleaved;return u===null?(i.next=i,fa(n)):(i.next=u.next,u.next=i),n.interleaved=i,kn(e,l)}function kn(e,n){e.lanes|=n;var i=e.alternate;for(i!==null&&(i.lanes|=n),i=e,e=e.return;e!==null;)e.childLanes|=n,i=e.alternate,i!==null&&(i.childLanes|=n),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Vn=!1;function ha(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ud(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Yn(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,kn(e,i)}return u=l.interleaved,u===null?(n.next=n,fa(l)):(n.next=u.next,u.next=n),l.interleaved=n,kn(e,i)}function no(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,El(e,i)}}function $d(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?u=f=m:f=f.next=m,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}function ro(e,n,i,l){var u=e.updateQueue;Vn=!1;var f=u.firstBaseUpdate,m=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var b=_,I=b.next;b.next=null,m===null?f=I:m.next=I,m=b;var z=e.alternate;z!==null&&(z=z.updateQueue,_=z.lastBaseUpdate,_!==m&&(_===null?z.firstBaseUpdate=I:_.next=I,z.lastBaseUpdate=b))}if(f!==null){var H=u.baseState;m=0,z=I=b=null,_=f;do{var A=_.lane,te=_.eventTime;if((l&A)===A){z!==null&&(z=z.next={eventTime:te,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var ae=e,ue=_;switch(A=n,te=i,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){H=ae.call(te,H,A);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,A=typeof ae=="function"?ae.call(te,H,A):ae,A==null)break e;H=w({},H,A);break e;case 2:Vn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,A=u.effects,A===null?u.effects=[_]:A.push(_))}else te={eventTime:te,lane:A,tag:_.tag,payload:_.payload,callback:_.callback,next:null},z===null?(I=z=te,b=H):z=z.next=te,m|=A;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;A=_,_=A.next,A.next=null,u.lastBaseUpdate=A,u.shared.pending=null}}while(!0);if(z===null&&(b=H),u.baseState=b,u.firstBaseUpdate=I,u.lastBaseUpdate=z,n=u.shared.interleaved,n!==null){u=n;do m|=u.lane,u=u.next;while(u!==n)}else f===null&&(u.shared.lanes=0);mr|=m,e.lanes=m,e.memoizedState=H}}function Bd(e,n,i){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],u=l.callback;if(u!==null){if(l.callback=null,l=i,typeof u!="function")throw Error(r(191,u));u.call(l)}}}var Wd=new s.Component().refs;function pa(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:w({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var so={isMounted:function(e){return(e=e._reactInternals)?lr(e)===e:!1},enqueueSetState:function(e,n,i){e=e._reactInternals;var l=Rt(),u=qn(e),f=Sn(l,u);f.payload=n,i!=null&&(f.callback=i),n=Yn(e,f,u),n!==null&&(on(n,e,u,l),no(n,e,u))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=Rt(),u=qn(e),f=Sn(l,u);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=Yn(e,f,u),n!==null&&(on(n,e,u,l),no(n,e,u))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Rt(),l=qn(e),u=Sn(i,l);u.tag=2,n!=null&&(u.callback=n),n=Yn(e,u,l),n!==null&&(on(n,e,l,i),no(n,e,l))}};function Hd(e,n,i,l,u,f,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,m):n.prototype&&n.prototype.isPureReactComponent?!Ts(i,l)||!Ts(u,f):!0}function Vd(e,n,i){var l=!1,u=Wn,f=n.contextType;return typeof f=="object"&&f!==null?f=Kt(f):(u=Lt(n)?cr:kt.current,l=n.contextTypes,f=(l=l!=null)?Br(e,u):Wn),n=new n(i,f),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=so,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),n}function Yd(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&so.enqueueReplaceState(n,n.state,null)}function ma(e,n,i,l){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs=Wd,ha(e);var f=n.contextType;typeof f=="object"&&f!==null?u.context=Kt(f):(f=Lt(n)?cr:kt.current,u.context=Br(e,f)),u.state=e.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(pa(e,n,f,i),u.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(n=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),n!==u.state&&so.enqueueReplaceState(u,u.state,null),ro(e,i,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function As(e,n,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var l=i.stateNode}if(!l)throw Error(r(147,e));var u=l,f=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(m){var _=u.refs;_===Wd&&(_=u.refs={}),m===null?delete _[f]:_[f]=m},n._stringRef=f,n)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function io(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Qd(e){var n=e._init;return n(e._payload)}function Gd(e){function n(k,C){if(e){var S=k.deletions;S===null?(k.deletions=[C],k.flags|=16):S.push(C)}}function i(k,C){if(!e)return null;for(;C!==null;)n(k,C),C=C.sibling;return null}function l(k,C){for(k=new Map;C!==null;)C.key!==null?k.set(C.key,C):k.set(C.index,C),C=C.sibling;return k}function u(k,C){return k=Jn(k,C),k.index=0,k.sibling=null,k}function f(k,C,S){return k.index=S,e?(S=k.alternate,S!==null?(S=S.index,S<C?(k.flags|=2,C):S):(k.flags|=2,C)):(k.flags|=1048576,C)}function m(k){return e&&k.alternate===null&&(k.flags|=2),k}function _(k,C,S,V){return C===null||C.tag!==6?(C=Ja(S,k.mode,V),C.return=k,C):(C=u(C,S),C.return=k,C)}function b(k,C,S,V){var fe=S.type;return fe===P?z(k,C,S.props.children,V,S.key):C!==null&&(C.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===he&&Qd(fe)===C.type)?(V=u(C,S.props),V.ref=As(k,C,S),V.return=k,V):(V=ko(S.type,S.key,S.props,null,k.mode,V),V.ref=As(k,C,S),V.return=k,V)}function I(k,C,S,V){return C===null||C.tag!==4||C.stateNode.containerInfo!==S.containerInfo||C.stateNode.implementation!==S.implementation?(C=Za(S,k.mode,V),C.return=k,C):(C=u(C,S.children||[]),C.return=k,C)}function z(k,C,S,V,fe){return C===null||C.tag!==7?(C=yr(S,k.mode,V,fe),C.return=k,C):(C=u(C,S),C.return=k,C)}function H(k,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Ja(""+C,k.mode,S),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Fe:return S=ko(C.type,C.key,C.props,null,k.mode,S),S.ref=As(k,null,C),S.return=k,S;case G:return C=Za(C,k.mode,S),C.return=k,C;case he:var V=C._init;return H(k,V(C._payload),S)}if(Te(C)||K(C))return C=yr(C,k.mode,S,null),C.return=k,C;io(k,C)}return null}function A(k,C,S,V){var fe=C!==null?C.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return fe!==null?null:_(k,C,""+S,V);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fe:return S.key===fe?b(k,C,S,V):null;case G:return S.key===fe?I(k,C,S,V):null;case he:return fe=S._init,A(k,C,fe(S._payload),V)}if(Te(S)||K(S))return fe!==null?null:z(k,C,S,V,null);io(k,S)}return null}function te(k,C,S,V,fe){if(typeof V=="string"&&V!==""||typeof V=="number")return k=k.get(S)||null,_(C,k,""+V,fe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Fe:return k=k.get(V.key===null?S:V.key)||null,b(C,k,V,fe);case G:return k=k.get(V.key===null?S:V.key)||null,I(C,k,V,fe);case he:var ve=V._init;return te(k,C,S,ve(V._payload),fe)}if(Te(V)||K(V))return k=k.get(S)||null,z(C,k,V,fe,null);io(C,V)}return null}function ae(k,C,S,V){for(var fe=null,ve=null,ye=C,ke=C=0,xt=null;ye!==null&&ke<S.length;ke++){ye.index>ke?(xt=ye,ye=null):xt=ye.sibling;var Be=A(k,ye,S[ke],V);if(Be===null){ye===null&&(ye=xt);break}e&&ye&&Be.alternate===null&&n(k,ye),C=f(Be,C,ke),ve===null?fe=Be:ve.sibling=Be,ve=Be,ye=xt}if(ke===S.length)return i(k,ye),tt&&dr(k,ke),fe;if(ye===null){for(;ke<S.length;ke++)ye=H(k,S[ke],V),ye!==null&&(C=f(ye,C,ke),ve===null?fe=ye:ve.sibling=ye,ve=ye);return tt&&dr(k,ke),fe}for(ye=l(k,ye);ke<S.length;ke++)xt=te(ye,k,ke,S[ke],V),xt!==null&&(e&&xt.alternate!==null&&ye.delete(xt.key===null?ke:xt.key),C=f(xt,C,ke),ve===null?fe=xt:ve.sibling=xt,ve=xt);return e&&ye.forEach(function(Zn){return n(k,Zn)}),tt&&dr(k,ke),fe}function ue(k,C,S,V){var fe=K(S);if(typeof fe!="function")throw Error(r(150));if(S=fe.call(S),S==null)throw Error(r(151));for(var ve=fe=null,ye=C,ke=C=0,xt=null,Be=S.next();ye!==null&&!Be.done;ke++,Be=S.next()){ye.index>ke?(xt=ye,ye=null):xt=ye.sibling;var Zn=A(k,ye,Be.value,V);if(Zn===null){ye===null&&(ye=xt);break}e&&ye&&Zn.alternate===null&&n(k,ye),C=f(Zn,C,ke),ve===null?fe=Zn:ve.sibling=Zn,ve=Zn,ye=xt}if(Be.done)return i(k,ye),tt&&dr(k,ke),fe;if(ye===null){for(;!Be.done;ke++,Be=S.next())Be=H(k,Be.value,V),Be!==null&&(C=f(Be,C,ke),ve===null?fe=Be:ve.sibling=Be,ve=Be);return tt&&dr(k,ke),fe}for(ye=l(k,ye);!Be.done;ke++,Be=S.next())Be=te(ye,k,ke,Be.value,V),Be!==null&&(e&&Be.alternate!==null&&ye.delete(Be.key===null?ke:Be.key),C=f(Be,C,ke),ve===null?fe=Be:ve.sibling=Be,ve=Be);return e&&ye.forEach(function($g){return n(k,$g)}),tt&&dr(k,ke),fe}function at(k,C,S,V){if(typeof S=="object"&&S!==null&&S.type===P&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Fe:e:{for(var fe=S.key,ve=C;ve!==null;){if(ve.key===fe){if(fe=S.type,fe===P){if(ve.tag===7){i(k,ve.sibling),C=u(ve,S.props.children),C.return=k,k=C;break e}}else if(ve.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===he&&Qd(fe)===ve.type){i(k,ve.sibling),C=u(ve,S.props),C.ref=As(k,ve,S),C.return=k,k=C;break e}i(k,ve);break}else n(k,ve);ve=ve.sibling}S.type===P?(C=yr(S.props.children,k.mode,V,S.key),C.return=k,k=C):(V=ko(S.type,S.key,S.props,null,k.mode,V),V.ref=As(k,C,S),V.return=k,k=V)}return m(k);case G:e:{for(ve=S.key;C!==null;){if(C.key===ve)if(C.tag===4&&C.stateNode.containerInfo===S.containerInfo&&C.stateNode.implementation===S.implementation){i(k,C.sibling),C=u(C,S.children||[]),C.return=k,k=C;break e}else{i(k,C);break}else n(k,C);C=C.sibling}C=Za(S,k.mode,V),C.return=k,k=C}return m(k);case he:return ve=S._init,at(k,C,ve(S._payload),V)}if(Te(S))return ae(k,C,S,V);if(K(S))return ue(k,C,S,V);io(k,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,C!==null&&C.tag===6?(i(k,C.sibling),C=u(C,S),C.return=k,k=C):(i(k,C),C=Ja(S,k.mode,V),C.return=k,k=C),m(k)):i(k,C)}return at}var Gr=Gd(!0),Kd=Gd(!1),Fs={},mn=Bn(Fs),zs=Bn(Fs),Us=Bn(Fs);function hr(e){if(e===Fs)throw Error(r(174));return e}function ga(e,n){switch(Ke(Us,n),Ke(zs,e),Ke(mn,Fs),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:F(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=F(n,e)}Ze(mn),Ke(mn,n)}function Kr(){Ze(mn),Ze(zs),Ze(Us)}function qd(e){hr(Us.current);var n=hr(mn.current),i=F(n,e.type);n!==i&&(Ke(zs,e),Ke(mn,i))}function xa(e){zs.current===e&&(Ze(mn),Ze(zs))}var rt=Bn(0);function oo(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var va=[];function ya(){for(var e=0;e<va.length;e++)va[e]._workInProgressVersionPrimary=null;va.length=0}var lo=ce.ReactCurrentDispatcher,_a=ce.ReactCurrentBatchConfig,pr=0,st=null,dt=null,mt=null,ao=!1,$s=!1,Bs=0,cg=0;function St(){throw Error(r(321))}function wa(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!en(e[i],n[i]))return!1;return!0}function ba(e,n,i,l,u,f){if(pr=f,st=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,lo.current=e===null||e.memoizedState===null?hg:pg,e=i(l,u),$s){f=0;do{if($s=!1,Bs=0,25<=f)throw Error(r(301));f+=1,mt=dt=null,n.updateQueue=null,lo.current=mg,e=i(l,u)}while($s)}if(lo.current=fo,n=dt!==null&&dt.next!==null,pr=0,mt=dt=st=null,ao=!1,n)throw Error(r(300));return e}function Na(){var e=Bs!==0;return Bs=0,e}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?st.memoizedState=mt=e:mt=mt.next=e,mt}function qt(){if(dt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var n=mt===null?st.memoizedState:mt.next;if(n!==null)mt=n,dt=e;else{if(e===null)throw Error(r(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?st.memoizedState=mt=e:mt=mt.next=e}return mt}function Ws(e,n){return typeof n=="function"?n(e):n}function Ca(e){var n=qt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=dt,u=l.baseQueue,f=i.pending;if(f!==null){if(u!==null){var m=u.next;u.next=f.next,f.next=m}l.baseQueue=u=f,i.pending=null}if(u!==null){f=u.next,l=l.baseState;var _=m=null,b=null,I=f;do{var z=I.lane;if((pr&z)===z)b!==null&&(b=b.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),l=I.hasEagerState?I.eagerState:e(l,I.action);else{var H={lane:z,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};b===null?(_=b=H,m=l):b=b.next=H,st.lanes|=z,mr|=z}I=I.next}while(I!==null&&I!==f);b===null?m=l:b.next=_,en(l,n.memoizedState)||(Mt=!0),n.memoizedState=l,n.baseState=m,n.baseQueue=b,i.lastRenderedState=l}if(e=i.interleaved,e!==null){u=e;do f=u.lane,st.lanes|=f,mr|=f,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function ka(e){var n=qt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var m=u=u.next;do f=e(f,m.action),m=m.next;while(m!==u);en(f,n.memoizedState)||(Mt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,l]}function Xd(){}function Jd(e,n){var i=st,l=qt(),u=n(),f=!en(l.memoizedState,u);if(f&&(l.memoizedState=u,Mt=!0),l=l.queue,Sa(tf.bind(null,i,l,e),[e]),l.getSnapshot!==n||f||mt!==null&&mt.memoizedState.tag&1){if(i.flags|=2048,Hs(9,ef.bind(null,i,l,u,n),void 0,null),gt===null)throw Error(r(349));(pr&30)!==0||Zd(i,n,u)}return u}function Zd(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=st.updateQueue,n===null?(n={lastEffect:null,stores:null},st.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function ef(e,n,i,l){n.value=i,n.getSnapshot=l,nf(n)&&rf(e)}function tf(e,n,i){return i(function(){nf(n)&&rf(e)})}function nf(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!en(e,i)}catch{return!0}}function rf(e){var n=kn(e,1);n!==null&&on(n,e,1,-1)}function sf(e){var n=gn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:e},n.queue=e,e=e.dispatch=fg.bind(null,st,e),[n.memoizedState,e]}function Hs(e,n,i,l){return e={tag:e,create:n,destroy:i,deps:l,next:null},n=st.updateQueue,n===null?(n={lastEffect:null,stores:null},st.updateQueue=n,n.lastEffect=e.next=e):(i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e)),e}function of(){return qt().memoizedState}function co(e,n,i,l){var u=gn();st.flags|=e,u.memoizedState=Hs(1|n,i,void 0,l===void 0?null:l)}function uo(e,n,i,l){var u=qt();l=l===void 0?null:l;var f=void 0;if(dt!==null){var m=dt.memoizedState;if(f=m.destroy,l!==null&&wa(l,m.deps)){u.memoizedState=Hs(n,i,f,l);return}}st.flags|=e,u.memoizedState=Hs(1|n,i,f,l)}function lf(e,n){return co(8390656,8,e,n)}function Sa(e,n){return uo(2048,8,e,n)}function af(e,n){return uo(4,2,e,n)}function cf(e,n){return uo(4,4,e,n)}function uf(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function df(e,n,i){return i=i!=null?i.concat([e]):null,uo(4,4,uf.bind(null,n,e),i)}function Ea(){}function ff(e,n){var i=qt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&wa(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function hf(e,n){var i=qt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&wa(n,l[1])?l[0]:(e=e(),i.memoizedState=[e,n],e)}function pf(e,n,i){return(pr&21)===0?(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=i):(en(i,n)||(i=zu(),st.lanes|=i,mr|=i,e.baseState=!0),n)}function ug(e,n){var i=Ye;Ye=i!==0&&4>i?i:4,e(!0);var l=_a.transition;_a.transition={};try{e(!1),n()}finally{Ye=i,_a.transition=l}}function mf(){return qt().memoizedState}function dg(e,n,i){var l=qn(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},gf(e))xf(n,i);else if(i=zd(e,n,i,l),i!==null){var u=Rt();on(i,e,l,u),vf(i,n,l)}}function fg(e,n,i){var l=qn(e),u={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(gf(e))xf(n,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var m=n.lastRenderedState,_=f(m,i);if(u.hasEagerState=!0,u.eagerState=_,en(_,m)){var b=n.interleaved;b===null?(u.next=u,fa(n)):(u.next=b.next,b.next=u),n.interleaved=u;return}}catch{}finally{}i=zd(e,n,u,l),i!==null&&(u=Rt(),on(i,e,l,u),vf(i,n,l))}}function gf(e){var n=e.alternate;return e===st||n!==null&&n===st}function xf(e,n){$s=ao=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function vf(e,n,i){if((i&4194240)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,El(e,i)}}var fo={readContext:Kt,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},hg={readContext:Kt,useCallback:function(e,n){return gn().memoizedState=[e,n===void 0?null:n],e},useContext:Kt,useEffect:lf,useImperativeHandle:function(e,n,i){return i=i!=null?i.concat([e]):null,co(4194308,4,uf.bind(null,n,e),i)},useLayoutEffect:function(e,n){return co(4194308,4,e,n)},useInsertionEffect:function(e,n){return co(4,2,e,n)},useMemo:function(e,n){var i=gn();return n=n===void 0?null:n,e=e(),i.memoizedState=[e,n],e},useReducer:function(e,n,i){var l=gn();return n=i!==void 0?i(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=dg.bind(null,st,e),[l.memoizedState,e]},useRef:function(e){var n=gn();return e={current:e},n.memoizedState=e},useState:sf,useDebugValue:Ea,useDeferredValue:function(e){return gn().memoizedState=e},useTransition:function(){var e=sf(!1),n=e[0];return e=ug.bind(null,e[1]),gn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,i){var l=st,u=gn();if(tt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),gt===null)throw Error(r(349));(pr&30)!==0||Zd(l,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,lf(tf.bind(null,l,f,e),[e]),l.flags|=2048,Hs(9,ef.bind(null,l,f,i,n),void 0,null),i},useId:function(){var e=gn(),n=gt.identifierPrefix;if(tt){var i=Cn,l=Nn;i=(l&~(1<<32-Zt(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=Bs++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=cg++,n=":"+n+"r"+i.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},pg={readContext:Kt,useCallback:ff,useContext:Kt,useEffect:Sa,useImperativeHandle:df,useInsertionEffect:af,useLayoutEffect:cf,useMemo:hf,useReducer:Ca,useRef:of,useState:function(){return Ca(Ws)},useDebugValue:Ea,useDeferredValue:function(e){var n=qt();return pf(n,dt.memoizedState,e)},useTransition:function(){var e=Ca(Ws)[0],n=qt().memoizedState;return[e,n]},useMutableSource:Xd,useSyncExternalStore:Jd,useId:mf,unstable_isNewReconciler:!1},mg={readContext:Kt,useCallback:ff,useContext:Kt,useEffect:Sa,useImperativeHandle:df,useInsertionEffect:af,useLayoutEffect:cf,useMemo:hf,useReducer:ka,useRef:of,useState:function(){return ka(Ws)},useDebugValue:Ea,useDeferredValue:function(e){var n=qt();return dt===null?n.memoizedState=e:pf(n,dt.memoizedState,e)},useTransition:function(){var e=ka(Ws)[0],n=qt().memoizedState;return[e,n]},useMutableSource:Xd,useSyncExternalStore:Jd,useId:mf,unstable_isNewReconciler:!1};function qr(e,n){try{var i="",l=n;do i+=B(l),l=l.return;while(l);var u=i}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:n,stack:u,digest:null}}function ja(e,n,i){return{value:e,source:null,stack:i??null,digest:n??null}}function Ia(e,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var gg=typeof WeakMap=="function"?WeakMap:Map;function yf(e,n,i){i=Sn(-1,i),i.tag=3,i.payload={element:null};var l=n.value;return i.callback=function(){yo||(yo=!0,Ha=l),Ia(e,n)},i}function _f(e,n,i){i=Sn(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;i.payload=function(){return l(u)},i.callback=function(){Ia(e,n)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){Ia(e,n),typeof l!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})}),i}function wf(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new gg;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(i)||(u.add(i),e=Tg.bind(null,e,n,i),n.then(e,e))}function bf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Nf(e,n,i,l,u){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=Sn(-1,1),n.tag=2,Yn(i,n,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var xg=ce.ReactCurrentOwner,Mt=!1;function Tt(e,n,i,l){n.child=e===null?Kd(n,null,i,l):Gr(n,e.child,i,l)}function Cf(e,n,i,l,u){i=i.render;var f=n.ref;return Qr(n,u),l=ba(e,n,i,l,f,u),i=Na(),e!==null&&!Mt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,En(e,n,u)):(tt&&i&&ra(n),n.flags|=1,Tt(e,n,l,u),n.child)}function kf(e,n,i,l,u){if(e===null){var f=i.type;return typeof f=="function"&&!Xa(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=f,Sf(e,n,f,l,u)):(e=ko(i.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,(e.lanes&u)===0){var m=f.memoizedProps;if(i=i.compare,i=i!==null?i:Ts,i(m,l)&&e.ref===n.ref)return En(e,n,u)}return n.flags|=1,e=Jn(f,l),e.ref=n.ref,e.return=n,n.child=e}function Sf(e,n,i,l,u){if(e!==null){var f=e.memoizedProps;if(Ts(f,l)&&e.ref===n.ref)if(Mt=!1,n.pendingProps=l=f,(e.lanes&u)!==0)(e.flags&131072)!==0&&(Mt=!0);else return n.lanes=e.lanes,En(e,n,u)}return Ta(e,n,i,l,u)}function Ef(e,n,i){var l=n.pendingProps,u=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Jr,Yt),Yt|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ke(Jr,Yt),Yt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:i,Ke(Jr,Yt),Yt|=l}else f!==null?(l=f.baseLanes|i,n.memoizedState=null):l=i,Ke(Jr,Yt),Yt|=l;return Tt(e,n,u,i),n.child}function jf(e,n){var i=n.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Ta(e,n,i,l,u){var f=Lt(i)?cr:kt.current;return f=Br(n,f),Qr(n,u),i=ba(e,n,i,l,f,u),l=Na(),e!==null&&!Mt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,En(e,n,u)):(tt&&l&&ra(n),n.flags|=1,Tt(e,n,i,u),n.child)}function If(e,n,i,l,u){if(Lt(i)){var f=!0;Ki(n)}else f=!1;if(Qr(n,u),n.stateNode===null)po(e,n),Vd(n,i,l),ma(n,i,l,u),l=!0;else if(e===null){var m=n.stateNode,_=n.memoizedProps;m.props=_;var b=m.context,I=i.contextType;typeof I=="object"&&I!==null?I=Kt(I):(I=Lt(i)?cr:kt.current,I=Br(n,I));var z=i.getDerivedStateFromProps,H=typeof z=="function"||typeof m.getSnapshotBeforeUpdate=="function";H||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==l||b!==I)&&Yd(n,m,l,I),Vn=!1;var A=n.memoizedState;m.state=A,ro(n,l,m,u),b=n.memoizedState,_!==l||A!==b||Pt.current||Vn?(typeof z=="function"&&(pa(n,i,z,l),b=n.memoizedState),(_=Vn||Hd(n,i,_,l,A,b,I))?(H||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=b),m.props=l,m.state=b,m.context=I,l=_):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Ud(e,n),_=n.memoizedProps,I=n.type===n.elementType?_:nn(n.type,_),m.props=I,H=n.pendingProps,A=m.context,b=i.contextType,typeof b=="object"&&b!==null?b=Kt(b):(b=Lt(i)?cr:kt.current,b=Br(n,b));var te=i.getDerivedStateFromProps;(z=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==H||A!==b)&&Yd(n,m,l,b),Vn=!1,A=n.memoizedState,m.state=A,ro(n,l,m,u);var ae=n.memoizedState;_!==H||A!==ae||Pt.current||Vn?(typeof te=="function"&&(pa(n,i,te,l),ae=n.memoizedState),(I=Vn||Hd(n,i,I,l,A,ae,b)||!1)?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ae,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ae,b)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&A===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&A===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ae),m.props=l,m.state=ae,m.context=b,l=I):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&A===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&A===e.memoizedState||(n.flags|=1024),l=!1)}return Ra(e,n,i,l,f,u)}function Ra(e,n,i,l,u,f){jf(e,n);var m=(n.flags&128)!==0;if(!l&&!m)return u&&Pd(n,i,!1),En(e,n,f);l=n.stateNode,xg.current=n;var _=m&&typeof i.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&m?(n.child=Gr(n,e.child,null,f),n.child=Gr(n,null,_,f)):Tt(e,n,_,f),n.memoizedState=l.state,u&&Pd(n,i,!0),n.child}function Tf(e){var n=e.stateNode;n.pendingContext?Td(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Td(e,n.context,!1),ga(e,n.containerInfo)}function Rf(e,n,i,l,u){return Vr(),la(u),n.flags|=256,Tt(e,n,i,l),n.child}var Pa={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pf(e,n,i){var l=n.pendingProps,u=rt.current,f=!1,m=(n.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(u&2)!==0),_?(f=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ke(rt,u&1),e===null)return oa(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(m=l.children,e=l.fallback,f?(l=n.mode,f=n.child,m={mode:"hidden",children:m},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=m):f=So(m,l,0,null),e=yr(e,l,i,null),f.return=n,e.return=n,f.sibling=e,n.child=f,n.child.memoizedState=La(i),n.memoizedState=Pa,e):Ma(n,m));if(u=e.memoizedState,u!==null&&(_=u.dehydrated,_!==null))return vg(e,n,m,l,_,u,i);if(f){f=l.fallback,m=n.mode,u=e.child,_=u.sibling;var b={mode:"hidden",children:l.children};return(m&1)===0&&n.child!==u?(l=n.child,l.childLanes=0,l.pendingProps=b,n.deletions=null):(l=Jn(u,b),l.subtreeFlags=u.subtreeFlags&14680064),_!==null?f=Jn(_,f):(f=yr(f,m,i,null),f.flags|=2),f.return=n,l.return=n,l.sibling=f,n.child=l,l=f,f=n.child,m=e.child.memoizedState,m=m===null?La(i):{baseLanes:m.baseLanes|i,cachePool:null,transitions:m.transitions},f.memoizedState=m,f.childLanes=e.childLanes&~i,n.memoizedState=Pa,l}return f=e.child,e=f.sibling,l=Jn(f,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=i),l.return=n,l.sibling=null,e!==null&&(i=n.deletions,i===null?(n.deletions=[e],n.flags|=16):i.push(e)),n.child=l,n.memoizedState=null,l}function Ma(e,n){return n=So({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ho(e,n,i,l){return l!==null&&la(l),Gr(n,e.child,null,i),e=Ma(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function vg(e,n,i,l,u,f,m){if(i)return n.flags&256?(n.flags&=-257,l=ja(Error(r(422))),ho(e,n,m,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(f=l.fallback,u=n.mode,l=So({mode:"visible",children:l.children},u,0,null),f=yr(f,u,m,null),f.flags|=2,l.return=n,f.return=n,l.sibling=f,n.child=l,(n.mode&1)!==0&&Gr(n,e.child,null,m),n.child.memoizedState=La(m),n.memoizedState=Pa,f);if((n.mode&1)===0)return ho(e,n,m,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var _=l.dgst;return l=_,f=Error(r(419)),l=ja(f,l,void 0),ho(e,n,m,l)}if(_=(m&e.childLanes)!==0,Mt||_){if(l=gt,l!==null){switch(m&-m){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|m))!==0?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,kn(e,u),on(l,e,u,-1))}return qa(),l=ja(Error(r(421))),ho(e,n,m,l)}return u.data==="$?"?(n.flags|=128,n.child=e.child,n=Rg.bind(null,e),u._reactRetry=n,null):(e=f.treeContext,Vt=$n(u.nextSibling),Ht=n,tt=!0,tn=null,e!==null&&(Qt[Gt++]=Nn,Qt[Gt++]=Cn,Qt[Gt++]=ur,Nn=e.id,Cn=e.overflow,ur=n),n=Ma(n,l.children),n.flags|=4096,n)}function Lf(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),da(e.return,n,i)}function Da(e,n,i,l,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=u)}function Mf(e,n,i){var l=n.pendingProps,u=l.revealOrder,f=l.tail;if(Tt(e,n,l.children,i),l=rt.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lf(e,i,n);else if(e.tag===19)Lf(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ke(rt,l),(n.mode&1)===0)n.memoizedState=null;else switch(u){case"forwards":for(i=n.child,u=null;i!==null;)e=i.alternate,e!==null&&oo(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),Da(n,!1,u,i,f);break;case"backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&oo(e)===null){n.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}Da(n,!0,i,null,f);break;case"together":Da(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function po(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function En(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),mr|=n.lanes,(i&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,i=Jn(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Jn(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function yg(e,n,i){switch(n.tag){case 3:Tf(n),Vr();break;case 5:qd(n);break;case 1:Lt(n.type)&&Ki(n);break;case 4:ga(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,u=n.memoizedProps.value;Ke(eo,l._currentValue),l._currentValue=u;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(Ke(rt,rt.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?Pf(e,n,i):(Ke(rt,rt.current&1),e=En(e,n,i),e!==null?e.sibling:null);Ke(rt,rt.current&1);break;case 19:if(l=(i&n.childLanes)!==0,(e.flags&128)!==0){if(l)return Mf(e,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ke(rt,rt.current),l)break;return null;case 22:case 23:return n.lanes=0,Ef(e,n,i)}return En(e,n,i)}var Df,Oa,Of,Af;Df=function(e,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Oa=function(){},Of=function(e,n,i,l){var u=e.memoizedProps;if(u!==l){e=n.stateNode,hr(mn.current);var f=null;switch(i){case"input":u=E(e,u),l=E(e,l),f=[];break;case"select":u=w({},u,{value:void 0}),l=w({},l,{value:void 0}),f=[];break;case"textarea":u=nt(e,u),l=nt(e,l),f=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Yi)}gl(i,l);var m;i=null;for(I in u)if(!l.hasOwnProperty(I)&&u.hasOwnProperty(I)&&u[I]!=null)if(I==="style"){var _=u[I];for(m in _)_.hasOwnProperty(m)&&(i||(i={}),i[m]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?f||(f=[]):(f=f||[]).push(I,null));for(I in l){var b=l[I];if(_=u!=null?u[I]:void 0,l.hasOwnProperty(I)&&b!==_&&(b!=null||_!=null))if(I==="style")if(_){for(m in _)!_.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(i||(i={}),i[m]="");for(m in b)b.hasOwnProperty(m)&&_[m]!==b[m]&&(i||(i={}),i[m]=b[m])}else i||(f||(f=[]),f.push(I,i)),i=b;else I==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,_=_?_.__html:void 0,b!=null&&_!==b&&(f=f||[]).push(I,b)):I==="children"?typeof b!="string"&&typeof b!="number"||(f=f||[]).push(I,""+b):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?(b!=null&&I==="onScroll"&&Je("scroll",e),f||_===b||(f=[])):(f=f||[]).push(I,b))}i&&(f=f||[]).push("style",i);var I=f;(n.updateQueue=I)&&(n.flags|=4)}},Af=function(e,n,i,l){i!==l&&(n.flags|=4)};function Vs(e,n){if(!tt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Et(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function _g(e,n,i){var l=n.pendingProps;switch(sa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(n),null;case 1:return Lt(n.type)&&Gi(),Et(n),null;case 3:return l=n.stateNode,Kr(),Ze(Pt),Ze(kt),ya(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Zi(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,tn!==null&&(Qa(tn),tn=null))),Oa(e,n),Et(n),null;case 5:xa(n);var u=hr(Us.current);if(i=n.type,e!==null&&n.stateNode!=null)Of(e,n,i,l,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Et(n),null}if(e=hr(mn.current),Zi(n)){l=n.stateNode,i=n.type;var f=n.memoizedProps;switch(l[pn]=n,l[Ds]=f,e=(n.mode&1)!==0,i){case"dialog":Je("cancel",l),Je("close",l);break;case"iframe":case"object":case"embed":Je("load",l);break;case"video":case"audio":for(u=0;u<Ps.length;u++)Je(Ps[u],l);break;case"source":Je("error",l);break;case"img":case"image":case"link":Je("error",l),Je("load",l);break;case"details":Je("toggle",l);break;case"input":le(l,f),Je("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Je("invalid",l);break;case"textarea":O(l,f),Je("invalid",l)}gl(i,f),u=null;for(var m in f)if(f.hasOwnProperty(m)){var _=f[m];m==="children"?typeof _=="string"?l.textContent!==_&&(f.suppressHydrationWarning!==!0&&Vi(l.textContent,_,e),u=["children",_]):typeof _=="number"&&l.textContent!==""+_&&(f.suppressHydrationWarning!==!0&&Vi(l.textContent,_,e),u=["children",""+_]):a.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&Je("scroll",l)}switch(i){case"input":ze(l),Se(l,f,!0);break;case"textarea":ze(l),be(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Yi)}l=u,n.updateQueue=l,l!==null&&(n.flags|=4)}else{m=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Q(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=m.createElement(i,{is:l.is}):(e=m.createElement(i),i==="select"&&(m=e,l.multiple?m.multiple=!0:l.size&&(m.size=l.size))):e=m.createElementNS(e,i),e[pn]=n,e[Ds]=l,Df(e,n,!1,!1),n.stateNode=e;e:{switch(m=xl(i,l),i){case"dialog":Je("cancel",e),Je("close",e),u=l;break;case"iframe":case"object":case"embed":Je("load",e),u=l;break;case"video":case"audio":for(u=0;u<Ps.length;u++)Je(Ps[u],e);u=l;break;case"source":Je("error",e),u=l;break;case"img":case"image":case"link":Je("error",e),Je("load",e),u=l;break;case"details":Je("toggle",e),u=l;break;case"input":le(e,l),u=E(e,l),Je("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=w({},l,{value:void 0}),Je("invalid",e);break;case"textarea":O(e,l),u=nt(e,l),Je("invalid",e);break;default:u=l}gl(i,u),_=u;for(f in _)if(_.hasOwnProperty(f)){var b=_[f];f==="style"?ir(e,b):f==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Re(e,b)):f==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&Ae(e,b):typeof b=="number"&&Ae(e,""+b):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(a.hasOwnProperty(f)?b!=null&&f==="onScroll"&&Je("scroll",e):b!=null&&Ie(e,f,b,m))}switch(i){case"input":ze(e),Se(e,l,!1);break;case"textarea":ze(e),be(e);break;case"option":l.value!=null&&e.setAttribute("value",""+j(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Ve(e,!!l.multiple,f,!1):l.defaultValue!=null&&Ve(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Yi)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Et(n),null;case 6:if(e&&n.stateNode!=null)Af(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(i=hr(Us.current),hr(mn.current),Zi(n)){if(l=n.stateNode,i=n.memoizedProps,l[pn]=n,(f=l.nodeValue!==i)&&(e=Ht,e!==null))switch(e.tag){case 3:Vi(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vi(l.nodeValue,i,(e.mode&1)!==0)}f&&(n.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[pn]=n,n.stateNode=l}return Et(n),null;case 13:if(Ze(rt),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&Vt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Fd(),Vr(),n.flags|=98560,f=!1;else if(f=Zi(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[pn]=n}else Vr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Et(n),f=!1}else tn!==null&&(Qa(tn),tn=null),f=!0;if(!f)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(rt.current&1)!==0?ft===0&&(ft=3):qa())),n.updateQueue!==null&&(n.flags|=4),Et(n),null);case 4:return Kr(),Oa(e,n),e===null&&Ls(n.stateNode.containerInfo),Et(n),null;case 10:return ua(n.type._context),Et(n),null;case 17:return Lt(n.type)&&Gi(),Et(n),null;case 19:if(Ze(rt),f=n.memoizedState,f===null)return Et(n),null;if(l=(n.flags&128)!==0,m=f.rendering,m===null)if(l)Vs(f,!1);else{if(ft!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=oo(e),m!==null){for(n.flags|=128,Vs(f,!1),l=m.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=i,i=n.child;i!==null;)f=i,e=l,f.flags&=14680066,m=f.alternate,m===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=m.childLanes,f.lanes=m.lanes,f.child=m.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=m.memoizedProps,f.memoizedState=m.memoizedState,f.updateQueue=m.updateQueue,f.type=m.type,e=m.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ke(rt,rt.current&1|2),n.child}e=e.sibling}f.tail!==null&&lt()>Zr&&(n.flags|=128,l=!0,Vs(f,!1),n.lanes=4194304)}else{if(!l)if(e=oo(m),e!==null){if(n.flags|=128,l=!0,i=e.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),Vs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!tt)return Et(n),null}else 2*lt()-f.renderingStartTime>Zr&&i!==1073741824&&(n.flags|=128,l=!0,Vs(f,!1),n.lanes=4194304);f.isBackwards?(m.sibling=n.child,n.child=m):(i=f.last,i!==null?i.sibling=m:n.child=m,f.last=m)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=lt(),n.sibling=null,i=rt.current,Ke(rt,l?i&1|2:i&1),n):(Et(n),null);case 22:case 23:return Ka(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(Yt&1073741824)!==0&&(Et(n),n.subtreeFlags&6&&(n.flags|=8192)):Et(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function wg(e,n){switch(sa(n),n.tag){case 1:return Lt(n.type)&&Gi(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Kr(),Ze(Pt),Ze(kt),ya(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return xa(n),null;case 13:if(Ze(rt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Vr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ze(rt),null;case 4:return Kr(),null;case 10:return ua(n.type._context),null;case 22:case 23:return Ka(),null;case 24:return null;default:return null}}var mo=!1,jt=!1,bg=typeof WeakSet=="function"?WeakSet:Set,se=null;function Xr(e,n){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){ot(e,n,l)}else i.current=null}function Aa(e,n,i){try{i()}catch(l){ot(e,n,l)}}var Ff=!1;function Ng(e,n){if(Kl=Mi,e=pd(),$l(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var m=0,_=-1,b=-1,I=0,z=0,H=e,A=null;t:for(;;){for(var te;H!==i||u!==0&&H.nodeType!==3||(_=m+u),H!==f||l!==0&&H.nodeType!==3||(b=m+l),H.nodeType===3&&(m+=H.nodeValue.length),(te=H.firstChild)!==null;)A=H,H=te;for(;;){if(H===e)break t;if(A===i&&++I===u&&(_=m),A===f&&++z===l&&(b=m),(te=H.nextSibling)!==null)break;H=A,A=H.parentNode}H=te}i=_===-1||b===-1?null:{start:_,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(ql={focusedElem:e,selectionRange:i},Mi=!1,se=n;se!==null;)if(n=se,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,se=e;else for(;se!==null;){n=se;try{var ae=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,at=ae.memoizedState,k=n.stateNode,C=k.getSnapshotBeforeUpdate(n.elementType===n.type?ue:nn(n.type,ue),at);k.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var S=n.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(V){ot(n,n.return,V)}if(e=n.sibling,e!==null){e.return=n.return,se=e;break}se=n.return}return ae=Ff,Ff=!1,ae}function Ys(e,n,i){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&Aa(n,i,f)}u=u.next}while(u!==l)}}function go(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==n)}}function Fa(e){var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof n=="function"?n(e):n.current=e}}function zf(e){var n=e.alternate;n!==null&&(e.alternate=null,zf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[pn],delete n[Ds],delete n[ea],delete n[ig],delete n[og])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uf(e){return e.tag===5||e.tag===3||e.tag===4}function $f(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function za(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(e,n):i.insertBefore(e,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(e,i)):(n=i,n.appendChild(e)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Yi));else if(l!==4&&(e=e.child,e!==null))for(za(e,n,i),e=e.sibling;e!==null;)za(e,n,i),e=e.sibling}function Ua(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Ua(e,n,i),e=e.sibling;e!==null;)Ua(e,n,i),e=e.sibling}var bt=null,rn=!1;function Qn(e,n,i){for(i=i.child;i!==null;)Bf(e,n,i),i=i.sibling}function Bf(e,n,i){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ji,i)}catch{}switch(i.tag){case 5:jt||Xr(i,n);case 6:var l=bt,u=rn;bt=null,Qn(e,n,i),bt=l,rn=u,bt!==null&&(rn?(e=bt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):bt.removeChild(i.stateNode));break;case 18:bt!==null&&(rn?(e=bt,i=i.stateNode,e.nodeType===8?Zl(e.parentNode,i):e.nodeType===1&&Zl(e,i),Cs(e)):Zl(bt,i.stateNode));break;case 4:l=bt,u=rn,bt=i.stateNode.containerInfo,rn=!0,Qn(e,n,i),bt=l,rn=u;break;case 0:case 11:case 14:case 15:if(!jt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var f=u,m=f.destroy;f=f.tag,m!==void 0&&((f&2)!==0||(f&4)!==0)&&Aa(i,n,m),u=u.next}while(u!==l)}Qn(e,n,i);break;case 1:if(!jt&&(Xr(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(_){ot(i,n,_)}Qn(e,n,i);break;case 21:Qn(e,n,i);break;case 22:i.mode&1?(jt=(l=jt)||i.memoizedState!==null,Qn(e,n,i),jt=l):Qn(e,n,i);break;default:Qn(e,n,i)}}function Wf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new bg),n.forEach(function(l){var u=Pg.bind(null,e,l);i.has(l)||(i.add(l),l.then(u,u))})}}function sn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];try{var f=e,m=n,_=m;e:for(;_!==null;){switch(_.tag){case 5:bt=_.stateNode,rn=!1;break e;case 3:bt=_.stateNode.containerInfo,rn=!0;break e;case 4:bt=_.stateNode.containerInfo,rn=!0;break e}_=_.return}if(bt===null)throw Error(r(160));Bf(f,m,u),bt=null,rn=!1;var b=u.alternate;b!==null&&(b.return=null),u.return=null}catch(I){ot(u,n,I)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Hf(n,e),n=n.sibling}function Hf(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sn(n,e),xn(e),l&4){try{Ys(3,e,e.return),go(3,e)}catch(ue){ot(e,e.return,ue)}try{Ys(5,e,e.return)}catch(ue){ot(e,e.return,ue)}}break;case 1:sn(n,e),xn(e),l&512&&i!==null&&Xr(i,i.return);break;case 5:if(sn(n,e),xn(e),l&512&&i!==null&&Xr(i,i.return),e.flags&32){var u=e.stateNode;try{Ae(u,"")}catch(ue){ot(e,e.return,ue)}}if(l&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,m=i!==null?i.memoizedProps:f,_=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{_==="input"&&f.type==="radio"&&f.name!=null&&xe(u,f),xl(_,m);var I=xl(_,f);for(m=0;m<b.length;m+=2){var z=b[m],H=b[m+1];z==="style"?ir(u,H):z==="dangerouslySetInnerHTML"?Re(u,H):z==="children"?Ae(u,H):Ie(u,z,H,I)}switch(_){case"input":je(u,f);break;case"textarea":ne(u,f);break;case"select":var A=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var te=f.value;te!=null?Ve(u,!!f.multiple,te,!1):A!==!!f.multiple&&(f.defaultValue!=null?Ve(u,!!f.multiple,f.defaultValue,!0):Ve(u,!!f.multiple,f.multiple?[]:"",!1))}u[Ds]=f}catch(ue){ot(e,e.return,ue)}}break;case 6:if(sn(n,e),xn(e),l&4){if(e.stateNode===null)throw Error(r(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(ue){ot(e,e.return,ue)}}break;case 3:if(sn(n,e),xn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Cs(n.containerInfo)}catch(ue){ot(e,e.return,ue)}break;case 4:sn(n,e),xn(e);break;case 13:sn(n,e),xn(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(Wa=lt())),l&4&&Wf(e);break;case 22:if(z=i!==null&&i.memoizedState!==null,e.mode&1?(jt=(I=jt)||z,sn(n,e),jt=I):sn(n,e),xn(e),l&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!z&&(e.mode&1)!==0)for(se=e,z=e.child;z!==null;){for(H=se=z;se!==null;){switch(A=se,te=A.child,A.tag){case 0:case 11:case 14:case 15:Ys(4,A,A.return);break;case 1:Xr(A,A.return);var ae=A.stateNode;if(typeof ae.componentWillUnmount=="function"){l=A,i=A.return;try{n=l,ae.props=n.memoizedProps,ae.state=n.memoizedState,ae.componentWillUnmount()}catch(ue){ot(l,i,ue)}}break;case 5:Xr(A,A.return);break;case 22:if(A.memoizedState!==null){Qf(H);continue}}te!==null?(te.return=A,se=te):Qf(H)}z=z.sibling}e:for(z=null,H=e;;){if(H.tag===5){if(z===null){z=H;try{u=H.stateNode,I?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(_=H.stateNode,b=H.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,_.style.display=Bt("display",m))}catch(ue){ot(e,e.return,ue)}}}else if(H.tag===6){if(z===null)try{H.stateNode.nodeValue=I?"":H.memoizedProps}catch(ue){ot(e,e.return,ue)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;z===H&&(z=null),H=H.return}z===H&&(z=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:sn(n,e),xn(e),l&4&&Wf(e);break;case 21:break;default:sn(n,e),xn(e)}}function xn(e){var n=e.flags;if(n&2){try{e:{for(var i=e.return;i!==null;){if(Uf(i)){var l=i;break e}i=i.return}throw Error(r(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(Ae(u,""),l.flags&=-33);var f=$f(e);Ua(e,f,u);break;case 3:case 4:var m=l.stateNode.containerInfo,_=$f(e);za(e,_,m);break;default:throw Error(r(161))}}catch(b){ot(e,e.return,b)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Cg(e,n,i){se=e,Vf(e)}function Vf(e,n,i){for(var l=(e.mode&1)!==0;se!==null;){var u=se,f=u.child;if(u.tag===22&&l){var m=u.memoizedState!==null||mo;if(!m){var _=u.alternate,b=_!==null&&_.memoizedState!==null||jt;_=mo;var I=jt;if(mo=m,(jt=b)&&!I)for(se=u;se!==null;)m=se,b=m.child,m.tag===22&&m.memoizedState!==null?Gf(u):b!==null?(b.return=m,se=b):Gf(u);for(;f!==null;)se=f,Vf(f),f=f.sibling;se=u,mo=_,jt=I}Yf(e)}else(u.subtreeFlags&8772)!==0&&f!==null?(f.return=u,se=f):Yf(e)}}function Yf(e){for(;se!==null;){var n=se;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:jt||go(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!jt)if(i===null)l.componentDidMount();else{var u=n.elementType===n.type?i.memoizedProps:nn(n.type,i.memoizedProps);l.componentDidUpdate(u,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&Bd(n,f,l);break;case 3:var m=n.updateQueue;if(m!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Bd(n,m,i)}break;case 5:var _=n.stateNode;if(i===null&&n.flags&4){i=_;var b=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var I=n.alternate;if(I!==null){var z=I.memoizedState;if(z!==null){var H=z.dehydrated;H!==null&&Cs(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}jt||n.flags&512&&Fa(n)}catch(A){ot(n,n.return,A)}}if(n===e){se=null;break}if(i=n.sibling,i!==null){i.return=n.return,se=i;break}se=n.return}}function Qf(e){for(;se!==null;){var n=se;if(n===e){se=null;break}var i=n.sibling;if(i!==null){i.return=n.return,se=i;break}se=n.return}}function Gf(e){for(;se!==null;){var n=se;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{go(4,n)}catch(b){ot(n,i,b)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var u=n.return;try{l.componentDidMount()}catch(b){ot(n,u,b)}}var f=n.return;try{Fa(n)}catch(b){ot(n,f,b)}break;case 5:var m=n.return;try{Fa(n)}catch(b){ot(n,m,b)}}}catch(b){ot(n,n.return,b)}if(n===e){se=null;break}var _=n.sibling;if(_!==null){_.return=n.return,se=_;break}se=n.return}}var kg=Math.ceil,xo=ce.ReactCurrentDispatcher,$a=ce.ReactCurrentOwner,Xt=ce.ReactCurrentBatchConfig,$e=0,gt=null,ut=null,Nt=0,Yt=0,Jr=Bn(0),ft=0,Qs=null,mr=0,vo=0,Ba=0,Gs=null,Dt=null,Wa=0,Zr=1/0,jn=null,yo=!1,Ha=null,Gn=null,_o=!1,Kn=null,wo=0,Ks=0,Va=null,bo=-1,No=0;function Rt(){return($e&6)!==0?lt():bo!==-1?bo:bo=lt()}function qn(e){return(e.mode&1)===0?1:($e&2)!==0&&Nt!==0?Nt&-Nt:ag.transition!==null?(No===0&&(No=zu()),No):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:Gu(e.type)),e)}function on(e,n,i,l){if(50<Ks)throw Ks=0,Va=null,Error(r(185));ys(e,i,l),(($e&2)===0||e!==gt)&&(e===gt&&(($e&2)===0&&(vo|=i),ft===4&&Xn(e,Nt)),Ot(e,l),i===1&&$e===0&&(n.mode&1)===0&&(Zr=lt()+500,qi&&Hn()))}function Ot(e,n){var i=e.callbackNode;a0(e,n);var l=Ri(e,e===gt?Nt:0);if(l===0)i!==null&&Ou(i),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(i!=null&&Ou(i),n===1)e.tag===0?lg(qf.bind(null,e)):Ld(qf.bind(null,e)),rg(function(){($e&6)===0&&Hn()}),i=null;else{switch(Uu(l)){case 1:i=Cl;break;case 4:i=Au;break;case 16:i=Ei;break;case 536870912:i=Fu;break;default:i=Ei}i=sh(i,Kf.bind(null,e))}e.callbackPriority=n,e.callbackNode=i}}function Kf(e,n){if(bo=-1,No=0,($e&6)!==0)throw Error(r(327));var i=e.callbackNode;if(es()&&e.callbackNode!==i)return null;var l=Ri(e,e===gt?Nt:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||n)n=Co(e,l);else{n=l;var u=$e;$e|=2;var f=Jf();(gt!==e||Nt!==n)&&(jn=null,Zr=lt()+500,xr(e,n));do try{jg();break}catch(_){Xf(e,_)}while(!0);ca(),xo.current=f,$e=u,ut!==null?n=0:(gt=null,Nt=0,n=ft)}if(n!==0){if(n===2&&(u=kl(e),u!==0&&(l=u,n=Ya(e,u))),n===1)throw i=Qs,xr(e,0),Xn(e,l),Ot(e,lt()),i;if(n===6)Xn(e,l);else{if(u=e.current.alternate,(l&30)===0&&!Sg(u)&&(n=Co(e,l),n===2&&(f=kl(e),f!==0&&(l=f,n=Ya(e,f))),n===1))throw i=Qs,xr(e,0),Xn(e,l),Ot(e,lt()),i;switch(e.finishedWork=u,e.finishedLanes=l,n){case 0:case 1:throw Error(r(345));case 2:vr(e,Dt,jn);break;case 3:if(Xn(e,l),(l&130023424)===l&&(n=Wa+500-lt(),10<n)){if(Ri(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){Rt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Jl(vr.bind(null,e,Dt,jn),n);break}vr(e,Dt,jn);break;case 4:if(Xn(e,l),(l&4194240)===l)break;for(n=e.eventTimes,u=-1;0<l;){var m=31-Zt(l);f=1<<m,m=n[m],m>u&&(u=m),l&=~f}if(l=u,l=lt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*kg(l/1960))-l,10<l){e.timeoutHandle=Jl(vr.bind(null,e,Dt,jn),l);break}vr(e,Dt,jn);break;case 5:vr(e,Dt,jn);break;default:throw Error(r(329))}}}return Ot(e,lt()),e.callbackNode===i?Kf.bind(null,e):null}function Ya(e,n){var i=Gs;return e.current.memoizedState.isDehydrated&&(xr(e,n).flags|=256),e=Co(e,n),e!==2&&(n=Dt,Dt=i,n!==null&&Qa(n)),e}function Qa(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function Sg(e){for(var n=e;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var u=i[l],f=u.getSnapshot;u=u.value;try{if(!en(f(),u))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Xn(e,n){for(n&=~Ba,n&=~vo,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var i=31-Zt(n),l=1<<i;e[i]=-1,n&=~l}}function qf(e){if(($e&6)!==0)throw Error(r(327));es();var n=Ri(e,0);if((n&1)===0)return Ot(e,lt()),null;var i=Co(e,n);if(e.tag!==0&&i===2){var l=kl(e);l!==0&&(n=l,i=Ya(e,l))}if(i===1)throw i=Qs,xr(e,0),Xn(e,n),Ot(e,lt()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,vr(e,Dt,jn),Ot(e,lt()),null}function Ga(e,n){var i=$e;$e|=1;try{return e(n)}finally{$e=i,$e===0&&(Zr=lt()+500,qi&&Hn())}}function gr(e){Kn!==null&&Kn.tag===0&&($e&6)===0&&es();var n=$e;$e|=1;var i=Xt.transition,l=Ye;try{if(Xt.transition=null,Ye=1,e)return e()}finally{Ye=l,Xt.transition=i,$e=n,($e&6)===0&&Hn()}}function Ka(){Yt=Jr.current,Ze(Jr)}function xr(e,n){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,ng(i)),ut!==null)for(i=ut.return;i!==null;){var l=i;switch(sa(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Gi();break;case 3:Kr(),Ze(Pt),Ze(kt),ya();break;case 5:xa(l);break;case 4:Kr();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:ua(l.type._context);break;case 22:case 23:Ka()}i=i.return}if(gt=e,ut=e=Jn(e.current,null),Nt=Yt=n,ft=0,Qs=null,Ba=vo=mr=0,Dt=Gs=null,fr!==null){for(n=0;n<fr.length;n++)if(i=fr[n],l=i.interleaved,l!==null){i.interleaved=null;var u=l.next,f=i.pending;if(f!==null){var m=f.next;f.next=u,l.next=m}i.pending=l}fr=null}return e}function Xf(e,n){do{var i=ut;try{if(ca(),lo.current=fo,ao){for(var l=st.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ao=!1}if(pr=0,mt=dt=st=null,$s=!1,Bs=0,$a.current=null,i===null||i.return===null){ft=1,Qs=n,ut=null;break}e:{var f=e,m=i.return,_=i,b=n;if(n=Nt,_.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var I=b,z=_,H=z.tag;if((z.mode&1)===0&&(H===0||H===11||H===15)){var A=z.alternate;A?(z.updateQueue=A.updateQueue,z.memoizedState=A.memoizedState,z.lanes=A.lanes):(z.updateQueue=null,z.memoizedState=null)}var te=bf(m);if(te!==null){te.flags&=-257,Nf(te,m,_,f,n),te.mode&1&&wf(f,I,n),n=te,b=I;var ae=n.updateQueue;if(ae===null){var ue=new Set;ue.add(b),n.updateQueue=ue}else ae.add(b);break e}else{if((n&1)===0){wf(f,I,n),qa();break e}b=Error(r(426))}}else if(tt&&_.mode&1){var at=bf(m);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),Nf(at,m,_,f,n),la(qr(b,_));break e}}f=b=qr(b,_),ft!==4&&(ft=2),Gs===null?Gs=[f]:Gs.push(f),f=m;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var k=yf(f,b,n);$d(f,k);break e;case 1:_=b;var C=f.type,S=f.stateNode;if((f.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Gn===null||!Gn.has(S)))){f.flags|=65536,n&=-n,f.lanes|=n;var V=_f(f,_,n);$d(f,V);break e}}f=f.return}while(f!==null)}eh(i)}catch(fe){n=fe,ut===i&&i!==null&&(ut=i=i.return);continue}break}while(!0)}function Jf(){var e=xo.current;return xo.current=fo,e===null?fo:e}function qa(){(ft===0||ft===3||ft===2)&&(ft=4),gt===null||(mr&268435455)===0&&(vo&268435455)===0||Xn(gt,Nt)}function Co(e,n){var i=$e;$e|=2;var l=Jf();(gt!==e||Nt!==n)&&(jn=null,xr(e,n));do try{Eg();break}catch(u){Xf(e,u)}while(!0);if(ca(),$e=i,xo.current=l,ut!==null)throw Error(r(261));return gt=null,Nt=0,ft}function Eg(){for(;ut!==null;)Zf(ut)}function jg(){for(;ut!==null&&!Zm();)Zf(ut)}function Zf(e){var n=rh(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,n===null?eh(e):ut=n,$a.current=null}function eh(e){var n=e;do{var i=n.alternate;if(e=n.return,(n.flags&32768)===0){if(i=_g(i,n,Yt),i!==null){ut=i;return}}else{if(i=wg(i,n),i!==null){i.flags&=32767,ut=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,ut=null;return}}if(n=n.sibling,n!==null){ut=n;return}ut=n=e}while(n!==null);ft===0&&(ft=5)}function vr(e,n,i){var l=Ye,u=Xt.transition;try{Xt.transition=null,Ye=1,Ig(e,n,i,l)}finally{Xt.transition=u,Ye=l}return null}function Ig(e,n,i,l){do es();while(Kn!==null);if(($e&6)!==0)throw Error(r(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(c0(e,f),e===gt&&(ut=gt=null,Nt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||_o||(_o=!0,sh(Ei,function(){return es(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=Xt.transition,Xt.transition=null;var m=Ye;Ye=1;var _=$e;$e|=4,$a.current=null,Ng(e,i),Hf(i,e),K0(ql),Mi=!!Kl,ql=Kl=null,e.current=i,Cg(i),e0(),$e=_,Ye=m,Xt.transition=f}else e.current=i;if(_o&&(_o=!1,Kn=e,wo=u),f=e.pendingLanes,f===0&&(Gn=null),r0(i.stateNode),Ot(e,lt()),n!==null)for(l=e.onRecoverableError,i=0;i<n.length;i++)u=n[i],l(u.value,{componentStack:u.stack,digest:u.digest});if(yo)throw yo=!1,e=Ha,Ha=null,e;return(wo&1)!==0&&e.tag!==0&&es(),f=e.pendingLanes,(f&1)!==0?e===Va?Ks++:(Ks=0,Va=e):Ks=0,Hn(),null}function es(){if(Kn!==null){var e=Uu(wo),n=Xt.transition,i=Ye;try{if(Xt.transition=null,Ye=16>e?16:e,Kn===null)var l=!1;else{if(e=Kn,Kn=null,wo=0,($e&6)!==0)throw Error(r(331));var u=$e;for($e|=4,se=e.current;se!==null;){var f=se,m=f.child;if((se.flags&16)!==0){var _=f.deletions;if(_!==null){for(var b=0;b<_.length;b++){var I=_[b];for(se=I;se!==null;){var z=se;switch(z.tag){case 0:case 11:case 15:Ys(8,z,f)}var H=z.child;if(H!==null)H.return=z,se=H;else for(;se!==null;){z=se;var A=z.sibling,te=z.return;if(zf(z),z===I){se=null;break}if(A!==null){A.return=te,se=A;break}se=te}}}var ae=f.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var at=ue.sibling;ue.sibling=null,ue=at}while(ue!==null)}}se=f}}if((f.subtreeFlags&2064)!==0&&m!==null)m.return=f,se=m;else e:for(;se!==null;){if(f=se,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Ys(9,f,f.return)}var k=f.sibling;if(k!==null){k.return=f.return,se=k;break e}se=f.return}}var C=e.current;for(se=C;se!==null;){m=se;var S=m.child;if((m.subtreeFlags&2064)!==0&&S!==null)S.return=m,se=S;else e:for(m=C;se!==null;){if(_=se,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:go(9,_)}}catch(fe){ot(_,_.return,fe)}if(_===m){se=null;break e}var V=_.sibling;if(V!==null){V.return=_.return,se=V;break e}se=_.return}}if($e=u,Hn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ji,e)}catch{}l=!0}return l}finally{Ye=i,Xt.transition=n}}return!1}function th(e,n,i){n=qr(i,n),n=yf(e,n,1),e=Yn(e,n,1),n=Rt(),e!==null&&(ys(e,1,n),Ot(e,n))}function ot(e,n,i){if(e.tag===3)th(e,e,i);else for(;n!==null;){if(n.tag===3){th(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gn===null||!Gn.has(l))){e=qr(i,e),e=_f(n,e,1),n=Yn(n,e,1),e=Rt(),n!==null&&(ys(n,1,e),Ot(n,e));break}}n=n.return}}function Tg(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),n=Rt(),e.pingedLanes|=e.suspendedLanes&i,gt===e&&(Nt&i)===i&&(ft===4||ft===3&&(Nt&130023424)===Nt&&500>lt()-Wa?xr(e,0):Ba|=i),Ot(e,n)}function nh(e,n){n===0&&((e.mode&1)===0?n=1:(n=Ti,Ti<<=1,(Ti&130023424)===0&&(Ti=4194304)));var i=Rt();e=kn(e,n),e!==null&&(ys(e,n,i),Ot(e,i))}function Rg(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),nh(e,i)}function Pg(e,n){var i=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(r(314))}l!==null&&l.delete(n),nh(e,i)}var rh;rh=function(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps||Pt.current)Mt=!0;else{if((e.lanes&i)===0&&(n.flags&128)===0)return Mt=!1,yg(e,n,i);Mt=(e.flags&131072)!==0}else Mt=!1,tt&&(n.flags&1048576)!==0&&Md(n,Ji,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;po(e,n),e=n.pendingProps;var u=Br(n,kt.current);Qr(n,i),u=ba(null,n,l,e,u,i);var f=Na();return n.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Lt(l)?(f=!0,Ki(n)):f=!1,n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ha(n),u.updater=so,n.stateNode=u,u._reactInternals=n,ma(n,l,e,i),n=Ra(null,n,l,!0,f,i)):(n.tag=0,tt&&f&&ra(n),Tt(null,n,u,i),n=n.child),n;case 16:l=n.elementType;e:{switch(po(e,n),e=n.pendingProps,u=l._init,l=u(l._payload),n.type=l,u=n.tag=Mg(l),e=nn(l,e),u){case 0:n=Ta(null,n,l,e,i);break e;case 1:n=If(null,n,l,e,i);break e;case 11:n=Cf(null,n,l,e,i);break e;case 14:n=kf(null,n,l,nn(l.type,e),i);break e}throw Error(r(306,l,""))}return n;case 0:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:nn(l,u),Ta(e,n,l,u,i);case 1:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:nn(l,u),If(e,n,l,u,i);case 3:e:{if(Tf(n),e===null)throw Error(r(387));l=n.pendingProps,f=n.memoizedState,u=f.element,Ud(e,n),ro(n,l,null,i);var m=n.memoizedState;if(l=m.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){u=qr(Error(r(423)),n),n=Rf(e,n,l,i,u);break e}else if(l!==u){u=qr(Error(r(424)),n),n=Rf(e,n,l,i,u);break e}else for(Vt=$n(n.stateNode.containerInfo.firstChild),Ht=n,tt=!0,tn=null,i=Kd(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Vr(),l===u){n=En(e,n,i);break e}Tt(e,n,l,i)}n=n.child}return n;case 5:return qd(n),e===null&&oa(n),l=n.type,u=n.pendingProps,f=e!==null?e.memoizedProps:null,m=u.children,Xl(l,u)?m=null:f!==null&&Xl(l,f)&&(n.flags|=32),jf(e,n),Tt(e,n,m,i),n.child;case 6:return e===null&&oa(n),null;case 13:return Pf(e,n,i);case 4:return ga(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Gr(n,null,l,i):Tt(e,n,l,i),n.child;case 11:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:nn(l,u),Cf(e,n,l,u,i);case 7:return Tt(e,n,n.pendingProps,i),n.child;case 8:return Tt(e,n,n.pendingProps.children,i),n.child;case 12:return Tt(e,n,n.pendingProps.children,i),n.child;case 10:e:{if(l=n.type._context,u=n.pendingProps,f=n.memoizedProps,m=u.value,Ke(eo,l._currentValue),l._currentValue=m,f!==null)if(en(f.value,m)){if(f.children===u.children&&!Pt.current){n=En(e,n,i);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var _=f.dependencies;if(_!==null){m=f.child;for(var b=_.firstContext;b!==null;){if(b.context===l){if(f.tag===1){b=Sn(-1,i&-i),b.tag=2;var I=f.updateQueue;if(I!==null){I=I.shared;var z=I.pending;z===null?b.next=b:(b.next=z.next,z.next=b),I.pending=b}}f.lanes|=i,b=f.alternate,b!==null&&(b.lanes|=i),da(f.return,i,n),_.lanes|=i;break}b=b.next}}else if(f.tag===10)m=f.type===n.type?null:f.child;else if(f.tag===18){if(m=f.return,m===null)throw Error(r(341));m.lanes|=i,_=m.alternate,_!==null&&(_.lanes|=i),da(m,i,n),m=f.sibling}else m=f.child;if(m!==null)m.return=f;else for(m=f;m!==null;){if(m===n){m=null;break}if(f=m.sibling,f!==null){f.return=m.return,m=f;break}m=m.return}f=m}Tt(e,n,u.children,i),n=n.child}return n;case 9:return u=n.type,l=n.pendingProps.children,Qr(n,i),u=Kt(u),l=l(u),n.flags|=1,Tt(e,n,l,i),n.child;case 14:return l=n.type,u=nn(l,n.pendingProps),u=nn(l.type,u),kf(e,n,l,u,i);case 15:return Sf(e,n,n.type,n.pendingProps,i);case 17:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:nn(l,u),po(e,n),n.tag=1,Lt(l)?(e=!0,Ki(n)):e=!1,Qr(n,i),Vd(n,l,u),ma(n,l,u,i),Ra(null,n,l,!0,e,i);case 19:return Mf(e,n,i);case 22:return Ef(e,n,i)}throw Error(r(156,n.tag))};function sh(e,n){return Du(e,n)}function Lg(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,n,i,l){return new Lg(e,n,i,l)}function Xa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mg(e){if(typeof e=="function")return Xa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===me)return 11;if(e===ee)return 14}return 2}function Jn(e,n){var i=e.alternate;return i===null?(i=Jt(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function ko(e,n,i,l,u,f){var m=2;if(l=e,typeof e=="function")Xa(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case P:return yr(i.children,u,f,n);case R:m=8,u|=8;break;case _e:return e=Jt(12,i,n,u|2),e.elementType=_e,e.lanes=f,e;case Pe:return e=Jt(13,i,n,u),e.elementType=Pe,e.lanes=f,e;case He:return e=Jt(19,i,n,u),e.elementType=He,e.lanes=f,e;case we:return So(i,u,f,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oe:m=10;break e;case pe:m=9;break e;case me:m=11;break e;case ee:m=14;break e;case he:m=16,l=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=Jt(m,i,n,u),n.elementType=e,n.type=l,n.lanes=f,n}function yr(e,n,i,l){return e=Jt(7,e,l,n),e.lanes=i,e}function So(e,n,i,l){return e=Jt(22,e,l,n),e.elementType=we,e.lanes=i,e.stateNode={isHidden:!1},e}function Ja(e,n,i){return e=Jt(6,e,null,n),e.lanes=i,e}function Za(e,n,i){return n=Jt(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Dg(e,n,i,l,u){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function ec(e,n,i,l,u,f,m,_,b){return e=new Dg(e,n,i,_,b),n===1?(n=1,f===!0&&(n|=8)):n=0,f=Jt(3,null,null,n),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ha(f),e}function Og(e,n,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:l==null?null:""+l,children:e,containerInfo:n,implementation:i}}function ih(e){if(!e)return Wn;e=e._reactInternals;e:{if(lr(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Lt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(Lt(i))return Rd(e,i,n)}return n}function oh(e,n,i,l,u,f,m,_,b){return e=ec(i,l,!0,e,u,f,m,_,b),e.context=ih(null),i=e.current,l=Rt(),u=qn(i),f=Sn(l,u),f.callback=n??null,Yn(i,f,u),e.current.lanes=u,ys(e,u,l),Ot(e,l),e}function Eo(e,n,i,l){var u=n.current,f=Rt(),m=qn(u);return i=ih(i),n.context===null?n.context=i:n.pendingContext=i,n=Sn(f,m),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=Yn(u,n,m),e!==null&&(on(e,u,m,f),no(e,u,m)),m}function jo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function tc(e,n){lh(e,n),(e=e.alternate)&&lh(e,n)}function Ag(){return null}var ah=typeof reportError=="function"?reportError:function(e){console.error(e)};function nc(e){this._internalRoot=e}Io.prototype.render=nc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));Eo(e,n,null,null)},Io.prototype.unmount=nc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;gr(function(){Eo(null,e,null,null)}),n[wn]=null}};function Io(e){this._internalRoot=e}Io.prototype.unstable_scheduleHydration=function(e){if(e){var n=Wu();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Fn.length&&n!==0&&n<Fn[i].priority;i++);Fn.splice(i,0,e),i===0&&Yu(e)}};function rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function To(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ch(){}function Fg(e,n,i,l,u){if(u){if(typeof l=="function"){var f=l;l=function(){var I=jo(m);f.call(I)}}var m=oh(n,l,e,0,null,!1,!1,"",ch);return e._reactRootContainer=m,e[wn]=m.current,Ls(e.nodeType===8?e.parentNode:e),gr(),m}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var _=l;l=function(){var I=jo(b);_.call(I)}}var b=ec(e,0,!1,null,null,!1,!1,"",ch);return e._reactRootContainer=b,e[wn]=b.current,Ls(e.nodeType===8?e.parentNode:e),gr(function(){Eo(n,b,i,l)}),b}function Ro(e,n,i,l,u){var f=i._reactRootContainer;if(f){var m=f;if(typeof u=="function"){var _=u;u=function(){var b=jo(m);_.call(b)}}Eo(n,m,e,u)}else m=Fg(i,n,e,u,l);return jo(m)}$u=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var i=vs(n.pendingLanes);i!==0&&(El(n,i|1),Ot(n,lt()),($e&6)===0&&(Zr=lt()+500,Hn()))}break;case 13:gr(function(){var l=kn(e,1);if(l!==null){var u=Rt();on(l,e,1,u)}}),tc(e,1)}},jl=function(e){if(e.tag===13){var n=kn(e,134217728);if(n!==null){var i=Rt();on(n,e,134217728,i)}tc(e,134217728)}},Bu=function(e){if(e.tag===13){var n=qn(e),i=kn(e,n);if(i!==null){var l=Rt();on(i,e,n,l)}tc(e,n)}},Wu=function(){return Ye},Hu=function(e,n){var i=Ye;try{return Ye=e,n()}finally{Ye=i}},_l=function(e,n,i){switch(n){case"input":if(je(e,i),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var u=Qi(l);if(!u)throw Error(r(90));Ct(l),je(l,u)}}}break;case"textarea":ne(e,i);break;case"select":n=i.value,n!=null&&Ve(e,!!i.multiple,n,!1)}},ju=Ga,Iu=gr;var zg={usingClientEntryPoint:!1,Events:[Os,Ur,Qi,Su,Eu,Ga]},qs={findFiberByHostInstance:ar,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Ug={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lu(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||Ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Po.isDisabled&&Po.supportsFiber)try{ji=Po.inject(Ug),hn=Po}catch{}}return At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zg,At.createPortal=function(e,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rc(n))throw Error(r(200));return Og(e,n,null,i)},At.createRoot=function(e,n){if(!rc(e))throw Error(r(299));var i=!1,l="",u=ah;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),n=ec(e,1,!1,null,null,i,!1,l,u),e[wn]=n.current,Ls(e.nodeType===8?e.parentNode:e),new nc(n)},At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Lu(n),e=e===null?null:e.stateNode,e},At.flushSync=function(e){return gr(e)},At.hydrate=function(e,n,i){if(!To(n))throw Error(r(200));return Ro(null,e,n,!0,i)},At.hydrateRoot=function(e,n,i){if(!rc(e))throw Error(r(405));var l=i!=null&&i.hydratedSources||null,u=!1,f="",m=ah;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),n=oh(n,null,e,1,i??null,u,!1,f,m),e[wn]=n.current,Ls(e),l)for(e=0;e<l.length;e++)i=l[e],u=i._getVersion,u=u(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,u]:n.mutableSourceEagerHydrationData.push(i,u);return new Io(n)},At.render=function(e,n,i){if(!To(n))throw Error(r(200));return Ro(null,e,n,!1,i)},At.unmountComponentAtNode=function(e){if(!To(e))throw Error(r(40));return e._reactRootContainer?(gr(function(){Ro(null,null,e,!1,function(){e._reactRootContainer=null,e[wn]=null})}),!0):!1},At.unstable_batchedUpdates=Ga,At.unstable_renderSubtreeIntoContainer=function(e,n,i,l){if(!To(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Ro(e,n,i,!1,l)},At.version="18.2.0-next-9e3b772b8-20220608",At}var xh;function Kg(){if(xh)return oc.exports;xh=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),oc.exports=Gg(),oc.exports}var vh;function qg(){if(vh)return Lo;vh=1;var s=Kg();return Lo.createRoot=s.createRoot,Lo.hydrateRoot=s.hydrateRoot,Lo}var Xg=qg();const Jg=_p(Xg),Zg=({children:s,activeTab:t,setActiveTab:r,isAdmin:o,onToggleAdmin:a,onDownloadDB:d,onUploadDB:h,onOpenSync:p,isSyncActive:g})=>{const x=W.useRef(null),N=[{id:"characters",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})},{id:"connections",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})},{id:"worlds",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})},{id:"notes",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})},{id:"admin",label:"",adminOnly:!0,icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})}],y=v=>{var U;const T=(U=v.target.files)==null?void 0:U[0];if(!T)return;const L=new FileReader;L.onload=X=>{var re;const ie=(re=X.target)==null?void 0:re.result;typeof ie=="string"&&h(ie)},L.readAsText(T),x.current&&(x.current.value="")};return c.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#050505] text-stone-300",children:[c.jsxs("div",{className:"md:hidden flex items-center justify-between px-6 py-5 border-b border-stone-900 bg-[#050505]/95 backdrop-blur sticky top-0 z-40",children:[c.jsx("h1",{className:"text-lg font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""}),c.jsx("button",{onClick:a,className:`p-2 rounded-lg transition-all border ${o?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500":"bg-stone-900/50 border-stone-800 text-stone-500"}`,children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),c.jsxs("aside",{className:"hidden md:flex w-64 border-r border-stone-900 flex-col fixed h-screen bg-[#050505] z-50",children:[c.jsx("div",{className:"p-8",children:c.jsx("h1",{className:"text-xl font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""})}),c.jsx("nav",{className:"flex-grow px-4 space-y-2",children:N.filter(v=>!v.adminOnly||o).map(v=>c.jsxs("button",{onClick:()=>r(v.id),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-3 ${t===v.id?"bg-stone-900 text-stone-100 border-l-2 border-emerald-500 rounded-l-none":"hover:bg-stone-900/50 text-stone-500 hover:text-stone-300"} ${v.adminOnly?"text-emerald-500/70":""}`,children:[c.jsx("svg",{className:"w-5 h-5 opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.icon}),v.label]},v.id))}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("button",{onClick:p,className:`w-full py-2 px-3 rounded-lg border text-[9px] uppercase tracking-widest font-bold flex items-center justify-center gap-2 transition-all ${g?"bg-emerald-900/10 border-emerald-500/30 text-emerald-500 hover:bg-emerald-900/20":"bg-stone-900/30 border-stone-800 text-stone-600 hover:bg-stone-900/60 hover:text-stone-400"}`,children:[c.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${g?"bg-emerald-500 animate-pulse":"bg-stone-600"}`}),g?"":""]}),c.jsx("button",{onClick:a,className:`w-full py-3 text-[10px] uppercase tracking-widest font-bold rounded-md transition-all border ${o?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500 shadow-lg shadow-emerald-900/10":"bg-stone-900/50 hover:bg-stone-900 border-stone-800 text-stone-400"}`,children:o?" ()":"  "})]})]}),c.jsx("nav",{className:"md:hidden fixed bottom-0 w-full bg-[#050505]/95 backdrop-blur-xl border-t border-stone-900 z-50 px-2 pb-safe-area",children:c.jsxs("div",{className:"flex justify-around items-center",children:[N.filter(v=>!v.adminOnly||o).map(v=>c.jsxs("button",{onClick:()=>r(v.id),className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${t===v.id?"text-emerald-500":"text-stone-600"}`,children:[c.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.icon}),c.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:v.label})]},v.id)),c.jsxs("button",{onClick:p,className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${g?"text-emerald-500":"text-stone-700"}`,children:[c.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:""})]})]})}),c.jsxs("main",{className:"flex-grow md:ml-64 min-h-screen relative pb-24 md:pb-0",children:[c.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 md:px-12 md:py-12",children:s}),c.jsxs("div",{className:"fixed bottom-24 md:bottom-8 right-4 md:right-8 flex gap-3 z-40 scale-90 md:scale-100 origin-bottom-right",children:[c.jsx("input",{type:"file",ref:x,onChange:y,accept:".json",className:"hidden"}),c.jsx("button",{onClick:()=>{var v;return(v=x.current)==null?void 0:v.click()},className:"px-4 py-2 md:px-5 md:py-2.5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-emerald-500 transition-all backdrop-blur-sm shadow-lg shadow-emerald-900/10",children:" "}),c.jsx("button",{onClick:d,className:"px-4 py-2 md:px-5 md:py-2.5 bg-stone-900/80 hover:bg-stone-800 border border-stone-700 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-stone-300 transition-all backdrop-blur-sm",children:" "})]})]})]})},ex=({character:s,isVisible:t=!0,staggerIndex:r=0,onClick:o})=>{const a=W.useRef(null),[d,h]=W.useState({x:0,y:0}),[p,g]=W.useState({x:50,y:50,opacity:0}),[x,N]=W.useState(!1),[y,v]=W.useState(!1),T=W.useMemo(()=>Array.from({length:8}).map((P,R)=>({id:R,left:`${Math.random()*100}%`,delay:`${Math.random()*.6}s`,duration:`${1+Math.random()}s`,size:`${1.5+Math.random()*2}px`})),[]),L=P=>{if(!a.current||!t)return;const R=a.current.getBoundingClientRect(),_e=R.left+R.width/2,oe=R.top+R.height/2,pe=-(P.clientY-oe)/(R.height/2)*12,me=(P.clientX-_e)/(R.width/2)*12,Pe=(P.clientX-R.left)/R.width*100,He=(P.clientY-R.top)/R.height*100;h({x:pe,y:me}),g({x:Pe,y:He,opacity:.5})},U=()=>t&&N(!0),X=()=>{h({x:0,y:0}),g(P=>({...P,opacity:0})),N(!1),v(!1)},ie={objectFit:"cover",objectPosition:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transformOrigin:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transform:`scale(${s.miniImageScale??1})`},re=s.name.length,Ie=re>20?"text-sm":re>15?"text-base":"text-xl",ce=x?`${-d.y*2.5}px ${d.x*2.5}px 50px -10px rgba(16, 185, 129, 0.3)`:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",Fe=t?`${Math.min(r*45,900)}ms`:"0ms",G=y?.96:x?1.04:1;return c.jsx("div",{className:`relative mb-10 px-5 w-full sm:w-1/2 lg:w-1/4 perspective-2000 preserve-3d transition-opacity duration-500 ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,style:{animation:t?"reveal-3d-fire 1.1s cubic-bezier(0.22, 1, 0.36, 1) both":"disappear-3d-fire 0.6s cubic-bezier(0.22, 1, 0.36, 1) both",animationDelay:t?Fe:"0ms"},children:c.jsxs("div",{className:"h-full relative preserve-3d pointer-events-none",children:[t&&T.map(P=>c.jsx("div",{className:"absolute bottom-4 bg-emerald-400 rounded-full blur-[0.5px] z-0 pointer-events-none",style:{left:P.left,width:P.size,height:P.size,animation:`ember-float ${P.duration} ease-out both`,animationDelay:`calc(${Fe} + ${P.delay})`,boxShadow:"0 0 6px #10b981"}},P.id)),c.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-[60px] rounded-full transition-opacity duration-700 pointer-events-none -z-10",style:{opacity:x?.45:0,transform:`translate3d(${-d.y*4}px, ${d.x*4}px, -50px) scale(${x?1.1:1})`}}),c.jsxs("div",{ref:a,onMouseMove:L,onMouseEnter:U,onMouseLeave:X,onMouseDown:()=>t&&v(!0),onMouseUp:()=>v(!1),onClick:()=>t&&o(s.id),style:{transform:`rotateX(${d.x}deg) rotateY(${d.y}deg) scale(${G})`,boxShadow:ce,transition:x&&!y?"transform 0.1s ease-out, box-shadow 0.1s ease-out":"transform 0.7s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.7s ease"},className:"relative bg-[#0f0f0f]/80 border border-stone-900 rounded-2xl p-6 flex flex-col items-center group cursor-pointer h-full min-h-[320px] preserve-3d overflow-hidden backdrop-blur-sm pointer-events-auto z-10",children:[c.jsx("div",{className:"absolute inset-0 pointer-events-none z-20 transition-opacity duration-300",style:{background:`radial-gradient(circle at ${p.x}% ${p.y}%, rgba(255,255,255,0.12) 0%, transparent 60%)`,opacity:p.opacity}}),c.jsx("div",{className:`absolute inset-0 border border-emerald-500/20 rounded-2xl transition-opacity duration-500 pointer-events-none ${x?"opacity-100":"opacity-0"}`}),c.jsx("div",{className:"relative mt-2 shrink-0 translate-z-30 pointer-events-none",children:c.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-2 border-stone-800 group-hover:border-emerald-500/50 transition-all duration-500 bg-black shadow-2xl",children:c.jsx("img",{src:s.imageUrl,alt:s.name,style:ie,className:"w-full h-full opacity-80 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"})})}),c.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center w-full px-2 shrink-0 translate-z-20 pointer-events-none",children:[c.jsx("h3",{className:`font-serif font-medium text-stone-100 group-hover:text-emerald-100 transition-colors text-center leading-tight line-clamp-1 ${Ie}`,children:s.name}),c.jsxs("div",{className:"flex items-center gap-1.5 mt-3",children:[s.age&&c.jsxs("div",{className:"bg-stone-900/60 border border-stone-800 px-2.5 py-1 rounded-lg flex items-baseline gap-1 shadow-inner",children:[c.jsx("span",{className:"text-[11px] font-bold text-stone-300 tracking-tight",children:s.age.toString().replace(/[^0-9]/g,"")||s.age}),c.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-emerald-600/80",children:""})]}),s.height&&c.jsxs("div",{className:"bg-stone-900/60 border border-stone-800 px-2.5 py-1 rounded-lg flex items-baseline gap-1 shadow-inner",children:[c.jsx("span",{className:"text-[11px] font-bold text-stone-300 tracking-tight",children:s.height.toString().replace(/[^0-9]/g,"")||s.height}),c.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-emerald-600/80",children:""})]})]})]}),c.jsx("div",{className:"mt-5 flex flex-wrap gap-1.5 justify-center content-start min-h-[28px] w-full px-1 translate-z-10 pointer-events-none",children:s.tags&&s.tags.length>0?c.jsx(c.Fragment,{children:s.tags.slice(0,3).map(P=>c.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[8px] uppercase tracking-wider font-black rounded-md whitespace-nowrap",children:P},P))}):c.jsx("div",{className:"h-4"})}),c.jsx("div",{className:"mt-auto pt-6 border-t border-stone-900/50 w-full flex justify-center shrink-0 translate-z-10 pointer-events-none",children:c.jsx("span",{className:"text-[8px] uppercase tracking-[0.3em] font-black text-stone-700 group-hover:text-emerald-500 transition-colors",children:" "})})]})]})})},yh=({imageUrl:s,scale:t,x:r,y:o,isCircular:a=!1,onUpdate:d})=>{const h=W.useRef(null),[p,g]=W.useState(!1),[x,N]=W.useState({x:0,y:0}),y=v=>{g(!0),N({x:v.clientX,y:v.clientY})};return W.useEffect(()=>{const v=L=>{if(!p||!h.current)return;const U=L.clientX-x.x,X=L.clientY-x.y,ie=.2,re=r-U*ie/t,Ie=o-X*ie/t;d({x:re,y:Ie}),N({x:L.clientX,y:L.clientY})},T=()=>g(!1);return p&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",T)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",T)}},[p,x,r,o,t,d]),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{ref:h,className:`relative overflow-hidden bg-black border border-stone-800 cursor-move group select-none shadow-2xl transition-all duration-500 hover:border-emerald-500/40 ${a?"w-48 h-48 rounded-full mx-auto":"aspect-[4/5] rounded-3xl w-full"}`,onMouseDown:y,children:[c.jsx("img",{src:s,alt:"",draggable:!1,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${r}% ${o}%`,transformOrigin:`${r}% ${o}%`,transform:`scale(${t})`},className:"pointer-events-none transition-opacity duration-300 opacity-90 group-hover:opacity-100"}),c.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/5 pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity flex items-center justify-center",children:c.jsx("div",{className:"bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-emerald-500/20",children:c.jsx("span",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-[0.25em]",children:" "})})})]}),c.jsxs("div",{className:"bg-stone-900/60 p-4 rounded-2xl border border-stone-800/50 space-y-3 shadow-inner",children:[c.jsxs("div",{className:"flex justify-between items-center px-1",children:[c.jsx("span",{className:"text-[10px] font-black text-stone-500 uppercase tracking-widest",children:""}),c.jsxs("span",{className:"text-[10px] font-mono text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded",children:[t.toFixed(2),"x"]})]}),c.jsx("input",{type:"range",min:"1",max:"5",step:"0.01",value:t,onChange:v=>d({scale:parseFloat(v.target.value)}),className:"w-full h-1.5 bg-stone-800 rounded-full appearance-none cursor-pointer accent-emerald-500"}),c.jsx("p",{className:"text-[8px] text-stone-700 text-center uppercase tracking-tighter",children:"      "})]})]})},Ao=(s,t=800,r=.6)=>new Promise((o,a)=>{const d=new FileReader;d.readAsDataURL(s),d.onload=h=>{var g;const p=new Image;p.src=(g=h.target)==null?void 0:g.result,p.onload=()=>{const x=document.createElement("canvas");let N=p.width,y=p.height;N>t&&(y=y*t/N,N=t),x.width=N,x.height=y;const v=x.getContext("2d");if(v){v.drawImage(p,0,0,N,y);const T=x.toDataURL("image/jpeg",r);o(T)}else a(new Error("Canvas context not available"))},p.onerror=x=>a(x)},d.onerror=h=>a(h)}),tx=({character:s,isAdmin:t,allCharacters:r,availableTags:o,availableHiddenTags:a,worlds:d,notes:h=[],onBack:p,onSave:g,onSelectCharacter:x,onDeleteNote:N})=>{var J,Ce;const[y,v]=W.useState(s),[T,L]=W.useState(!1),[U,X]=W.useState(!1),[ie,re]=W.useState(!1),[Ie,ce]=W.useState(!1),[Fe,G]=W.useState(""),[P,R]=W.useState([]);W.useEffect(()=>{v(s)},[s]);const _e=W.useMemo(()=>{var j,q;if(!d)return null;for(const ge of d){if((j=ge.characterIds)!=null&&j.includes(s.id))return ge.name;if(ge.subLocations){for(const ze of ge.subLocations)if((q=ze.characterIds)!=null&&q.includes(s.id))return`${ge.name} / ${ze.name}`}}return null},[d,s.id]),oe=W.useMemo(()=>Array.isArray(h)?h.filter(j=>j&&(j.targetId===s.id||j.authorId===s.id)):[],[h,s.id]),pe=(j,q)=>{v(ge=>({...ge,[j]:q}))},me=j=>{v(q=>({...q,imageScale:j.scale??q.imageScale,imageX:j.x??q.imageX,imageY:j.y??q.imageY}))},Pe=j=>{v(q=>({...q,miniImageScale:j.scale??q.miniImageScale,miniImageX:j.x??q.miniImageX,miniImageY:j.y??q.miniImageY}))},He=async j=>{var ge;const q=(ge=j.target.files)==null?void 0:ge[0];if(q){ce(!0);try{const ze=await Ao(q);pe("imageUrl",ze)}catch(ze){console.error("Error processing image",ze),alert("   ")}finally{ce(!1)}}},ee=(j,q=!1)=>{if(q){const ge=y.hiddenTags||[],ze=ge.includes(j)?ge.filter(Ct=>Ct!==j):[...ge,j];pe("hiddenTags",ze)}else{const ge=y.tags||[],ze=ge.includes(j)?ge.filter(Ct=>Ct!==j):[...ge,j];pe("tags",ze)}},he=()=>{g(y)},we=()=>{v(s)},$=()=>{t&&g(y),p()},K=()=>{re(!ie),G(""),R([])},w=j=>{const q={id:j.id,name:j.name,role:"",color:"#ef4444"},ge=y.connections||[];ge.some(ze=>ze.id===j.id)||pe("connections",[...ge,q]),re(!1)},D=j=>{const q=y.connections||[];pe("connections",q.filter(ge=>ge.id!==j))},Z=(j,q)=>{const ge=y.connections||[];pe("connections",ge.map(ze=>ze.id===j?{...ze,role:q}:ze))},Ee=(j,q)=>{const ge=y.connections||[];pe("connections",ge.map(ze=>ze.id===j?{...ze,color:q}:ze))},M=j=>{R(q=>q.includes(j)?q.filter(ge=>ge!==j):[...q,j])},B=r.filter(j=>{var q;if(!j||j.id===y.id||(q=y.connections)!=null&&q.some(ge=>ge.id===j.id)||Fe&&!j.name.toLowerCase().includes(Fe.toLowerCase()))return!1;if(P.length>0){const ge=[...j.tags||[],...j.hiddenTags||[]];return P.every(ze=>ge.includes(ze))}return!0});return c.jsxs("div",{className:"animate-reveal-details space-y-6 md:space-y-8 pb-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4 animate-stagger-1",children:[c.jsxs("button",{onClick:$,className:"flex items-center text-stone-500 hover:text-emerald-500 transition-colors group text-sm md:text-base order-1",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})," ()"]}),t&&c.jsxs("div",{className:"flex items-center gap-3 order-2 w-full md:w-auto justify-end",children:[c.jsx("button",{onClick:we,className:"px-4 py-2 rounded-lg border border-stone-800 text-stone-500 hover:text-white hover:bg-stone-800 text-[10px] uppercase font-bold tracking-wider transition-all",children:""}),c.jsxs("button",{onClick:he,className:"px-5 py-2 rounded-lg bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 hover:bg-emerald-900/40 text-[10px] uppercase font-bold tracking-wider transition-all flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]})]})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-12",children:[c.jsxs("div",{className:"w-full lg:w-1/3 space-y-8 animate-stagger-2",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 px-1",children:" "}),t?c.jsxs("div",{className:"space-y-4",children:[c.jsx(yh,{imageUrl:y.imageUrl,scale:y.imageScale??1,x:y.imageX??50,y:y.imageY??50,onUpdate:me}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{className:"w-full bg-[#050505] border border-stone-800 rounded-lg px-3 py-2 text-[10px] text-stone-400 outline-none focus:border-emerald-500",placeholder:y.imageUrl.startsWith("data:")?"   ":"URL ...",value:y.imageUrl.startsWith("data:")?"":y.imageUrl,onChange:j=>pe("imageUrl",j.target.value)}),c.jsxs("label",{className:`cursor-pointer bg-stone-900 border border-stone-800 hover:bg-stone-800 rounded-lg px-3 flex items-center justify-center transition-colors ${Ie?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:He,accept:"image/*",className:"hidden",disabled:Ie}),c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})]})]})]}):c.jsx("div",{className:"aspect-[4/5] rounded-2xl overflow-hidden border border-stone-800 shadow-2xl bg-black transition-transform duration-700 hover:scale-[1.02]",children:c.jsx("img",{src:y.imageUrl,alt:y.name,style:{objectFit:"cover",objectPosition:`${y.imageX??50}% ${y.imageY??50}%`,transformOrigin:`${y.imageX??50}% ${y.imageY??50}%`,transform:`scale(${y.imageScale??1})`},className:"w-full h-full"})})]}),t&&c.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-900/50",children:[c.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500/60 px-1",children:"- ()"}),c.jsx(yh,{imageUrl:y.imageUrl,scale:y.miniImageScale??1,x:y.miniImageX??50,y:y.miniImageY??50,isCircular:!0,onUpdate:Pe})]}),c.jsxs("div",{className:"space-y-5 p-5 md:p-7 bg-[#0f0f0f]/40 border border-stone-900 rounded-[2rem] md:rounded-[2.5rem] shadow-inner transition-all hover:bg-[#0f0f0f]/50",children:[c.jsx("h4",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-emerald-500/60 px-1 text-center",children:""}),c.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[40px]",children:t?o.map(j=>{var q;return c.jsx("button",{onClick:()=>ee(j,!1),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border ${(q=y.tags)!=null&&q.includes(j)?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400":"bg-stone-950 border-stone-800/50 text-stone-700 hover:text-stone-400"}`,children:j},j)}):(J=y.tags)==null?void 0:J.map(j=>c.jsx("span",{className:"px-3 py-1.5 md:px-4 md:py-2 bg-emerald-500/5 border border-emerald-500/10 text-emerald-500/70 text-[9px] md:text-[10px] uppercase tracking-widest font-black rounded-xl",children:j},j))})]})]}),c.jsxs("div",{className:"w-full lg:w-2/3 space-y-6 md:space-y-8 animate-stagger-3",children:[c.jsxs("div",{children:[t?c.jsx("div",{className:"space-y-4 mb-4",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),c.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-3xl md:text-4xl font-serif font-bold text-stone-100 outline-none focus:border-emerald-800 transition-colors py-1",value:y.name,onChange:j=>pe("name",j.target.value)})]}),c.jsxs("div",{className:"w-full md:w-32",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),c.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-xl font-light text-stone-500 outline-none focus:border-emerald-800 transition-colors py-2",value:y.age,onChange:j=>pe("age",j.target.value)})]}),c.jsxs("div",{className:"w-full md:w-32",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),c.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-xl font-light text-stone-500 outline-none focus:border-emerald-800 transition-colors py-2",value:y.height||"",placeholder:". 180 ",onChange:j=>pe("height",j.target.value)})]})]})}):c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6",children:[c.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-bold text-stone-100 leading-tight",children:y.name}),c.jsxs("div",{className:"flex items-center gap-2",children:[y.age&&c.jsxs("div",{className:"bg-stone-900 border border-stone-800 px-3 py-1 rounded-xl flex items-baseline gap-1.5 shadow-lg",children:[c.jsx("span",{className:"text-stone-100 font-bold text-lg",children:y.age.toString().replace(/[^0-9]/g,"")||y.age}),c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-500/70",children:""})]}),y.height&&c.jsxs("div",{className:"bg-stone-900 border border-stone-800 px-3 py-1 rounded-xl flex items-baseline gap-1.5 shadow-lg",children:[c.jsx("span",{className:"text-stone-100 font-bold text-lg",children:y.height.toString().replace(/[^0-9]/g,"")||y.height}),c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-500/70",children:""})]})]})]}),_e&&c.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/10 border border-emerald-900/30 px-3 py-1.5 rounded-full mt-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500",children:_e})]})]}),c.jsx("div",{className:"h-px bg-stone-900 w-full mb-6 md:mb-8"}),c.jsxs("section",{className:"space-y-4 animate-stagger-4",children:[c.jsx("h4",{className:"text-emerald-500 text-sm font-semibold uppercase tracking-wider",children:""}),t?c.jsx("textarea",{className:"w-full bg-stone-900/20 border border-stone-800 rounded-xl p-4 text-stone-200 text-base md:text-lg leading-relaxed font-light outline-none focus:border-emerald-900 transition-colors resize-none",rows:12,value:y.additionalInfo,onChange:j=>pe("additionalInfo",j.target.value)}):c.jsx("p",{className:"text-stone-300 text-base md:text-lg leading-relaxed font-light whitespace-pre-wrap",children:y.additionalInfo})]})]}),c.jsxs("div",{className:"space-y-6 pt-4 animate-stagger-5",children:[oe.length>0&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>X(!U),className:"w-full flex items-center justify-between bg-[#0f0f0f]/30 border border-stone-900 p-4 md:p-5 rounded-xl transition-all group hover:border-amber-900/30 shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-amber-600 font-bold tracking-widest text-xs uppercase",children:"  "}),c.jsxs("span",{className:"text-stone-600 text-sm",children:["(",oe.length,")"]})]}),c.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform duration-300 ${U?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]}),U&&c.jsx("div",{className:"space-y-4 animate-reveal-details",children:oe.map(j=>c.jsxs("div",{className:"bg-stone-900/20 border border-stone-900/50 rounded-xl p-4 md:p-5",children:[c.jsx("h5",{className:"text-stone-200 font-serif italic text-lg mb-2",children:j.title}),c.jsx("p",{className:"text-stone-400 text-sm leading-relaxed whitespace-pre-wrap font-light",children:j.content}),c.jsx("div",{className:"mt-4 pt-3 border-t border-stone-900/50 flex justify-between",children:c.jsx("span",{className:"text-[10px] uppercase font-bold text-stone-600",children:j.date})})]},j.id))})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-col gap-4",children:[t&&c.jsxs("button",{onClick:K,className:`w-full py-4 rounded-xl border transition-all text-[10px] uppercase font-bold tracking-[0.2em] flex items-center justify-center gap-3 ${ie?"bg-emerald-500 border-emerald-400 text-black shadow-[0_0_20px_rgba(16,185,129,0.2)]":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400 hover:bg-emerald-900/30"}`,children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:ie?"M6 18L18 6M6 6l12 12":"M12 4v16m8-8H4"})}),ie?"":" "]}),c.jsxs("button",{onClick:()=>L(!T),className:"w-full flex items-center justify-between bg-[#0f0f0f]/30 border border-stone-900 p-4 md:p-5 rounded-xl transition-all group hover:border-emerald-900/30 shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-emerald-500 font-bold tracking-widest text-xs uppercase",children:""}),c.jsxs("span",{className:"text-stone-600 text-sm",children:["(",((Ce=y.connections)==null?void 0:Ce.length)||0,")"]})]}),c.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform duration-300 ${T?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]})]}),t&&ie&&c.jsxs("div",{className:"animate-reveal-details bg-[#0a0a0a] border border-emerald-900/30 rounded-2xl p-4 md:p-6 space-y-4 shadow-2xl overflow-hidden relative",children:[c.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:c.jsx("input",{autoFocus:!0,type:"text",placeholder:"   ...",className:"flex-grow bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-sm text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",value:Fe,onChange:j=>G(j.target.value)})}),c.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto custom-scrollbar",children:o.map(j=>c.jsx("button",{onClick:()=>M(j),className:`px-2 py-1 rounded-lg text-[9px] uppercase font-bold tracking-wider transition-all border ${P.includes(j)?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:j},j))}),c.jsx("div",{className:"flex flex-col gap-2 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:B.length>0?B.map(j=>c.jsxs("button",{onClick:()=>w(j),className:"flex items-center gap-4 p-3 bg-stone-900/50 border border-stone-800 rounded-xl hover:bg-emerald-900/20 hover:border-emerald-900/40 transition-all text-left group",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:j.imageUrl,style:{objectFit:"cover",objectPosition:`${j.miniImageX??50}% ${j.miniImageY??50}%`,transformOrigin:`${j.miniImageX??50}% ${j.miniImageY??50}%`,transform:`scale(${j.miniImageScale??1})`},className:"w-full h-full",alt:""})}),c.jsxs("div",{className:"min-w-0 flex-grow",children:[c.jsx("span",{className:"text-stone-200 font-bold text-sm block truncate group-hover:text-emerald-400",children:j.name}),c.jsx("span",{className:"text-[10px] text-stone-600 uppercase tracking-widest block truncate",children:"  "})]}),c.jsx("svg",{className:"w-4 h-4 text-emerald-500 opacity-0 group-hover:opacity-100 transition-all",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})]},j.id)):c.jsx("p",{className:"text-stone-700 italic text-xs py-4 text-center",children:"  "})})]}),T&&c.jsx("div",{className:"space-y-3 animate-reveal-details",children:c.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-xl overflow-hidden divide-y divide-stone-900/50",children:y.connections&&y.connections.length>0?y.connections.map(j=>{const q=r.find(ge=>ge&&ge.id===j.id);return c.jsxs("div",{className:"p-4 flex flex-row items-center gap-4 group hover:bg-stone-900/20 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[c.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full overflow-hidden border border-stone-800 shrink-0 bg-black",children:c.jsx("img",{src:(q==null?void 0:q.imageUrl)||"",style:{objectFit:"cover",objectPosition:`${(q==null?void 0:q.miniImageX)??50}% ${(q==null?void 0:q.miniImageY)??50}%`,transformOrigin:`${(q==null?void 0:q.miniImageX)??50}% ${(q==null?void 0:q.miniImageY)??50}%`,transform:`scale(${(q==null?void 0:q.miniImageScale)??1})`},className:"w-full h-full",alt:""})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsx("p",{className:"text-stone-200 font-bold text-sm truncate",children:j.name}),t?c.jsx("input",{className:"bg-transparent border-b border-stone-800 text-xs text-stone-500 outline-none focus:border-emerald-500 py-1 w-full max-w-[150px]",value:j.role,onChange:ge=>Z(j.id,ge.target.value)}):c.jsx("p",{className:"text-stone-600 text-xs mt-1 font-medium truncate",children:j.role})]})]}),c.jsxs("div",{className:"flex items-center justify-end gap-5 shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[t?c.jsx("input",{type:"color",className:"w-6 h-6 rounded-sm bg-transparent border-none cursor-pointer p-0 appearance-none shadow-lg",value:j.color||"#ef4444",onChange:ge=>Ee(j.id,ge.target.value)}):c.jsx("div",{className:"w-4 h-4 rounded-sm shadow-sm",style:{backgroundColor:j.color||"#ef4444"}}),c.jsx("button",{onClick:()=>x(j.id),className:"text-stone-700 hover:text-stone-100 transition-colors text-[9px] md:text-[10px] uppercase font-bold tracking-[0.2em]",children:""})]}),t&&c.jsx("button",{onClick:()=>D(j.id),className:"text-stone-800 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]},j.id)}):c.jsx("div",{className:"p-10 text-center text-stone-700 italic text-sm",children:"  "})})})]})]})]})]})]})},nx=({initialData:s,availableTags:t,availableHiddenTags:r,onSave:o,onClose:a})=>{const[d,h]=W.useState({name:"",age:"",height:"",imageUrl:"",additionalInfo:"",imageScale:1,imageX:50,imageY:50,tags:[],hiddenTags:[]}),[p,g]=W.useState(!1);W.useEffect(()=>{var v;s&&h({name:s.name,age:s.age.toString(),height:((v=s.height)==null?void 0:v.toString())||"",imageUrl:s.imageUrl,additionalInfo:s.additionalInfo,imageScale:s.imageScale??1,imageX:s.imageX??50,imageY:s.imageY??50,tags:s.tags||[],hiddenTags:s.hiddenTags||[]})},[s]);const x=(v,T)=>{h(T?L=>({...L,hiddenTags:L.hiddenTags.includes(v)?L.hiddenTags.filter(U=>U!==v):[...L.hiddenTags,v]}):L=>({...L,tags:L.tags.includes(v)?L.tags.filter(U=>U!==v):[...L.tags,v]}))},N=async v=>{var L;const T=(L=v.target.files)==null?void 0:L[0];if(T){g(!0);try{const U=await Ao(T);h(X=>({...X,imageUrl:U}))}catch(U){console.error("Error processing image",U),alert("   .")}finally{g(!1)}}},y=v=>{v.preventDefault();const T={id:(s==null?void 0:s.id)||Date.now().toString(),name:d.name,age:d.age,height:d.height,imageUrl:d.imageUrl||`https://picsum.photos/seed/${Date.now()}/400/500`,additionalInfo:d.additionalInfo,tags:d.tags,hiddenTags:d.hiddenTags,connections:(s==null?void 0:s.connections)||[],imageScale:d.imageScale,imageX:d.imageX,imageY:d.imageY};o(T)};return c.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/95 backdrop-blur-2xl animate-in fade-in duration-300",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-2xl rounded-[2rem] md:rounded-[3rem] overflow-hidden shadow-[0_0_120px_rgba(0,0,0,1)] border-white/5 flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-6 md:p-10 border-b border-stone-900 flex justify-between items-center bg-gradient-to-b from-stone-900/30 to-transparent shrink-0",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-stone-100 italic",children:s?" ":" "}),c.jsx("p",{className:"text-stone-600 text-[10px] uppercase tracking-widest mt-1",children:"  "})]}),c.jsx("button",{onClick:a,className:"text-stone-700 hover:text-white transition-all p-2 md:p-3 hover:bg-white/5 rounded-full",children:c.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("form",{onSubmit:y,className:"p-6 md:p-10 space-y-8 md:space-y-10 overflow-y-auto custom-scrollbar flex-grow",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:"  "}),c.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all font-serif italic text-lg shadow-inner",value:d.name,onChange:v=>h({...d,name:v.target.value})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),c.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all shadow-inner",value:d.age,onChange:v=>h({...d,age:v.target.value})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),c.jsx("input",{className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all shadow-inner",value:d.height,placeholder:". 185 ",onChange:v=>h({...d,height:v.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end px-1",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600",children:"  ()"}),c.jsxs("span",{className:"text-[9px] text-stone-800 font-black uppercase tracking-widest",children:[": ",d.tags.length]})]}),c.jsx("div",{className:"flex flex-wrap gap-2 p-6 bg-black/30 border border-stone-900 rounded-[2rem] min-h-[80px] shadow-inner",children:t.length===0?c.jsx("p",{className:"text-stone-800 italic text-xs w-full text-center py-4",children:"     -"}):t.map(v=>{const T=d.tags.includes(v);return c.jsx("button",{type:"button",onClick:()=>x(v,!1),className:`px-4 py-2 rounded-xl text-[10px] uppercase tracking-wider font-black transition-all border ${T?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":"bg-stone-900/20 border-stone-800/40 text-stone-600 hover:border-stone-700 hover:text-stone-400"}`,children:v},v)})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end px-1",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-amber-600",children:"  ()"}),c.jsxs("span",{className:"text-[9px] text-amber-900/60 font-black uppercase tracking-widest",children:[": ",d.hiddenTags.length]})]}),c.jsx("div",{className:"flex flex-wrap gap-2 p-6 bg-black/30 border border-amber-900/20 rounded-[2rem] min-h-[80px] shadow-inner",children:r.length===0?c.jsx("p",{className:"text-stone-800 italic text-xs w-full text-center py-4",children:"    "}):r.map(v=>{const T=d.hiddenTags.includes(v);return c.jsx("button",{type:"button",onClick:()=>x(v,!0),className:`px-4 py-2 rounded-xl text-[10px] uppercase tracking-wider font-black transition-all border ${T?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":"bg-stone-900/20 border-stone-800/40 text-stone-600 hover:border-amber-900/30 hover:text-amber-500/50"}`,children:v},v)})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" (  )"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsx("input",{className:"flex-grow bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-3 text-xs text-stone-500 outline-none focus:border-emerald-500/30 transition-all",placeholder:"    ...",value:d.imageUrl.startsWith("data:")?"":d.imageUrl,onChange:v=>h({...d,imageUrl:v.target.value})}),c.jsxs("label",{className:`cursor-pointer bg-stone-900/50 hover:bg-stone-800 px-5 py-3 rounded-2xl transition-all flex items-center justify-center border border-stone-800 gap-2 ${p?"opacity-50 cursor-wait":""}`,children:[c.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden",disabled:p}),c.jsx("svg",{className:"w-5 h-5 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),d.imageUrl.startsWith("data:")&&c.jsx("span",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-wider",children:""})]})]}),d.imageUrl.startsWith("data:")&&c.jsx("p",{className:"text-[9px] text-emerald-500/70 px-2",children:"    ."})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" "}),c.jsx("textarea",{required:!0,rows:8,className:"w-full bg-stone-900/30 border border-stone-800 rounded-[2rem] px-8 py-6 text-stone-300 text-base leading-relaxed outline-none focus:border-emerald-900/30 transition-all resize-none shadow-inner custom-scrollbar",value:d.additionalInfo,onChange:v=>h({...d,additionalInfo:v.target.value})})]})]}),c.jsxs("div",{className:"p-6 md:p-10 border-t border-stone-900 bg-stone-900/10 flex gap-4 md:gap-6 shrink-0",children:[c.jsx("button",{type:"button",onClick:a,className:"flex-1 py-4 md:py-5 text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 hover:text-stone-300 transition-all",children:""}),c.jsx("button",{onClick:y,disabled:p,className:"flex-[2] py-4 md:py-5 bg-white hover:bg-emerald-50 text-black rounded-2xl text-[10px] uppercase tracking-[0.3em] font-black transition-all shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:p?"...":""})]})]})})},rx=({characters:s,availableTags:t,availableHiddenTags:r,onDelete:o,onEdit:a,onAdd:d,onUpdateTags:h,onUpdateHiddenTags:p,onDownloadDB:g,onUploadDB:x})=>{const[N,y]=W.useState(""),[v,T]=W.useState(""),L=W.useRef(null),U=P=>{P.preventDefault();const R=N.trim().toLowerCase();R&&!t.includes(R)&&(h([...t,R]),y(""))},X=P=>{P.preventDefault();const R=v.trim().toLowerCase();R&&!r.includes(R)&&(p([...r,R]),T(""))},ie=P=>{h(t.filter(R=>R!==P))},re=P=>{p(r.filter(R=>R!==P))},Ie=(P,R,_e=!1)=>{const oe=_e?[...r]:[...t],pe=_e?p:h;R==="left"&&P>0?[oe[P-1],oe[P]]=[oe[P],oe[P-1]]:R==="right"&&P<oe.length-1&&([oe[P+1],oe[P]]=[oe[P],oe[P+1]]),pe(oe)},ce=(P=!1)=>{window.confirm(` ,      ${P?"":""} ?`)&&(P?p([]):h([]))},Fe=P=>{var oe;const R=(oe=P.target.files)==null?void 0:oe[0];if(!R)return;const _e=new FileReader;_e.onload=pe=>{var Pe;const me=(Pe=pe.target)==null?void 0:Pe.result;typeof me=="string"&&x(me)},_e.readAsText(R),L.current&&(L.current.value="")},G=(P,R)=>c.jsx("div",{className:"flex flex-wrap gap-2 max-h-[300px] overflow-y-auto custom-scrollbar pr-2",children:P.length===0?c.jsx("p",{className:"text-stone-800 italic text-[10px] w-full text-center py-8",children:" ."}):P.map((_e,oe)=>c.jsxs("div",{className:`group flex items-center border rounded-xl pr-2 pl-1 py-1 transition-all hover:bg-stone-900 ${R?"bg-amber-900/10 border-amber-900/30 hover:border-amber-700":"bg-stone-900/50 border-stone-800/50 hover:border-stone-600"}`,children:[c.jsx("button",{onClick:()=>Ie(oe,"left",R),disabled:oe===0,className:`p-1 text-stone-600 hover:text-emerald-500 transition-all ${oe===0?"opacity-0 pointer-events-none":"opacity-0 group-hover:opacity-100"}`,children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),c.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-1 select-none ${R?"text-amber-500":"text-stone-500"}`,children:_e}),c.jsx("button",{onClick:()=>Ie(oe,"right",R),disabled:oe===P.length-1,className:`p-1 text-stone-600 hover:text-emerald-500 transition-all ${oe===P.length-1?"opacity-0 pointer-events-none":"opacity-0 group-hover:opacity-100"}`,children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})}),c.jsx("div",{className:`w-px h-3 mx-1 ${R?"bg-amber-900/30":"bg-stone-800"}`}),c.jsx("button",{onClick:()=>R?re(_e):ie(_e),className:"text-stone-700 hover:text-red-500 transition-colors ml-1",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:c.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]},_e))});return c.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 pb-32",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-stone-900/50 pb-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""}),c.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-[10px]",children:"   "})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"file",ref:L,onChange:Fe,accept:".json",className:"hidden"}),c.jsxs("button",{onClick:()=>{var P;return(P=L.current)==null?void 0:P.click()},className:"px-5 py-2.5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 rounded-lg text-[10px] uppercase tracking-widest font-bold text-emerald-500 transition-all flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})," "]}),c.jsxs("button",{onClick:g,className:"px-5 py-2.5 bg-stone-900/80 hover:bg-stone-800 border border-stone-700 rounded-lg text-[10px] uppercase tracking-widest font-bold text-stone-300 transition-all flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})," "]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:" "}),c.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-500 px-2 py-0.5 rounded-full font-black",children:s.length})]}),c.jsx("button",{onClick:d,className:"bg-white hover:bg-emerald-50 text-black px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-black transition-all",children:""})]}),c.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl overflow-hidden shadow-xl",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-stone-900 bg-stone-900/20",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),c.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),c.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600 text-right",children:""})]})}),c.jsx("tbody",{className:"divide-y divide-stone-900/50",children:s.map(P=>{var R,_e,oe,pe;return c.jsxs("tr",{className:"hover:bg-stone-900/10 transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:P.imageUrl,style:{objectFit:"cover",objectPosition:`${P.miniImageX??50}% ${P.miniImageY??50}%`,transformOrigin:`${P.miniImageX??50}% ${P.miniImageY??50}%`,transform:`scale(${P.miniImageScale??1})`},className:"w-full h-full",alt:""})}),c.jsx("span",{className:"font-bold text-stone-200 text-sm tracking-wide",children:P.name})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex flex-wrap gap-1",children:[(R=P.tags)==null?void 0:R.slice(0,3).map(me=>c.jsx("span",{className:"text-[8px] uppercase bg-stone-900 px-1.5 py-0.5 rounded text-stone-500",children:me},me)),(((_e=P.tags)==null?void 0:_e.length)||0)>3&&c.jsxs("span",{className:"text-[8px] text-stone-700",children:["+",P.tags.length-3]})]}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[(oe=P.hiddenTags)==null?void 0:oe.slice(0,3).map(me=>c.jsx("span",{className:"text-[8px] uppercase bg-amber-900/20 border border-amber-900/30 px-1.5 py-0.5 rounded text-amber-600",children:me},me)),(((pe=P.hiddenTags)==null?void 0:pe.length)||0)>3&&c.jsxs("span",{className:"text-[8px] text-amber-700",children:["+",P.hiddenTags.length-3]})]})]})}),c.jsxs("td",{className:"px-6 py-4 text-right space-x-3",children:[c.jsx("button",{onClick:()=>a(P),className:"text-emerald-500/70 hover:text-emerald-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""}),c.jsx("button",{onClick:()=>o(P.id),className:"text-stone-800 hover:text-red-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""})]})]},P.id)})})]})})})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl p-6 space-y-6 shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-serif text-stone-100 italic",children:" "}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] bg-stone-800 text-stone-400 px-2 py-0.5 rounded-full font-black",children:t.length}),t.length>0&&c.jsx("button",{onClick:()=>ce(!1),className:"text-[8px] text-red-900 hover:text-red-500 uppercase font-black",children:""})]})]}),c.jsxs("form",{onSubmit:U,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:N,onChange:P=>y(P.target.value),placeholder:" ...",className:"flex-grow bg-black/50 border border-stone-800 rounded-xl px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-all"}),c.jsx("button",{className:"bg-stone-800 hover:bg-stone-700 text-white p-2 rounded-xl transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:2.5})})})]}),G(t,!1)]}),c.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl p-6 space-y-6 shadow-xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-amber-500/5 rounded-full blur-2xl -translate-y-10 translate-x-10 pointer-events-none"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-serif text-amber-500 italic",children:" "}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] bg-amber-900/20 text-amber-500 px-2 py-0.5 rounded-full font-black",children:r.length}),r.length>0&&c.jsx("button",{onClick:()=>ce(!0),className:"text-[8px] text-red-900 hover:text-red-500 uppercase font-black",children:""})]})]}),c.jsxs("form",{onSubmit:X,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:v,onChange:P=>T(P.target.value),placeholder:"  ...",className:"flex-grow bg-black/50 border border-amber-900/30 rounded-xl px-3 py-2 text-xs text-stone-200 outline-none focus:border-amber-500/50 transition-all placeholder-amber-900/50"}),c.jsx("button",{className:"bg-amber-900/20 hover:bg-amber-900/40 text-amber-500 border border-amber-900/30 p-2 rounded-xl transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:2.5})})})]}),G(r,!0)]})]})]})]})},sx="modulepreload",ix=function(s){return"/raz/"+s},_h={},wh=function(t,r,o){let a=Promise.resolve();if(r&&r.length>0){let h=function(x){return Promise.all(x.map(N=>Promise.resolve(N).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));a=h(r.map(x=>{if(x=ix(x),x in _h)return;_h[x]=!0;const N=x.endsWith(".css"),y=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${y}`))return;const v=document.createElement("link");if(v.rel=N?"stylesheet":sx,N||(v.as="script"),v.crossOrigin="",v.href=x,g&&v.setAttribute("nonce",g),document.head.appendChild(v),N)return new Promise((T,L)=>{v.addEventListener("load",T),v.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return a.then(h=>{for(const p of h||[])p.status==="rejected"&&d(p.reason);return t().catch(d)})},ox=({characters:s,availableTags:t,availableHiddenTags:r,filterStates:o,onToggleTag:a,onClearFilters:d,onSelectCharacter:h})=>{var fn;const[p,g]=W.useState("graph"),[x,N]=W.useState(""),[y,v]=W.useState(!1),[T,L]=W.useState(""),[U,X]=W.useState([]),ie=W.useRef(null),[re,Ie]=W.useState(!1),[ce,Fe]=W.useState(null),[G,P]=W.useState(null),[R,_e]=W.useState(0),[oe,pe]=W.useState(!0),[me,Pe]=W.useState(!1),He=W.useRef(null),ee=W.useRef(null),he=W.useRef(null),we=W.useRef(null),$=W.useRef(new Map),[K,w]=W.useState({x:0,y:0,k:1}),D=Object.keys(o).length;W.useEffect(()=>{if(p==="graph"){Pe(!0);const E=setTimeout(()=>Pe(!1),2200);return()=>clearTimeout(E)}},[ce,re,D,p]),W.useEffect(()=>{const E=le=>{ie.current&&!ie.current.contains(le.target)&&v(!1)};return y&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[y]);const{nodes:Z,links:Ee,uniqueColors:M}=W.useMemo(()=>{if(p!=="graph")return{nodes:[],links:[],uniqueColors:[]};const E=s.filter(Q=>ce&&Q.id===ce?!0:Object.entries(o).every(([F,de])=>{var _n,Bt;const Re=(_n=Q.tags)==null?void 0:_n.includes(F),Ae=(Bt=Q.hiddenTags)==null?void 0:Bt.includes(F),Qe=Re||Ae;return de==="include"?Qe:de==="exclude"?!Qe:!0})),le=new Set(E.map(Q=>Q.id)),xe=new Set;ce&&(xe.add(ce),E.forEach(Q=>{var F,de;Q.id===ce&&((F=Q.connections)==null||F.forEach(Re=>{le.has(Re.id)&&xe.add(Re.id)})),(de=Q.connections)!=null&&de.some(Re=>Re.id===ce)&&xe.add(Q.id)}));const je=new Map,Se=[...t],Ue=380,Te=260;Se.forEach((Q,F)=>{const de=F/Se.length*2*Math.PI;je.set(Q,{x:500+Math.cos(de)*Ue,y:350+Math.sin(de)*Te})});const Ve=E.map(Q=>{const F=$.current.get(Q.id);let de=!1;if(ce)de=!xe.has(Q.id);else if(re){const Qe=Q.connections||[],_n=E.filter(Bt=>{var ir;return Bt.id!==Q.id&&((ir=Bt.connections)==null?void 0:ir.some(or=>or.id===Q.id))});de=Qe.length+_n.length===0}let Re=500,Ae=350;if(!F)if(Q.tags&&Q.tags.length>0){let Qe=0,_n=0,Bt=0;Q.tags.forEach(ir=>{const or=je.get(ir);or&&(Qe+=or.x,_n+=or.y,Bt++)}),Bt>0?(Re=Qe/Bt,Ae=_n/Bt,Re+=(Math.random()-.5)*80,Ae+=(Math.random()-.5)*80):(Re+=(Math.random()-.5)*150,Ae+=(Math.random()-.5)*150)}else Re+=(Math.random()-.5)*120,Ae+=(Math.random()-.5)*120;return{id:Q.id,name:Q.name,imageUrl:Q.imageUrl,miniImageScale:Q.miniImageScale,miniImageX:Q.miniImageX,miniImageY:Q.miniImageY,x:(F==null?void 0:F.x)??Re,y:(F==null?void 0:F.y)??Ae,vx:F==null?void 0:F.vx,vy:F==null?void 0:F.vy,isDimmed:de,tags:Q.tags,hiddenTags:Q.hiddenTags}}),nt=new Map;Ve.forEach(Q=>nt.set(Q.id,Q)),$.current=nt;const O=[],ne=new Set,be=new Map;return E.forEach(Q=>{var F;(F=Q.connections)==null||F.forEach(de=>{if(le.has(de.id)){const Re=de.color||"#10b981";ne.add(Re);let Ae=!1;ce&&(Ae=Q.id!==ce&&de.id!==ce),O.push({source:Q.id,target:de.id,role:de.role,color:Re,isDouble:!1,isHidden:Ae}),be.set(`${Q.id}-${de.id}`,!0)}})}),O.forEach(Q=>{const F=typeof Q.source=="string"?Q.source:Q.source.id,de=typeof Q.target=="string"?Q.target:Q.target.id;be.has(`${de}-${F}`)&&(Q.isDouble=!0)}),{nodes:Ve,links:O,uniqueColors:Array.from(ne)}},[s,re,ce,o,t,p]),B=E=>{if(!He.current||!we.current)return;const le=Z.find(xe=>xe.id===E);!le||le.x===void 0||le.y===void 0||wh(()=>import("https://esm.sh/d3@7"),[]).then(xe=>{const je=xe.select(He.current),Se=1e3,Ue=700,Te=.8,Ve=Se/2-le.x*Te,nt=Ue/2-le.y*Te;je.transition().duration(1200).ease(xe.easePolyInOut.exponent(3)).call(we.current.transform,xe.zoomIdentity.translate(Ve,nt).scale(Te))})};W.useEffect(()=>{if(ce&&p==="graph"){const E=setTimeout(()=>B(ce),100);return()=>clearTimeout(E)}},[ce,p]),W.useEffect(()=>{!He.current||p!=="graph"||(pe(!0),wh(()=>import("https://esm.sh/d3@7"),[]).then(E=>{const le=E.select(He.current),xe=E.select(ee.current),je=E.zoom().scaleExtent([.1,4]).on("zoom",Te=>{xe.attr("transform",Te.transform),w({x:Te.transform.x,y:Te.transform.y,k:Te.transform.k}),P(null)});we.current=je,le.call(je);const Se=E.forceSimulation(Z).force("link",E.forceLink(Ee.filter(Te=>!Te.isHidden)).id(Te=>Te.id).distance(Te=>{const Ve=Te.source.tags||[],nt=Te.target.tags||[],O=Ve.some(ne=>nt.includes(ne));return Ve.length===0||nt.length===0?250:O?150:450}).strength(ce?.05:.03)).force("charge",E.forceManyBody().strength(ce?-2e3:-1200)).force("center",E.forceCenter(500,350)).force("gravityX",E.forceX(500).strength(.005)).force("gravityY",E.forceY(350).strength(.005)).force("collision",E.forceCollide().radius(75)).alphaDecay(.06);Se.on("tick",()=>{_e(Te=>Te+1),Se.alpha()<.2&&pe(!1)}),he.current=Se;const Ue=Te=>{function Ve(ne,be){ne.active||Te.alphaTarget(.3).restart(),be.fx=be.x,be.fy=be.y,P(null)}function nt(ne,be){be.fx=ne.x,be.fy=ne.y}function O(ne,be){ne.active||Te.alphaTarget(0),be.fx=null,be.fy=null}return E.drag().on("start",Ve).on("drag",nt).on("end",O)};return xe.selectAll(".node-group").data(Z).call(Ue(Se)),()=>Se.stop()}))},[Z,Ee,p]);const J=E=>{const le=typeof E.source=="string"?Z.find(Re=>Re.id===E.source):E.source,xe=typeof E.target=="string"?Z.find(Re=>Re.id===E.target):E.target;if(!(le!=null&&le.x)||!(le!=null&&le.y)||!(xe!=null&&xe.x)||!(xe!=null&&xe.y))return null;const je=52,Se=xe.x-le.x,Ue=xe.y-le.y,Te=Math.sqrt(Se*Se+Ue*Ue);if(Te<je*2.2)return null;const Ve=Se/Te,nt=Ue/Te,O=le.x+je*Ve,ne=le.y+je*nt,be=xe.x-je*Ve,Q=xe.y-je*nt;let F="",de={x:0,y:0};if(E.isDouble){const Ae=(le.x+xe.x)/2+-nt*50,Qe=(le.y+xe.y)/2+Ve*50;F=`M${O},${ne} Q${Ae},${Qe} ${be},${Q}`,de.x=.25*O+.5*Ae+.25*be,de.y=.25*ne+.5*Qe+.25*Q}else F=`M${O},${ne} L${be},${Q}`,de.x=(O+be)/2,de.y=(ne+Q)/2;return{path:F,textPos:de}},Ce=E=>E.replace("#",""),j=E=>{X(le=>le.includes(E)?le.filter(xe=>xe!==E):[...le,E])},q=W.useMemo(()=>s.filter(E=>{const le=E.name.toLowerCase().includes(T.toLowerCase()),xe=U.length===0||U.every(je=>{var Se,Ue;return((Se=E.tags)==null?void 0:Se.includes(je))||((Ue=E.hiddenTags)==null?void 0:Ue.includes(je))});return le&&xe}).sort((E,le)=>E.name.localeCompare(le.name)),[s,T,U]),{outgoingConnections:ge,incomingConnections:ze,currentTableChar:Ct}=W.useMemo(()=>{if(p!=="table"||!x)return{outgoingConnections:[],incomingConnections:[],currentTableChar:null};const E=s.find(je=>je.id===x),le=((E==null?void 0:E.connections)||[]).map(je=>{const Se=s.find(Ue=>Ue.id===je.id);return{...je,targetChar:Se}}),xe=s.filter(je=>{var Se;return(Se=je.connections)==null?void 0:Se.some(Ue=>Ue.id===x)}).map(je=>{var Ue;const Se=(Ue=je.connections)==null?void 0:Ue.find(Te=>Te.id===x);return{sourceChar:je,role:Se==null?void 0:Se.role,color:Se==null?void 0:Se.color}});return{outgoingConnections:le,incomingConnections:xe,currentTableChar:E}},[s,x,p]);return c.jsxs("div",{className:`flex flex-col h-full space-y-4 md:space-y-4 select-none relative ${me?"is-mounting":""}`,onClick:()=>P(null),children:[c.jsxs("div",{className:"bg-[#0f0f0f]/50 border border-stone-900 rounded-2xl p-4 flex flex-col gap-4 backdrop-blur-sm shadow-lg relative z-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[c.jsxs("div",{className:"bg-stone-950 p-1 rounded-lg border border-stone-800 flex items-center",children:[c.jsx("button",{onClick:()=>g("graph"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${p==="graph"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""}),c.jsx("button",{onClick:()=>g("table"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${p==="table"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""})]}),p==="graph"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-6 w-px bg-stone-800 hidden md:block"}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[c.jsx("input",{type:"checkbox",checked:re,disabled:!!ce,onChange:E=>Ie(E.target.checked),className:"sr-only"}),c.jsx("div",{className:`w-4 h-4 border border-stone-700 rounded transition-colors ${re?"bg-emerald-600 border-emerald-500":"bg-transparent"}`,children:re&&c.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),c.jsx("span",{className:`text-[11px] uppercase tracking-wider font-bold text-stone-500 group-hover:text-stone-300 transition-colors ${ce?"opacity-30":""}`,children:" "})]})]})]}),p==="graph"?ce&&c.jsx("button",{onClick:()=>{Fe(null),pe(!0)},className:"w-full md:w-auto bg-emerald-950/30 border border-emerald-900/50 text-emerald-500 px-4 py-2 rounded-full text-[10px] uppercase tracking-[0.2em] font-black hover:bg-emerald-900/40 transition-all",children:" "}):c.jsxs("div",{className:"w-full md:w-80 relative z-50",ref:ie,children:[c.jsxs("button",{onClick:()=>v(!y),className:"w-full bg-stone-950 border border-stone-800 text-stone-300 text-xs py-2.5 pl-4 pr-10 rounded-xl text-left focus:border-emerald-900 transition-colors flex items-center justify-between",children:[c.jsx("span",{className:x?"":"text-stone-500 italic",children:x?(fn=s.find(E=>E.id===x))==null?void 0:fn.name:"--   --"}),c.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform ${y?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#0a0a0a] border border-stone-800 rounded-xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 flex flex-col max-h-[400px]",children:[c.jsxs("div",{className:"p-3 bg-stone-900/50 border-b border-stone-900 space-y-3 shrink-0 backdrop-blur-md",children:[c.jsx("input",{type:"text",placeholder:"...",value:T,onChange:E=>L(E.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",autoFocus:!0}),(t.length>0||r.length>0)&&c.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto custom-scrollbar",children:[t.map(E=>{const le=U.includes(E);return c.jsx("button",{onClick:()=>j(E),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${le?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:E},E)}),r.map(E=>{const le=U.includes(E);return c.jsx("button",{onClick:()=>j(E),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${le?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-amber-500"}`,children:E},E)})]})]}),c.jsx("div",{className:"overflow-y-auto p-1 custom-scrollbar",children:q.length>0?q.map(E=>c.jsxs("button",{onClick:()=>{N(E.id),v(!1),L(""),X([])},className:`w-full flex items-center gap-3 p-2 hover:bg-stone-900 rounded-lg text-left transition-colors group ${x===E.id?"bg-stone-900/80":""}`,children:[c.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:E.imageUrl,style:{objectPosition:`${E.miniImageX??50}% ${E.miniImageY??50}%`,transform:`scale(${E.miniImageScale??1})`,transformOrigin:`${E.miniImageX??50}% ${E.miniImageY??50}%`},className:"w-full h-full object-cover",alt:""})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("span",{className:`text-xs font-bold block truncate ${x===E.id?"text-emerald-400":"text-stone-300"}`,children:E.name}),E.tags&&E.tags.length>0&&c.jsxs("span",{className:"text-[8px] text-stone-600 truncate block mt-0.5",children:[E.tags.slice(0,3).join(", "),E.tags.length>3?"...":""]})]}),x===E.id&&c.jsx("div",{className:"ml-auto text-emerald-500",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},E.id)):c.jsx("div",{className:"text-center py-4 text-[10px] text-stone-600 italic",children:"  "})})]})]})]}),p==="graph"&&(t.length>0||r.length>0)&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-3 border-t border-stone-800/50 animate-in fade-in slide-in-from-top-1 duration-500",children:[c.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2",children:":"}),t.map(E=>{const le=o[E]||"none";return c.jsxs("button",{onClick:()=>a(E),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${le==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":le==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[le==="include"&&c.jsx("span",{className:"text-emerald-500",children:"+"}),le==="exclude"&&c.jsx("span",{className:"text-red-500",children:""}),E]},E)}),r.map(E=>{const le=o[E]||"none";return c.jsxs("button",{onClick:()=>a(E),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${le==="include"?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":le==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-amber-500 hover:border-amber-900/30"}`,children:[le==="include"&&c.jsx("span",{className:"text-amber-500",children:"+"}),le==="exclude"&&c.jsx("span",{className:"text-red-500",children:""}),E]},E)}),D>0&&c.jsx("button",{onClick:d,className:"ml-2 text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:""})]})]}),c.jsxs("div",{className:"relative z-0 w-full h-full min-h-[500px] bg-[#030303] border border-stone-900 rounded-2xl overflow-hidden shadow-2xl graph-container-reveal",children:[p==="graph"&&c.jsxs(c.Fragment,{children:[c.jsxs("svg",{ref:He,viewBox:"0 0 1000 700",className:"w-full h-full touch-none cursor-grab active:cursor-grabbing",children:[c.jsx("defs",{children:M.map(E=>c.jsx("marker",{id:`arrow-${Ce(E)}`,markerWidth:"8",markerHeight:"6",refX:"7.5",refY:"3",orient:"auto",children:c.jsx("path",{d:"M0,0 L8,3 L0,6",fill:E})},`arrow-${Ce(E)}`))}),c.jsxs("g",{ref:ee,children:[Ee.map((E,le)=>{const xe=J(E);if(!xe)return null;const je=E.color||"#10b981",Se=E.isHidden;return c.jsxs("g",{className:`transition-opacity duration-700 ${Se?"opacity-0":"opacity-100"}`,children:[c.jsx("path",{d:xe.path,fill:"none",stroke:je,strokeWidth:ce?"3":"1.5",strokeOpacity:ce?"0.8":"0.3",markerEnd:`url(#arrow-${Ce(je)})`,className:"link-path",style:me?{animationDelay:`${le*.015}s`}:{}}),ce&&E.role&&!Se&&c.jsxs("g",{transform:`translate(${xe.textPos.x}, ${xe.textPos.y})`,children:[c.jsx("text",{dy:"-14",textAnchor:"middle",className:"fill-[#030303] text-[10px] font-bold uppercase tracking-[0.2em]",style:{paintOrder:"stroke",stroke:"#030303",strokeWidth:"5px"},children:E.role}),c.jsx("text",{dy:"-14",textAnchor:"middle",fill:je,className:"text-[10px] font-bold uppercase tracking-[0.2em] opacity-90",children:E.role})]})]},`link-${le}-${R}`)}),Z.map((E,le)=>{const xe=ce===E.id;return c.jsx("g",{transform:`translate(${E.x||500}, ${E.y||350})`,className:`node-group cursor-pointer group ${E.isDimmed?"opacity-0 pointer-events-none":"opacity-100"}`,onClick:je=>{if(je.stopPropagation(),E.x&&E.y){const Se=E.x*K.k+K.x,Ue=E.y*K.k+K.y;P({id:E.id,x:Se,y:Ue})}},children:c.jsxs("g",{className:"node-animator",style:me?{animationDelay:`${le*.06}s`}:{},children:[c.jsxs("g",{className:"node-content",children:[c.jsx("circle",{r:"48",fill:"#1c1917"}),c.jsx("circle",{r:"46",fill:"#050505",stroke:xe?"#10b981":"#292524",strokeWidth:xe?"4":"1.5"}),c.jsx("clipPath",{id:`clip-${E.id}`,children:c.jsx("circle",{r:"45"})}),c.jsx("foreignObject",{x:"-45",y:"-45",width:"90",height:"90",clipPath:`url(#clip-${E.id})`,children:c.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center overflow-hidden",children:c.jsx("img",{src:E.imageUrl,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${E.miniImageX??50}% ${E.miniImageY??50}%`,transformOrigin:`${E.miniImageX??50}% ${E.miniImageY??50}%`,transform:`scale(${E.miniImageScale??1})`},className:"opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500"})})})]}),c.jsx("text",{y:"70",textAnchor:"middle",className:"fill-stone-500 text-[12px] font-bold uppercase tracking-[0.15em] group-hover:fill-stone-100 transition-colors drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)] font-serif",children:E.name})]})},E.id)})]})]}),oe&&c.jsx("div",{className:"absolute inset-0 bg-[#030303]/40 flex items-center justify-center backdrop-blur-[1px] pointer-events-none",children:c.jsx("div",{className:"text-[10px] uppercase tracking-[0.4em] font-black text-emerald-500/50 animate-pulse",children:" ..."})})]}),p==="table"&&c.jsx("div",{className:"w-full h-full overflow-y-auto custom-scrollbar p-6 md:p-10",children:x?c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[c.jsx("span",{className:"text-emerald-500 bg-emerald-900/10 px-2 py-1 rounded text-xs font-bold",children:"OUT"}),c.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",Ct==null?void 0:Ct.name,"?"]}),c.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:ge.length})]}),c.jsx("div",{className:"space-y-3",children:ge.length===0?c.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"       ..."}):ge.map((E,le)=>{var xe,je,Se,Ue,Te,Ve;return c.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-emerald-900/30 transition-all group",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:(xe=E.targetChar)==null?void 0:xe.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((je=E.targetChar)==null?void 0:je.miniImageX)??50}% ${((Se=E.targetChar)==null?void 0:Se.miniImageY)??50}%`,transform:`scale(${((Ue=E.targetChar)==null?void 0:Ue.miniImageScale)??1})`,transformOrigin:`${((Te=E.targetChar)==null?void 0:Te.miniImageX)??50}% ${((Ve=E.targetChar)==null?void 0:Ve.miniImageY)??50}%`},alt:""})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:E.name}),c.jsx("button",{onClick:()=>h(E.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-emerald-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),c.jsx("p",{className:"text-stone-500 text-xs mt-1 font-medium",children:E.role})]}),c.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:E.color||"#10b981"}})]},le)})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[c.jsx("span",{className:"text-blue-500 bg-blue-900/10 px-2 py-1 rounded text-xs font-bold",children:"IN"}),c.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",Ct==null?void 0:Ct.name,"?"]}),c.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:ze.length})]}),c.jsx("div",{className:"space-y-3",children:ze.length===0?c.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"    ..."}):ze.map((E,le)=>{var xe,je,Se,Ue,Te,Ve,nt;return c.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-blue-900/30 transition-all group",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:(xe=E.sourceChar)==null?void 0:xe.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((je=E.sourceChar)==null?void 0:je.miniImageX)??50}% ${((Se=E.sourceChar)==null?void 0:Se.miniImageY)??50}%`,transform:`scale(${((Ue=E.sourceChar)==null?void 0:Ue.miniImageScale)??1})`,transformOrigin:`${((Te=E.sourceChar)==null?void 0:Te.miniImageX)??50}% ${((Ve=E.sourceChar)==null?void 0:Ve.miniImageY)??50}%`},alt:""})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:(nt=E.sourceChar)==null?void 0:nt.name}),c.jsx("button",{onClick:()=>h(E.sourceChar.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-blue-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-stone-600 text-[10px] uppercase tracking-wider",children:"  :"}),c.jsx("p",{className:"text-stone-400 text-xs font-medium",children:E.role})]})]}),c.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:E.color||"#10b981"}})]},le)})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-stone-600 space-y-4",children:[c.jsx("svg",{className:"w-16 h-16 opacity-30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),c.jsx("p",{className:"text-sm italic font-serif opacity-70",children:"    ,    "})]})}),G&&p==="graph"&&c.jsx("div",{className:"absolute z-[100] animate-in zoom-in-95 fade-in duration-300",style:{left:G.x+40,top:G.y-40},onClick:E=>E.stopPropagation(),children:c.jsxs("div",{className:"bg-[#0f0f0f]/95 border border-stone-800 rounded-xl overflow-hidden shadow-2xl min-w-[200px] backdrop-blur-md",children:[c.jsx("button",{onClick:()=>h(G.id),className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-stone-200 hover:bg-emerald-900/40 border-b border-stone-900",children:" "}),c.jsx("button",{onClick:()=>{Fe(G.id),P(null),pe(!0)},className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-emerald-400 hover:bg-emerald-900/40",children:" "})]})})]})]})},lx=({realms:s,worlds:t,characters:r,availableTags:o,availableHiddenTags:a,onUpdateRealms:d,onUpdateWorlds:h,isAdmin:p})=>{var le,xe,je,Se,Ue,Te,Ve,nt;const[g,x]=W.useState(null),[N,y]=W.useState(null),[v,T]=W.useState(!1),[L,U]=W.useState(!1),[X,ie]=W.useState(!1),[re,Ie]=W.useState(null),[ce,Fe]=W.useState(!1),[G,P]=W.useState(""),[R,_e]=W.useState(!1),[oe,pe]=W.useState({}),[me,Pe]=W.useState({type:""}),[He,ee]=W.useState(""),[he,we]=W.useState([]),$=s.find(O=>O.id===g),K=t.find(O=>O.id===N),w=t.filter(O=>O.realmId===g),D=O=>{var ne,be;for(const Q of t){if((ne=Q.characterIds)!=null&&ne.includes(O))return Q.name;if(Q.subLocations){for(const F of Q.subLocations)if((be=F.characterIds)!=null&&be.includes(O))return`${Q.name} / ${F.name}`}}return null},Z=O=>{pe(O||{}),T(!0)},Ee=()=>{if(!oe.name)return;let O;if(oe.id)O=s.map(ne=>ne.id===oe.id?{...ne,...oe}:ne);else{const ne={id:Date.now().toString(),name:oe.name,imageUrl:oe.imageUrl||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=1080&auto=format&fit=crop"};O=[...s,ne]}d(O),T(!1),pe({})},M=O=>{window.confirm("  ?  ,   .")&&(d(s.filter(ne=>ne.id!==O)),g===O&&x(null))},B=O=>{Pe(O||{type:"",realmId:g}),U(!0)},J=()=>{if(!me.name||!g)return;let O;if(me.id)O=t.map(ne=>ne.id===me.id?{...ne,...me}:ne);else{const ne={id:Date.now().toString(),realmId:g,name:me.name,type:me.type||"",description:me.description||"",imageUrl:me.imageUrl||"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=800&auto=format&fit=crop",characterIds:[],subLocations:[]};O=[...t,ne]}h(O),U(!1),Pe({type:""})},Ce=O=>{window.confirm("  ?")&&(h(t.filter(ne=>ne.id!==O)),N===O&&y(null))},j=()=>{if(!K||!G.trim())return;const O={id:Date.now().toString(),name:G.trim(),characterIds:[]},ne=t.map(be=>be.id===K.id?{...be,subLocations:[...be.subLocations||[],O]}:be);h(ne),P(""),Fe(!1)},q=O=>{if(!K||!window.confirm("  ?        ."))return;const ne=t.map(be=>be.id===K.id?{...be,subLocations:(be.subLocations||[]).filter(Q=>Q.id!==O)}:be);h(ne)},ge=O=>{if(!K)return;let ne={...K};if(re){const Q=ne.subLocations?[...ne.subLocations]:[],F=Q.findIndex(de=>de.id===re);if(F>-1){const de=Q[F].characterIds||[],Re=de.includes(O)?de.filter(Ae=>Ae!==O):[...de,O];Q[F]={...Q[F],characterIds:Re},ne.subLocations=Q}}else{const Q=ne.characterIds||[],F=Q.includes(O)?Q.filter(de=>de!==O):[...Q,O];ne.characterIds=F}const be=t.map(Q=>Q.id===K.id?ne:Q);h(be)},ze=O=>{we(ne=>ne.includes(O)?ne.filter(be=>be!==O):[...ne,O])},Ct=(O=null)=>{Ie(O),ee(""),we([]),ie(!0)},fn=async O=>{var be;const ne=(be=O.target.files)==null?void 0:be[0];if(ne){_e(!0);try{const Q=await Ao(ne);pe(F=>({...F,imageUrl:Q}))}finally{_e(!1)}}},E=async O=>{var be;const ne=(be=O.target.files)==null?void 0:be[0];if(ne){_e(!0);try{const Q=await Ao(ne);Pe(F=>({...F,imageUrl:Q}))}finally{_e(!1)}}};if(N&&K){const O=re?((xe=(le=K.subLocations)==null?void 0:le.find(F=>F.id===re))==null?void 0:xe.characterIds)||[]:K.characterIds||[],ne=r.filter(F=>!O.includes(F.id)),be=ne.filter(F=>{const de=F.name.toLowerCase().includes(He.toLowerCase());if(he.length===0)return de;const Re=[...F.tags||[],...F.hiddenTags||[]];return de&&he.every(Ae=>Re.includes(Ae))}),Q=(F,de)=>{const Re=F||[],Ae=r.filter(Qe=>Re.includes(Qe.id));return Ae.length===0?c.jsx("p",{className:"text-stone-600 italic text-sm",children:"  ..."}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Ae.map(Qe=>c.jsxs("div",{className:"bg-stone-900/30 border border-stone-800 rounded-xl p-3 flex items-center gap-3 group relative",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-black border border-stone-700 overflow-hidden shrink-0",children:c.jsx("img",{src:Qe.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${Qe.miniImageX??50}% ${Qe.miniImageY??50}%`,transform:`scale(${Qe.miniImageScale??1})`,transformOrigin:`${Qe.miniImageX??50}% ${Qe.miniImageY??50}%`}})}),c.jsx("span",{className:"text-stone-300 font-bold text-sm truncate",children:Qe.name}),p&&c.jsx("button",{onClick:()=>{Ie(de),setTimeout(()=>ge(Qe.id),0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-stone-600 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all p-2",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Qe.id))})};return c.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500 pb-20",children:[c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("button",{onClick:()=>y(null),className:"self-start flex items-center gap-2 text-stone-500 hover:text-emerald-500 transition-colors group",children:[c.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest",children:["  ",$==null?void 0:$.name]})]}),c.jsxs("div",{className:"relative h-[300px] md:h-[400px] rounded-3xl overflow-hidden border border-stone-900 group shadow-2xl",children:[c.jsx("img",{src:K.imageUrl,className:"w-full h-full object-cover",alt:K.name}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent opacity-90"}),c.jsx("div",{className:"absolute bottom-0 left-0 p-8 md:p-12 w-full",children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"inline-block px-3 py-1 bg-emerald-900/40 border border-emerald-500/30 rounded-lg text-emerald-400 text-[10px] font-bold uppercase tracking-widest mb-3 backdrop-blur-md",children:K.type}),c.jsx("h1",{className:"text-4xl md:text-6xl font-serif font-medium text-stone-100 drop-shadow-xl",children:K.name})]}),p&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>B(K),className:"bg-white/10 hover:bg-white/20 backdrop-blur-md text-stone-200 px-5 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all border border-white/10",children:""}),c.jsx("button",{onClick:()=>Ce(K.id),className:"bg-red-900/20 hover:bg-red-900/40 backdrop-blur-md text-red-400 px-5 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all border border-red-900/30",children:""})]})]})})]}),c.jsx("div",{className:"max-w-4xl",children:c.jsx("p",{className:"text-lg md:text-xl font-serif text-stone-300 leading-relaxed whitespace-pre-wrap",children:K.description})}),c.jsx("div",{className:"h-px bg-stone-900 w-full my-4"}),c.jsxs("div",{className:"space-y-10",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-stone-800/50 pb-2",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-200 italic",children:" "}),p&&c.jsx("button",{onClick:()=>Ct(null),className:"text-emerald-500 hover:text-emerald-400 text-[10px] uppercase font-bold tracking-widest transition-colors flex items-center gap-2",children:"+ "})]}),Q(K.characterIds||[],null)]}),(je=K.subLocations)==null?void 0:je.map(F=>c.jsxs("div",{className:"space-y-4 pt-4 animate-in fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-stone-800/50 pb-2",children:[c.jsxs("div",{className:"flex items-baseline gap-3",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-300 italic",children:F.name}),p&&c.jsx("button",{onClick:()=>q(F.id),className:"text-stone-700 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&c.jsx("button",{onClick:()=>Ct(F.id),className:"text-emerald-500 hover:text-emerald-400 text-[10px] uppercase font-bold tracking-widest transition-colors flex items-center gap-2",children:"+ "})]}),Q(F.characterIds||[],F.id)]},F.id)),p&&c.jsx("div",{className:"pt-4",children:ce?c.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-2",children:[c.jsx("input",{autoFocus:!0,placeholder:" ...",className:"bg-stone-900 border border-stone-800 rounded-lg px-3 py-2 text-sm text-stone-200 outline-none focus:border-emerald-900 w-64",value:G,onChange:F=>P(F.target.value),onKeyDown:F=>F.key==="Enter"&&j()}),c.jsx("button",{onClick:j,className:"text-emerald-500 hover:text-emerald-400 font-bold p-2 bg-stone-900 rounded-lg",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("button",{onClick:()=>Fe(!1),className:"text-stone-600 hover:text-stone-400 font-bold p-2",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):c.jsxs("button",{onClick:()=>Fe(!0),className:"flex items-center gap-2 text-stone-600 hover:text-emerald-500 transition-colors group",children:[c.jsx("div",{className:"w-8 h-8 rounded-full border border-stone-800 group-hover:border-emerald-500/50 flex items-center justify-center transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),c.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:" "})]})})]})]}),X&&c.jsx("div",{className:"fixed inset-0 z-[120] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>ie(!1),children:c.jsxs("div",{className:"bg-[#0f0f0f] border border-stone-800 w-full max-w-lg rounded-2xl shadow-2xl flex flex-col max-h-[85vh]",onClick:F=>F.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b border-stone-900 shrink-0 space-y-4 bg-[#0f0f0f] rounded-t-2xl z-10",children:[c.jsxs("h3",{className:"text-xl font-serif text-stone-100 shrink-0",children:[" : ",re?(Ue=(Se=K.subLocations)==null?void 0:Se.find(F=>F.id===re))==null?void 0:Ue.name:" "]}),c.jsx("input",{type:"text",placeholder:"  ...",value:He,onChange:F=>ee(F.target.value),className:"w-full bg-stone-900 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",autoFocus:!0}),(o.length>0||a.length>0)&&c.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto custom-scrollbar",children:[o.map(F=>{const de=he.includes(F);return c.jsx("button",{onClick:()=>ze(F),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${de?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:F},F)}),a.map(F=>{const de=he.includes(F);return c.jsx("button",{onClick:()=>ze(F),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${de?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-amber-500"}`,children:F},F)})]})]}),c.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-grow p-4 space-y-1",children:be.length===0?c.jsx("div",{className:"text-center py-8 text-stone-600 italic text-sm",children:ne.length===0?"      .":"  ."}):be.map(F=>{const de=D(F.id),Re=!!de;return c.jsxs("button",{onClick:()=>!Re&&ge(F.id),disabled:Re,className:`w-full flex items-center gap-3 p-2 rounded-lg transition-colors group text-left ${Re?"opacity-50 cursor-not-allowed bg-stone-900/20":"hover:bg-stone-900"}`,children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-black border border-stone-800 overflow-hidden shrink-0",children:c.jsx("img",{src:F.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${F.miniImageX??50}% ${F.miniImageY??50}%`,transform:`scale(${F.miniImageScale??1})`,transformOrigin:`${F.miniImageX??50}% ${F.miniImageY??50}%`}})}),c.jsxs("div",{className:"min-w-0 flex-grow",children:[c.jsx("span",{className:`text-stone-300 text-sm font-bold block truncate ${!Re&&"group-hover:text-emerald-400"}`,children:F.name}),Re?c.jsxs("span",{className:"text-[10px] text-red-500/70 font-bold uppercase tracking-wider block truncate",children:[": ",de]}):c.jsx(c.Fragment,{children:he.length>0&&c.jsx("span",{className:"text-[8px] text-stone-600 block truncate",children:he.filter(Ae=>(F.tags||[]).includes(Ae)||(F.hiddenTags||[]).includes(Ae)).join(", ")})})]}),!Re&&c.jsx("span",{className:"ml-auto text-emerald-500 opacity-0 group-hover:opacity-100",children:"+"})]},F.id)})}),c.jsx("div",{className:"p-4 border-t border-stone-900 shrink-0",children:c.jsx("button",{onClick:()=>ie(!1),className:"w-full py-3 bg-stone-900 hover:bg-stone-800 text-stone-400 rounded-xl text-[10px] uppercase font-bold tracking-widest",children:""})})]})})]})}return g?c.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("button",{onClick:()=>x(null),className:"self-start flex items-center gap-2 text-stone-500 hover:text-emerald-500 transition-colors group",children:[c.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"  "})]}),c.jsxs("div",{className:"flex justify-between items-end border-b border-stone-800 pb-8",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-2xl overflow-hidden border border-stone-800 bg-black shadow-lg",children:c.jsx("img",{src:$==null?void 0:$.imageUrl,className:"w-full h-full object-cover",alt:""})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-medium text-stone-100",children:$==null?void 0:$.name}),c.jsxs("p",{className:"text-stone-500 uppercase tracking-widest text-[10px] mt-2",children:[": ",w.length]})]})]}),p&&c.jsxs("div",{className:"flex gap-2 flex-col md:flex-row",children:[c.jsx("button",{onClick:()=>Z($),className:"bg-stone-900/50 border border-stone-800 text-stone-400 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-stone-900 transition-all mb-1",children:". "}),c.jsx("button",{onClick:()=>B(),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all mb-1",children:"+ "})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[w.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center text-stone-700 italic",children:"     .   ."}),w.map(O=>{var ne,be,Q,F;return c.jsxs("div",{onClick:()=>y(O.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl overflow-hidden group hover:border-emerald-900/30 transition-all flex flex-col cursor-pointer active:scale-95 shadow-lg",children:[c.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[c.jsx("img",{src:O.imageUrl,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700",alt:""}),c.jsx("div",{className:"absolute top-4 left-4 bg-black/80 px-3 py-1 rounded text-[9px] uppercase tracking-widest font-bold text-emerald-500 border border-emerald-900/50 backdrop-blur-sm",children:O.type}),(((ne=O.characterIds)==null?void 0:ne.length)||0)+(((be=O.subLocations)==null?void 0:be.reduce((de,Re)=>{var Ae;return de+(((Ae=Re.characterIds)==null?void 0:Ae.length)||0)},0))||0)>0&&c.jsx("div",{className:"absolute bottom-4 right-4 bg-black/60 backdrop-blur-md px-2 py-1 rounded flex items-center gap-2",children:c.jsxs("span",{className:"text-[9px] text-stone-300 font-bold uppercase tracking-widest",children:[(((Q=O.characterIds)==null?void 0:Q.length)||0)+(((F=O.subLocations)==null?void 0:F.reduce((de,Re)=>{var Ae;return de+(((Ae=Re.characterIds)==null?void 0:Ae.length)||0)},0))||0)," ."]})})]}),c.jsxs("div",{className:"p-6 space-y-3 flex-grow flex flex-col",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-100 group-hover:text-emerald-200 transition-colors",children:O.name}),c.jsx("p",{className:"text-stone-500 text-sm leading-relaxed line-clamp-3 mb-2",children:O.description}),p&&c.jsxs("div",{className:"mt-auto pt-4 border-t border-stone-900/50 flex justify-between",children:[c.jsx("button",{onClick:de=>{de.stopPropagation(),B(O)},className:"text-[9px] font-bold uppercase tracking-widest text-stone-600 hover:text-white",children:"."}),c.jsx("button",{onClick:de=>{de.stopPropagation(),Ce(O.id)},className:"text-[9px] font-bold uppercase tracking-widest text-stone-600 hover:text-red-500",children:""})]})]})]},O.id)})]}),L&&c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-2xl p-6 md:p-8 space-y-6 max-h-[90vh] flex flex-col overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100 shrink-0",children:me.id?"":" "}),c.jsxs("div",{className:"space-y-4 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsx("input",{className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:me.name||"",onChange:O=>Pe({...me,name:O.target.value}),placeholder:" ..."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsxs("select",{className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:me.type,onChange:O=>Pe({...me,type:O.target.value}),children:[c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:""})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsx("textarea",{placeholder:"  ...",className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 h-32 outline-none resize-none focus:border-emerald-900",value:me.description||"",onChange:O=>Pe({...me,description:O.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-3 rounded-lg border border-stone-800 flex items-center justify-center gap-2 transition-colors ${R?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:E,className:"hidden",disabled:R,accept:"image/*"}),c.jsx("span",{className:"text-[10px] text-stone-400 font-bold uppercase",children:R?"...":""})]}),c.jsx("input",{className:"flex-[1.5] bg-stone-900 border border-stone-800 p-3 rounded-lg text-xs text-stone-400 outline-none",placeholder:"...",value:(Te=me.imageUrl)!=null&&Te.startsWith("data:")?"":me.imageUrl||"",onChange:O=>Pe({...me,imageUrl:O.target.value})})]}),me.imageUrl&&c.jsx("img",{src:me.imageUrl,className:"h-20 w-full object-cover rounded mt-2 opacity-50"})]})]}),c.jsxs("div",{className:"flex gap-4 shrink-0 pt-2 border-t border-stone-900 mt-2",children:[c.jsx("button",{onClick:()=>U(!1),className:"flex-1 py-3 text-[10px] font-bold uppercase text-stone-500 hover:text-stone-300",children:""}),c.jsx("button",{onClick:J,disabled:R||!me.name,className:"flex-1 py-3 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-lg font-bold text-[10px] uppercase disabled:opacity-50 hover:bg-emerald-900/50 transition-colors",children:""})]})]})}),v&&c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-3xl p-8 space-y-6 shadow-2xl animate-in zoom-in-95 duration-300",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100",children:" "}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsx("input",{className:"w-full bg-stone-900 border border-stone-800 p-4 rounded-xl text-stone-200 outline-none focus:border-emerald-900",value:oe.name||"",onChange:O=>pe({...oe,name:O.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-4 rounded-xl border border-stone-800 flex items-center justify-center gap-2 ${R?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:fn,className:"hidden",disabled:R,accept:"image/*"}),c.jsx("span",{className:"text-xs text-stone-400 font-bold uppercase",children:R?"...":""})]}),c.jsx("input",{className:"flex-[2] bg-stone-900 border border-stone-800 p-4 rounded-xl text-xs text-stone-400 outline-none",placeholder:"...",value:(Ve=oe.imageUrl)!=null&&Ve.startsWith("data:")?"":oe.imageUrl||"",onChange:O=>pe({...oe,imageUrl:O.target.value})})]})]})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-4 text-[10px] uppercase font-bold text-stone-500 hover:text-stone-300",children:""}),c.jsx("button",{onClick:Ee,disabled:!oe.name||R,className:"flex-1 py-4 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-xl font-bold text-[10px] uppercase hover:bg-emerald-900/50 transition-all disabled:opacity-50",children:""})]})]})})]}):c.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 pb-20",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("div",{className:"space-y-2",children:c.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""})}),p&&c.jsx("button",{onClick:()=>Z(),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all",children:"  "})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center",children:c.jsx("p",{className:"text-stone-700 italic font-serif text-xl",children:" .   ."})}),s.map(O=>c.jsxs("div",{onClick:()=>x(O.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl overflow-hidden group cursor-pointer relative shadow-lg hover:shadow-emerald-900/10 hover:border-emerald-900/40 transition-all active:scale-95",children:[c.jsxs("div",{className:"aspect-[16/9] relative",children:[c.jsx("img",{src:O.imageUrl,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700",alt:O.name}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"}),c.jsx("h3",{className:"absolute bottom-6 left-6 text-3xl font-serif text-stone-100 z-10 font-bold group-hover:text-emerald-100 transition-colors drop-shadow-md",children:O.name})]}),p&&c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:ne=>{ne.stopPropagation(),Z(O)},className:"bg-black/50 hover:bg-white text-white hover:text-black p-2 rounded-full backdrop-blur-sm transition-all",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),c.jsx("button",{onClick:ne=>{ne.stopPropagation(),M(O.id)},className:"bg-black/50 hover:bg-red-900/80 text-white p-2 rounded-full backdrop-blur-sm transition-all",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},O.id))]}),v&&c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-3xl p-8 space-y-6 shadow-2xl animate-in zoom-in-95 duration-300",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100",children:oe.id?" ":" "}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsx("input",{autoFocus:!0,className:"w-full bg-stone-900 border border-stone-800 p-4 rounded-xl text-stone-200 outline-none focus:border-emerald-900 transition-colors",value:oe.name||"",onChange:O=>pe({...oe,name:O.target.value}),placeholder:":  "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-4 rounded-xl border border-stone-800 flex items-center justify-center gap-2 transition-colors ${R?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:fn,className:"hidden",disabled:R,accept:"image/*"}),c.jsx("span",{className:"text-xs text-stone-400 font-bold uppercase",children:R?"...":""})]}),c.jsx("input",{className:"flex-[2] bg-stone-900 border border-stone-800 p-4 rounded-xl text-xs text-stone-400 outline-none",placeholder:"...",value:(nt=oe.imageUrl)!=null&&nt.startsWith("data:")?"":oe.imageUrl||"",onChange:O=>pe({...oe,imageUrl:O.target.value})})]})]})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-4 text-[10px] uppercase font-bold text-stone-500 hover:text-stone-300",children:""}),c.jsx("button",{onClick:Ee,disabled:!oe.name||R,className:"flex-1 py-4 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-xl font-bold text-[10px] uppercase hover:bg-emerald-900/50 transition-all disabled:opacity-50",children:""})]})]})})]})},ax=({notes:s,characters:t,availableTags:r=[],availableHiddenTags:o=[],onUpdate:a,isAdmin:d})=>{var pe,me,Pe,He;const[h,p]=W.useState(!1),[g,x]=W.useState(null),[N,y]=W.useState("form"),[v,T]=W.useState({}),[L,U]=W.useState(""),[X,ie]=W.useState([]),re=ee=>{ee?(x(ee.id),T({...ee})):(x(null),T({title:"",content:""})),y("form"),U(""),ie([]),p(!0)},Ie=()=>{p(!1),x(null),T({})},ce=()=>{if(v.title){if(g){const ee=s.map(he=>he.id===g?{...he,...v}:he);a(ee)}else{const ee={id:Date.now().toString(),title:v.title||"",content:v.content||"",date:new Date().toLocaleDateString("ru-RU"),authorId:v.authorId,targetId:v.targetId};a([ee,...s])}Ie()}},Fe=()=>{if(g&&window.confirm("   ?")){const ee=g;x(null),p(!1);const he=s.filter(we=>we.id!==ee);a(he)}},G=(ee,he)=>{if(ee.preventDefault(),ee.stopPropagation(),ee.nativeEvent&&ee.nativeEvent.stopImmediatePropagation(),window.confirm("   ?")){const we=s.filter($=>$.id!==he);a(we)}},P=ee=>{y(ee),U(""),ie([])},R=ee=>{N==="select-author"?T(he=>({...he,authorId:he.authorId===ee?void 0:ee})):N==="select-target"&&T(he=>({...he,targetId:he.targetId===ee?void 0:ee})),y("form")},_e=ee=>t.find(he=>he&&he.id===ee),oe=W.useMemo(()=>t.filter(ee=>{if(!ee)return!1;const he=ee.name.toLowerCase().includes(L.toLowerCase());if(X.length===0)return he;const we=[...ee.tags||[],...ee.hiddenTags||[]];return he&&X.every($=>we.includes($))}),[t,L,X]);return c.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 max-w-4xl mx-auto pb-20",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("h1",{className:"text-5xl font-serif font-medium text-stone-100",children:""}),d&&c.jsx("button",{onClick:()=>re(),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all",children:"+  "})]}),c.jsxs("div",{className:"space-y-12",children:[s.length===0&&c.jsx("div",{className:"py-20 text-center text-stone-700 italic font-serif",children:"  .    ."}),s.map(ee=>{const he=_e(ee.authorId),we=_e(ee.targetId);return c.jsxs("article",{onClick:()=>d&&re(ee),className:"relative group bg-[#0f0f0f]/30 border border-stone-900/50 rounded-2xl p-6 md:p-8 hover:bg-[#0f0f0f]/50 hover:border-emerald-900/30 transition-all shadow-lg cursor-pointer",children:[(he||we)&&c.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-stone-800/50",children:[he?c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-black border border-stone-800 overflow-hidden shrink-0",children:c.jsx("img",{src:he.imageUrl,alt:he.name,className:"w-full h-full object-cover",style:{objectPosition:`${he.miniImageX??50}% ${he.miniImageY??50}%`,transform:`scale(${he.miniImageScale??1})`,transformOrigin:`${he.miniImageX??50}% ${he.miniImageY??50}%`}})}),c.jsx("span",{className:"text-stone-300 font-bold text-xs uppercase tracking-wide",children:he.name})]}):c.jsx("span",{className:"text-stone-600 text-[10px] uppercase",children:""}),c.jsx("div",{className:"text-stone-600",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),we?c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-black border border-stone-800 overflow-hidden shrink-0",children:c.jsx("img",{src:we.imageUrl,alt:we.name,className:"w-full h-full object-cover",style:{objectPosition:`${we.miniImageX??50}% ${we.miniImageY??50}%`,transform:`scale(${we.miniImageScale??1})`,transformOrigin:`${we.miniImageX??50}% ${we.miniImageY??50}%`}})}),c.jsx("span",{className:"text-stone-300 font-bold text-xs uppercase tracking-wide",children:we.name})]}):c.jsx("span",{className:"text-stone-600 text-[10px] uppercase",children:""})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("h3",{className:"text-2xl font-serif text-emerald-500/90 italic",children:ee.title}),c.jsx("span",{className:"text-[10px] font-bold text-stone-600 uppercase tracking-widest",children:ee.date})]}),c.jsx("p",{className:"text-stone-300 leading-relaxed whitespace-pre-wrap font-light text-base md:text-lg",children:ee.content})]}),d&&c.jsxs("div",{className:"absolute top-6 right-6 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2 z-20",children:[c.jsx("button",{type:"button",onClick:$=>{$.stopPropagation(),re(ee)},className:"bg-stone-900/90 hover:bg-stone-800 text-stone-400 hover:text-white p-2 rounded-full transition-all border border-stone-800 shadow-xl",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),c.jsx("button",{type:"button",onClick:$=>G($,ee.id),className:"bg-stone-900/90 hover:bg-red-900/40 text-stone-400 hover:text-red-400 p-2 rounded-full transition-all border border-stone-800 hover:border-red-900/50 shadow-xl",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},ee.id)})]}),h&&c.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/95 backdrop-blur-2xl animate-in fade-in duration-300",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-2xl rounded-[2rem] md:rounded-[3rem] overflow-hidden shadow-[0_0_120px_rgba(0,0,0,1)] border-white/5 flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-6 md:p-10 border-b border-stone-900 flex justify-between items-center bg-gradient-to-b from-stone-900/30 to-transparent shrink-0",children:[c.jsx("div",{children:c.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-stone-100 italic",children:N==="form"?g?" ":"  ":N==="select-author"?" ?":"  ?"})}),c.jsx("button",{onClick:N==="form"?Ie:()=>y("form"),className:"text-stone-700 hover:text-white transition-all p-2 md:p-3 hover:bg-white/5 rounded-full",children:c.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar bg-[#0a0a0a]",children:[N==="form"&&c.jsxs("div",{className:"p-6 md:p-10 space-y-8 md:space-y-10",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[c.jsxs("div",{onClick:()=>P("select-author"),className:"group cursor-pointer bg-stone-900/20 hover:bg-stone-900/40 border border-stone-800 rounded-2xl p-4 transition-all flex items-center gap-4 hover:border-emerald-500/30",children:[c.jsx("div",{className:`w-14 h-14 rounded-full border-2 overflow-hidden bg-black shrink-0 ${v.authorId?"border-emerald-500/50":"border-stone-800"}`,children:v.authorId&&c.jsx("img",{src:(pe=_e(v.authorId))==null?void 0:pe.imageUrl,className:"w-full h-full object-cover",alt:""})}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-500 block mb-1",children:" ?"}),c.jsx("span",{className:`text-sm md:text-base font-bold ${v.authorId?"text-stone-200":"text-stone-600 italic"}`,children:v.authorId?(me=_e(v.authorId))==null?void 0:me.name:" "})]})]}),c.jsxs("div",{onClick:()=>P("select-target"),className:"group cursor-pointer bg-stone-900/20 hover:bg-stone-900/40 border border-stone-800 rounded-2xl p-4 transition-all flex items-center gap-4 hover:border-blue-500/30",children:[c.jsx("div",{className:`w-14 h-14 rounded-full border-2 overflow-hidden bg-black shrink-0 ${v.targetId?"border-blue-500/50":"border-stone-800"}`,children:v.targetId&&c.jsx("img",{src:(Pe=_e(v.targetId))==null?void 0:Pe.imageUrl,className:"w-full h-full object-cover",alt:""})}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-500 block mb-1",children:" ?"}),c.jsx("span",{className:`text-sm md:text-base font-bold ${v.targetId?"text-stone-200":"text-stone-600 italic"}`,children:v.targetId?(He=_e(v.targetId))==null?void 0:He.name:" /  "})]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),c.jsx("input",{placeholder:" ...",className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all font-serif italic text-lg shadow-inner",value:v.title||"",onChange:ee=>T({...v,title:ee.target.value})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),c.jsx("textarea",{placeholder:"  ...",className:"w-full bg-stone-900/30 border border-stone-800 rounded-[2rem] px-8 py-6 text-stone-300 min-h-[250px] outline-none focus:border-emerald-500/30 transition-all resize-none leading-relaxed shadow-inner custom-scrollbar text-base",value:v.content||"",onChange:ee=>T({...v,content:ee.target.value})})]})]})]}),(N==="select-author"||N==="select-target")&&c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx("div",{className:"p-4 md:p-6 border-b border-stone-900 sticky top-0 bg-[#0a0a0a]/95 backdrop-blur z-10 space-y-4",children:c.jsx("input",{type:"text",placeholder:"  ...",value:L,onChange:ee=>U(ee.target.value),className:"w-full bg-stone-900 border border-stone-800 rounded-xl px-4 py-3 text-sm text-stone-200 outline-none focus:border-emerald-900 transition-colors"})}),c.jsx("div",{className:"p-4 md:p-6 space-y-2",children:oe.map(ee=>c.jsxs("button",{onClick:()=>R(ee.id),className:"w-full flex items-center gap-4 p-3 rounded-xl hover:bg-stone-900/50 border border-transparent hover:border-stone-800 transition-all group text-left",children:[c.jsx("div",{className:"w-12 h-12 rounded-full border border-stone-800 bg-black overflow-hidden shrink-0",children:c.jsx("img",{src:ee.imageUrl,className:"w-full h-full object-cover",alt:""})}),c.jsx("div",{className:"min-w-0",children:c.jsx("span",{className:"text-stone-200 font-bold text-sm block truncate group-hover:text-emerald-400 transition-colors",children:ee.name})})]},ee.id))})]})]}),N==="form"&&c.jsxs("div",{className:"p-6 md:p-10 border-t border-stone-900 bg-stone-900/10 flex gap-4 md:gap-6 shrink-0 justify-between items-center",children:[g&&c.jsx("button",{type:"button",onClick:Fe,className:"px-6 py-4 md:py-5 bg-red-900/10 hover:bg-red-900/20 border border-red-900/30 text-red-500/70 hover:text-red-500 rounded-2xl text-[10px] uppercase font-black transition-all",children:""}),c.jsxs("div",{className:"flex gap-4 md:gap-6 flex-grow justify-end",children:[c.jsx("button",{onClick:Ie,className:"px-6 py-4 md:py-5 text-[10px] uppercase font-black text-stone-600 hover:text-stone-300",children:""}),c.jsx("button",{onClick:ce,disabled:!v.title,className:"px-8 py-4 md:py-5 bg-white hover:bg-emerald-50 text-black rounded-2xl text-[10px] uppercase font-black transition-all shadow-xl disabled:opacity-50",children:g?"":""})]})]})]})})]})},cx=({sessions:s,characters:t,onUpdate:r,isAdmin:o})=>{const[a,d]=W.useState(null),[h,p]=W.useState(null),[g,x]=W.useState(""),[N,y]=W.useState(!1),[v,T]=W.useState(""),[L,U]=W.useState(""),X=W.useRef(null),ie=s.find(G=>G.id===a);W.useEffect(()=>{X.current&&X.current.scrollIntoView({behavior:"smooth"})},[ie==null?void 0:ie.posts.length,a]);const re=()=>{if(!v.trim())return;const G={id:Date.now().toString(),name:v,description:L,posts:[]};r([...s,G]),y(!1),T(""),U("")},Ie=G=>{window.confirm("     ?")&&(r(s.filter(P=>P.id!==G)),a===G&&d(null))},ce=G=>{if(!g.trim()||!h||!a)return;const P={id:Date.now().toString(),characterId:h,content:g,timestamp:Date.now(),type:"speech"},R=s.map(_e=>_e.id===a?{..._e,posts:[..._e.posts,P]}:_e);r(R),x("")},Fe=G=>new Date(G).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return a?c.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col animate-in fade-in duration-300",children:[c.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-stone-900 shrink-0",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-stone-900 rounded-full text-stone-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:ie==null?void 0:ie.name}),c.jsx("p",{className:"text-[10px] uppercase tracking-widest text-stone-500",children:ie==null?void 0:ie.description})]})]})}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar py-6 space-y-8 pr-2",children:[(ie==null?void 0:ie.posts.length)===0?c.jsx("div",{className:"text-center text-stone-700 italic text-sm mt-10",children:"...   ,   ."}):ie==null?void 0:ie.posts.map(G=>{const P=t.find(R=>R.id===G.characterId);return P?c.jsxs("div",{className:"flex gap-4 md:gap-6 group animate-in slide-in-from-bottom-2 duration-500",children:[c.jsx("div",{className:"shrink-0 flex flex-col items-center gap-2 mt-1",children:c.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full border border-stone-800 overflow-hidden bg-black shadow-lg",children:c.jsx("img",{src:P.imageUrl,alt:P.name,style:{objectFit:"cover",objectPosition:`${P.miniImageX??50}% ${P.miniImageY??50}%`,transformOrigin:`${P.miniImageX??50}% ${P.miniImageY??50}%`,transform:`scale(${P.miniImageScale??1})`},className:"w-full h-full"})})}),c.jsxs("div",{className:"flex-grow max-w-4xl",children:[c.jsxs("div",{className:"flex items-baseline gap-3 mb-1",children:[c.jsx("span",{className:"text-stone-300 font-bold text-sm tracking-wide",children:P.name}),c.jsx("span",{className:"text-[9px] text-stone-700 font-mono",children:Fe(G.timestamp)})]}),c.jsx("div",{className:"text-stone-400 leading-relaxed font-serif whitespace-pre-wrap text-[15px] md:text-[16px]",children:G.content})]})]},G.id):null}),c.jsx("div",{ref:X})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-stone-900 shrink-0 bg-[#050505] z-10",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-3",children:t.map(G=>{const P=h===G.id;return c.jsxs("button",{onClick:()=>p(G.id),className:`flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all shrink-0 border relative ${P?"bg-stone-900/80 border-stone-800 text-stone-100":"bg-transparent border-transparent text-stone-500 hover:text-stone-400"}`,children:[c.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-black shrink-0",children:c.jsx("img",{src:G.imageUrl,style:{objectFit:"cover",objectPosition:`${G.miniImageX??50}% ${G.miniImageY??50}%`,transformOrigin:`${G.miniImageX??50}% ${G.miniImageY??50}%`,transform:`scale(${G.miniImageScale??1})`},className:"w-full h-full",alt:""})}),c.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wider",children:G.name}),P&&c.jsx("div",{className:"ml-1 w-2.5 h-2.5 rounded-sm bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)] animate-in zoom-in-50 duration-300"})]},G.id)})}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{value:g,onChange:G=>x(G.target.value),onKeyDown:G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),ce())},placeholder:h?" -...":"  ...",disabled:!h,className:"w-full bg-[#0f0f0f] border border-stone-800 rounded-xl p-4 pr-14 text-stone-300 outline-none focus:border-emerald-900/50 transition-colors resize-none h-24 custom-scrollbar font-serif"}),c.jsx("button",{onClick:()=>ce(),disabled:!g.trim()||!h,className:"absolute right-3 bottom-3 p-2 bg-stone-800 text-stone-400 rounded-lg hover:bg-emerald-600 hover:text-white disabled:opacity-30 disabled:hover:bg-stone-800 disabled:hover:text-stone-400 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})]}):c.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""}),c.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-[10px]",children:"   "})]}),c.jsx("button",{onClick:()=>y(!0),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all",children:"+  "})]}),N&&c.jsxs("div",{className:"bg-[#0f0f0f]/50 border border-stone-800 p-6 rounded-2xl space-y-4 animate-in slide-in-from-top-4",children:[c.jsx("input",{autoFocus:!0,placeholder:"   ...",className:"w-full bg-stone-900/50 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:v,onChange:G=>T(G.target.value)}),c.jsx("input",{placeholder:" ...",className:"w-full bg-stone-900/50 border border-stone-800 p-3 rounded-lg text-stone-400 outline-none focus:border-emerald-900 text-sm",value:L,onChange:G=>U(G.target.value)}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-[10px] uppercase font-bold text-stone-500",children:""}),c.jsx("button",{onClick:re,className:"px-6 py-2 bg-emerald-700 hover:bg-emerald-600 text-white rounded-lg text-[10px] uppercase font-bold transition-colors",children:""})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.length===0&&!N&&c.jsx("div",{className:"col-span-full text-center py-20 opacity-50 italic font-serif",children:"   .   ."}),s.map(G=>c.jsxs("div",{onClick:()=>d(G.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl p-6 cursor-pointer hover:border-emerald-900/50 hover:bg-stone-900/30 transition-all group flex flex-col h-[200px]",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-200 group-hover:text-emerald-400 transition-colors",children:G.name}),c.jsxs("span",{className:"text-[10px] bg-stone-900 text-stone-500 px-2 py-1 rounded-md font-mono",children:[G.posts.length," "]})]}),c.jsx("p",{className:"text-sm text-stone-500 mt-2 line-clamp-2",children:G.description}),c.jsxs("div",{className:"mt-auto pt-4 border-t border-stone-900/50 flex justify-between items-center",children:[c.jsx("span",{className:"text-[9px] uppercase tracking-widest text-stone-600 font-bold group-hover:text-stone-400",children:"  "}),o&&c.jsx("button",{onClick:P=>{P.stopPropagation(),Ie(G.id)},className:"text-stone-800 hover:text-red-500 p-1 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},G.id))]})]})},ux=({onConnect:s,onDisconnect:t,onClose:r,isConnected:o})=>c.jsx("div",{className:"fixed inset-0 z-[120] bg-black/95 backdrop-blur-md flex items-center justify-center p-6",onClick:r,children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-emerald-900/50 w-full max-w-lg rounded-3xl p-8 space-y-8 shadow-[0_0_80px_rgba(16,185,129,0.05)]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-serif text-emerald-500 italic",children:" "}),c.jsx("p",{className:"text-stone-500 text-[10px] uppercase tracking-widest mt-2",children:"  "})]}),c.jsx("button",{onClick:r,className:"text-stone-600 hover:text-stone-300 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o?c.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"p-6 rounded-2xl border bg-emerald-950/20 border-emerald-500/30",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse bg-emerald-500"}),c.jsx("span",{className:"text-sm font-bold uppercase tracking-widest text-emerald-400",children:" "})]}),c.jsx("div",{className:"space-y-2",children:c.jsx("p",{className:"text-[10px] text-stone-600 mt-2 leading-relaxed",children:"     .  ,     ,    ."})})]}),c.jsx("button",{onClick:t,className:"w-full py-4 rounded-xl border border-red-900/30 text-red-500/70 hover:bg-red-950/20 hover:text-red-500 hover:border-red-900/60 transition-all text-[10px] uppercase font-bold tracking-[0.2em]",children:" "})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-stone-900/30 border border-stone-800 rounded-2xl p-6 text-center space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-stone-900 rounded-full flex items-center justify-center mx-auto text-stone-600",children:c.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),c.jsx("p",{className:"text-stone-400 text-sm leading-relaxed",children:"  ,           ."})]}),c.jsx("button",{onClick:s,className:"w-full py-5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 hover:border-emerald-500/50 text-emerald-500 rounded-xl text-[11px] uppercase font-bold tracking-[0.25em] transition-all shadow-lg shadow-emerald-900/10",children:""}),c.jsx("p",{className:"text-[9px] text-stone-600 text-center border-t border-stone-900 pt-4",children:":          ."})]})]})}),bh=["","","","","","",""],Nh=["","NPC","","",""],cc=[{id:"1",name:" ",age:34,height:"182 ",imageUrl:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=800&auto=format&fit=crop",tags:["","",""],hiddenTags:[""],connections:[{id:"2",name:"  ",role:""}],additionalInfo:"      ,     . ,         ,         .     ,    ."},{id:"2",name:"  ",age:21,height:"168 ",imageUrl:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=800&auto=format&fit=crop",tags:["",""],hiddenTags:["",""],connections:[{id:"1",name:" ",role:"  "}],additionalInfo:"   ,          .         .    ,        ."},{id:"3",name:"",age:"124 ",height:"195 ",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=800&auto=format&fit=crop",tags:["",""],hiddenTags:["NPC"],connections:[{id:"1",name:" ",role:" "}],additionalInfo:"  ,       .         .      ."}],dx=()=>{};var Ch={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(s,t){if(!s)throw us(t)},us=function(s){return new Error("Firebase Database ("+wp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=function(s){const t=[];let r=0;for(let o=0;o<s.length;o++){let a=s.charCodeAt(o);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++o)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},fx=function(s){const t=[];let r=0,o=0;for(;r<s.length;){const a=s[r++];if(a<128)t[o++]=String.fromCharCode(a);else if(a>191&&a<224){const d=s[r++];t[o++]=String.fromCharCode((a&31)<<6|d&63)}else if(a>239&&a<365){const d=s[r++],h=s[r++],p=s[r++],g=((a&7)<<18|(d&63)<<12|(h&63)<<6|p&63)-65536;t[o++]=String.fromCharCode(55296+(g>>10)),t[o++]=String.fromCharCode(56320+(g&1023))}else{const d=s[r++],h=s[r++];t[o++]=String.fromCharCode((a&15)<<12|(d&63)<<6|h&63)}}return t.join("")},Bc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<s.length;a+=3){const d=s[a],h=a+1<s.length,p=h?s[a+1]:0,g=a+2<s.length,x=g?s[a+2]:0,N=d>>2,y=(d&3)<<4|p>>4;let v=(p&15)<<2|x>>6,T=x&63;g||(T=64,h||(v=64)),o.push(r[N],r[y],r[v],r[T])}return o.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(bp(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):fx(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<s.length;){const d=r[s.charAt(a++)],p=a<s.length?r[s.charAt(a)]:0;++a;const x=a<s.length?r[s.charAt(a)]:64;++a;const y=a<s.length?r[s.charAt(a)]:64;if(++a,d==null||p==null||x==null||y==null)throw new hx;const v=d<<2|p>>4;if(o.push(v),x!==64){const T=p<<4&240|x>>2;if(o.push(T),y!==64){const L=x<<6&192|y;o.push(L)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class hx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Np=function(s){const t=bp(s);return Bc.encodeByteArray(t,!0)},Fo=function(s){return Np(s).replace(/\./g,"")},bc=function(s){try{return Bc.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(s){return Cp(void 0,s)}function Cp(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!mx(r)||(s[r]=Cp(s[r],t[r]));return s}function mx(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=()=>gx().__FIREBASE_DEFAULTS__,vx=()=>{if(typeof process>"u"||typeof Ch>"u")return;const s=Ch.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},yx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&bc(s[1]);return t&&JSON.parse(t)},kp=()=>{try{return dx()||xx()||vx()||yx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},_x=s=>{var t,r;return(r=(t=kp())==null?void 0:t.emulatorHosts)==null?void 0:r[s]},wx=s=>{const t=_x(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),o]:[t.substring(0,r),o]},Sp=()=>{var s;return(s=kp())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bx(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},o=t||"demo-project",a=s.iat||0,d=s.sub||s.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Fo(JSON.stringify(r)),Fo(JSON.stringify(h)),""].join(".")}const ni={};function Cx(){const s={prod:[],emulator:[]};for(const t of Object.keys(ni))ni[t]?s.emulator.push(t):s.prod.push(t);return s}function kx(s){let t=document.getElementById(s),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),r=!0),{created:r,element:t}}let kh=!1;function Sx(s,t){if(typeof window>"u"||typeof document>"u"||!Wc(window.location.host)||ni[s]===t||ni[s]||kh)return;ni[s]=t;function r(v){return`__firebase__banner__${v}`}const o="__firebase__banner",d=Cx().prod.length>0;function h(){const v=document.getElementById(o);v&&v.remove()}function p(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function g(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function x(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{kh=!0,h()},v}function N(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=kx(o),T=r("text"),L=document.getElementById(T)||document.createElement("span"),U=r("learnmore"),X=document.getElementById(U)||document.createElement("a"),ie=r("preprendIcon"),re=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const Ie=v.element;p(Ie),N(X,U);const ce=x();g(re,ie),Ie.append(re,L,X,ce),document.body.appendChild(Ie)}d?(L.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ep(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ex())}function jx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ix(){return wp.NODE_ADMIN===!0}function Tx(){try{return typeof indexedDB=="object"}catch{return!1}}function Rx(){return new Promise((s,t)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(o),s(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var d;t(((d=a.error)==null?void 0:d.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="FirebaseError";class yi extends Error{constructor(t,r,o){super(r),this.code=t,this.customData=o,this.name=Px,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jp.prototype.create)}}class jp{constructor(t,r,o){this.service=t,this.serviceName=r,this.errors=o}create(t,...r){const o=r[0]||{},a=`${this.service}/${t}`,d=this.errors[t],h=d?Lx(d,o):"Error",p=`${this.serviceName}: ${h} (${a}).`;return new yi(a,p,o)}}function Lx(s,t){return s.replace(Mx,(r,o)=>{const a=t[o];return a!=null?String(a):`<${o}?>`})}const Mx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(s){return JSON.parse(s)}function wt(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=function(s){let t={},r={},o={},a="";try{const d=s.split(".");t=ai(bc(d[0])||""),r=ai(bc(d[1])||""),a=d[2],o=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:o,signature:a}},Dx=function(s){const t=Ip(s),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},Ox=function(s){const t=Ip(s).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Cr(s,t){if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}function Sh(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function zo(s,t,r){const o={};for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=t.call(r,s[a],a,s));return o}function Uo(s,t){if(s===t)return!0;const r=Object.keys(s),o=Object.keys(t);for(const a of r){if(!o.includes(a))return!1;const d=s[a],h=t[a];if(Eh(d)&&Eh(h)){if(!Uo(d,h))return!1}else if(d!==h)return!1}for(const a of o)if(!r.includes(a))return!1;return!0}function Eh(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(s){const t=[];for(const[r,o]of Object.entries(s))Array.isArray(o)?o.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const o=this.W_;if(typeof t=="string")for(let y=0;y<16;y++)o[y]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let y=0;y<16;y++)o[y]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let y=16;y<80;y++){const v=o[y-3]^o[y-8]^o[y-14]^o[y-16];o[y]=(v<<1|v>>>31)&4294967295}let a=this.chain_[0],d=this.chain_[1],h=this.chain_[2],p=this.chain_[3],g=this.chain_[4],x,N;for(let y=0;y<80;y++){y<40?y<20?(x=p^d&(h^p),N=1518500249):(x=d^h^p,N=1859775393):y<60?(x=d&h|p&(d|h),N=2400959708):(x=d^h^p,N=3395469782);const v=(a<<5|a>>>27)+x+g+N+o[y]&4294967295;g=p,p=h,h=(d<<30|d>>>2)&4294967295,d=a,a=v}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+d&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const o=r-this.blockSize;let a=0;const d=this.buf_;let h=this.inbuf_;for(;a<r;){if(h===0)for(;a<=o;)this.compress_(t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<r;)if(d[h]=t.charCodeAt(a),++h,++a,h===this.blockSize){this.compress_(d),h=0;break}}else for(;a<r;)if(d[h]=t[a],++h,++a,h===this.blockSize){this.compress_(d),h=0;break}}this.inbuf_=h,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=r&255,r/=256;this.compress_(this.buf_);let o=0;for(let a=0;a<5;a++)for(let d=24;d>=0;d-=8)t[o]=this.chain_[a]>>d&255,++o;return t}}function Hc(s,t){return`${s} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=function(s){const t=[];let r=0;for(let o=0;o<s.length;o++){let a=s.charCodeAt(o);if(a>=55296&&a<=56319){const d=a-55296;o++,Y(o<s.length,"Surrogate pair missing trail surrogate.");const h=s.charCodeAt(o)-56320;a=65536+(d<<10)+h}a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):a<65536?(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},tl=function(s){let t=0;for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(s){return s&&s._delegate?s._delegate:s}class ci{constructor(t,r,o){this.name=t,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const o=new vi;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Bx(t))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const d=this.getOrInitializeService({instanceIdentifier:a});o.resolve(d)}catch{}}}}clearInstance(t=_r){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=_r){return this.instances.has(t)}getOptions(t=_r){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:r});for(const[d,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);o===p&&h.resolve(a)}return a}onInit(t,r){const o=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(o)??new Set;a.add(t),this.onInitCallbacks.set(o,a);const d=this.instances.get(o);return d&&t(d,o),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const o=this.onInitCallbacks.get(r);if(o)for(const a of o)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:$x(t),options:r}),this.instances.set(t,o),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=_r){return this.component?this.component.multipleInstances?t:_r:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $x(s){return s===_r?void 0:s}function Bx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Ux(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const Hx={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},Vx=qe.INFO,Yx={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Qx=(s,t,...r)=>{if(t<s.logLevel)return;const o=new Date().toISOString(),a=Yx[t];if(a)console[a](`[${o}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tp{constructor(t){this.name=t,this._logLevel=Vx,this._logHandler=Qx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Hx[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...t),this._logHandler(this,qe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...t),this._logHandler(this,qe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...t),this._logHandler(this,qe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...t),this._logHandler(this,qe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...t),this._logHandler(this,qe.ERROR,...t)}}const Gx=(s,t)=>t.some(r=>s instanceof r);let jh,Ih;function Kx(){return jh||(jh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qx(){return Ih||(Ih=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rp=new WeakMap,Nc=new WeakMap,Pp=new WeakMap,uc=new WeakMap,Vc=new WeakMap;function Xx(s){const t=new Promise((r,o)=>{const a=()=>{s.removeEventListener("success",d),s.removeEventListener("error",h)},d=()=>{r(er(s.result)),a()},h=()=>{o(s.error),a()};s.addEventListener("success",d),s.addEventListener("error",h)});return t.then(r=>{r instanceof IDBCursor&&Rp.set(r,s)}).catch(()=>{}),Vc.set(t,s),t}function Jx(s){if(Nc.has(s))return;const t=new Promise((r,o)=>{const a=()=>{s.removeEventListener("complete",d),s.removeEventListener("error",h),s.removeEventListener("abort",h)},d=()=>{r(),a()},h=()=>{o(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",d),s.addEventListener("error",h),s.addEventListener("abort",h)});Nc.set(s,t)}let Cc={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return Nc.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Pp.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return er(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Zx(s){Cc=s(Cc)}function ev(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const o=s.call(dc(this),t,...r);return Pp.set(o,t.sort?t.sort():[t]),er(o)}:qx().includes(s)?function(...t){return s.apply(dc(this),t),er(Rp.get(this))}:function(...t){return er(s.apply(dc(this),t))}}function tv(s){return typeof s=="function"?ev(s):(s instanceof IDBTransaction&&Jx(s),Gx(s,Kx())?new Proxy(s,Cc):s)}function er(s){if(s instanceof IDBRequest)return Xx(s);if(uc.has(s))return uc.get(s);const t=tv(s);return t!==s&&(uc.set(s,t),Vc.set(t,s)),t}const dc=s=>Vc.get(s);function nv(s,t,{blocked:r,upgrade:o,blocking:a,terminated:d}={}){const h=indexedDB.open(s,t),p=er(h);return o&&h.addEventListener("upgradeneeded",g=>{o(er(h.result),g.oldVersion,g.newVersion,er(h.transaction),g)}),r&&h.addEventListener("blocked",g=>r(g.oldVersion,g.newVersion,g)),p.then(g=>{d&&g.addEventListener("close",()=>d()),a&&g.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const rv=["get","getKey","getAll","getAllKeys","count"],sv=["put","add","delete","clear"],fc=new Map;function Th(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(fc.get(t))return fc.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,a=sv.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(a||rv.includes(r)))return;const d=async function(h,...p){const g=this.transaction(h,a?"readwrite":"readonly");let x=g.store;return o&&(x=x.index(p.shift())),(await Promise.all([x[r](...p),a&&g.done]))[0]};return fc.set(t,d),d}Zx(s=>({...s,get:(t,r,o)=>Th(t,r)||s.get(t,r,o),has:(t,r)=>!!Th(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ov(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function ov(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const kc="@firebase/app",Rh="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new Tp("@firebase/app"),lv="@firebase/app-compat",av="@firebase/analytics-compat",cv="@firebase/analytics",uv="@firebase/app-check-compat",dv="@firebase/app-check",fv="@firebase/auth",hv="@firebase/auth-compat",pv="@firebase/database",mv="@firebase/data-connect",gv="@firebase/database-compat",xv="@firebase/functions",vv="@firebase/functions-compat",yv="@firebase/installations",_v="@firebase/installations-compat",wv="@firebase/messaging",bv="@firebase/messaging-compat",Nv="@firebase/performance",Cv="@firebase/performance-compat",kv="@firebase/remote-config",Sv="@firebase/remote-config-compat",Ev="@firebase/storage",jv="@firebase/storage-compat",Iv="@firebase/firestore",Tv="@firebase/ai",Rv="@firebase/firestore-compat",Pv="firebase",Lv="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="[DEFAULT]",Mv={[kc]:"fire-core",[lv]:"fire-core-compat",[cv]:"fire-analytics",[av]:"fire-analytics-compat",[dv]:"fire-app-check",[uv]:"fire-app-check-compat",[fv]:"fire-auth",[hv]:"fire-auth-compat",[pv]:"fire-rtdb",[mv]:"fire-data-connect",[gv]:"fire-rtdb-compat",[xv]:"fire-fn",[vv]:"fire-fn-compat",[yv]:"fire-iid",[_v]:"fire-iid-compat",[wv]:"fire-fcm",[bv]:"fire-fcm-compat",[Nv]:"fire-perf",[Cv]:"fire-perf-compat",[kv]:"fire-rc",[Sv]:"fire-rc-compat",[Ev]:"fire-gcs",[jv]:"fire-gcs-compat",[Iv]:"fire-fst",[Rv]:"fire-fst-compat",[Tv]:"fire-vertex","fire-js":"fire-js",[Pv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new Map,Dv=new Map,Ec=new Map;function Ph(s,t){try{s.container.addComponent(t)}catch(r){Rn.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function Bo(s){const t=s.name;if(Ec.has(t))return Rn.debug(`There were multiple attempts to register component ${t}.`),!1;Ec.set(t,s);for(const r of $o.values())Ph(r,s);for(const r of Dv.values())Ph(r,s);return!0}function Ov(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function Av(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new jp("app","Firebase",Fv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t,r,o){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=Lv;function Lp(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const o={name:Sc,automaticDataCollectionEnabled:!0,...t},a=o.name;if(typeof a!="string"||!a)throw tr.create("bad-app-name",{appName:String(a)});if(r||(r=Sp()),!r)throw tr.create("no-options");const d=$o.get(a);if(d){if(Uo(r,d.options)&&Uo(o,d.config))return d;throw tr.create("duplicate-app",{appName:a})}const h=new Wx(a);for(const g of Ec.values())h.addComponent(g);const p=new zv(r,o,h);return $o.set(a,p),p}function $v(s=Sc){const t=$o.get(s);if(!t&&s===Sc&&Sp())return Lp();if(!t)throw tr.create("no-app",{appName:s});return t}function rs(s,t,r){let o=Mv[s]??s;r&&(o+=`-${r}`);const a=o.match(/\s|\//),d=t.match(/\s|\//);if(a||d){const h=[`Unable to register library "${o}" with version "${t}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&d&&h.push("and"),d&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Rn.warn(h.join(" "));return}Bo(new ci(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firebase-heartbeat-database",Wv=1,ui="firebase-heartbeat-store";let hc=null;function Mp(){return hc||(hc=nv(Bv,Wv,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(ui)}catch(r){console.warn(r)}}}}).catch(s=>{throw tr.create("idb-open",{originalErrorMessage:s.message})})),hc}async function Hv(s){try{const r=(await Mp()).transaction(ui),o=await r.objectStore(ui).get(Dp(s));return await r.done,o}catch(t){if(t instanceof yi)Rn.warn(t.message);else{const r=tr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Rn.warn(r.message)}}}async function Lh(s,t){try{const o=(await Mp()).transaction(ui,"readwrite");await o.objectStore(ui).put(t,Dp(s)),await o.done}catch(r){if(r instanceof yi)Rn.warn(r.message);else{const o=tr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Rn.warn(o.message)}}}function Dp(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=1024,Yv=30;class Qv{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Kv(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Mh();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(h=>h.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:a}),this._heartbeatsCache.heartbeats.length>Yv){const h=qv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Rn.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Mh(),{heartbeatsToSend:o,unsentEntries:a}=Gv(this._heartbeatsCache.heartbeats),d=Fo(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(r){return Rn.warn(r),""}}}function Mh(){return new Date().toISOString().substring(0,10)}function Gv(s,t=Vv){const r=[];let o=s.slice();for(const a of s){const d=r.find(h=>h.agent===a.agent);if(d){if(d.dates.push(a.date),Dh(r)>t){d.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Dh(r)>t){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class Kv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tx()?Rx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Hv(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return Lh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return Lh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Dh(s){return Fo(JSON.stringify({version:2,heartbeats:s})).length}function qv(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let o=1;o<s.length;o++)s[o].date<r&&(r=s[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(s){Bo(new ci("platform-logger",t=>new iv(t),"PRIVATE")),Bo(new ci("heartbeat",t=>new Qv(t),"PRIVATE")),rs(kc,Rh,s),rs(kc,Rh,"esm2020"),rs("fire-js","")}Xv("");var Jv="firebase",Zv="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(Jv,Zv,"app");var Oh={};const Ah="@firebase/database",Fh="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Op="";function ey(s){Op=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),wt(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:ai(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return dn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const t=window[s];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ty(t)}}catch{}return new ny},br=Ap("localStorage"),ry=Ap("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new Tp("@firebase/database"),Fp=(function(){let s=1;return function(){return s++}})(),zp=function(s){const t=zx(s),r=new Fx;r.update(t);const o=r.digest();return Bc.encodeByteArray(o)},_i=function(...s){let t="";for(let r=0;r<s.length;r++){const o=s[r];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?t+=_i.apply(null,o):typeof o=="object"?t+=wt(o):t+=o,t+=" "}return t};let ri=null,zh=!0;const sy=function(s,t){Y(!0,"Can't turn on custom loggers persistently."),ss.logLevel=qe.VERBOSE,ri=ss.log.bind(ss)},It=function(...s){if(zh===!0&&(zh=!1,ri===null&&ry.get("logging_enabled")===!0&&sy()),ri){const t=_i.apply(null,s);ri(t)}},wi=function(s){return function(...t){It(s,...t)}},jc=function(...s){const t="FIREBASE INTERNAL ERROR: "+_i(...s);ss.error(t)},Pn=function(...s){const t=`FIREBASE FATAL ERROR: ${_i(...s)}`;throw ss.error(t),new Error(t)},Ut=function(...s){const t="FIREBASE WARNING: "+_i(...s);ss.warn(t)},iy=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ut("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Yc=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},oy=function(s){if(document.readyState==="complete")s();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},ls="[MIN_NAME]",kr="[MAX_NAME]",fs=function(s,t){if(s===t)return 0;if(s===ls||t===kr)return-1;if(t===ls||s===kr)return 1;{const r=Uh(s),o=Uh(t);return r!==null?o!==null?r-o===0?s.length-t.length:r-o:-1:o!==null?1:s<t?-1:1}},ly=function(s,t){return s===t?0:s<t?-1:1},Js=function(s,t){if(t&&s in t)return t[s];throw new Error("Missing required key ("+s+") in object: "+wt(t))},Qc=function(s){if(typeof s!="object"||s===null)return wt(s);const t=[];for(const o in s)t.push(o);t.sort();let r="{";for(let o=0;o<t.length;o++)o!==0&&(r+=","),r+=wt(t[o]),r+=":",r+=Qc(s[t[o]]);return r+="}",r},Up=function(s,t){const r=s.length;if(r<=t)return[s];const o=[];for(let a=0;a<r;a+=t)a+t>r?o.push(s.substring(a,r)):o.push(s.substring(a,a+t));return o};function $t(s,t){for(const r in s)s.hasOwnProperty(r)&&t(r,s[r])}const $p=function(s){Y(!Yc(s),"Invalid JSON number");const t=11,r=52,o=(1<<t-1)-1;let a,d,h,p,g;s===0?(d=0,h=0,a=1/s===-1/0?1:0):(a=s<0,s=Math.abs(s),s>=Math.pow(2,1-o)?(p=Math.min(Math.floor(Math.log(s)/Math.LN2),o),d=p+o,h=Math.round(s*Math.pow(2,r-p)-Math.pow(2,r))):(d=0,h=Math.round(s/Math.pow(2,1-o-r))));const x=[];for(g=r;g;g-=1)x.push(h%2?1:0),h=Math.floor(h/2);for(g=t;g;g-=1)x.push(d%2?1:0),d=Math.floor(d/2);x.push(a?1:0),x.reverse();const N=x.join("");let y="";for(g=0;g<64;g+=8){let v=parseInt(N.substr(g,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},ay=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},cy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function uy(s,t){let r="Unknown Error";s==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?r="Client doesn't have permission to access the desired data.":s==="unavailable"&&(r="The service is unavailable");const o=new Error(s+" at "+t._path.toString()+": "+r);return o.code=s.toUpperCase(),o}const dy=new RegExp("^-?(0*)\\d{1,10}$"),fy=-2147483648,hy=2147483647,Uh=function(s){if(dy.test(s)){const t=Number(s);if(t>=fy&&t<=hy)return t}return null},hs=function(s){try{s()}catch(t){setTimeout(()=>{const r=t.stack||"";throw Ut("Exception was thrown by user callback.",r),t},Math.floor(0))}},py=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},si=function(s,t){const r=setTimeout(s,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,r){this.appCheckProvider=r,this.appName=t.name,Av(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((r,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)==null||r.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){Ut(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,r,o){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(a=>this.auth_=a)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(It("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ut(t)}}class Oo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Oo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="5",Bp="v",Wp="s",Hp="r",Vp="f",Yp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qp="ls",Gp="p",Ic="ac",Kp="websocket",qp="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,r,o,a,d=!1,h="",p=!1,g=!1,x=null){this.secure=r,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=d,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=g,this.emulatorOptions=x,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=br.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&br.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function xy(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function Jp(s,t,r){Y(typeof t=="string","typeof type must == string"),Y(typeof r=="object","typeof params must == object");let o;if(t===Kp)o=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(t===qp)o=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);xy(s)&&(r.ns=s.namespace);const a=[];return $t(r,(d,h)=>{a.push(d+"="+h)}),o+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.counters_={}}incrementCounter(t,r=1){dn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return px(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc={},mc={};function Kc(s){const t=s.toString();return pc[t]||(pc[t]=new vy),pc[t]}function yy(s,t){const r=s.toString();return mc[r]||(mc[r]=t()),mc[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<o.length;++a)o[a]&&hs(()=>{this.onMessage_(o[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="start",wy="close",by="pLPCommand",Ny="pRTLPCB",Zp="id",em="pw",tm="ser",Cy="cb",ky="seg",Sy="ts",Ey="d",jy="dframe",nm=1870,rm=30,Iy=nm-rm,Ty=25e3,Ry=3e4;class ns{constructor(t,r,o,a,d,h,p){this.connId=t,this.repoInfo=r,this.applicationId=o,this.appCheckToken=a,this.authToken=d,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wi(t),this.stats_=Kc(r),this.urlFn=g=>(this.appCheckToken&&(g[Ic]=this.appCheckToken),Jp(r,qp,g))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new _y(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ry)),oy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qc((...d)=>{const[h,p,g,x,N]=d;if(this.incrementIncomingBytes_(d),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===$h)this.id=p,this.password=g;else if(h===wy)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...d)=>{const[h,p]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(h,p)},()=>{this.onClosed_()},this.urlFn);const o={};o[$h]="t",o[tm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[Cy]=this.scriptTagHolder.uniqueCallbackIdentifier),o[Bp]=Gc,this.transportSessionId&&(o[Wp]=this.transportSessionId),this.lastSessionId&&(o[Qp]=this.lastSessionId),this.applicationId&&(o[Gp]=this.applicationId),this.appCheckToken&&(o[Ic]=this.appCheckToken),typeof location<"u"&&location.hostname&&Yp.test(location.hostname)&&(o[Hp]=Vp);const a=this.urlFn(o);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ns.forceAllow_=!0}static forceDisallow(){ns.forceDisallow_=!0}static isAvailable(){return ns.forceAllow_?!0:!ns.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ay()&&!cy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=wt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Np(r),a=Up(o,Iy);for(let d=0;d<a.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[d]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const o={};o[jy]="t",o[Zp]=t,o[em]=r,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=wt(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class qc{constructor(t,r,o,a){this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Fp(),window[by+this.uniqueCallbackIdentifier]=t,window[Ny+this.uniqueCallbackIdentifier]=r,this.myIFrame=qc.createIFrame_();let d="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(d='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(p){It("frame writing exception"),p.stack&&It(p.stack),It(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||It("No IE domain setting required")}catch{const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Zp]=this.myID,t[em]=this.myPW,t[tm]=this.currentSerial;let r=this.urlFn(t),o="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+rm+o.length<=nm;){const h=this.pendingSegs.shift();o=o+"&"+ky+a+"="+h.seg+"&"+Sy+a+"="+h.ts+"&"+Ey+a+"="+h.d,a++}return r=r+o,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,o){this.pendingSegs.push({seg:t,ts:r,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const o=()=>{this.outstandingRequests.delete(r),this.newRequest_()},a=setTimeout(o,Math.floor(Ty)),d=()=>{clearTimeout(a),o()};this.addTag(t,d)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const a=o.readyState;(!a||a==="loaded"||a==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=()=>{It("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=16384,Ly=45e3;let Wo=null;typeof MozWebSocket<"u"?Wo=MozWebSocket:typeof WebSocket<"u"&&(Wo=WebSocket);class ln{constructor(t,r,o,a,d,h,p){this.connId=t,this.applicationId=o,this.appCheckToken=a,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wi(this.connId),this.stats_=Kc(r),this.connURL=ln.connectionURL_(r,h,p,a,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,a,d){const h={};return h[Bp]=Gc,typeof location<"u"&&location.hostname&&Yp.test(location.hostname)&&(h[Hp]=Vp),r&&(h[Wp]=r),o&&(h[Qp]=o),a&&(h[Ic]=a),d&&(h[Gp]=d),Jp(t,Kp,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,br.set("previous_websocket_failure",!0);try{let o;Ix(),this.mySock=new Wo(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){ln.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(r);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&Wo!==null&&!ln.forceDisallow_}static previouslyFailed(){return br.isInMemoryStorage||br.get("previous_websocket_failure")===!0}markConnectionHealthy(){br.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=ai(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Y(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);o!==null&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=wt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Up(r,Py);o.length>1&&this.sendString_(String(o.length));for(let a=0;a<o.length;a++)this.sendString_(o[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ly))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ln.responsesRequiredToBeHealthy=2;ln.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{static get ALL_TRANSPORTS(){return[ns,ln]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=ln&&ln.isAvailable();let o=r&&!ln.previouslyFailed();if(t.webSocketOnly&&(r||Ut("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ln];else{const a=this.transports_=[];for(const d of di.ALL_TRANSPORTS)d&&d.isAvailable()&&a.push(d);di.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}di.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=6e4,Dy=5e3,Oy=10*1024,Ay=100*1024,gc="t",Bh="d",Fy="s",Wh="r",zy="e",Hh="o",Vh="a",Yh="n",Qh="p",Uy="h";class $y{constructor(t,r,o,a,d,h,p,g,x,N){this.id=t,this.repoInfo_=r,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=d,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=g,this.onKill_=x,this.lastSessionId=N,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wi("c:"+this.id+":"),this.transportManager_=new di(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,o)},Math.floor(0));const a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=si(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ay?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Oy?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(gc in t){const r=t[gc];r===Vh?this.upgradeIfSecondaryHealthy_():r===Wh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Hh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=Js("t",t),o=Js("d",t);if(r==="c")this.onSecondaryControl_(o);else if(r==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Qh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Vh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Yh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=Js("t",t),o=Js("d",t);r==="c"?this.onControl_(o):r==="d"&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=Js(gc,t);if(Bh in t){const o=t[Bh];if(r===Uy){const a={...o};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(r===Yh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===Fy?this.onConnectionShutdown_(o):r===Wh?this.onReset_(o):r===zy?jc("Server Error: "+o):r===Hh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jc("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,o=t.v,a=t.h;this.sessionId=t.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),Gc!==o&&Ut("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),si(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(My))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):si(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Dy))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Qh,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(br.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{put(t,r,o,a){}merge(t,r,o,a){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,o){}onDisconnectMerge(t,r,o){}onDisconnectCancel(t,r){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(t){this.allowedEvents_=t,this.listeners_={},Y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let a=0;a<o.length;a++)o[a].callback.apply(o[a].context,r)}}on(t,r,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:o});const a=this.getInitialEvent(t);a&&r.apply(o,a)}off(t,r,o){this.validateEventType_(t);const a=this.listeners_[t]||[];for(let d=0;d<a.length;d++)if(a[d].callback===r&&(!o||o===a[d].context)){a.splice(d,1);return}}validateEventType_(t){Y(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends im{static getInstance(){return new Ho}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ep()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return Y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=32,Kh=768;class Ge{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let o=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}}function We(){return new Ge("")}function Le(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function rr(s){return s.pieces_.length-s.pieceNum_}function Xe(s){let t=s.pieceNum_;return t<s.pieces_.length&&t++,new Ge(s.pieces_,t)}function om(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function By(s){let t="";for(let r=s.pieceNum_;r<s.pieces_.length;r++)s.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(s.pieces_[r])));return t||"/"}function lm(s,t=0){return s.pieces_.slice(s.pieceNum_+t)}function am(s){if(s.pieceNum_>=s.pieces_.length)return null;const t=[];for(let r=s.pieceNum_;r<s.pieces_.length-1;r++)t.push(s.pieces_[r]);return new Ge(t,0)}function ht(s,t){const r=[];for(let o=s.pieceNum_;o<s.pieces_.length;o++)r.push(s.pieces_[o]);if(t instanceof Ge)for(let o=t.pieceNum_;o<t.pieces_.length;o++)r.push(t.pieces_[o]);else{const o=t.split("/");for(let a=0;a<o.length;a++)o[a].length>0&&r.push(o[a])}return new Ge(r,0)}function Oe(s){return s.pieceNum_>=s.pieces_.length}function Ft(s,t){const r=Le(s),o=Le(t);if(r===null)return t;if(r===o)return Ft(Xe(s),Xe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+s+")")}function Xc(s,t){if(rr(s)!==rr(t))return!1;for(let r=s.pieceNum_,o=t.pieceNum_;r<=s.pieces_.length;r++,o++)if(s.pieces_[r]!==t.pieces_[o])return!1;return!0}function an(s,t){let r=s.pieceNum_,o=t.pieceNum_;if(rr(s)>rr(t))return!1;for(;r<s.pieces_.length;){if(s.pieces_[r]!==t.pieces_[o])return!1;++r,++o}return!0}class Wy{constructor(t,r){this.errorPrefix_=r,this.parts_=lm(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=tl(this.parts_[o]);cm(this)}}function Hy(s,t){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=tl(t),cm(s)}function Vy(s){const t=s.parts_.pop();s.byteLength_-=tl(t),s.parts_.length>0&&(s.byteLength_-=1)}function cm(s){if(s.byteLength_>Kh)throw new Error(s.errorPrefix_+"has a key path longer than "+Kh+" bytes ("+s.byteLength_+").");if(s.parts_.length>Gh)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Gh+") or object contains a cycle "+wr(s))}function wr(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends im{static getInstance(){return new Jc}constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(t){return Y(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=1e3,Yy=300*1e3,qh=30*1e3,Qy=1.3,Gy=3e4,Ky="server_kill",Xh=3;class Tn extends sm{constructor(t,r,o,a,d,h,p,g){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=a,this.onServerInfoUpdate_=d,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=g,this.id=Tn.nextPersistentConnectionId_++,this.log_=wi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zs,this.maxReconnectDelay_=Yy,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jc.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ho.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const a=++this.requestNumber_,d={r:a,a:t,b:r};this.log_(wt(d)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[a]=o)}get(t){this.initConnection_();const r=new vi,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;h.s==="ok"?r.resolve(p):r.reject(p)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(d),r.promise}listen(t,r,o,a){this.initConnection_();const d=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+d),this.listens.has(h)||this.listens.set(h,new Map),Y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(h).has(d),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:o};this.listens.get(h).set(d,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+o+" for "+a);const d={p:o},h="q";t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest(h,d,p=>{const g=p.d,x=p.s;Tn.warnOnListenWarnings_(g,r),(this.listens.get(o)&&this.listens.get(o).get(a))===t&&(this.log_("listen response",p),x!=="ok"&&this.removeListen_(o,a),t.onComplete&&t.onComplete(x,g))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&dn(t,"w")){const o=Cr(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Ut(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Ox(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qh)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=Dx(t)?"auth":"gauth",o={cred:t};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(r,o,a=>{const d=a.s,h=a.d||"error";this.authToken_===t&&(d==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+a),Y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,a)&&this.connected_&&this.sendUnlisten_(o,a,t._queryObject,r)}sendUnlisten_(t,r,o,a){this.log_("Unlisten on "+t+" for "+r);const d={p:t},h="n";a&&(d.q=o,d.t=a),this.sendRequest(h,d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,a){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,o,a){this.putInternal("p",t,r,o,a)}merge(t,r,o,a){this.putInternal("m",t,r,o,a)}putInternal(t,r,o,a,d){this.initConnection_();const h={p:r,d:o};d!==void 0&&(h.h=d),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{if(o.s!=="ok"){const d=o.d;this.log_("reportStats","Error sending stats: "+d)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+wt(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):jc("Unrecognized action received from server: "+wt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Zs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Gy&&(this.reconnectDelay_=Zs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Qy)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Tn.nextConnectionId_++,d=this.lastSessionId;let h=!1,p=null;const g=function(){p?p.close():(h=!0,o())},x=function(y){Y(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(y)};this.realtime_={close:g,sendRequest:x};const N=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(N),this.appCheckTokenProvider_.getToken(N)]);h?It("getToken() completed but was canceled"):(It("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,p=new $y(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,o,T=>{Ut(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ky)},d))}catch(y){this.log_("Failed to get token: "+y),h||(this.repoInfo_.nodeAdmin&&Ut(y),g())}}}interrupt(t){It("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){It("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Sh(this.interruptReasons_)&&(this.reconnectDelay_=Zs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;r?o=r.map(d=>Qc(d)).join("$"):o="default";const a=this.removeListen_(t,o);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const o=new Ge(t).toString();let a;if(this.listens.has(o)){const d=this.listens.get(o);a=d.get(r),d.delete(r),d.size===0&&this.listens.delete(o)}else a=void 0;return a}onAuthRevoked_(t,r){It("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Xh&&(this.reconnectDelay_=qh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){It("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Xh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+Op.replace(/\./g,"-")]=1,Ep()?t["framework.cordova"]=1:jx()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ho.getInstance().currentlyOnline();return Sh(this.interruptReasons_)&&t}}Tn.nextPersistentConnectionId_=0;Tn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new Me(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const o=new Me(ls,t),a=new Me(ls,r);return this.compare(o,a)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo;class um extends nl{static get __EMPTY_NODE(){return Mo}static set __EMPTY_NODE(t){Mo=t}compare(t,r){return fs(t.name,r.name)}isDefinedOn(t){throw us("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return Me.MIN}maxPost(){return new Me(kr,Mo)}makePost(t,r){return Y(typeof t=="string","KeyIndex indexValue must always be a string."),new Me(t,Mo)}toString(){return".key"}}const is=new um;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,r,o,a,d=null){this.isReverse_=a,this.resultGenerator_=d,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=r?o(t.key,r):1,a&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class yt{constructor(t,r,o,a,d){this.key=t,this.value=r,this.color=o??yt.RED,this.left=a??zt.EMPTY_NODE,this.right=d??zt.EMPTY_NODE}copy(t,r,o,a,d){return new yt(t??this.key,r??this.value,o??this.color,a??this.left,d??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let a=this;const d=o(t,a.key);return d<0?a=a.copy(null,null,null,a.left.insert(t,r,o),null):d===0?a=a.copy(null,r,null,null,null):a=a.copy(null,null,null,null,a.right.insert(t,r,o)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return zt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,a;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),r(t,o.key)===0){if(o.right.isEmpty())return zt.EMPTY_NODE;a=o.right.min_(),o=o.copy(a.key,a.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}yt.RED=!0;yt.BLACK=!1;class qy{copy(t,r,o,a,d){return this}insert(t,r,o){return new yt(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zt{constructor(t,r=zt.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new zt(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,yt.BLACK,null,null))}remove(t){return new zt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,yt.BLACK,null,null))}get(t){let r,o=this.root_;for(;!o.isEmpty();){if(r=this.comparator_(t,o.key),r===0)return o.value;r<0?o=o.left:r>0&&(o=o.right)}return null}getPredecessorKey(t){let r,o=this.root_,a=null;for(;!o.isEmpty();)if(r=this.comparator_(t,o.key),r===0){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else r<0?o=o.left:r>0&&(a=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Do(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new Do(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new Do(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new Do(this.root_,null,this.comparator_,!0,t)}}zt.EMPTY_NODE=new qy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(s,t){return fs(s.name,t.name)}function Zc(s,t){return fs(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc;function Jy(s){Tc=s}const dm=function(s){return typeof s=="number"?"number:"+$p(s):"string:"+s},fm=function(s){if(s.isLeafNode()){const t=s.val();Y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&dn(t,".sv"),"Priority must be a string or number.")}else Y(s===Tc||s.isEmpty(),"priority of unexpected type.");Y(s===Tc||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh;class vt{static set __childrenNodeConstructor(t){Jh=t}static get __childrenNodeConstructor(){return Jh}constructor(t,r=vt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new vt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:vt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Oe(t)?this:Le(t)===".priority"?this.priorityNode_:vt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:vt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Le(t);return o===null?r:r.isEmpty()&&o!==".priority"?this:(Y(o!==".priority"||rr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,vt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dm(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=$p(this.value_):t+=this.value_,this.lazyHash_=zp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===vt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof vt.__childrenNodeConstructor?-1:(Y(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,a=vt.VALUE_TYPE_ORDER.indexOf(r),d=vt.VALUE_TYPE_ORDER.indexOf(o);return Y(a>=0,"Unknown leaf type: "+r),Y(d>=0,"Unknown leaf type: "+o),a===d?o==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}vt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm,pm;function Zy(s){hm=s}function e_(s){pm=s}class t_ extends nl{compare(t,r){const o=t.node.getPriority(),a=r.node.getPriority(),d=o.compareTo(a);return d===0?fs(t.name,r.name):d}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(kr,new vt("[PRIORITY-POST]",pm))}makePost(t,r){const o=hm(t);return new Me(r,new vt("[PRIORITY-POST]",o))}toString(){return".priority"}}const it=new t_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=Math.log(2);class r_{constructor(t){const r=d=>parseInt(Math.log(d)/n_,10),o=d=>parseInt(Array(d+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const a=o(this.count);this.bits_=t+1&a}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Vo=function(s,t,r,o){s.sort(t);const a=function(g,x){const N=x-g;let y,v;if(N===0)return null;if(N===1)return y=s[g],v=r?r(y):y,new yt(v,y.node,yt.BLACK,null,null);{const T=parseInt(N/2,10)+g,L=a(g,T),U=a(T+1,x);return y=s[T],v=r?r(y):y,new yt(v,y.node,yt.BLACK,L,U)}},d=function(g){let x=null,N=null,y=s.length;const v=function(L,U){const X=y-L,ie=y;y-=L;const re=a(X+1,ie),Ie=s[X],ce=r?r(Ie):Ie;T(new yt(ce,Ie.node,U,null,re))},T=function(L){x?(x.left=L,x=L):(N=L,x=L)};for(let L=0;L<g.count;++L){const U=g.nextBitIsOne(),X=Math.pow(2,g.count-(L+1));U?v(X,yt.BLACK):(v(X,yt.BLACK),v(X,yt.RED))}return N},h=new r_(s.length),p=d(h);return new zt(o||t,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc;const ts={};class In{static get Default(){return Y(ts&&it,"ChildrenNode.ts has not been loaded"),xc=xc||new In({".priority":ts},{".priority":it}),xc}constructor(t,r){this.indexes_=t,this.indexSet_=r}get(t){const r=Cr(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof zt?r:null}hasIndex(t){return dn(this.indexSet_,t.toString())}addIndex(t,r){Y(t!==is,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let a=!1;const d=r.getIterator(Me.Wrap);let h=d.getNext();for(;h;)a=a||t.isDefinedOn(h.node),o.push(h),h=d.getNext();let p;a?p=Vo(o,t.getCompare()):p=ts;const g=t.toString(),x={...this.indexSet_};x[g]=t;const N={...this.indexes_};return N[g]=p,new In(N,x)}addToIndexes(t,r){const o=zo(this.indexes_,(a,d)=>{const h=Cr(this.indexSet_,d);if(Y(h,"Missing index implementation for "+d),a===ts)if(h.isDefinedOn(t.node)){const p=[],g=r.getIterator(Me.Wrap);let x=g.getNext();for(;x;)x.name!==t.name&&p.push(x),x=g.getNext();return p.push(t),Vo(p,h.getCompare())}else return ts;else{const p=r.get(t.name);let g=a;return p&&(g=g.remove(new Me(t.name,p))),g.insert(t,t.node)}});return new In(o,this.indexSet_)}removeFromIndexes(t,r){const o=zo(this.indexes_,a=>{if(a===ts)return a;{const d=r.get(t.name);return d?a.remove(new Me(t.name,d)):a}});return new In(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei;class Ne{static get EMPTY_NODE(){return ei||(ei=new Ne(new zt(Zc),null,In.Default))}constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&fm(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ei}updatePriority(t){return this.children_.isEmpty()?this:new Ne(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?ei:r}}getChild(t){const r=Le(t);return r===null?this:this.getImmediateChild(r).getChild(Xe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Y(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const o=new Me(t,r);let a,d;r.isEmpty()?(a=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(a=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const h=a.isEmpty()?ei:this.priorityNode_;return new Ne(a,h,d)}}updateChild(t,r){const o=Le(t);if(o===null)return r;{Y(Le(t)!==".priority"||rr(t)===1,".priority must be the last token in a path");const a=this.getImmediateChild(o).updateChild(Xe(t),r);return this.updateImmediateChild(o,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,a=0,d=!0;if(this.forEachChild(it,(h,p)=>{r[h]=p.val(t),o++,d&&Ne.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):d=!1}),!t&&d&&a<2*o){const h=[];for(const p in r)h[p]=r[p];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+dm(this.getPriority().val())+":"),this.forEachChild(it,(r,o)=>{const a=o.hash();a!==""&&(t+=":"+r+":"+a)}),this.lazyHash_=t===""?"":zp(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const a=this.resolveIndex_(o);if(a){const d=a.getPredecessorKey(new Me(t,r));return d?d.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Me(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Me(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Me.Wrap);let d=a.peek();for(;d!=null&&r.compare(d,t)<0;)a.getNext(),d=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Me.Wrap);let d=a.peek();for(;d!=null&&r.compare(d,t)>0;)a.getNext(),d=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bi?-1:0}withIndex(t){if(t===is||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new Ne(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===is||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const o=this.getIterator(it),a=r.getIterator(it);let d=o.getNext(),h=a.getNext();for(;d&&h;){if(d.name!==h.name||!d.node.equals(h.node))return!1;d=o.getNext(),h=a.getNext()}return d===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===is?null:this.indexMap_.get(t.toString())}}Ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class s_ extends Ne{constructor(){super(new zt(Zc),Ne.EMPTY_NODE,In.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ne.EMPTY_NODE}isEmpty(){return!1}}const bi=new s_;Object.defineProperties(Me,{MIN:{value:new Me(ls,Ne.EMPTY_NODE)},MAX:{value:new Me(kr,bi)}});um.__EMPTY_NODE=Ne.EMPTY_NODE;vt.__childrenNodeConstructor=Ne;Jy(bi);e_(bi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=!0;function _t(s,t=null){if(s===null)return Ne.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(t=s[".priority"]),Y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const r=s;return new vt(r,_t(t))}if(!(s instanceof Array)&&i_){const r=[];let o=!1;if($t(s,(h,p)=>{if(h.substring(0,1)!=="."){const g=_t(p);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),r.push(new Me(h,g)))}}),r.length===0)return Ne.EMPTY_NODE;const d=Vo(r,Xy,h=>h.name,Zc);if(o){const h=Vo(r,it.getCompare());return new Ne(d,_t(t),new In({".priority":h},{".priority":it}))}else return new Ne(d,_t(t),In.Default)}else{let r=Ne.EMPTY_NODE;return $t(s,(o,a)=>{if(dn(s,o)&&o.substring(0,1)!=="."){const d=_t(a);(d.isLeafNode()||!d.isEmpty())&&(r=r.updateImmediateChild(o,d))}}),r.updatePriority(_t(t))}}Zy(_t);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends nl{constructor(t){super(),this.indexPath_=t,Y(!Oe(t)&&Le(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const o=this.extractChild(t.node),a=this.extractChild(r.node),d=o.compareTo(a);return d===0?fs(t.name,r.name):d}makePost(t,r){const o=_t(t),a=Ne.EMPTY_NODE.updateChild(this.indexPath_,o);return new Me(r,a)}maxPost(){const t=Ne.EMPTY_NODE.updateChild(this.indexPath_,bi);return new Me(kr,t)}toString(){return lm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends nl{compare(t,r){const o=t.node.compareTo(r.node);return o===0?fs(t.name,r.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(t,r){const o=_t(t);return new Me(r,o)}toString(){return".value"}}const a_=new l_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(s){return{type:"value",snapshotNode:s}}function as(s,t){return{type:"child_added",snapshotNode:t,childName:s}}function fi(s,t){return{type:"child_removed",snapshotNode:t,childName:s}}function hi(s,t,r){return{type:"child_changed",snapshotNode:t,childName:s,oldSnap:r}}function c_(s,t){return{type:"child_moved",snapshotNode:t,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this.index_=t}updateChild(t,r,o,a,d,h){Y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(r);return p.getChild(a).equals(o.getChild(a))&&p.isEmpty()===o.isEmpty()||(h!=null&&(o.isEmpty()?t.hasChild(r)?h.trackChildChange(fi(r,p)):Y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?h.trackChildChange(as(r,o)):h.trackChildChange(hi(r,o,p))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(r,o).withIndex(this.index_)}updateFullNode(t,r,o){return o!=null&&(t.isLeafNode()||t.forEachChild(it,(a,d)=>{r.hasChild(a)||o.trackChildChange(fi(a,d))}),r.isLeafNode()||r.forEachChild(it,(a,d)=>{if(t.hasChild(a)){const h=t.getImmediateChild(a);h.equals(d)||o.trackChildChange(hi(a,d,h))}else o.trackChildChange(as(a,d))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?Ne.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this.indexedFilter_=new eu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=pi.getStartPost_(t),this.endPost_=pi.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,o=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&o}updateChild(t,r,o,a,d,h){return this.matches(new Me(r,o))||(o=Ne.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,o,a,d,h)}updateFullNode(t,r,o){r.isLeafNode()&&(r=Ne.EMPTY_NODE);let a=r.withIndex(this.index_);a=a.updatePriority(Ne.EMPTY_NODE);const d=this;return r.forEachChild(it,(h,p)=>{d.matches(new Me(h,p))||(a=a.updateImmediateChild(h,Ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=r=>{const o=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new pi(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,o,a,d,h){return this.rangedFilter_.matches(new Me(r,o))||(o=Ne.EMPTY_NODE),t.getImmediateChild(r).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,o,a,d,h):this.fullLimitUpdateChild_(t,r,o,d,h)}updateFullNode(t,r,o){let a;if(r.isLeafNode()||r.isEmpty())a=Ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){a=Ne.EMPTY_NODE.withIndex(this.index_);let d;this.reverse_?d=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;d.hasNext()&&h<this.limit_;){const p=d.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))a=a.updateImmediateChild(p.name,p.node),h++;else break;else continue}}else{a=r.withIndex(this.index_),a=a.updatePriority(Ne.EMPTY_NODE);let d;this.reverse_?d=a.getReverseIterator(this.index_):d=a.getIterator(this.index_);let h=0;for(;d.hasNext();){const p=d.getNext();h<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?h++:a=a.updateImmediateChild(p.name,Ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,o,a,d){let h;if(this.reverse_){const y=this.index_.getCompare();h=(v,T)=>y(T,v)}else h=this.index_.getCompare();const p=t;Y(p.numChildren()===this.limit_,"");const g=new Me(r,o),x=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),N=this.rangedFilter_.matches(g);if(p.hasChild(r)){const y=p.getImmediateChild(r);let v=a.getChildAfterChild(this.index_,x,this.reverse_);for(;v!=null&&(v.name===r||p.hasChild(v.name));)v=a.getChildAfterChild(this.index_,v,this.reverse_);const T=v==null?1:h(v,g);if(N&&!o.isEmpty()&&T>=0)return d!=null&&d.trackChildChange(hi(r,o,y)),p.updateImmediateChild(r,o);{d!=null&&d.trackChildChange(fi(r,y));const U=p.updateImmediateChild(r,Ne.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(d!=null&&d.trackChildChange(as(v.name,v.node)),U.updateImmediateChild(v.name,v.node)):U}}else return o.isEmpty()?t:N&&h(x,g)>=0?(d!=null&&(d.trackChildChange(fi(x.name,x.node)),d.trackChildChange(as(r,o))),p.updateImmediateChild(r,o).updateImmediateChild(x.name,Ne.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=it}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ls}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===it}copy(){const t=new tu;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function d_(s){return s.loadsAllData()?new eu(s.getIndex()):s.hasLimit()?new u_(s):new pi(s)}function Zh(s){const t={};if(s.isDefault())return t;let r;if(s.index_===it?r="$priority":s.index_===a_?r="$value":s.index_===is?r="$key":(Y(s.index_ instanceof o_,"Unrecognized index type!"),r=s.index_.toString()),t.orderBy=wt(r),s.startSet_){const o=s.startAfterSet_?"startAfter":"startAt";t[o]=wt(s.indexStartValue_),s.startNameSet_&&(t[o]+=","+wt(s.indexStartName_))}if(s.endSet_){const o=s.endBeforeSet_?"endBefore":"endAt";t[o]=wt(s.indexEndValue_),s.endNameSet_&&(t[o]+=","+wt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?t.limitToFirst=s.limit_:t.limitToLast=s.limit_),t}function ep(s){const t={};if(s.startSet_&&(t.sp=s.indexStartValue_,s.startNameSet_&&(t.sn=s.indexStartName_),t.sin=!s.startAfterSet_),s.endSet_&&(t.ep=s.indexEndValue_,s.endNameSet_&&(t.en=s.indexEndName_),t.ein=!s.endBeforeSet_),s.limitSet_){t.l=s.limit_;let r=s.viewFrom_;r===""&&(s.isViewFromLeft()?r="l":r="r"),t.vf=r}return s.index_!==it&&(t.i=s.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends sm{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(Y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,r,o,a){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.log_=wi("p:rest:"),this.listens_={}}listen(t,r,o,a){const d=t._path.toString();this.log_("Listen called for "+d+" "+t._queryIdentifier);const h=Yo.getListenId_(t,o),p={};this.listens_[h]=p;const g=Zh(t._queryParams);this.restRequest_(d+".json",g,(x,N)=>{let y=N;if(x===404&&(y=null,x=null),x===null&&this.onDataUpdate_(d,y,!1,o),Cr(this.listens_,h)===p){let v;x?x===401?v="permission_denied":v="rest_error:"+x:v="ok",a(v,null)}})}unlisten(t,r){const o=Yo.getListenId_(t,r);delete this.listens_[o]}get(t){const r=Zh(t._queryParams),o=t._path.toString(),a=new vi;return this.restRequest_(o+".json",r,(d,h)=>{let p=h;d===404&&(p=null,d=null),d===null?(this.onDataUpdate_(o,p,!1,null),a.resolve(p)):a.reject(new Error(p))}),a.promise}refreshAuthToken(t){}restRequest_(t,r={},o){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,d])=>{a&&a.accessToken&&(r.auth=a.accessToken),d&&d.token&&(r.ac=d.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ax(r);this.log_("Sending REST request for "+h);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(o&&p.readyState===4){this.log_("REST Response for "+h+" received. status:",p.status,"response:",p.responseText);let g=null;if(p.status>=200&&p.status<300){try{g=ai(p.responseText)}catch{Ut("Failed to parse JSON response for "+h+": "+p.responseText)}o(null,g)}else p.status!==401&&p.status!==404&&Ut("Got unsuccessful REST response for "+h+" Status: "+p.status),o(p.status);o=null}},p.open("GET",h,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.rootNode_=Ne.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(){return{value:null,children:new Map}}function gm(s,t,r){if(Oe(t))s.value=r,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(t,r);else{const o=Le(t);s.children.has(o)||s.children.set(o,Qo());const a=s.children.get(o);t=Xe(t),gm(a,t,r)}}function Rc(s,t,r){s.value!==null?r(t,s.value):h_(s,(o,a)=>{const d=new Ge(t.toString()+"/"+o);Rc(a,d,r)})}function h_(s,t){s.children.forEach((r,o)=>{t(o,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r={...t};return this.last_&&$t(this.last_,(o,a)=>{r[o]=r[o]-a}),this.last_=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=10*1e3,m_=30*1e3,g_=300*1e3;class x_{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new p_(t);const o=tp+(m_-tp)*Math.random();si(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),r={};let o=!1;$t(t,(a,d)=>{d>0&&dn(this.statsToReport_,a)&&(r[a]=d,o=!0)}),o&&this.server_.reportStats(r),si(this.reportStats_.bind(this),Math.floor(Math.random()*2*g_))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cn||(cn={}));function xm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function nu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ru(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,r,o){this.path=t,this.affectedTree=r,this.revert=o,this.type=cn.ACK_USER_WRITE,this.source=xm()}operationForChild(t){if(Oe(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Ge(t));return new Go(We(),r,this.revert)}}else return Y(Le(this.path)===t,"operationForChild called for unrelated child."),new Go(Xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,r){this.source=t,this.path=r,this.type=cn.LISTEN_COMPLETE}operationForChild(t){return Oe(this.path)?new mi(this.source,We()):new mi(this.source,Xe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,r,o){this.source=t,this.path=r,this.snap=o,this.type=cn.OVERWRITE}operationForChild(t){return Oe(this.path)?new Sr(this.source,We(),this.snap.getImmediateChild(t)):new Sr(this.source,Xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t,r,o){this.source=t,this.path=r,this.children=o,this.type=cn.MERGE}operationForChild(t){if(Oe(this.path)){const r=this.children.subtree(new Ge(t));return r.isEmpty()?null:r.value?new Sr(this.source,We(),r.value):new gi(this.source,We(),r)}else return Y(Le(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new gi(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,r,o){this.node_=t,this.fullyInitialized_=r,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Oe(t))return this.isFullyInitialized()&&!this.filtered_;const r=Le(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function y_(s,t,r,o){const a=[],d=[];return t.forEach(h=>{h.type==="child_changed"&&s.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&d.push(c_(h.childName,h.snapshotNode))}),ti(s,a,"child_removed",t,o,r),ti(s,a,"child_added",t,o,r),ti(s,a,"child_moved",d,o,r),ti(s,a,"child_changed",t,o,r),ti(s,a,"value",t,o,r),a}function ti(s,t,r,o,a,d){const h=o.filter(p=>p.type===r);h.sort((p,g)=>w_(s,p,g)),h.forEach(p=>{const g=__(s,p,d);a.forEach(x=>{x.respondsTo(p.type)&&t.push(x.createEvent(g,s.query_))})})}function __(s,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,s.index_)),t}function w_(s,t,r){if(t.childName==null||r.childName==null)throw us("Should only compare child_ events.");const o=new Me(t.childName,t.snapshotNode),a=new Me(r.childName,r.snapshotNode);return s.index_.compare(o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(s,t){return{eventCache:s,serverCache:t}}function ii(s,t,r,o){return rl(new Er(t,r,o),s.serverCache)}function vm(s,t,r,o){return rl(s.eventCache,new Er(t,r,o))}function Pc(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function jr(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc;const b_=()=>(vc||(vc=new zt(ly)),vc);class et{static fromObject(t){let r=new et(null);return $t(t,(o,a)=>{r=r.set(new Ge(o),a)}),r}constructor(t,r=b_()){this.value=t,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:We(),value:this.value};if(Oe(t))return null;{const o=Le(t),a=this.children.get(o);if(a!==null){const d=a.findRootMostMatchingPathAndValue(Xe(t),r);return d!=null?{path:ht(new Ge(o),d.path),value:d.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Oe(t))return this;{const r=Le(t),o=this.children.get(r);return o!==null?o.subtree(Xe(t)):new et(null)}}set(t,r){if(Oe(t))return new et(r,this.children);{const o=Le(t),d=(this.children.get(o)||new et(null)).set(Xe(t),r),h=this.children.insert(o,d);return new et(this.value,h)}}remove(t){if(Oe(t))return this.children.isEmpty()?new et(null):new et(null,this.children);{const r=Le(t),o=this.children.get(r);if(o){const a=o.remove(Xe(t));let d;return a.isEmpty()?d=this.children.remove(r):d=this.children.insert(r,a),this.value===null&&d.isEmpty()?new et(null):new et(this.value,d)}else return this}}get(t){if(Oe(t))return this.value;{const r=Le(t),o=this.children.get(r);return o?o.get(Xe(t)):null}}setTree(t,r){if(Oe(t))return r;{const o=Le(t),d=(this.children.get(o)||new et(null)).setTree(Xe(t),r);let h;return d.isEmpty()?h=this.children.remove(o):h=this.children.insert(o,d),new et(this.value,h)}}fold(t){return this.fold_(We(),t)}fold_(t,r){const o={};return this.children.inorderTraversal((a,d)=>{o[a]=d.fold_(ht(t,a),r)}),r(t,this.value,o)}findOnPath(t,r){return this.findOnPath_(t,We(),r)}findOnPath_(t,r,o){const a=this.value?o(r,this.value):!1;if(a)return a;if(Oe(t))return null;{const d=Le(t),h=this.children.get(d);return h?h.findOnPath_(Xe(t),ht(r,d),o):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,We(),r)}foreachOnPath_(t,r,o){if(Oe(t))return this;{this.value&&o(r,this.value);const a=Le(t),d=this.children.get(a);return d?d.foreachOnPath_(Xe(t),ht(r,a),o):new et(null)}}foreach(t){this.foreach_(We(),t)}foreach_(t,r){this.children.inorderTraversal((o,a)=>{a.foreach_(ht(t,o),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,o)=>{o.value&&t(r,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.writeTree_=t}static empty(){return new un(new et(null))}}function oi(s,t,r){if(Oe(t))return new un(new et(r));{const o=s.writeTree_.findRootMostValueAndPath(t);if(o!=null){const a=o.path;let d=o.value;const h=Ft(a,t);return d=d.updateChild(h,r),new un(s.writeTree_.set(a,d))}else{const a=new et(r),d=s.writeTree_.setTree(t,a);return new un(d)}}}function np(s,t,r){let o=s;return $t(r,(a,d)=>{o=oi(o,ht(t,a),d)}),o}function rp(s,t){if(Oe(t))return un.empty();{const r=s.writeTree_.setTree(t,new et(null));return new un(r)}}function Lc(s,t){return Ir(s,t)!=null}function Ir(s,t){const r=s.writeTree_.findRootMostValueAndPath(t);return r!=null?s.writeTree_.get(r.path).getChild(Ft(r.path,t)):null}function sp(s){const t=[],r=s.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(it,(o,a)=>{t.push(new Me(o,a))}):s.writeTree_.children.inorderTraversal((o,a)=>{a.value!=null&&t.push(new Me(o,a.value))}),t}function nr(s,t){if(Oe(t))return s;{const r=Ir(s,t);return r!=null?new un(new et(r)):new un(s.writeTree_.subtree(t))}}function Mc(s){return s.writeTree_.isEmpty()}function cs(s,t){return ym(We(),s.writeTree_,t)}function ym(s,t,r){if(t.value!=null)return r.updateChild(s,t.value);{let o=null;return t.children.inorderTraversal((a,d)=>{a===".priority"?(Y(d.value!==null,"Priority writes must always be leaf nodes"),o=d.value):r=ym(ht(s,a),d,r)}),!r.getChild(s).isEmpty()&&o!==null&&(r=r.updateChild(ht(s,".priority"),o)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(s,t){return Nm(t,s)}function N_(s,t,r,o,a){Y(o>s.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),s.allWrites.push({path:t,snap:r,writeId:o,visible:a}),a&&(s.visibleWrites=oi(s.visibleWrites,t,r)),s.lastWriteId=o}function C_(s,t){for(let r=0;r<s.allWrites.length;r++){const o=s.allWrites[r];if(o.writeId===t)return o}return null}function k_(s,t){const r=s.allWrites.findIndex(p=>p.writeId===t);Y(r>=0,"removeWrite called with nonexistent writeId.");const o=s.allWrites[r];s.allWrites.splice(r,1);let a=o.visible,d=!1,h=s.allWrites.length-1;for(;a&&h>=0;){const p=s.allWrites[h];p.visible&&(h>=r&&S_(p,o.path)?a=!1:an(o.path,p.path)&&(d=!0)),h--}if(a){if(d)return E_(s),!0;if(o.snap)s.visibleWrites=rp(s.visibleWrites,o.path);else{const p=o.children;$t(p,g=>{s.visibleWrites=rp(s.visibleWrites,ht(o.path,g))})}return!0}else return!1}function S_(s,t){if(s.snap)return an(s.path,t);for(const r in s.children)if(s.children.hasOwnProperty(r)&&an(ht(s.path,r),t))return!0;return!1}function E_(s){s.visibleWrites=_m(s.allWrites,j_,We()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function j_(s){return s.visible}function _m(s,t,r){let o=un.empty();for(let a=0;a<s.length;++a){const d=s[a];if(t(d)){const h=d.path;let p;if(d.snap)an(r,h)?(p=Ft(r,h),o=oi(o,p,d.snap)):an(h,r)&&(p=Ft(h,r),o=oi(o,We(),d.snap.getChild(p)));else if(d.children){if(an(r,h))p=Ft(r,h),o=np(o,p,d.children);else if(an(h,r))if(p=Ft(h,r),Oe(p))o=np(o,We(),d.children);else{const g=Cr(d.children,Le(p));if(g){const x=g.getChild(Xe(p));o=oi(o,We(),x)}}}else throw us("WriteRecord should have .snap or .children")}}return o}function wm(s,t,r,o,a){if(!o&&!a){const d=Ir(s.visibleWrites,t);if(d!=null)return d;{const h=nr(s.visibleWrites,t);if(Mc(h))return r;if(r==null&&!Lc(h,We()))return null;{const p=r||Ne.EMPTY_NODE;return cs(h,p)}}}else{const d=nr(s.visibleWrites,t);if(!a&&Mc(d))return r;if(!a&&r==null&&!Lc(d,We()))return null;{const h=function(x){return(x.visible||a)&&(!o||!~o.indexOf(x.writeId))&&(an(x.path,t)||an(t,x.path))},p=_m(s.allWrites,h,t),g=r||Ne.EMPTY_NODE;return cs(p,g)}}}function I_(s,t,r){let o=Ne.EMPTY_NODE;const a=Ir(s.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(it,(d,h)=>{o=o.updateImmediateChild(d,h)}),o;if(r){const d=nr(s.visibleWrites,t);return r.forEachChild(it,(h,p)=>{const g=cs(nr(d,new Ge(h)),p);o=o.updateImmediateChild(h,g)}),sp(d).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}else{const d=nr(s.visibleWrites,t);return sp(d).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}}function T_(s,t,r,o,a){Y(o||a,"Either existingEventSnap or existingServerSnap must exist");const d=ht(t,r);if(Lc(s.visibleWrites,d))return null;{const h=nr(s.visibleWrites,d);return Mc(h)?a.getChild(r):cs(h,a.getChild(r))}}function R_(s,t,r,o){const a=ht(t,r),d=Ir(s.visibleWrites,a);if(d!=null)return d;if(o.isCompleteForChild(r)){const h=nr(s.visibleWrites,a);return cs(h,o.getNode().getImmediateChild(r))}else return null}function P_(s,t){return Ir(s.visibleWrites,t)}function L_(s,t,r,o,a,d,h){let p;const g=nr(s.visibleWrites,t),x=Ir(g,We());if(x!=null)p=x;else if(r!=null)p=cs(g,r);else return[];if(p=p.withIndex(h),!p.isEmpty()&&!p.isLeafNode()){const N=[],y=h.getCompare(),v=d?p.getReverseIteratorFrom(o,h):p.getIteratorFrom(o,h);let T=v.getNext();for(;T&&N.length<a;)y(T,o)!==0&&N.push(T),T=v.getNext();return N}else return[]}function M_(){return{visibleWrites:un.empty(),allWrites:[],lastWriteId:-1}}function Ko(s,t,r,o){return wm(s.writeTree,s.treePath,t,r,o)}function iu(s,t){return I_(s.writeTree,s.treePath,t)}function ip(s,t,r,o){return T_(s.writeTree,s.treePath,t,r,o)}function qo(s,t){return P_(s.writeTree,ht(s.treePath,t))}function D_(s,t,r,o,a,d){return L_(s.writeTree,s.treePath,t,r,o,a,d)}function ou(s,t,r){return R_(s.writeTree,s.treePath,t,r)}function bm(s,t){return Nm(ht(s.treePath,t),s.writeTree)}function Nm(s,t){return{treePath:s,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,o=t.childName;Y(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),Y(o!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(o);if(a){const d=a.type;if(r==="child_added"&&d==="child_removed")this.changeMap.set(o,hi(o,t.snapshotNode,a.snapshotNode));else if(r==="child_removed"&&d==="child_added")this.changeMap.delete(o);else if(r==="child_removed"&&d==="child_changed")this.changeMap.set(o,fi(o,a.oldSnap));else if(r==="child_changed"&&d==="child_added")this.changeMap.set(o,as(o,t.snapshotNode));else if(r==="child_changed"&&d==="child_changed")this.changeMap.set(o,hi(o,t.snapshotNode,a.oldSnap));else throw us("Illegal combination of changes: "+t+" occurred after "+a)}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{getCompleteChild(t){return null}getChildAfterChild(t,r,o){return null}}const Cm=new A_;class lu{constructor(t,r,o=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=o}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const o=this.optCompleteServerCache_!=null?new Er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ou(this.writes_,t,o)}}getChildAfterChild(t,r,o){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:jr(this.viewCache_),d=D_(this.writes_,a,r,1,o,t);return d.length===0?null:d[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(s){return{filter:s}}function z_(s,t){Y(t.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Y(t.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function U_(s,t,r,o,a){const d=new O_;let h,p;if(r.type===cn.OVERWRITE){const x=r;x.source.fromUser?h=Dc(s,t,x.path,x.snap,o,a,d):(Y(x.source.fromServer,"Unknown source."),p=x.source.tagged||t.serverCache.isFiltered()&&!Oe(x.path),h=Xo(s,t,x.path,x.snap,o,a,p,d))}else if(r.type===cn.MERGE){const x=r;x.source.fromUser?h=B_(s,t,x.path,x.children,o,a,d):(Y(x.source.fromServer,"Unknown source."),p=x.source.tagged||t.serverCache.isFiltered(),h=Oc(s,t,x.path,x.children,o,a,p,d))}else if(r.type===cn.ACK_USER_WRITE){const x=r;x.revert?h=V_(s,t,x.path,o,a,d):h=W_(s,t,x.path,x.affectedTree,o,a,d)}else if(r.type===cn.LISTEN_COMPLETE)h=H_(s,t,r.path,o,d);else throw us("Unknown operation type: "+r.type);const g=d.getChanges();return $_(t,h,g),{viewCache:h,changes:g}}function $_(s,t,r){const o=t.eventCache;if(o.isFullyInitialized()){const a=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=Pc(s);(r.length>0||!s.eventCache.isFullyInitialized()||a&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&r.push(mm(Pc(t)))}}function km(s,t,r,o,a,d){const h=t.eventCache;if(qo(o,r)!=null)return t;{let p,g;if(Oe(r))if(Y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const x=jr(t),N=x instanceof Ne?x:Ne.EMPTY_NODE,y=iu(o,N);p=s.filter.updateFullNode(t.eventCache.getNode(),y,d)}else{const x=Ko(o,jr(t));p=s.filter.updateFullNode(t.eventCache.getNode(),x,d)}else{const x=Le(r);if(x===".priority"){Y(rr(r)===1,"Can't have a priority with additional path components");const N=h.getNode();g=t.serverCache.getNode();const y=ip(o,r,N,g);y!=null?p=s.filter.updatePriority(N,y):p=h.getNode()}else{const N=Xe(r);let y;if(h.isCompleteForChild(x)){g=t.serverCache.getNode();const v=ip(o,r,h.getNode(),g);v!=null?y=h.getNode().getImmediateChild(x).updateChild(N,v):y=h.getNode().getImmediateChild(x)}else y=ou(o,x,t.serverCache);y!=null?p=s.filter.updateChild(h.getNode(),x,y,N,a,d):p=h.getNode()}}return ii(t,p,h.isFullyInitialized()||Oe(r),s.filter.filtersNodes())}}function Xo(s,t,r,o,a,d,h,p){const g=t.serverCache;let x;const N=h?s.filter:s.filter.getIndexedFilter();if(Oe(r))x=N.updateFullNode(g.getNode(),o,null);else if(N.filtersNodes()&&!g.isFiltered()){const T=g.getNode().updateChild(r,o);x=N.updateFullNode(g.getNode(),T,null)}else{const T=Le(r);if(!g.isCompleteForPath(r)&&rr(r)>1)return t;const L=Xe(r),X=g.getNode().getImmediateChild(T).updateChild(L,o);T===".priority"?x=N.updatePriority(g.getNode(),X):x=N.updateChild(g.getNode(),T,X,L,Cm,null)}const y=vm(t,x,g.isFullyInitialized()||Oe(r),N.filtersNodes()),v=new lu(a,y,d);return km(s,y,r,a,v,p)}function Dc(s,t,r,o,a,d,h){const p=t.eventCache;let g,x;const N=new lu(a,t,d);if(Oe(r))x=s.filter.updateFullNode(t.eventCache.getNode(),o,h),g=ii(t,x,!0,s.filter.filtersNodes());else{const y=Le(r);if(y===".priority")x=s.filter.updatePriority(t.eventCache.getNode(),o),g=ii(t,x,p.isFullyInitialized(),p.isFiltered());else{const v=Xe(r),T=p.getNode().getImmediateChild(y);let L;if(Oe(v))L=o;else{const U=N.getCompleteChild(y);U!=null?om(v)===".priority"&&U.getChild(am(v)).isEmpty()?L=U:L=U.updateChild(v,o):L=Ne.EMPTY_NODE}if(T.equals(L))g=t;else{const U=s.filter.updateChild(p.getNode(),y,L,v,N,h);g=ii(t,U,p.isFullyInitialized(),s.filter.filtersNodes())}}}return g}function op(s,t){return s.eventCache.isCompleteForChild(t)}function B_(s,t,r,o,a,d,h){let p=t;return o.foreach((g,x)=>{const N=ht(r,g);op(t,Le(N))&&(p=Dc(s,p,N,x,a,d,h))}),o.foreach((g,x)=>{const N=ht(r,g);op(t,Le(N))||(p=Dc(s,p,N,x,a,d,h))}),p}function lp(s,t,r){return r.foreach((o,a)=>{t=t.updateChild(o,a)}),t}function Oc(s,t,r,o,a,d,h,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,x;Oe(r)?x=o:x=new et(null).setTree(r,o);const N=t.serverCache.getNode();return x.children.inorderTraversal((y,v)=>{if(N.hasChild(y)){const T=t.serverCache.getNode().getImmediateChild(y),L=lp(s,T,v);g=Xo(s,g,new Ge(y),L,a,d,h,p)}}),x.children.inorderTraversal((y,v)=>{const T=!t.serverCache.isCompleteForChild(y)&&v.value===null;if(!N.hasChild(y)&&!T){const L=t.serverCache.getNode().getImmediateChild(y),U=lp(s,L,v);g=Xo(s,g,new Ge(y),U,a,d,h,p)}}),g}function W_(s,t,r,o,a,d,h){if(qo(a,r)!=null)return t;const p=t.serverCache.isFiltered(),g=t.serverCache;if(o.value!=null){if(Oe(r)&&g.isFullyInitialized()||g.isCompleteForPath(r))return Xo(s,t,r,g.getNode().getChild(r),a,d,p,h);if(Oe(r)){let x=new et(null);return g.getNode().forEachChild(is,(N,y)=>{x=x.set(new Ge(N),y)}),Oc(s,t,r,x,a,d,p,h)}else return t}else{let x=new et(null);return o.foreach((N,y)=>{const v=ht(r,N);g.isCompleteForPath(v)&&(x=x.set(N,g.getNode().getChild(v)))}),Oc(s,t,r,x,a,d,p,h)}}function H_(s,t,r,o,a){const d=t.serverCache,h=vm(t,d.getNode(),d.isFullyInitialized()||Oe(r),d.isFiltered());return km(s,h,r,o,Cm,a)}function V_(s,t,r,o,a,d){let h;if(qo(o,r)!=null)return t;{const p=new lu(o,t,a),g=t.eventCache.getNode();let x;if(Oe(r)||Le(r)===".priority"){let N;if(t.serverCache.isFullyInitialized())N=Ko(o,jr(t));else{const y=t.serverCache.getNode();Y(y instanceof Ne,"serverChildren would be complete if leaf node"),N=iu(o,y)}N=N,x=s.filter.updateFullNode(g,N,d)}else{const N=Le(r);let y=ou(o,N,t.serverCache);y==null&&t.serverCache.isCompleteForChild(N)&&(y=g.getImmediateChild(N)),y!=null?x=s.filter.updateChild(g,N,y,Xe(r),p,d):t.eventCache.getNode().hasChild(N)?x=s.filter.updateChild(g,N,Ne.EMPTY_NODE,Xe(r),p,d):x=g,x.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=Ko(o,jr(t)),h.isLeafNode()&&(x=s.filter.updateFullNode(x,h,d)))}return h=t.serverCache.isFullyInitialized()||qo(o,We())!=null,ii(t,x,h,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,a=new eu(o.getIndex()),d=d_(o);this.processor_=F_(d);const h=r.serverCache,p=r.eventCache,g=a.updateFullNode(Ne.EMPTY_NODE,h.getNode(),null),x=d.updateFullNode(Ne.EMPTY_NODE,p.getNode(),null),N=new Er(g,h.isFullyInitialized(),a.filtersNodes()),y=new Er(x,p.isFullyInitialized(),d.filtersNodes());this.viewCache_=rl(y,N),this.eventGenerator_=new v_(this.query_)}get query(){return this.query_}}function Q_(s){return s.viewCache_.serverCache.getNode()}function G_(s,t){const r=jr(s.viewCache_);return r&&(s.query._queryParams.loadsAllData()||!Oe(t)&&!r.getImmediateChild(Le(t)).isEmpty())?r.getChild(t):null}function ap(s){return s.eventRegistrations_.length===0}function K_(s,t){s.eventRegistrations_.push(t)}function cp(s,t,r){const o=[];if(r){Y(t==null,"A cancel should cancel all event registrations.");const a=s.query._path;s.eventRegistrations_.forEach(d=>{const h=d.createCancelEvent(r,a);h&&o.push(h)})}if(t){let a=[];for(let d=0;d<s.eventRegistrations_.length;++d){const h=s.eventRegistrations_[d];if(!h.matches(t))a.push(h);else if(t.hasAnyCallback()){a=a.concat(s.eventRegistrations_.slice(d+1));break}}s.eventRegistrations_=a}else s.eventRegistrations_=[];return o}function up(s,t,r,o){t.type===cn.MERGE&&t.source.queryId!==null&&(Y(jr(s.viewCache_),"We should always have a full cache before handling merges"),Y(Pc(s.viewCache_),"Missing event cache, even though we have a server cache"));const a=s.viewCache_,d=U_(s.processor_,a,t,r,o);return z_(s.processor_,d.viewCache),Y(d.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=d.viewCache,Sm(s,d.changes,d.viewCache.eventCache.getNode(),null)}function q_(s,t){const r=s.viewCache_.eventCache,o=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(it,(d,h)=>{o.push(as(d,h))}),r.isFullyInitialized()&&o.push(mm(r.getNode())),Sm(s,o,r.getNode(),t)}function Sm(s,t,r,o){const a=o?[o]:s.eventRegistrations_;return y_(s.eventGenerator_,t,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo;class X_{constructor(){this.views=new Map}}function J_(s){Y(!Jo,"__referenceConstructor has already been defined"),Jo=s}function Z_(){return Y(Jo,"Reference.ts has not been loaded"),Jo}function e1(s){return s.views.size===0}function au(s,t,r,o){const a=t.source.queryId;if(a!==null){const d=s.views.get(a);return Y(d!=null,"SyncTree gave us an op for an invalid query."),up(d,t,r,o)}else{let d=[];for(const h of s.views.values())d=d.concat(up(h,t,r,o));return d}}function t1(s,t,r,o,a){const d=t._queryIdentifier,h=s.views.get(d);if(!h){let p=Ko(r,a?o:null),g=!1;p?g=!0:o instanceof Ne?(p=iu(r,o),g=!1):(p=Ne.EMPTY_NODE,g=!1);const x=rl(new Er(p,g,!1),new Er(o,a,!1));return new Y_(t,x)}return h}function n1(s,t,r,o,a,d){const h=t1(s,t,o,a,d);return s.views.has(t._queryIdentifier)||s.views.set(t._queryIdentifier,h),K_(h,r),q_(h,r)}function r1(s,t,r,o){const a=t._queryIdentifier,d=[];let h=[];const p=sr(s);if(a==="default")for(const[g,x]of s.views.entries())h=h.concat(cp(x,r,o)),ap(x)&&(s.views.delete(g),x.query._queryParams.loadsAllData()||d.push(x.query));else{const g=s.views.get(a);g&&(h=h.concat(cp(g,r,o)),ap(g)&&(s.views.delete(a),g.query._queryParams.loadsAllData()||d.push(g.query)))}return p&&!sr(s)&&d.push(new(Z_())(t._repo,t._path)),{removed:d,events:h}}function Em(s){const t=[];for(const r of s.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function os(s,t){let r=null;for(const o of s.views.values())r=r||G_(o,t);return r}function jm(s,t){if(t._queryParams.loadsAllData())return sl(s);{const o=t._queryIdentifier;return s.views.get(o)}}function Im(s,t){return jm(s,t)!=null}function sr(s){return sl(s)!=null}function sl(s){for(const t of s.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo;function s1(s){Y(!Zo,"__referenceConstructor has already been defined"),Zo=s}function i1(){return Y(Zo,"Reference.ts has not been loaded"),Zo}let o1=1;class dp{constructor(t){this.listenProvider_=t,this.syncPointTree_=new et(null),this.pendingWriteTree_=M_(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function cu(s,t,r,o,a){return N_(s.pendingWriteTree_,t,r,o,a),a?Ni(s,new Sr(xm(),t,r)):[]}function Nr(s,t,r=!1){const o=C_(s.pendingWriteTree_,t);if(k_(s.pendingWriteTree_,t)){let d=new et(null);return o.snap!=null?d=d.set(We(),!0):$t(o.children,h=>{d=d.set(new Ge(h),!0)}),Ni(s,new Go(o.path,d,r))}else return[]}function il(s,t,r){return Ni(s,new Sr(nu(),t,r))}function l1(s,t,r){const o=et.fromObject(r);return Ni(s,new gi(nu(),t,o))}function a1(s,t){return Ni(s,new mi(nu(),t))}function c1(s,t,r){const o=uu(s,r);if(o){const a=du(o),d=a.path,h=a.queryId,p=Ft(d,t),g=new mi(ru(h),p);return fu(s,d,g)}else return[]}function Ac(s,t,r,o,a=!1){const d=t._path,h=s.syncPointTree_.get(d);let p=[];if(h&&(t._queryIdentifier==="default"||Im(h,t))){const g=r1(h,t,r,o);e1(h)&&(s.syncPointTree_=s.syncPointTree_.remove(d));const x=g.removed;if(p=g.events,!a){const N=x.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=s.syncPointTree_.findOnPath(d,(v,T)=>sr(T));if(N&&!y){const v=s.syncPointTree_.subtree(d);if(!v.isEmpty()){const T=f1(v);for(let L=0;L<T.length;++L){const U=T[L],X=U.query,ie=Pm(s,U);s.listenProvider_.startListening(li(X),el(s,X),ie.hashFn,ie.onComplete)}}}!y&&x.length>0&&!o&&(N?s.listenProvider_.stopListening(li(t),null):x.forEach(v=>{const T=s.queryToTagMap.get(ll(v));s.listenProvider_.stopListening(li(v),T)}))}h1(s,x)}return p}function u1(s,t,r,o){const a=uu(s,o);if(a!=null){const d=du(a),h=d.path,p=d.queryId,g=Ft(h,t),x=new Sr(ru(p),g,r);return fu(s,h,x)}else return[]}function d1(s,t,r,o){const a=uu(s,o);if(a){const d=du(a),h=d.path,p=d.queryId,g=Ft(h,t),x=et.fromObject(r),N=new gi(ru(p),g,x);return fu(s,h,N)}else return[]}function fp(s,t,r,o=!1){const a=t._path;let d=null,h=!1;s.syncPointTree_.foreachOnPath(a,(v,T)=>{const L=Ft(v,a);d=d||os(T,L),h=h||sr(T)});let p=s.syncPointTree_.get(a);p?(h=h||sr(p),d=d||os(p,We())):(p=new X_,s.syncPointTree_=s.syncPointTree_.set(a,p));let g;d!=null?g=!0:(g=!1,d=Ne.EMPTY_NODE,s.syncPointTree_.subtree(a).foreachChild((T,L)=>{const U=os(L,We());U&&(d=d.updateImmediateChild(T,U))}));const x=Im(p,t);if(!x&&!t._queryParams.loadsAllData()){const v=ll(t);Y(!s.queryToTagMap.has(v),"View does not exist, but we have a tag");const T=p1();s.queryToTagMap.set(v,T),s.tagToQueryMap.set(T,v)}const N=su(s.pendingWriteTree_,a);let y=n1(p,t,r,N,d,g);if(!x&&!h&&!o){const v=jm(p,t);y=y.concat(m1(s,t,v))}return y}function ol(s,t,r){const a=s.pendingWriteTree_,d=s.syncPointTree_.findOnPath(t,(h,p)=>{const g=Ft(h,t),x=os(p,g);if(x)return x});return wm(a,t,d,r,!0)}function Ni(s,t){return Tm(t,s.syncPointTree_,null,su(s.pendingWriteTree_,We()))}function Tm(s,t,r,o){if(Oe(s.path))return Rm(s,t,r,o);{const a=t.get(We());r==null&&a!=null&&(r=os(a,We()));let d=[];const h=Le(s.path),p=s.operationForChild(h),g=t.children.get(h);if(g&&p){const x=r?r.getImmediateChild(h):null,N=bm(o,h);d=d.concat(Tm(p,g,x,N))}return a&&(d=d.concat(au(a,s,o,r))),d}}function Rm(s,t,r,o){const a=t.get(We());r==null&&a!=null&&(r=os(a,We()));let d=[];return t.children.inorderTraversal((h,p)=>{const g=r?r.getImmediateChild(h):null,x=bm(o,h),N=s.operationForChild(h);N&&(d=d.concat(Rm(N,p,g,x)))}),a&&(d=d.concat(au(a,s,o,r))),d}function Pm(s,t){const r=t.query,o=el(s,r);return{hashFn:()=>(Q_(t)||Ne.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return o?c1(s,r._path,o):a1(s,r._path);{const d=uy(a,r);return Ac(s,r,null,d)}}}}function el(s,t){const r=ll(t);return s.queryToTagMap.get(r)}function ll(s){return s._path.toString()+"$"+s._queryIdentifier}function uu(s,t){return s.tagToQueryMap.get(t)}function du(s){const t=s.indexOf("$");return Y(t!==-1&&t<s.length-1,"Bad queryKey."),{queryId:s.substr(t+1),path:new Ge(s.substr(0,t))}}function fu(s,t,r){const o=s.syncPointTree_.get(t);Y(o,"Missing sync point for query tag that we're tracking");const a=su(s.pendingWriteTree_,t);return au(o,r,a,null)}function f1(s){return s.fold((t,r,o)=>{if(r&&sr(r))return[sl(r)];{let a=[];return r&&(a=Em(r)),$t(o,(d,h)=>{a=a.concat(h)}),a}})}function li(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(i1())(s._repo,s._path):s}function h1(s,t){for(let r=0;r<t.length;++r){const o=t[r];if(!o._queryParams.loadsAllData()){const a=ll(o),d=s.queryToTagMap.get(a);s.queryToTagMap.delete(a),s.tagToQueryMap.delete(d)}}}function p1(){return o1++}function m1(s,t,r){const o=t._path,a=el(s,t),d=Pm(s,r),h=s.listenProvider_.startListening(li(t),a,d.hashFn,d.onComplete),p=s.syncPointTree_.subtree(o);if(a)Y(!sr(p.value),"If we're adding a query, it shouldn't be shadowed");else{const g=p.fold((x,N,y)=>{if(!Oe(x)&&N&&sr(N))return[sl(N).query];{let v=[];return N&&(v=v.concat(Em(N).map(T=>T.query))),$t(y,(T,L)=>{v=v.concat(L)}),v}});for(let x=0;x<g.length;++x){const N=g[x];s.listenProvider_.stopListening(li(N),el(s,N))}}return h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new hu(r)}node(){return this.node_}}class pu{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=ht(this.path_,t);return new pu(this.syncTree_,r)}node(){return ol(this.syncTree_,this.path_)}}const g1=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},hp=function(s,t,r){if(!s||typeof s!="object")return s;if(Y(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return x1(s[".sv"],t,r);if(typeof s[".sv"]=="object")return v1(s[".sv"],t);Y(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},x1=function(s,t,r){switch(s){case"timestamp":return r.timestamp;default:Y(!1,"Unexpected server value: "+s)}},v1=function(s,t,r){s.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const o=s.increment;typeof o!="number"&&Y(!1,"Unexpected increment value: "+o);const a=t.node();if(Y(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;const h=a.getValue();return typeof h!="number"?o:h+o},y1=function(s,t,r,o){return gu(t,new pu(r,s),o)},mu=function(s,t,r){return gu(s,new hu(t),r)};function gu(s,t,r){const o=s.getPriority().val(),a=hp(o,t.getImmediateChild(".priority"),r);let d;if(s.isLeafNode()){const h=s,p=hp(h.getValue(),t,r);return p!==h.getValue()||a!==h.getPriority().val()?new vt(p,_t(a)):s}else{const h=s;return d=h,a!==h.getPriority().val()&&(d=d.updatePriority(new vt(a))),h.forEachChild(it,(p,g)=>{const x=gu(g,t.getImmediateChild(p),r);x!==g&&(d=d.updateImmediateChild(p,x))}),d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t="",r=null,o={children:{},childCount:0}){this.name=t,this.parent=r,this.node=o}}function al(s,t){let r=t instanceof Ge?t:new Ge(t),o=s,a=Le(r);for(;a!==null;){const d=Cr(o.node.children,a)||{children:{},childCount:0};o=new xu(a,o,d),r=Xe(r),a=Le(r)}return o}function Tr(s){return s.node.value}function vu(s,t){s.node.value=t,Fc(s)}function Lm(s){return s.node.childCount>0}function _1(s){return Tr(s)===void 0&&!Lm(s)}function cl(s,t){$t(s.node.children,(r,o)=>{t(new xu(r,s,o))})}function Mm(s,t,r,o){r&&t(s),cl(s,a=>{Mm(a,t,!0)})}function w1(s,t,r){let o=s.parent;for(;o!==null;){if(t(o))return!0;o=o.parent}return!1}function Ci(s){return new Ge(s.parent===null?s.name:Ci(s.parent)+"/"+s.name)}function Fc(s){s.parent!==null&&b1(s.parent,s.name,s)}function b1(s,t,r){const o=_1(r),a=dn(s.node.children,t);o&&a?(delete s.node.children[t],s.node.childCount--,Fc(s)):!o&&!a&&(s.node.children[t]=r.node,s.node.childCount++,Fc(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=/[\[\].#$\/\u0000-\u001F\u007F]/,C1=/[\[\].#$\u0000-\u001F\u007F]/,yc=10*1024*1024,Dm=function(s){return typeof s=="string"&&s.length!==0&&!N1.test(s)},Om=function(s){return typeof s=="string"&&s.length!==0&&!C1.test(s)},k1=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Om(s)},S1=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!Yc(s)||s&&typeof s=="object"&&dn(s,".sv")},E1=function(s,t,r,o){ul(Hc(s,"value"),t,r)},ul=function(s,t,r){const o=r instanceof Ge?new Wy(r,s):r;if(t===void 0)throw new Error(s+"contains undefined "+wr(o));if(typeof t=="function")throw new Error(s+"contains a function "+wr(o)+" with contents = "+t.toString());if(Yc(t))throw new Error(s+"contains "+t.toString()+" "+wr(o));if(typeof t=="string"&&t.length>yc/3&&tl(t)>yc)throw new Error(s+"contains a string greater than "+yc+" utf8 bytes "+wr(o)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let a=!1,d=!1;if($t(t,(h,p)=>{if(h===".value")a=!0;else if(h!==".priority"&&h!==".sv"&&(d=!0,!Dm(h)))throw new Error(s+" contains an invalid key ("+h+") "+wr(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Hy(o,h),ul(s,p,o),Vy(o)}),a&&d)throw new Error(s+' contains ".value" child '+wr(o)+" in addition to actual children.")}},Am=function(s,t,r,o){if(!Om(r))throw new Error(Hc(s,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},j1=function(s,t,r,o){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Am(s,t,r)},Fm=function(s,t){if(Le(t)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},I1=function(s,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Dm(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!k1(r))throw new Error(Hc(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yu(s,t){let r=null;for(let o=0;o<t.length;o++){const a=t[o],d=a.getPath();r!==null&&!Xc(d,r.path)&&(s.eventLists_.push(r),r=null),r===null&&(r={events:[],path:d}),r.events.push(a)}r&&s.eventLists_.push(r)}function zm(s,t,r){yu(s,r),Um(s,o=>Xc(o,t))}function yn(s,t,r){yu(s,r),Um(s,o=>an(o,t)||an(t,o))}function Um(s,t){s.recursionDepth_++;let r=!0;for(let o=0;o<s.eventLists_.length;o++){const a=s.eventLists_[o];if(a){const d=a.path;t(d)?(R1(s.eventLists_[o]),s.eventLists_[o]=null):r=!1}}r&&(s.eventLists_=[]),s.recursionDepth_--}function R1(s){for(let t=0;t<s.events.length;t++){const r=s.events[t];if(r!==null){s.events[t]=null;const o=r.getEventRunner();ri&&It("event: "+r.toString()),hs(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="repo_interrupt",L1=25;class M1{constructor(t,r,o,a){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qo(),this.transactionQueueTree_=new xu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function D1(s,t,r){if(s.stats_=Kc(s.repoInfo_),s.forceRestClient_||py())s.server_=new Yo(s.repoInfo_,(o,a,d,h)=>{pp(s,o,a,d,h)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>mp(s,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wt(r)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}s.persistentConnection_=new Tn(s.repoInfo_,t,(o,a,d,h)=>{pp(s,o,a,d,h)},o=>{mp(s,o)},o=>{A1(s,o)},s.authTokenProvider_,s.appCheckProvider_,r),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(o=>{s.server_.refreshAuthToken(o)}),s.appCheckProvider_.addTokenChangeListener(o=>{s.server_.refreshAppCheckToken(o.token)}),s.statsReporter_=yy(s.repoInfo_,()=>new x_(s.stats_,s.server_)),s.infoData_=new f_,s.infoSyncTree_=new dp({startListening:(o,a,d,h)=>{let p=[];const g=s.infoData_.getNode(o._path);return g.isEmpty()||(p=il(s.infoSyncTree_,o._path,g),setTimeout(()=>{h("ok")},0)),p},stopListening:()=>{}}),_u(s,"connected",!1),s.serverSyncTree_=new dp({startListening:(o,a,d,h)=>(s.server_.listen(o,d,a,(p,g)=>{const x=h(p,g);yn(s.eventQueue_,o._path,x)}),[]),stopListening:(o,a)=>{s.server_.unlisten(o,a)}})}function O1(s){const r=s.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function dl(s){return g1({timestamp:O1(s)})}function pp(s,t,r,o,a){s.dataUpdateCount++;const d=new Ge(t);r=s.interceptServerDataCallback_?s.interceptServerDataCallback_(t,r):r;let h=[];if(a)if(o){const g=zo(r,x=>_t(x));h=d1(s.serverSyncTree_,d,g,a)}else{const g=_t(r);h=u1(s.serverSyncTree_,d,g,a)}else if(o){const g=zo(r,x=>_t(x));h=l1(s.serverSyncTree_,d,g)}else{const g=_t(r);h=il(s.serverSyncTree_,d,g)}let p=d;h.length>0&&(p=pl(s,d)),yn(s.eventQueue_,p,h)}function mp(s,t){_u(s,"connected",t),t===!1&&z1(s)}function A1(s,t){$t(t,(r,o)=>{_u(s,r,o)})}function _u(s,t,r){const o=new Ge("/.info/"+t),a=_t(r);s.infoData_.updateSnapshot(o,a);const d=il(s.infoSyncTree_,o,a);yn(s.eventQueue_,o,d)}function wu(s){return s.nextWriteId_++}function F1(s,t,r,o,a){fl(s,"set",{path:t.toString(),value:r,priority:o});const d=dl(s),h=_t(r,o),p=ol(s.serverSyncTree_,t),g=mu(h,p,d),x=wu(s),N=cu(s.serverSyncTree_,t,g,x,!0);yu(s.eventQueue_,N),s.server_.put(t.toString(),h.val(!0),(v,T)=>{const L=v==="ok";L||Ut("set at "+t+" failed: "+v);const U=Nr(s.serverSyncTree_,x,!L);yn(s.eventQueue_,t,U),B1(s,a,v,T)});const y=Hm(s,t);pl(s,y),yn(s.eventQueue_,y,[])}function z1(s){fl(s,"onDisconnectEvents");const t=dl(s),r=Qo();Rc(s.onDisconnect_,We(),(a,d)=>{const h=y1(a,d,s.serverSyncTree_,t);gm(r,a,h)});let o=[];Rc(r,We(),(a,d)=>{o=o.concat(il(s.serverSyncTree_,a,d));const h=Hm(s,a);pl(s,h)}),s.onDisconnect_=Qo(),yn(s.eventQueue_,We(),o)}function U1(s,t,r){let o;Le(t._path)===".info"?o=fp(s.infoSyncTree_,t,r):o=fp(s.serverSyncTree_,t,r),zm(s.eventQueue_,t._path,o)}function gp(s,t,r){let o;Le(t._path)===".info"?o=Ac(s.infoSyncTree_,t,r):o=Ac(s.serverSyncTree_,t,r),zm(s.eventQueue_,t._path,o)}function $1(s){s.persistentConnection_&&s.persistentConnection_.interrupt(P1)}function fl(s,...t){let r="";s.persistentConnection_&&(r=s.persistentConnection_.id+":"),It(r,...t)}function B1(s,t,r,o){t&&hs(()=>{if(r==="ok")t(null);else{const a=(r||"error").toUpperCase();let d=a;o&&(d+=": "+o);const h=new Error(d);h.code=a,t(h)}})}function W1(s,t,r,o,a,d){fl(s,"transaction on "+t);const h={path:t,update:r,onComplete:o,status:null,order:Fp(),applyLocally:d,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=bu(s,t,void 0);h.currentInputSnapshot=p;const g=h.update(p.val());if(g===void 0)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{ul("transaction failed: Data returned ",g,h.path),h.status=0;const x=al(s.transactionQueueTree_,t),N=Tr(x)||[];N.push(h),vu(x,N);let y;typeof g=="object"&&g!==null&&dn(g,".priority")?(y=Cr(g,".priority"),Y(S1(y),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):y=(ol(s.serverSyncTree_,t)||Ne.EMPTY_NODE).getPriority().val();const v=dl(s),T=_t(g,y),L=mu(T,p,v);h.currentOutputSnapshotRaw=T,h.currentOutputSnapshotResolved=L,h.currentWriteId=wu(s);const U=cu(s.serverSyncTree_,t,L,h.currentWriteId,h.applyLocally);yn(s.eventQueue_,t,U),hl(s,s.transactionQueueTree_)}}function bu(s,t,r){return ol(s.serverSyncTree_,t,r)||Ne.EMPTY_NODE}function hl(s,t=s.transactionQueueTree_){if(t||ml(s,t),Tr(t)){const r=Bm(s,t);Y(r.length>0,"Sending zero length transaction queue"),r.every(a=>a.status===0)&&H1(s,Ci(t),r)}else Lm(t)&&cl(t,r=>{hl(s,r)})}function H1(s,t,r){const o=r.map(x=>x.currentWriteId),a=bu(s,t,o);let d=a;const h=a.hash();for(let x=0;x<r.length;x++){const N=r[x];Y(N.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;const y=Ft(t,N.path);d=d.updateChild(y,N.currentOutputSnapshotRaw)}const p=d.val(!0),g=t;s.server_.put(g.toString(),p,x=>{fl(s,"transaction put response",{path:g.toString(),status:x});let N=[];if(x==="ok"){const y=[];for(let v=0;v<r.length;v++)r[v].status=2,N=N.concat(Nr(s.serverSyncTree_,r[v].currentWriteId)),r[v].onComplete&&y.push(()=>r[v].onComplete(null,!0,r[v].currentOutputSnapshotResolved)),r[v].unwatcher();ml(s,al(s.transactionQueueTree_,t)),hl(s,s.transactionQueueTree_),yn(s.eventQueue_,t,N);for(let v=0;v<y.length;v++)hs(y[v])}else{if(x==="datastale")for(let y=0;y<r.length;y++)r[y].status===3?r[y].status=4:r[y].status=0;else{Ut("transaction at "+g.toString()+" failed: "+x);for(let y=0;y<r.length;y++)r[y].status=4,r[y].abortReason=x}pl(s,t)}},h)}function pl(s,t){const r=$m(s,t),o=Ci(r),a=Bm(s,r);return V1(s,a,o),o}function V1(s,t,r){if(t.length===0)return;const o=[];let a=[];const h=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const g=t[p],x=Ft(r,g.path);let N=!1,y;if(Y(x!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)N=!0,y=g.abortReason,a=a.concat(Nr(s.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=L1)N=!0,y="maxretry",a=a.concat(Nr(s.serverSyncTree_,g.currentWriteId,!0));else{const v=bu(s,g.path,h);g.currentInputSnapshot=v;const T=t[p].update(v.val());if(T!==void 0){ul("transaction failed: Data returned ",T,g.path);let L=_t(T);typeof T=="object"&&T!=null&&dn(T,".priority")||(L=L.updatePriority(v.getPriority()));const X=g.currentWriteId,ie=dl(s),re=mu(L,v,ie);g.currentOutputSnapshotRaw=L,g.currentOutputSnapshotResolved=re,g.currentWriteId=wu(s),h.splice(h.indexOf(X),1),a=a.concat(cu(s.serverSyncTree_,g.path,re,g.currentWriteId,g.applyLocally)),a=a.concat(Nr(s.serverSyncTree_,X,!0))}else N=!0,y="nodata",a=a.concat(Nr(s.serverSyncTree_,g.currentWriteId,!0))}yn(s.eventQueue_,r,a),a=[],N&&(t[p].status=2,(function(v){setTimeout(v,Math.floor(0))})(t[p].unwatcher),t[p].onComplete&&(y==="nodata"?o.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):o.push(()=>t[p].onComplete(new Error(y),!1,null))))}ml(s,s.transactionQueueTree_);for(let p=0;p<o.length;p++)hs(o[p]);hl(s,s.transactionQueueTree_)}function $m(s,t){let r,o=s.transactionQueueTree_;for(r=Le(t);r!==null&&Tr(o)===void 0;)o=al(o,r),t=Xe(t),r=Le(t);return o}function Bm(s,t){const r=[];return Wm(s,t,r),r.sort((o,a)=>o.order-a.order),r}function Wm(s,t,r){const o=Tr(t);if(o)for(let a=0;a<o.length;a++)r.push(o[a]);cl(t,a=>{Wm(s,a,r)})}function ml(s,t){const r=Tr(t);if(r){let o=0;for(let a=0;a<r.length;a++)r[a].status!==2&&(r[o]=r[a],o++);r.length=o,vu(t,r.length>0?r:void 0)}cl(t,o=>{ml(s,o)})}function Hm(s,t){const r=Ci($m(s,t)),o=al(s.transactionQueueTree_,t);return w1(o,a=>{_c(s,a)}),_c(s,o),Mm(o,a=>{_c(s,a)}),r}function _c(s,t){const r=Tr(t);if(r){const o=[];let a=[],d=-1;for(let h=0;h<r.length;h++)r[h].status===3||(r[h].status===1?(Y(d===h-1,"All SENT items should be at beginning of queue."),d=h,r[h].status=3,r[h].abortReason="set"):(Y(r[h].status===0,"Unexpected transaction status in abort"),r[h].unwatcher(),a=a.concat(Nr(s.serverSyncTree_,r[h].currentWriteId,!0)),r[h].onComplete&&o.push(r[h].onComplete.bind(null,new Error("set"),!1,null))));d===-1?vu(t,void 0):r.length=d+1,yn(s.eventQueue_,Ci(t),a);for(let h=0;h<o.length;h++)hs(o[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(s){let t="";const r=s.split("/");for(let o=0;o<r.length;o++)if(r[o].length>0){let a=r[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}t+="/"+a}return t}function Q1(s){const t={};s.charAt(0)==="?"&&(s=s.substring(1));for(const r of s.split("&")){if(r.length===0)continue;const o=r.split("=");o.length===2?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Ut(`Invalid query segment '${r}' in query '${s}'`)}return t}const xp=function(s,t){const r=G1(s),o=r.namespace;r.domain==="firebase.com"&&Pn(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&r.domain!=="localhost"&&Pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||iy();const a=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new Xp(r.host,r.secure,o,a,t,"",o!==r.subdomain),path:new Ge(r.pathString)}},G1=function(s){let t="",r="",o="",a="",d="",h=!0,p="https",g=443;if(typeof s=="string"){let x=s.indexOf("//");x>=0&&(p=s.substring(0,x-1),s=s.substring(x+2));let N=s.indexOf("/");N===-1&&(N=s.length);let y=s.indexOf("?");y===-1&&(y=s.length),t=s.substring(0,Math.min(N,y)),N<y&&(a=Y1(s.substring(N,y)));const v=Q1(s.substring(Math.min(s.length,y)));x=t.indexOf(":"),x>=0?(h=p==="https"||p==="wss",g=parseInt(t.substring(x+1),10)):x=t.length;const T=t.slice(0,x);if(T.toLowerCase()==="localhost")r="localhost";else if(T.split(".").length<=2)r=T;else{const L=t.indexOf(".");o=t.substring(0,L).toLowerCase(),r=t.substring(L+1),d=o}"ns"in v&&(d=v.ns)}return{host:t,port:g,domain:r,subdomain:o,secure:h,scheme:p,pathString:a,namespace:d}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t,r,o,a){this.eventType=t,this.eventRegistration=r,this.snapshot=o,this.prevName=a}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wt(this.snapshot.exportVal())}}class q1{constructor(t,r,o){this.eventRegistration=t,this.error=r,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,r,o,a){this._repo=t,this._path=r,this._queryParams=o,this._orderByCalled=a}get key(){return Oe(this._path)?null:om(this._path)}get ref(){return new Ln(this._repo,this._path)}get _queryIdentifier(){const t=ep(this._queryParams),r=Qc(t);return r==="{}"?"default":r}get _queryObject(){return ep(this._queryParams)}isEqual(t){if(t=ds(t),!(t instanceof Nu))return!1;const r=this._repo===t._repo,o=Xc(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return r&&o&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+By(this._path)}}class Ln extends Nu{constructor(t,r){super(t,r,new tu,!1)}get parent(){const t=am(this._path);return t===null?null:new Ln(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class xi{constructor(t,r,o){this._node=t,this.ref=r,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new Ge(t),o=zc(this.ref,t);return new xi(this._node.getChild(r),o,it)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,a)=>t(new xi(a,zc(this.ref,o),it)))}hasChild(t){const r=new Ge(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Mn(s,t){return s=ds(s),s._checkNotDeleted("ref"),t!==void 0?zc(s._root,t):s._root}function zc(s,t){return s=ds(s),Le(s._path)===null?j1("child","path",t):Am("child","path",t),new Ln(s._repo,ht(s._path,t))}function ps(s,t){s=ds(s),Fm("set",s._path),E1("set",t,s._path);const r=new vi;return F1(s._repo,s._path,t,null,r.wrapCallback(()=>{})),r.promise}class Cu{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const o=r._queryParams.getIndex();return new K1("value",this,new xi(t.snapshotNode,new Ln(r._repo,r._path),o))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new q1(this,t,r):null}matches(t){return t instanceof Cu?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function J1(s,t,r,o,a){let d;if(typeof o=="object"&&(d=void 0,a=o),typeof o=="function"&&(d=o),a&&a.onlyOnce){const g=r,x=(N,y)=>{gp(s._repo,s,p),g(N,y)};x.userCallback=r.userCallback,x.context=r.context,r=x}const h=new X1(r,d||void 0),p=new Cu(h);return U1(s._repo,s,p),()=>gp(s._repo,s,p)}function Vm(s,t,r,o){return J1(s,"value",t,r,o)}J_(Ln);s1(Ln);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="FIREBASE_DATABASE_EMULATOR_HOST",Uc={};let ew=!1;function tw(s,t,r,o){const a=t.lastIndexOf(":"),d=t.substring(0,a),h=Wc(d);s.repoInfo_=new Xp(t,h,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,r),o&&(s.authTokenProvider_=o)}function nw(s,t,r,o,a){let d=o||s.options.databaseURL;d===void 0&&(s.options.projectId||Pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),It("Using default host for project ",s.options.projectId),d=`${s.options.projectId}-default-rtdb.firebaseio.com`);let h=xp(d,a),p=h.repoInfo,g;typeof process<"u"&&Oh&&(g=Oh[Z1]),g?(d=`http://${g}?ns=${p.namespace}`,h=xp(d,a),p=h.repoInfo):h.repoInfo.secure;const x=new gy(s.name,s.options,t);I1("Invalid Firebase Database URL",h),Oe(h.path)||Pn("Database URL must point to the root of a Firebase Database (not including a child path).");const N=sw(p,s,x,new my(s,r));return new iw(N,s)}function rw(s,t){const r=Uc[t];(!r||r[s.key]!==s)&&Pn(`Database ${t}(${s.repoInfo_}) has already been deleted.`),$1(s),delete r[s.key]}function sw(s,t,r,o){let a=Uc[t.name];a||(a={},Uc[t.name]=a);let d=a[s.toURLString()];return d&&Pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new M1(s,ew,r,o),a[s.toURLString()]=d,d}class iw{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(D1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ln(this._repo,We())),this._rootInternal}_delete(){return this._rootInternal!==null&&(rw(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Pn("Cannot call "+t+" on a deleted database.")}}function ow(s=$v(),t){const r=Ov(s,"database").getImmediate({identifier:t});if(!r._instanceStarted){const o=wx("database");o&&lw(r,...o)}return r}function lw(s,t,r,o={}){s=ds(s),s._checkNotDeleted("useEmulator");const a=`${t}:${r}`,d=s._repoInternal;if(s._instanceStarted){if(a===s._repoInternal.repoInfo_.host&&Uo(o,d.repoInfo_.emulatorOptions))return;Pn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(d.repoInfo_.nodeAdmin)o.mockUserToken&&Pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new Oo(Oo.OWNER);else if(o.mockUserToken){const p=typeof o.mockUserToken=="string"?o.mockUserToken:Nx(o.mockUserToken,s.app.options.projectId);h=new Oo(p)}Wc(t)&&(bx(t),Sx("Database",!0)),tw(d,a,o,h)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(s){ey(Uv),Bo(new ci("database",(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),d=t.getProvider("app-check-internal");return nw(o,a,d,r)},"PUBLIC").setMultipleInstances(!0)),rs(Ah,Fh,s),rs(Ah,Fh,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(t,r){this.committed=t,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ym(s,t,r){if(s=ds(s),Fm("Reference.transaction",s._path),s.key===".length"||s.key===".keys")throw"Reference.transaction failed: "+s.key+" is a read-only object.";const o=!0,a=new vi,d=(p,g,x)=>{let N=null;p?a.reject(p):(N=new xi(x,new Ln(s._repo,s._path),it),a.resolve(new cw(g,N)))},h=Vm(s,()=>{});return W1(s._repo,s._path,t,d,h,o),a.promise}Tn.prototype.simpleListen=function(s,t){this.sendRequest("q",{p:s},t)};Tn.prototype.echo=function(s,t){this.sendRequest("echo",{d:s},t)};aw();const uw={apiKey:"AIzaSyCIA80U-Nb235O5SG_2d1TzdylvYQrzNUc",authDomain:"razlom-db061.firebaseapp.com",projectId:"razlom-db061",storageBucket:"razlom-db061.firebasestorage.app",messagingSenderId:"343432819418",appId:"1:343432819418:web:73f0fedc8a5e5a32912be3",measurementId:"G-EPLQFH5LMJ",databaseURL:"https://razlom-db061-default-rtdb.firebaseio.com"};let vp,pt;try{vp=Lp(uw),pt=ow(vp),console.log("Firebase initialized successfully (RTDB only)")}catch(s){console.error("Firebase init error:",s)}const dw=(s,t)=>{if(!pt)return console.warn("Database not initialized, cannot subscribe"),()=>{};const r=Mn(pt,`rooms/${s}`);return Vm(r,a=>{const d=a.val();d&&t(d)},a=>{console.error("Firebase read error:",a)})},fw=async(s,t)=>{if(!pt)return;const r=Mn(pt,`rooms/${s}`);try{await ps(r,t)}catch(o){console.error("Firebase write error:",o)}},hw=async(s,t)=>{if(!pt)return;const r=Mn(pt,`rooms/${s}/characters`);try{await Ym(r,o=>{const a=o||[],d=a.findIndex(h=>h.id===t.id);return d>-1?a[d]=t:a.push(t),a})}catch(o){console.error("Error saving character:",o)}},pw=async(s,t)=>{if(!pt)return;const r=Mn(pt,`rooms/${s}/characters`);try{await Ym(r,o=>o?o.filter(a=>a.id!==t):[])}catch(o){console.error("Error deleting character:",o)}},mw=async(s,t)=>{if(!pt)return;const r=Mn(pt,`rooms/${s}/realms`);try{await ps(r,t)}catch(o){console.error("Error saving realms:",o)}},gw=async(s,t)=>{if(!pt)return;const r=Mn(pt,`rooms/${s}/worlds`);try{await ps(r,t)}catch(o){console.error("Error saving worlds:",o)}},xw=async(s,t)=>{if(!pt)return;const r=Mn(pt,`rooms/${s}/notes`);try{await ps(r,t)}catch(o){console.error("Error saving notes:",o)}},vw=async(s,t)=>{if(!pt)return;const r=Mn(pt,`rooms/${s}/rpSessions`);try{await ps(r,t)}catch(o){console.error("Error saving sessions:",o)}},yp=async(s,t,r=!1)=>{if(!pt)return;const a=Mn(pt,`rooms/${s}/${r?"availableHiddenTags":"availableTags"}`);try{await ps(a,t)}catch(d){console.error("Error saving tags:",d)}},wc="rp_haven_master_data_v3",vn="global_chronicles_main",ct=(s,t=[])=>Array.isArray(s)?s:t,yw=()=>{const[s,t]=W.useState("characters"),[r,o]=W.useState(null),[a,d]=W.useState(""),[h,p]=W.useState({}),[g,x]=W.useState(!1),[N,y]=W.useState(!1),[v,T]=W.useState(null),[L,U]=W.useState(!1),[X,ie]=W.useState(!1),[re,Ie]=W.useState(!0),[ce,Fe]=W.useState(!1),[G,P]=W.useState(cc),[R,_e]=W.useState(()=>{const M=localStorage.getItem(wc);if(M)try{const B=JSON.parse(M);return{characters:ct(B.characters,cc),realms:ct(B.realms),worlds:ct(B.worlds),notes:ct(B.notes),availableTags:ct(B.availableTags,bh),availableHiddenTags:ct(B.availableHiddenTags,Nh),rpSessions:ct(B.rpSessions)}}catch(B){console.error("Failed to parse storage",B)}return{characters:cc,realms:[],worlds:[],notes:[],availableTags:bh,availableHiddenTags:Nh,rpSessions:[]}});W.useEffect(()=>{P(R.characters)},[R.characters]),W.useEffect(()=>{if(re){const M=dw(vn,B=>{B&&_e({characters:ct(B.characters),realms:ct(B.realms),worlds:ct(B.worlds),notes:ct(B.notes),availableTags:ct(B.availableTags),availableHiddenTags:ct(B.availableHiddenTags),rpSessions:ct(B.rpSessions)})});return()=>M()}},[re]);const oe=()=>{const M=R.characters.filter(B=>{const J=B.name.toLowerCase().includes(a.toLowerCase()),Ce=Object.entries(h).every(([j,q])=>{const ge=(B.tags||[]).includes(j)||(B.hiddenTags||[]).includes(j);return q==="include"?ge:q==="exclude"?!ge:!0});return J&&Ce});Fe(!0),setTimeout(()=>{P(M),requestAnimationFrame(()=>{Fe(!1)})},600)};W.useEffect(()=>{oe()},[a,h,R.characters]);const pe=M=>{_e(M),U(!0),setTimeout(()=>U(!1),2e3);try{const B=JSON.parse(JSON.stringify(M));B.characters.forEach(J=>{J.imageUrl&&J.imageUrl.startsWith("data:")&&(J.imageUrl="")}),B.worlds.forEach(J=>{J.imageUrl&&J.imageUrl.startsWith("data:")&&(J.imageUrl="")}),B.realms.forEach(J=>{J.imageUrl&&J.imageUrl.startsWith("data:")&&(J.imageUrl="")}),localStorage.setItem(wc,JSON.stringify(B))}catch(B){console.warn("Local storage quota exceeded.",B)}},me=M=>{_e(B=>{const J={...B,notes:M};re&&xw(vn,M);const Ce=JSON.parse(JSON.stringify(J));return Ce.characters.forEach(j=>{j.imageUrl&&j.imageUrl.startsWith("data:")&&(j.imageUrl="")}),localStorage.setItem(wc,JSON.stringify(Ce)),U(!0),setTimeout(()=>U(!1),2e3),J})},Pe=M=>{const B=R.characters.some(J=>J.id===M.id)?R.characters.map(J=>J.id===M.id?M:J):[...R.characters,M];pe({...R,characters:B}),y(!1),T(null),re&&hw(vn,M)},He=M=>{if(window.confirm("    ?")){const B=R.characters.filter(J=>J.id!==M);pe({...R,characters:B}),r===M&&o(null),re&&pw(vn,M)}},ee=M=>{pe({...R,realms:M}),re&&mw(vn,M)},he=M=>{pe({...R,worlds:M}),re&&gw(vn,M)},we=M=>{const B=R.notes.filter(J=>J.id!==M);me(B)},$=M=>{pe({...R,availableTags:M}),re&&yp(vn,M,!1)},K=M=>{pe({...R,availableHiddenTags:M}),re&&yp(vn,M,!0)},w=M=>{pe({...R,rpSessions:M}),re&&vw(vn,M)},D=M=>{p(B=>{const J=B[M]||"none";let Ce="none";J==="none"?Ce="include":J==="include"?Ce="exclude":Ce="none";const j={...B};return Ce==="none"?delete j[M]:j[M]=Ce,j})},Z=()=>{d(""),p({})},Ee=Object.keys(h).length;return c.jsxs(Zg,{activeTab:s,setActiveTab:M=>{t(M),o(null),p({})},isAdmin:g,onToggleAdmin:()=>x(!g),onOpenSync:()=>ie(!0),isSyncActive:re,onDownloadDB:()=>{const M=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),B=URL.createObjectURL(M),J=document.createElement("a");J.href=B,J.download=`rp-vault-${new Date().toISOString().slice(0,10)}.json`,J.click()},onUploadDB:M=>{const B=JSON.parse(M);if(window.confirm("  ?")){const J={characters:ct(B.characters),realms:ct(B.realms),worlds:ct(B.worlds),notes:ct(B.notes),availableTags:ct(B.availableTags),availableHiddenTags:ct(B.availableHiddenTags),rpSessions:ct(B.rpSessions)};pe(J),re&&fw(vn,J)}},children:[c.jsx("div",{className:`fixed top-20 md:top-6 right-6 z-[90] transition-all duration-500 pointer-events-none ${L?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:c.jsx("div",{className:"bg-emerald-950/80 border border-emerald-500/30 backdrop-blur-2xl px-5 py-2.5 rounded-2xl flex items-center gap-3 shadow-2xl",children:c.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] font-black text-emerald-400",children:""})})}),X&&c.jsx(ux,{isConnected:re,onConnect:()=>Ie(!0),onDisconnect:()=>Ie(!1),onClose:()=>ie(!1)}),c.jsxs("div",{className:"animate-tab-switch",children:[s==="characters"&&c.jsx("div",{className:"space-y-8",children:r?c.jsx(tx,{character:R.characters.find(M=>M.id===r),isAdmin:g,allCharacters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,worlds:R.worlds,notes:R.notes,onBack:()=>o(null),onSave:Pe,onSelectCharacter:o,onDeleteNote:we}):c.jsxs("div",{className:"animate-reveal-list space-y-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6",children:[c.jsx("input",{type:"text",placeholder:"  ...",value:a,onChange:M=>d(M.target.value),className:"w-full bg-transparent border-b border-stone-900 text-3xl outline-none font-serif italic py-4"}),g&&c.jsx("button",{onClick:()=>{T(null),y(!0)},className:"bg-white text-black px-8 py-3.5 rounded-full text-[10px] uppercase font-black transition-all shadow-xl",children:" "})]}),(R.availableTags.length>0||R.availableHiddenTags.length>0)&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-4 bg-[#0f0f0f]/30 border border-stone-900/50 rounded-2xl",children:[c.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2",children:":"}),R.availableTags.map(M=>{const B=h[M]||"none";return c.jsxs("button",{onClick:()=>D(M),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${B==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":B==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[B==="include"&&c.jsx("span",{className:"text-emerald-500 font-black",children:"+"}),B==="exclude"&&c.jsx("span",{className:"text-red-500 font-black",children:""}),M]},M)}),R.availableHiddenTags.map(M=>{const B=h[M]||"none";return c.jsxs("button",{onClick:()=>D(M),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${B==="include"?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":B==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-amber-500 hover:border-amber-900/30"}`,children:[B==="include"&&c.jsx("span",{className:"text-amber-500 font-black",children:"+"}),B==="exclude"&&c.jsx("span",{className:"text-red-500 font-black",children:""}),M]},M)}),(Ee>0||a)&&c.jsx("button",{onClick:Z,className:"ml-auto text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:" "})]}),c.jsxs("div",{className:"flex flex-wrap -mx-5 relative min-h-[400px]",children:[G.map((M,B)=>c.jsx(ex,{character:M,isVisible:!ce,staggerIndex:B,onClick:o},M.id)),G.length===0&&!ce&&c.jsx("div",{className:"w-full py-20 text-center text-stone-700 italic font-serif animate-in fade-in duration-700",children:"       ..."})]})]})}),s==="connections"&&c.jsx(ox,{characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,filterStates:h,onToggleTag:D,onClearFilters:()=>p({}),onSelectCharacter:M=>{o(M),t("characters")}}),s==="roleplay"&&c.jsx(cx,{sessions:R.rpSessions,characters:R.characters,onUpdate:w,isAdmin:g}),s==="worlds"&&c.jsx(lx,{realms:R.realms,worlds:R.worlds,characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onUpdateRealms:ee,onUpdateWorlds:he,isAdmin:g}),s==="notes"&&c.jsx(ax,{notes:R.notes,characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onUpdate:me,isAdmin:g}),s==="admin"&&g&&c.jsx(rx,{characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onDelete:He,onEdit:M=>{T(M),y(!0)},onAdd:()=>{T(null),y(!0)},onUpdateTags:$,onUpdateHiddenTags:K,onDownloadDB:()=>{},onUploadDB:()=>{}})]}),N&&c.jsx(nx,{initialData:v,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onSave:Pe,onClose:()=>y(!1)})]})},Qm=document.getElementById("root");if(!Qm)throw new Error("Could not find root element to mount to");const _w=Jg.createRoot(Qm);_w.render(c.jsx(Vg.StrictMode,{children:c.jsx(yw,{})}));
