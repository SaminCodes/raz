(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();function ng(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var wu={exports:{}},Qs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function Fv(){if(Z0)return Qs;Z0=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(r,c,f){var d=null;if(f!==void 0&&(d=""+f),c.key!==void 0&&(d=""+c.key),"key"in c){f={};for(var p in c)p!=="key"&&(f[p]=c[p])}else f=c;return c=f.ref,{$$typeof:s,type:r,key:d,ref:c!==void 0?c:null,props:f}}return Qs.Fragment=n,Qs.jsx=i,Qs.jsxs=i,Qs}var K0;function Jv(){return K0||(K0=1,wu.exports=Fv()),wu.exports}var m=Jv(),Au={exports:{}},ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Wv(){if(F0)return ae;F0=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function z(x){return x===null||typeof x!="object"?null:(x=b&&x[b]||x["@@iterator"],typeof x=="function"?x:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,re={};function P(x,M,q){this.props=x,this.context=M,this.refs=re,this.updater=q||I}P.prototype.isReactComponent={},P.prototype.setState=function(x,M){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,M,"setState")},P.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function ge(){}ge.prototype=P.prototype;function W(x,M,q){this.props=x,this.context=M,this.refs=re,this.updater=q||I}var le=W.prototype=new ge;le.constructor=W,X(le,P.prototype),le.isPureReactComponent=!0;var et=Array.isArray;function Me(){}var ue={H:null,A:null,T:null,S:null},lt=Object.prototype.hasOwnProperty;function xt(x,M,q){var V=q.ref;return{$$typeof:s,type:x,key:M,ref:V!==void 0?V:null,props:q}}function Rt(x,M){return xt(x.type,M,x.props)}function ct(x){return typeof x=="object"&&x!==null&&x.$$typeof===s}function Fe(x){var M={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(q){return M[q]})}var ht=/\/+/g;function St(x,M){return typeof x=="object"&&x!==null&&x.key!=null?Fe(""+x.key):M.toString(36)}function H(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(Me,Me):(x.status="pending",x.then(function(M){x.status==="pending"&&(x.status="fulfilled",x.value=M)},function(M){x.status==="pending"&&(x.status="rejected",x.reason=M)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function T(x,M,q,V,ie){var se=typeof x;(se==="undefined"||se==="boolean")&&(x=null);var Ne=!1;if(x===null)Ne=!0;else switch(se){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(x.$$typeof){case s:case n:Ne=!0;break;case C:return Ne=x._init,T(Ne(x._payload),M,q,V,ie)}}if(Ne)return ie=ie(x),Ne=V===""?"."+St(x,0):V,et(ie)?(q="",Ne!=null&&(q=Ne.replace(ht,"$&/")+"/"),T(ie,M,q,"",function(Nn){return Nn})):ie!=null&&(ct(ie)&&(ie=Rt(ie,q+(ie.key==null||x&&x.key===ie.key?"":(""+ie.key).replace(ht,"$&/")+"/")+Ne)),M.push(ie)),1;Ne=0;var mt=V===""?".":V+":";if(et(x))for(var Ve=0;Ve<x.length;Ve++)V=x[Ve],se=mt+St(V,Ve),Ne+=T(V,M,q,se,ie);else if(Ve=z(x),typeof Ve=="function")for(x=Ve.call(x),Ve=0;!(V=x.next()).done;)V=V.value,se=mt+St(V,Ve++),Ne+=T(V,M,q,se,ie);else if(se==="object"){if(typeof x.then=="function")return T(H(x),M,q,V,ie);throw M=String(x),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function L(x,M,q){if(x==null)return x;var V=[],ie=0;return T(x,V,"","",function(se){return M.call(q,se,ie++)}),V}function G(x){if(x._status===-1){var M=x._result;M=M(),M.then(function(q){(x._status===0||x._status===-1)&&(x._status=1,x._result=q)},function(q){(x._status===0||x._status===-1)&&(x._status=2,x._result=q)}),x._status===-1&&(x._status=0,x._result=M)}if(x._status===1)return x._result.default;throw x._result}var Ee=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},B={map:L,forEach:function(x,M,q){L(x,function(){M.apply(this,arguments)},q)},count:function(x){var M=0;return L(x,function(){M++}),M},toArray:function(x){return L(x,function(M){return M})||[]},only:function(x){if(!ct(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return ae.Activity=v,ae.Children=B,ae.Component=P,ae.Fragment=i,ae.Profiler=c,ae.PureComponent=W,ae.StrictMode=r,ae.Suspense=_,ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,ae.__COMPILER_RUNTIME={__proto__:null,c:function(x){return ue.H.useMemoCache(x)}},ae.cache=function(x){return function(){return x.apply(null,arguments)}},ae.cacheSignal=function(){return null},ae.cloneElement=function(x,M,q){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var V=X({},x.props),ie=x.key;if(M!=null)for(se in M.key!==void 0&&(ie=""+M.key),M)!lt.call(M,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&M.ref===void 0||(V[se]=M[se]);var se=arguments.length-2;if(se===1)V.children=q;else if(1<se){for(var Ne=Array(se),mt=0;mt<se;mt++)Ne[mt]=arguments[mt+2];V.children=Ne}return xt(x.type,ie,V)},ae.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:f,_context:x},x},ae.createElement=function(x,M,q){var V,ie={},se=null;if(M!=null)for(V in M.key!==void 0&&(se=""+M.key),M)lt.call(M,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(ie[V]=M[V]);var Ne=arguments.length-2;if(Ne===1)ie.children=q;else if(1<Ne){for(var mt=Array(Ne),Ve=0;Ve<Ne;Ve++)mt[Ve]=arguments[Ve+2];ie.children=mt}if(x&&x.defaultProps)for(V in Ne=x.defaultProps,Ne)ie[V]===void 0&&(ie[V]=Ne[V]);return xt(x,se,ie)},ae.createRef=function(){return{current:null}},ae.forwardRef=function(x){return{$$typeof:p,render:x}},ae.isValidElement=ct,ae.lazy=function(x){return{$$typeof:C,_payload:{_status:-1,_result:x},_init:G}},ae.memo=function(x,M){return{$$typeof:g,type:x,compare:M===void 0?null:M}},ae.startTransition=function(x){var M=ue.T,q={};ue.T=q;try{var V=x(),ie=ue.S;ie!==null&&ie(q,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(Me,Ee)}catch(se){Ee(se)}finally{M!==null&&q.types!==null&&(M.types=q.types),ue.T=M}},ae.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},ae.use=function(x){return ue.H.use(x)},ae.useActionState=function(x,M,q){return ue.H.useActionState(x,M,q)},ae.useCallback=function(x,M){return ue.H.useCallback(x,M)},ae.useContext=function(x){return ue.H.useContext(x)},ae.useDebugValue=function(){},ae.useDeferredValue=function(x,M){return ue.H.useDeferredValue(x,M)},ae.useEffect=function(x,M){return ue.H.useEffect(x,M)},ae.useEffectEvent=function(x){return ue.H.useEffectEvent(x)},ae.useId=function(){return ue.H.useId()},ae.useImperativeHandle=function(x,M,q){return ue.H.useImperativeHandle(x,M,q)},ae.useInsertionEffect=function(x,M){return ue.H.useInsertionEffect(x,M)},ae.useLayoutEffect=function(x,M){return ue.H.useLayoutEffect(x,M)},ae.useMemo=function(x,M){return ue.H.useMemo(x,M)},ae.useOptimistic=function(x,M){return ue.H.useOptimistic(x,M)},ae.useReducer=function(x,M,q){return ue.H.useReducer(x,M,q)},ae.useRef=function(x){return ue.H.useRef(x)},ae.useState=function(x){return ue.H.useState(x)},ae.useSyncExternalStore=function(x,M,q){return ue.H.useSyncExternalStore(x,M,q)},ae.useTransition=function(){return ue.H.useTransition()},ae.version="19.2.3",ae}var J0;function df(){return J0||(J0=1,Au.exports=Wv()),Au.exports}var F=df();const $v=ng(F);var Ru={exports:{}},Zs={},Ou={exports:{}},Du={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function Pv(){return W0||(W0=1,(function(s){function n(T,L){var G=T.length;T.push(L);e:for(;0<G;){var Ee=G-1>>>1,B=T[Ee];if(0<c(B,L))T[Ee]=L,T[G]=B,G=Ee;else break e}}function i(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var L=T[0],G=T.pop();if(G!==L){T[0]=G;e:for(var Ee=0,B=T.length,x=B>>>1;Ee<x;){var M=2*(Ee+1)-1,q=T[M],V=M+1,ie=T[V];if(0>c(q,G))V<B&&0>c(ie,q)?(T[Ee]=ie,T[V]=G,Ee=V):(T[Ee]=q,T[M]=G,Ee=M);else if(V<B&&0>c(ie,G))T[Ee]=ie,T[V]=G,Ee=V;else break e}}return L}function c(T,L){var G=T.sortIndex-L.sortIndex;return G!==0?G:T.id-L.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var _=[],g=[],C=1,v=null,b=3,z=!1,I=!1,X=!1,re=!1,P=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function le(T){for(var L=i(g);L!==null;){if(L.callback===null)r(g);else if(L.startTime<=T)r(g),L.sortIndex=L.expirationTime,n(_,L);else break;L=i(g)}}function et(T){if(X=!1,le(T),!I)if(i(_)!==null)I=!0,Me||(Me=!0,Fe());else{var L=i(g);L!==null&&H(et,L.startTime-T)}}var Me=!1,ue=-1,lt=5,xt=-1;function Rt(){return re?!0:!(s.unstable_now()-xt<lt)}function ct(){if(re=!1,Me){var T=s.unstable_now();xt=T;var L=!0;try{e:{I=!1,X&&(X=!1,ge(ue),ue=-1),z=!0;var G=b;try{t:{for(le(T),v=i(_);v!==null&&!(v.expirationTime>T&&Rt());){var Ee=v.callback;if(typeof Ee=="function"){v.callback=null,b=v.priorityLevel;var B=Ee(v.expirationTime<=T);if(T=s.unstable_now(),typeof B=="function"){v.callback=B,le(T),L=!0;break t}v===i(_)&&r(_),le(T)}else r(_);v=i(_)}if(v!==null)L=!0;else{var x=i(g);x!==null&&H(et,x.startTime-T),L=!1}}break e}finally{v=null,b=G,z=!1}L=void 0}}finally{L?Fe():Me=!1}}}var Fe;if(typeof W=="function")Fe=function(){W(ct)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,St=ht.port2;ht.port1.onmessage=ct,Fe=function(){St.postMessage(null)}}else Fe=function(){P(ct,0)};function H(T,L){ue=P(function(){T(s.unstable_now())},L)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(T){T.callback=null},s.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):lt=0<T?Math.floor(1e3/T):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(T){switch(b){case 1:case 2:case 3:var L=3;break;default:L=b}var G=b;b=L;try{return T()}finally{b=G}},s.unstable_requestPaint=function(){re=!0},s.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var G=b;b=T;try{return L()}finally{b=G}},s.unstable_scheduleCallback=function(T,L,G){var Ee=s.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Ee+G:Ee):G=Ee,T){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=G+B,T={id:C++,callback:L,priorityLevel:T,startTime:G,expirationTime:B,sortIndex:-1},G>Ee?(T.sortIndex=G,n(g,T),i(_)===null&&T===i(g)&&(X?(ge(ue),ue=-1):X=!0,H(et,G-Ee))):(T.sortIndex=B,n(_,T),I||z||(I=!0,Me||(Me=!0,Fe()))),T},s.unstable_shouldYield=Rt,s.unstable_wrapCallback=function(T){var L=b;return function(){var G=b;b=L;try{return T.apply(this,arguments)}finally{b=G}}}})(Du)),Du}var $0;function eb(){return $0||($0=1,Ou.exports=Pv()),Ou.exports}var Mu={exports:{}},Dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function tb(){if(P0)return Dt;P0=1;var s=df();function n(_){var g="https://react.dev/errors/"+_;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+_+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(_,g,C){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:_,containerInfo:g,implementation:C}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(_,g){if(_==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dt.createPortal=function(_,g){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return f(_,g,null,C)},Dt.flushSync=function(_){var g=d.T,C=r.p;try{if(d.T=null,r.p=2,_)return _()}finally{d.T=g,r.p=C,r.d.f()}},Dt.preconnect=function(_,g){typeof _=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(_,g))},Dt.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},Dt.preinit=function(_,g){if(typeof _=="string"&&g&&typeof g.as=="string"){var C=g.as,v=p(C,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,z=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;C==="style"?r.d.S(_,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:z}):C==="script"&&r.d.X(_,{crossOrigin:v,integrity:b,fetchPriority:z,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Dt.preinitModule=function(_,g){if(typeof _=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var C=p(g.as,g.crossOrigin);r.d.M(_,{crossOrigin:C,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(_)},Dt.preload=function(_,g){if(typeof _=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var C=g.as,v=p(C,g.crossOrigin);r.d.L(_,C,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Dt.preloadModule=function(_,g){if(typeof _=="string")if(g){var C=p(g.as,g.crossOrigin);r.d.m(_,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:C,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(_)},Dt.requestFormReset=function(_){r.d.r(_)},Dt.unstable_batchedUpdates=function(_,g){return _(g)},Dt.useFormState=function(_,g,C){return d.H.useFormState(_,g,C)},Dt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Dt.version="19.2.3",Dt}var ep;function nb(){if(ep)return Mu.exports;ep=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Mu.exports=tb(),Mu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function lb(){if(tp)return Zs;tp=1;var s=eb(),n=df(),i=nb();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _(e){if(f(e)!==e)throw Error(r(188))}function g(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(r(188));return t!==e?null:e}for(var l=e,a=t;;){var o=l.return;if(o===null)break;var u=o.alternate;if(u===null){if(a=o.return,a!==null){l=a;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===l)return _(o),e;if(u===a)return _(o),t;u=u.sibling}throw Error(r(188))}if(l.return!==a.return)l=o,a=u;else{for(var h=!1,y=o.child;y;){if(y===l){h=!0,l=o,a=u;break}if(y===a){h=!0,a=o,l=u;break}y=y.sibling}if(!h){for(y=u.child;y;){if(y===l){h=!0,l=u,a=o;break}if(y===a){h=!0,a=u,l=o;break}y=y.sibling}if(!h)throw Error(r(189))}}if(l.alternate!==a)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?e:t}function C(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=C(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),ge=Symbol.for("react.consumer"),W=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),xt=Symbol.for("react.activity"),Rt=Symbol.for("react.memo_cache_sentinel"),ct=Symbol.iterator;function Fe(e){return e===null||typeof e!="object"?null:(e=ct&&e[ct]||e["@@iterator"],typeof e=="function"?e:null)}var ht=Symbol.for("react.client.reference");function St(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ht?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case P:return"Profiler";case re:return"StrictMode";case et:return"Suspense";case Me:return"SuspenseList";case xt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case W:return e.displayName||"Context";case ge:return(e._context.displayName||"Context")+".Consumer";case le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ue:return t=e.displayName||null,t!==null?t:St(e.type)||"Memo";case lt:t=e._payload,e=e._init;try{return St(e(t))}catch{}}return null}var H=Array.isArray,T=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Ee=[],B=-1;function x(e){return{current:e}}function M(e){0>B||(e.current=Ee[B],Ee[B]=null,B--)}function q(e,t){B++,Ee[B]=e.current,e.current=t}var V=x(null),ie=x(null),se=x(null),Ne=x(null);function mt(e,t){switch(q(se,t),q(ie,e),q(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?g0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=g0(t),e=_0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(V),q(V,e)}function Ve(){M(V),M(ie),M(se)}function Nn(e){e.memoizedState!==null&&q(Ne,e);var t=V.current,l=_0(t,e.type);t!==l&&(q(ie,e),q(V,l))}function fn(e){ie.current===e&&(M(V),M(ie)),Ne.current===e&&(M(Ne),Ys._currentValue=G)}var ti,O;function K(e){if(ti===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);ti=t&&t[1]||"",O=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+e+O}var ee=!1;function fe(e,t){if(!e||ee)return"";ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(D){var R=D}Reflect.construct(e,[],U)}else{try{U.call()}catch(D){R=D}e.call(U.prototype)}}else{try{throw Error()}catch(D){R=D}(U=e())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(D){if(D&&R&&typeof D.stack=="string")return[D.stack,R.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=a.DetermineComponentFrameRoot(),h=u[0],y=u[1];if(h&&y){var S=h.split(`
`),A=y.split(`
`);for(o=a=0;a<S.length&&!S[a].includes("DetermineComponentFrameRoot");)a++;for(;o<A.length&&!A[o].includes("DetermineComponentFrameRoot");)o++;if(a===S.length||o===A.length)for(a=S.length-1,o=A.length-1;1<=a&&0<=o&&S[a]!==A[o];)o--;for(;1<=a&&0<=o;a--,o--)if(S[a]!==A[o]){if(a!==1||o!==1)do if(a--,o--,0>o||S[a]!==A[o]){var j=`
`+S[a].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=a&&0<=o);break}}}finally{ee=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?K(l):""}function oe(e,t){switch(e.tag){case 26:case 27:case 5:return K(e.type);case 16:return K("Lazy");case 13:return e.child!==t&&t!==null?K("Suspense Fallback"):K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return fe(e.type,!1);case 11:return fe(e.type.render,!1);case 1:return fe(e.type,!0);case 31:return K("Activity");default:return""}}function Ie(e){try{var t="",l=null;do t+=oe(e,l),l=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var he=Object.prototype.hasOwnProperty,Je=s.unstable_scheduleCallback,it=s.unstable_cancelCallback,zt=s.unstable_shouldYield,pt=s.unstable_requestPaint,Te=s.unstable_now,te=s.unstable_getCurrentPriorityLevel,Ce=s.unstable_ImmediatePriority,De=s.unstable_UserBlockingPriority,qe=s.unstable_NormalPriority,Ot=s.unstable_LowPriority,vn=s.unstable_IdlePriority,ni=s.log,Tn=s.unstable_setDisableYieldValue,bn=null,ut=null;function Wn(e){if(typeof ni=="function"&&Tn(e),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(bn,e)}catch{}}var Qt=Math.clz32?Math.clz32:k_,j_=Math.log,z_=Math.LN2;function k_(e){return e>>>=0,e===0?32:31-(j_(e)/z_|0)|0}var xa=256,Sa=262144,Ea=4194304;function Al(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ca(e,t,l){var a=e.pendingLanes;if(a===0)return 0;var o=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var y=a&134217727;return y!==0?(a=y&~u,a!==0?o=Al(a):(h&=y,h!==0?o=Al(h):l||(l=y&~e,l!==0&&(o=Al(l))))):(y=a&~u,y!==0?o=Al(y):h!==0?o=Al(h):l||(l=a&~e,l!==0&&(o=Al(l)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,l=t&-t,u>=l||u===32&&(l&4194048)!==0)?t:o}function ts(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function U_(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wf(){var e=Ea;return Ea<<=1,(Ea&62914560)===0&&(Ea=4194304),e}function po(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function ns(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function L_(e,t,l,a,o,u){var h=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var y=e.entanglements,S=e.expirationTimes,A=e.hiddenUpdates;for(l=h&~l;0<l;){var j=31-Qt(l),U=1<<j;y[j]=0,S[j]=-1;var R=A[j];if(R!==null)for(A[j]=null,j=0;j<R.length;j++){var D=R[j];D!==null&&(D.lane&=-536870913)}l&=~U}a!==0&&$f(e,a,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function $f(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Qt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|l&261930}function Pf(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var a=31-Qt(l),o=1<<a;o&t|e[a]&t&&(e[a]|=t),l&=~o}}function ed(e,t){var l=t&-t;return l=(l&42)!==0?1:go(l),(l&(e.suspendedLanes|t))!==0?0:l}function go(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _o(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function td(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:B0(e.type))}function nd(e,t){var l=L.p;try{return L.p=e,t()}finally{L.p=l}}var $n=Math.random().toString(36).slice(2),Et="__reactFiber$"+$n,kt="__reactProps$"+$n,li="__reactContainer$"+$n,yo="__reactEvents$"+$n,I_="__reactListeners$"+$n,H_="__reactHandles$"+$n,ld="__reactResources$"+$n,ls="__reactMarker$"+$n;function vo(e){delete e[Et],delete e[kt],delete e[yo],delete e[I_],delete e[H_]}function ii(e){var t=e[Et];if(t)return t;for(var l=e.parentNode;l;){if(t=l[li]||l[Et]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=C0(e);e!==null;){if(l=e[Et])return l;e=C0(e)}return t}e=l,l=e.parentNode}return null}function si(e){if(e=e[Et]||e[li]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function is(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function ai(e){var t=e[ld];return t||(t=e[ld]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function gt(e){e[ls]=!0}var id=new Set,sd={};function Rl(e,t){ri(e,t),ri(e+"Capture",t)}function ri(e,t){for(sd[e]=t,e=0;e<t.length;e++)id.add(t[e])}var B_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ad={},rd={};function q_(e){return he.call(rd,e)?!0:he.call(ad,e)?!1:B_.test(e)?rd[e]=!0:(ad[e]=!0,!1)}function Na(e,t,l){if(q_(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function Ta(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function wn(e,t,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+a)}}function en(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function od(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Y_(e,t,l){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var o=a.get,u=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){l=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(h){l=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bo(e){if(!e._valueTracker){var t=od(e)?"checked":"value";e._valueTracker=Y_(e,t,""+e[t])}}function cd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),a="";return e&&(a=od(e)?e.checked?"true":"false":e.value),e=a,e!==l?(t.setValue(e),!0):!1}function wa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var G_=/[\n"\\]/g;function tn(e){return e.replace(G_,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function xo(e,t,l,a,o,u,h,y){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+en(t)):e.value!==""+en(t)&&(e.value=""+en(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?So(e,h,en(t)):l!=null?So(e,h,en(l)):a!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+en(y):e.removeAttribute("name")}function ud(e,t,l,a,o,u,h,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||l!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){bo(e);return}l=l!=null?""+en(l):"",t=t!=null?""+en(t):l,y||t===e.value||(e.value=t),e.defaultValue=t}a=a??o,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=y?e.checked:!!a,e.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),bo(e)}function So(e,t,l){t==="number"&&wa(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function oi(e,t,l,a){if(e=e.options,t){t={};for(var o=0;o<l.length;o++)t["$"+l[o]]=!0;for(l=0;l<e.length;l++)o=t.hasOwnProperty("$"+e[l].value),e[l].selected!==o&&(e[l].selected=o),o&&a&&(e[l].defaultSelected=!0)}else{for(l=""+en(l),t=null,o=0;o<e.length;o++){if(e[o].value===l){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function fd(e,t,l){if(t!=null&&(t=""+en(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+en(l):""}function dd(e,t,l,a){if(t==null){if(a!=null){if(l!=null)throw Error(r(92));if(H(a)){if(1<a.length)throw Error(r(93));a=a[0]}l=a}l==null&&(l=""),t=l}l=en(t),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a),bo(e)}function ci(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var V_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hd(e,t,l){var a=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,l):typeof l!="number"||l===0||V_.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function md(e,t,l){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var o in t)a=t[o],t.hasOwnProperty(o)&&l[o]!==a&&hd(e,o,a)}else for(var u in t)t.hasOwnProperty(u)&&hd(e,u,t[u])}function Eo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(e){return Q_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function An(){}var Co=null;function No(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ui=null,fi=null;function pd(e){var t=si(e);if(t&&(e=t.stateNode)){var l=e[kt]||null;e:switch(e=t.stateNode,t.type){case"input":if(xo(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+tn(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var a=l[t];if(a!==e&&a.form===e.form){var o=a[kt]||null;if(!o)throw Error(r(90));xo(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<l.length;t++)a=l[t],a.form===e.form&&cd(a)}break e;case"textarea":fd(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&oi(e,!!l.multiple,t,!1)}}}var To=!1;function gd(e,t,l){if(To)return e(t,l);To=!0;try{var a=e(t);return a}finally{if(To=!1,(ui!==null||fi!==null)&&(pr(),ui&&(t=ui,e=fi,fi=ui=null,pd(t),e)))for(t=0;t<e.length;t++)pd(e[t])}}function ss(e,t){var l=e.stateNode;if(l===null)return null;var a=l[kt]||null;if(a===null)return null;l=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(r(231,t,typeof l));return l}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wo=!1;if(Rn)try{var as={};Object.defineProperty(as,"passive",{get:function(){wo=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{wo=!1}var Pn=null,Ao=null,Ra=null;function _d(){if(Ra)return Ra;var e,t=Ao,l=t.length,a,o="value"in Pn?Pn.value:Pn.textContent,u=o.length;for(e=0;e<l&&t[e]===o[e];e++);var h=l-e;for(a=1;a<=h&&t[l-a]===o[u-a];a++);return Ra=o.slice(e,1<a?1-a:void 0)}function Oa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Da(){return!0}function yd(){return!1}function Ut(e){function t(l,a,o,u,h){this._reactName=l,this._targetInst=o,this.type=a,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(l=e[y],this[y]=l?l(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Da:yd,this.isPropagationStopped=yd,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),t}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ma=Ut(Ol),rs=v({},Ol,{view:0,detail:0}),Z_=Ut(rs),Ro,Oo,os,ja=v({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==os&&(os&&e.type==="mousemove"?(Ro=e.screenX-os.screenX,Oo=e.screenY-os.screenY):Oo=Ro=0,os=e),Ro)},movementY:function(e){return"movementY"in e?e.movementY:Oo}}),vd=Ut(ja),K_=v({},ja,{dataTransfer:0}),F_=Ut(K_),J_=v({},rs,{relatedTarget:0}),Do=Ut(J_),W_=v({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),$_=Ut(W_),P_=v({},Ol,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ey=Ut(P_),ty=v({},Ol,{data:0}),bd=Ut(ty),ny={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ly={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iy[e])?!!t[e]:!1}function Mo(){return sy}var ay=v({},rs,{key:function(e){if(e.key){var t=ny[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ly[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(e){return e.type==="keypress"?Oa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ry=Ut(ay),oy=v({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=Ut(oy),cy=v({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),uy=Ut(cy),fy=v({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),dy=Ut(fy),hy=v({},ja,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),my=Ut(hy),py=v({},Ol,{newState:0,oldState:0}),gy=Ut(py),_y=[9,13,27,32],jo=Rn&&"CompositionEvent"in window,cs=null;Rn&&"documentMode"in document&&(cs=document.documentMode);var yy=Rn&&"TextEvent"in window&&!cs,Sd=Rn&&(!jo||cs&&8<cs&&11>=cs),Ed=" ",Cd=!1;function Nd(e,t){switch(e){case"keyup":return _y.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Td(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var di=!1;function vy(e,t){switch(e){case"compositionend":return Td(t);case"keypress":return t.which!==32?null:(Cd=!0,Ed);case"textInput":return e=t.data,e===Ed&&Cd?null:e;default:return null}}function by(e,t){if(di)return e==="compositionend"||!jo&&Nd(e,t)?(e=_d(),Ra=Ao=Pn=null,di=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sd&&t.locale!=="ko"?null:t.data;default:return null}}var xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xy[e.type]:t==="textarea"}function Ad(e,t,l,a){ui?fi?fi.push(a):fi=[a]:ui=a,t=Sr(t,"onChange"),0<t.length&&(l=new Ma("onChange","change",null,l,a),e.push({event:l,listeners:t}))}var us=null,fs=null;function Sy(e){u0(e,0)}function za(e){var t=is(e);if(cd(t))return e}function Rd(e,t){if(e==="change")return t}var Od=!1;if(Rn){var zo;if(Rn){var ko="oninput"in document;if(!ko){var Dd=document.createElement("div");Dd.setAttribute("oninput","return;"),ko=typeof Dd.oninput=="function"}zo=ko}else zo=!1;Od=zo&&(!document.documentMode||9<document.documentMode)}function Md(){us&&(us.detachEvent("onpropertychange",jd),fs=us=null)}function jd(e){if(e.propertyName==="value"&&za(fs)){var t=[];Ad(t,fs,e,No(e)),gd(Sy,t)}}function Ey(e,t,l){e==="focusin"?(Md(),us=t,fs=l,us.attachEvent("onpropertychange",jd)):e==="focusout"&&Md()}function Cy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return za(fs)}function Ny(e,t){if(e==="click")return za(t)}function Ty(e,t){if(e==="input"||e==="change")return za(t)}function wy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:wy;function ds(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),a=Object.keys(t);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var o=l[a];if(!he.call(t,o)||!Zt(e[o],t[o]))return!1}return!0}function zd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kd(e,t){var l=zd(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=t&&a>=t)return{node:l,offset:t-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=zd(l)}}function Ud(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ud(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ld(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=wa(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=wa(e.document)}return t}function Uo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ay=Rn&&"documentMode"in document&&11>=document.documentMode,hi=null,Lo=null,hs=null,Io=!1;function Id(e,t,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Io||hi==null||hi!==wa(a)||(a=hi,"selectionStart"in a&&Uo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),hs&&ds(hs,a)||(hs=a,a=Sr(Lo,"onSelect"),0<a.length&&(t=new Ma("onSelect","select",null,t,l),e.push({event:t,listeners:a}),t.target=hi)))}function Dl(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var mi={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionrun:Dl("Transition","TransitionRun"),transitionstart:Dl("Transition","TransitionStart"),transitioncancel:Dl("Transition","TransitionCancel"),transitionend:Dl("Transition","TransitionEnd")},Ho={},Hd={};Rn&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function Ml(e){if(Ho[e])return Ho[e];if(!mi[e])return e;var t=mi[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in Hd)return Ho[e]=t[l];return e}var Bd=Ml("animationend"),qd=Ml("animationiteration"),Yd=Ml("animationstart"),Ry=Ml("transitionrun"),Oy=Ml("transitionstart"),Dy=Ml("transitioncancel"),Gd=Ml("transitionend"),Vd=new Map,Bo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bo.push("scrollEnd");function dn(e,t){Vd.set(e,t),Rl(t,[e])}var ka=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},nn=[],pi=0,qo=0;function Ua(){for(var e=pi,t=qo=pi=0;t<e;){var l=nn[t];nn[t++]=null;var a=nn[t];nn[t++]=null;var o=nn[t];nn[t++]=null;var u=nn[t];if(nn[t++]=null,a!==null&&o!==null){var h=a.pending;h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o}u!==0&&Xd(l,o,u)}}function La(e,t,l,a){nn[pi++]=e,nn[pi++]=t,nn[pi++]=l,nn[pi++]=a,qo|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Yo(e,t,l,a){return La(e,t,l,a),Ia(e)}function jl(e,t){return La(e,null,null,t),Ia(e)}function Xd(e,t,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var o=!1,u=e.return;u!==null;)u.childLanes|=l,a=u.alternate,a!==null&&(a.childLanes|=l),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-Qt(l),e=u.hiddenUpdates,a=e[o],a===null?e[o]=[t]:a.push(t),t.lane=l|536870912),u):null}function Ia(e){if(50<ks)throw ks=0,Wc=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var gi={};function My(e,t,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,l,a){return new My(e,t,l,a)}function Go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function On(e,t){var l=e.alternate;return l===null?(l=Kt(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Qd(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ha(e,t,l,a,o,u){var h=0;if(a=e,typeof e=="function")Go(e)&&(h=1);else if(typeof e=="string")h=Lv(e,l,V.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case xt:return e=Kt(31,l,t,o),e.elementType=xt,e.lanes=u,e;case X:return zl(l.children,o,u,t);case re:h=8,o|=24;break;case P:return e=Kt(12,l,t,o|2),e.elementType=P,e.lanes=u,e;case et:return e=Kt(13,l,t,o),e.elementType=et,e.lanes=u,e;case Me:return e=Kt(19,l,t,o),e.elementType=Me,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W:h=10;break e;case ge:h=9;break e;case le:h=11;break e;case ue:h=14;break e;case lt:h=16,a=null;break e}h=29,l=Error(r(130,e===null?"null":typeof e,"")),a=null}return t=Kt(h,l,t,o),t.elementType=e,t.type=a,t.lanes=u,t}function zl(e,t,l,a){return e=Kt(7,e,a,t),e.lanes=l,e}function Vo(e,t,l){return e=Kt(6,e,null,t),e.lanes=l,e}function Zd(e){var t=Kt(18,null,null,0);return t.stateNode=e,t}function Xo(e,t,l){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kd=new WeakMap;function ln(e,t){if(typeof e=="object"&&e!==null){var l=Kd.get(e);return l!==void 0?l:(t={value:e,source:t,stack:Ie(t)},Kd.set(e,t),t)}return{value:e,source:t,stack:Ie(t)}}var _i=[],yi=0,Ba=null,ms=0,sn=[],an=0,el=null,xn=1,Sn="";function Dn(e,t){_i[yi++]=ms,_i[yi++]=Ba,Ba=e,ms=t}function Fd(e,t,l){sn[an++]=xn,sn[an++]=Sn,sn[an++]=el,el=e;var a=xn;e=Sn;var o=32-Qt(a)-1;a&=~(1<<o),l+=1;var u=32-Qt(t)+o;if(30<u){var h=o-o%5;u=(a&(1<<h)-1).toString(32),a>>=h,o-=h,xn=1<<32-Qt(t)+o|l<<o|a,Sn=u+e}else xn=1<<u|l<<o|a,Sn=e}function Qo(e){e.return!==null&&(Dn(e,1),Fd(e,1,0))}function Zo(e){for(;e===Ba;)Ba=_i[--yi],_i[yi]=null,ms=_i[--yi],_i[yi]=null;for(;e===el;)el=sn[--an],sn[an]=null,Sn=sn[--an],sn[an]=null,xn=sn[--an],sn[an]=null}function Jd(e,t){sn[an++]=xn,sn[an++]=Sn,sn[an++]=el,xn=t.id,Sn=t.overflow,el=e}var Ct=null,Xe=null,Se=!1,tl=null,rn=!1,Ko=Error(r(519));function nl(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ps(ln(t,e)),Ko}function Wd(e){var t=e.stateNode,l=e.type,a=e.memoizedProps;switch(t[Et]=e,t[kt]=a,l){case"dialog":ye("cancel",t),ye("close",t);break;case"iframe":case"object":case"embed":ye("load",t);break;case"video":case"audio":for(l=0;l<Ls.length;l++)ye(Ls[l],t);break;case"source":ye("error",t);break;case"img":case"image":case"link":ye("error",t),ye("load",t);break;case"details":ye("toggle",t);break;case"input":ye("invalid",t),ud(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":ye("invalid",t);break;case"textarea":ye("invalid",t),dd(t,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||a.suppressHydrationWarning===!0||m0(t.textContent,l)?(a.popover!=null&&(ye("beforetoggle",t),ye("toggle",t)),a.onScroll!=null&&ye("scroll",t),a.onScrollEnd!=null&&ye("scrollend",t),a.onClick!=null&&(t.onclick=An),t=!0):t=!1,t||nl(e,!0)}function $d(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:Ct=Ct.return}}function vi(e){if(e!==Ct)return!1;if(!Se)return $d(e),Se=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||du(e.type,e.memoizedProps)),l=!l),l&&Xe&&nl(e),$d(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Xe=E0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Xe=E0(e)}else t===27?(t=Xe,gl(e.type)?(e=_u,_u=null,Xe=e):Xe=t):Xe=Ct?cn(e.stateNode.nextSibling):null;return!0}function kl(){Xe=Ct=null,Se=!1}function Fo(){var e=tl;return e!==null&&(Bt===null?Bt=e:Bt.push.apply(Bt,e),tl=null),e}function ps(e){tl===null?tl=[e]:tl.push(e)}var Jo=x(null),Ul=null,Mn=null;function ll(e,t,l){q(Jo,t._currentValue),t._currentValue=l}function jn(e){e._currentValue=Jo.current,M(Jo)}function Wo(e,t,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===l)break;e=e.return}}function $o(e,t,l,a){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var h=o.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=o;for(var S=0;S<t.length;S++)if(y.context===t[S]){u.lanes|=l,y=u.alternate,y!==null&&(y.lanes|=l),Wo(u.return,l,e),a||(h=null);break e}u=y.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(r(341));h.lanes|=l,u=h.alternate,u!==null&&(u.lanes|=l),Wo(h,l,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function bi(e,t,l,a){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(r(387));if(h=h.memoizedProps,h!==null){var y=o.type;Zt(o.pendingProps.value,h.value)||(e!==null?e.push(y):e=[y])}}else if(o===Ne.current){if(h=o.alternate,h===null)throw Error(r(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Ys):e=[Ys])}o=o.return}e!==null&&$o(t,e,l,a),t.flags|=262144}function qa(e){for(e=e.firstContext;e!==null;){if(!Zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ll(e){Ul=e,Mn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Nt(e){return Pd(Ul,e)}function Ya(e,t){return Ul===null&&Ll(e),Pd(e,t)}function Pd(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Mn===null){if(e===null)throw Error(r(308));Mn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Mn=Mn.next=t;return l}var jy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},zy=s.unstable_scheduleCallback,ky=s.unstable_NormalPriority,st={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Po(){return{controller:new jy,data:new Map,refCount:0}}function gs(e){e.refCount--,e.refCount===0&&zy(ky,function(){e.controller.abort()})}var _s=null,ec=0,xi=0,Si=null;function Uy(e,t){if(_s===null){var l=_s=[];ec=0,xi=lu(),Si={status:"pending",value:void 0,then:function(a){l.push(a)}}}return ec++,t.then(eh,eh),t}function eh(){if(--ec===0&&_s!==null){Si!==null&&(Si.status="fulfilled");var e=_s;_s=null,xi=0,Si=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ly(e,t){var l=[],a={status:"pending",value:null,reason:null,then:function(o){l.push(o)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var o=0;o<l.length;o++)(0,l[o])(t)},function(o){for(a.status="rejected",a.reason=o,o=0;o<l.length;o++)(0,l[o])(void 0)}),a}var th=T.S;T.S=function(e,t){Im=Te(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Uy(e,t),th!==null&&th(e,t)};var Il=x(null);function tc(){var e=Il.current;return e!==null?e:He.pooledCache}function Ga(e,t){t===null?q(Il,Il.current):q(Il,t.pool)}function nh(){var e=tc();return e===null?null:{parent:st._currentValue,pool:e}}var Ei=Error(r(460)),nc=Error(r(474)),Va=Error(r(542)),Xa={then:function(){}};function lh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ih(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(An,An),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ah(e),e;default:if(typeof t.status=="string")t.then(An,An);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=a}},function(a){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ah(e),e}throw Bl=t,Ei}}function Hl(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Bl=l,Ei):l}}var Bl=null;function sh(){if(Bl===null)throw Error(r(459));var e=Bl;return Bl=null,e}function ah(e){if(e===Ei||e===Va)throw Error(r(483))}var Ci=null,ys=0;function Qa(e){var t=ys;return ys+=1,Ci===null&&(Ci=[]),ih(Ci,e,t)}function vs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Za(e,t){throw t.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function rh(e){function t(N,E){if(e){var w=N.deletions;w===null?(N.deletions=[E],N.flags|=16):w.push(E)}}function l(N,E){if(!e)return null;for(;E!==null;)t(N,E),E=E.sibling;return null}function a(N){for(var E=new Map;N!==null;)N.key!==null?E.set(N.key,N):E.set(N.index,N),N=N.sibling;return E}function o(N,E){return N=On(N,E),N.index=0,N.sibling=null,N}function u(N,E,w){return N.index=w,e?(w=N.alternate,w!==null?(w=w.index,w<E?(N.flags|=67108866,E):w):(N.flags|=67108866,E)):(N.flags|=1048576,E)}function h(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function y(N,E,w,k){return E===null||E.tag!==6?(E=Vo(w,N.mode,k),E.return=N,E):(E=o(E,w),E.return=N,E)}function S(N,E,w,k){var J=w.type;return J===X?j(N,E,w.props.children,k,w.key):E!==null&&(E.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===lt&&Hl(J)===E.type)?(E=o(E,w.props),vs(E,w),E.return=N,E):(E=Ha(w.type,w.key,w.props,null,N.mode,k),vs(E,w),E.return=N,E)}function A(N,E,w,k){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=Xo(w,N.mode,k),E.return=N,E):(E=o(E,w.children||[]),E.return=N,E)}function j(N,E,w,k,J){return E===null||E.tag!==7?(E=zl(w,N.mode,k,J),E.return=N,E):(E=o(E,w),E.return=N,E)}function U(N,E,w){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Vo(""+E,N.mode,w),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case z:return w=Ha(E.type,E.key,E.props,null,N.mode,w),vs(w,E),w.return=N,w;case I:return E=Xo(E,N.mode,w),E.return=N,E;case lt:return E=Hl(E),U(N,E,w)}if(H(E)||Fe(E))return E=zl(E,N.mode,w,null),E.return=N,E;if(typeof E.then=="function")return U(N,Qa(E),w);if(E.$$typeof===W)return U(N,Ya(N,E),w);Za(N,E)}return null}function R(N,E,w,k){var J=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return J!==null?null:y(N,E,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case z:return w.key===J?S(N,E,w,k):null;case I:return w.key===J?A(N,E,w,k):null;case lt:return w=Hl(w),R(N,E,w,k)}if(H(w)||Fe(w))return J!==null?null:j(N,E,w,k,null);if(typeof w.then=="function")return R(N,E,Qa(w),k);if(w.$$typeof===W)return R(N,E,Ya(N,w),k);Za(N,w)}return null}function D(N,E,w,k,J){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return N=N.get(w)||null,y(E,N,""+k,J);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case z:return N=N.get(k.key===null?w:k.key)||null,S(E,N,k,J);case I:return N=N.get(k.key===null?w:k.key)||null,A(E,N,k,J);case lt:return k=Hl(k),D(N,E,w,k,J)}if(H(k)||Fe(k))return N=N.get(w)||null,j(E,N,k,J,null);if(typeof k.then=="function")return D(N,E,w,Qa(k),J);if(k.$$typeof===W)return D(N,E,w,Ya(E,k),J);Za(E,k)}return null}function Q(N,E,w,k){for(var J=null,we=null,Z=E,de=E=0,xe=null;Z!==null&&de<w.length;de++){Z.index>de?(xe=Z,Z=null):xe=Z.sibling;var Ae=R(N,Z,w[de],k);if(Ae===null){Z===null&&(Z=xe);break}e&&Z&&Ae.alternate===null&&t(N,Z),E=u(Ae,E,de),we===null?J=Ae:we.sibling=Ae,we=Ae,Z=xe}if(de===w.length)return l(N,Z),Se&&Dn(N,de),J;if(Z===null){for(;de<w.length;de++)Z=U(N,w[de],k),Z!==null&&(E=u(Z,E,de),we===null?J=Z:we.sibling=Z,we=Z);return Se&&Dn(N,de),J}for(Z=a(Z);de<w.length;de++)xe=D(Z,N,de,w[de],k),xe!==null&&(e&&xe.alternate!==null&&Z.delete(xe.key===null?de:xe.key),E=u(xe,E,de),we===null?J=xe:we.sibling=xe,we=xe);return e&&Z.forEach(function(xl){return t(N,xl)}),Se&&Dn(N,de),J}function $(N,E,w,k){if(w==null)throw Error(r(151));for(var J=null,we=null,Z=E,de=E=0,xe=null,Ae=w.next();Z!==null&&!Ae.done;de++,Ae=w.next()){Z.index>de?(xe=Z,Z=null):xe=Z.sibling;var xl=R(N,Z,Ae.value,k);if(xl===null){Z===null&&(Z=xe);break}e&&Z&&xl.alternate===null&&t(N,Z),E=u(xl,E,de),we===null?J=xl:we.sibling=xl,we=xl,Z=xe}if(Ae.done)return l(N,Z),Se&&Dn(N,de),J;if(Z===null){for(;!Ae.done;de++,Ae=w.next())Ae=U(N,Ae.value,k),Ae!==null&&(E=u(Ae,E,de),we===null?J=Ae:we.sibling=Ae,we=Ae);return Se&&Dn(N,de),J}for(Z=a(Z);!Ae.done;de++,Ae=w.next())Ae=D(Z,N,de,Ae.value,k),Ae!==null&&(e&&Ae.alternate!==null&&Z.delete(Ae.key===null?de:Ae.key),E=u(Ae,E,de),we===null?J=Ae:we.sibling=Ae,we=Ae);return e&&Z.forEach(function(Kv){return t(N,Kv)}),Se&&Dn(N,de),J}function Le(N,E,w,k){if(typeof w=="object"&&w!==null&&w.type===X&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case z:e:{for(var J=w.key;E!==null;){if(E.key===J){if(J=w.type,J===X){if(E.tag===7){l(N,E.sibling),k=o(E,w.props.children),k.return=N,N=k;break e}}else if(E.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===lt&&Hl(J)===E.type){l(N,E.sibling),k=o(E,w.props),vs(k,w),k.return=N,N=k;break e}l(N,E);break}else t(N,E);E=E.sibling}w.type===X?(k=zl(w.props.children,N.mode,k,w.key),k.return=N,N=k):(k=Ha(w.type,w.key,w.props,null,N.mode,k),vs(k,w),k.return=N,N=k)}return h(N);case I:e:{for(J=w.key;E!==null;){if(E.key===J)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){l(N,E.sibling),k=o(E,w.children||[]),k.return=N,N=k;break e}else{l(N,E);break}else t(N,E);E=E.sibling}k=Xo(w,N.mode,k),k.return=N,N=k}return h(N);case lt:return w=Hl(w),Le(N,E,w,k)}if(H(w))return Q(N,E,w,k);if(Fe(w)){if(J=Fe(w),typeof J!="function")throw Error(r(150));return w=J.call(w),$(N,E,w,k)}if(typeof w.then=="function")return Le(N,E,Qa(w),k);if(w.$$typeof===W)return Le(N,E,Ya(N,w),k);Za(N,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,E!==null&&E.tag===6?(l(N,E.sibling),k=o(E,w),k.return=N,N=k):(l(N,E),k=Vo(w,N.mode,k),k.return=N,N=k),h(N)):l(N,E)}return function(N,E,w,k){try{ys=0;var J=Le(N,E,w,k);return Ci=null,J}catch(Z){if(Z===Ei||Z===Va)throw Z;var we=Kt(29,Z,null,N.mode);return we.lanes=k,we.return=N,we}finally{}}}var ql=rh(!0),oh=rh(!1),il=!1;function lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function al(e,t,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Re&2)!==0){var o=a.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),a.pending=t,t=Ia(e),Xd(e,null,l),t}return La(e,a,t,l),Ia(e)}function bs(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,l|=a,t.lanes=l,Pf(e,l)}}function sc(e,t){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var o=null,u=null;if(l=l.firstBaseUpdate,l!==null){do{var h={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};u===null?o=u=h:u=u.next=h,l=l.next}while(l!==null);u===null?o=u=t:u=u.next=t}else o=u=t;l={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var ac=!1;function xs(){if(ac){var e=Si;if(e!==null)throw e}}function Ss(e,t,l,a){ac=!1;var o=e.updateQueue;il=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var S=y,A=S.next;S.next=null,h===null?u=A:h.next=A,h=S;var j=e.alternate;j!==null&&(j=j.updateQueue,y=j.lastBaseUpdate,y!==h&&(y===null?j.firstBaseUpdate=A:y.next=A,j.lastBaseUpdate=S))}if(u!==null){var U=o.baseState;h=0,j=A=S=null,y=u;do{var R=y.lane&-536870913,D=R!==y.lane;if(D?(be&R)===R:(a&R)===R){R!==0&&R===xi&&(ac=!0),j!==null&&(j=j.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var Q=e,$=y;R=t;var Le=l;switch($.tag){case 1:if(Q=$.payload,typeof Q=="function"){U=Q.call(Le,U,R);break e}U=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=$.payload,R=typeof Q=="function"?Q.call(Le,U,R):Q,R==null)break e;U=v({},U,R);break e;case 2:il=!0}}R=y.callback,R!==null&&(e.flags|=64,D&&(e.flags|=8192),D=o.callbacks,D===null?o.callbacks=[R]:D.push(R))}else D={lane:R,tag:y.tag,payload:y.payload,callback:y.callback,next:null},j===null?(A=j=D,S=U):j=j.next=D,h|=R;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;D=y,y=D.next,D.next=null,o.lastBaseUpdate=D,o.shared.pending=null}}while(!0);j===null&&(S=U),o.baseState=S,o.firstBaseUpdate=A,o.lastBaseUpdate=j,u===null&&(o.shared.lanes=0),fl|=h,e.lanes=h,e.memoizedState=U}}function ch(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function uh(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)ch(l[e],t)}var Ni=x(null),Ka=x(0);function fh(e,t){e=Yn,q(Ka,e),q(Ni,t),Yn=e|t.baseLanes}function rc(){q(Ka,Yn),q(Ni,Ni.current)}function oc(){Yn=Ka.current,M(Ni),M(Ka)}var Ft=x(null),on=null;function rl(e){var t=e.alternate;q(tt,tt.current&1),q(Ft,e),on===null&&(t===null||Ni.current!==null||t.memoizedState!==null)&&(on=e)}function cc(e){q(tt,tt.current),q(Ft,e),on===null&&(on=e)}function dh(e){e.tag===22?(q(tt,tt.current),q(Ft,e),on===null&&(on=e)):ol()}function ol(){q(tt,tt.current),q(Ft,Ft.current)}function Jt(e){M(Ft),on===e&&(on=null),M(tt)}var tt=x(0);function Fa(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||pu(l)||gu(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zn=0,ce=null,ke=null,at=null,Ja=!1,Ti=!1,Yl=!1,Wa=0,Es=0,wi=null,Iy=0;function We(){throw Error(r(321))}function uc(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!Zt(e[l],t[l]))return!1;return!0}function fc(e,t,l,a,o,u){return zn=u,ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?Fh:Tc,Yl=!1,u=l(a,o),Yl=!1,Ti&&(u=mh(t,l,a,o)),hh(e),u}function hh(e){T.H=Ts;var t=ke!==null&&ke.next!==null;if(zn=0,at=ke=ce=null,Ja=!1,Es=0,wi=null,t)throw Error(r(300));e===null||rt||(e=e.dependencies,e!==null&&qa(e)&&(rt=!0))}function mh(e,t,l,a){ce=e;var o=0;do{if(Ti&&(wi=null),Es=0,Ti=!1,25<=o)throw Error(r(301));if(o+=1,at=ke=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}T.H=Jh,u=t(l,a)}while(Ti);return u}function Hy(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?Cs(t):t,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(ce.flags|=1024),t}function dc(){var e=Wa!==0;return Wa=0,e}function hc(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function mc(e){if(Ja){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ja=!1}zn=0,at=ke=ce=null,Ti=!1,Es=Wa=0,wi=null}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?ce.memoizedState=at=e:at=at.next=e,at}function nt(){if(ke===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=at===null?ce.memoizedState:at.next;if(t!==null)at=t,ke=e;else{if(e===null)throw ce.alternate===null?Error(r(467)):Error(r(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},at===null?ce.memoizedState=at=e:at=at.next=e}return at}function $a(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cs(e){var t=Es;return Es+=1,wi===null&&(wi=[]),e=ih(wi,e,t),t=ce,(at===null?t.memoizedState:at.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?Fh:Tc),e}function Pa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Cs(e);if(e.$$typeof===W)return Nt(e)}throw Error(r(438,String(e)))}function pc(e){var t=null,l=ce.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var a=ce.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=$a(),ce.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),a=0;a<e;a++)l[a]=Rt;return t.index++,l}function kn(e,t){return typeof t=="function"?t(e):t}function er(e){var t=nt();return gc(t,ke,e)}function gc(e,t,l){var a=e.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=l;var o=e.baseQueue,u=a.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}t.baseQueue=o=u,a.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var y=h=null,S=null,A=t,j=!1;do{var U=A.lane&-536870913;if(U!==A.lane?(be&U)===U:(zn&U)===U){var R=A.revertLane;if(R===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),U===xi&&(j=!0);else if((zn&R)===R){A=A.next,R===xi&&(j=!0);continue}else U={lane:0,revertLane:A.revertLane,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},S===null?(y=S=U,h=u):S=S.next=U,ce.lanes|=R,fl|=R;U=A.action,Yl&&l(u,U),u=A.hasEagerState?A.eagerState:l(u,U)}else R={lane:U,revertLane:A.revertLane,gesture:A.gesture,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},S===null?(y=S=R,h=u):S=S.next=R,ce.lanes|=U,fl|=U;A=A.next}while(A!==null&&A!==t);if(S===null?h=u:S.next=y,!Zt(u,e.memoizedState)&&(rt=!0,j&&(l=Si,l!==null)))throw l;e.memoizedState=u,e.baseState=h,e.baseQueue=S,a.lastRenderedState=u}return o===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function _c(e){var t=nt(),l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=e;var a=l.dispatch,o=l.pending,u=t.memoizedState;if(o!==null){l.pending=null;var h=o=o.next;do u=e(u,h.action),h=h.next;while(h!==o);Zt(u,t.memoizedState)||(rt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),l.lastRenderedState=u}return[u,a]}function ph(e,t,l){var a=ce,o=nt(),u=Se;if(u){if(l===void 0)throw Error(r(407));l=l()}else l=t();var h=!Zt((ke||o).memoizedState,l);if(h&&(o.memoizedState=l,rt=!0),o=o.queue,bc(yh.bind(null,a,o,e),[e]),o.getSnapshot!==t||h||at!==null&&at.memoizedState.tag&1){if(a.flags|=2048,Ai(9,{destroy:void 0},_h.bind(null,a,o,l,t),null),He===null)throw Error(r(349));u||(zn&127)!==0||gh(a,t,l)}return l}function gh(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=ce.updateQueue,t===null?(t=$a(),ce.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function _h(e,t,l,a){t.value=l,t.getSnapshot=a,vh(t)&&bh(e)}function yh(e,t,l){return l(function(){vh(t)&&bh(e)})}function vh(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!Zt(e,l)}catch{return!0}}function bh(e){var t=jl(e,2);t!==null&&qt(t,e,2)}function yc(e){var t=jt();if(typeof e=="function"){var l=e;if(e=l(),Yl){Wn(!0);try{l()}finally{Wn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:e},t}function xh(e,t,l,a){return e.baseState=l,gc(e,ke,typeof a=="function"?a:kn)}function By(e,t,l,a,o){if(lr(e))throw Error(r(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};T.T!==null?l(!0):u.isTransition=!1,a(u),l=t.pending,l===null?(u.next=t.pending=u,Sh(t,u)):(u.next=l.next,t.pending=l.next=u)}}function Sh(e,t){var l=t.action,a=t.payload,o=e.state;if(t.isTransition){var u=T.T,h={};T.T=h;try{var y=l(o,a),S=T.S;S!==null&&S(h,y),Eh(e,t,y)}catch(A){vc(e,t,A)}finally{u!==null&&h.types!==null&&(u.types=h.types),T.T=u}}else try{u=l(o,a),Eh(e,t,u)}catch(A){vc(e,t,A)}}function Eh(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Ch(e,t,a)},function(a){return vc(e,t,a)}):Ch(e,t,l)}function Ch(e,t,l){t.status="fulfilled",t.value=l,Nh(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,Sh(e,l)))}function vc(e,t,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=l,Nh(t),t=t.next;while(t!==a)}e.action=null}function Nh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Th(e,t){return t}function wh(e,t){if(Se){var l=He.formState;if(l!==null){e:{var a=ce;if(Se){if(Xe){t:{for(var o=Xe,u=rn;o.nodeType!==8;){if(!u){o=null;break t}if(o=cn(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Xe=cn(o.nextSibling),a=o.data==="F!";break e}}nl(a)}a=!1}a&&(t=l[0])}}return l=jt(),l.memoizedState=l.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Th,lastRenderedState:t},l.queue=a,l=Qh.bind(null,ce,a),a.dispatch=l,a=yc(!1),u=Nc.bind(null,ce,!1,a.queue),a=jt(),o={state:t,dispatch:null,action:e,pending:null},a.queue=o,l=By.bind(null,ce,o,u,l),o.dispatch=l,a.memoizedState=e,[t,l,!1]}function Ah(e){var t=nt();return Rh(t,ke,e)}function Rh(e,t,l){if(t=gc(e,t,Th)[0],e=er(kn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Cs(t)}catch(h){throw h===Ei?Va:h}else a=t;t=nt();var o=t.queue,u=o.dispatch;return l!==t.memoizedState&&(ce.flags|=2048,Ai(9,{destroy:void 0},qy.bind(null,o,l),null)),[a,u,e]}function qy(e,t){e.action=t}function Oh(e){var t=nt(),l=ke;if(l!==null)return Rh(t,l,e);nt(),t=t.memoizedState,l=nt();var a=l.queue.dispatch;return l.memoizedState=e,[t,a,!1]}function Ai(e,t,l,a){return e={tag:e,create:l,deps:a,inst:t,next:null},t=ce.updateQueue,t===null&&(t=$a(),ce.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,t.lastEffect=e),e}function Dh(){return nt().memoizedState}function tr(e,t,l,a){var o=jt();ce.flags|=e,o.memoizedState=Ai(1|t,{destroy:void 0},l,a===void 0?null:a)}function nr(e,t,l,a){var o=nt();a=a===void 0?null:a;var u=o.memoizedState.inst;ke!==null&&a!==null&&uc(a,ke.memoizedState.deps)?o.memoizedState=Ai(t,u,l,a):(ce.flags|=e,o.memoizedState=Ai(1|t,u,l,a))}function Mh(e,t){tr(8390656,8,e,t)}function bc(e,t){nr(2048,8,e,t)}function Yy(e){ce.flags|=4;var t=ce.updateQueue;if(t===null)t=$a(),ce.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function jh(e){var t=nt().memoizedState;return Yy({ref:t,nextImpl:e}),function(){if((Re&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function zh(e,t){return nr(4,2,e,t)}function kh(e,t){return nr(4,4,e,t)}function Uh(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lh(e,t,l){l=l!=null?l.concat([e]):null,nr(4,4,Uh.bind(null,t,e),l)}function xc(){}function Ih(e,t){var l=nt();t=t===void 0?null:t;var a=l.memoizedState;return t!==null&&uc(t,a[1])?a[0]:(l.memoizedState=[e,t],e)}function Hh(e,t){var l=nt();t=t===void 0?null:t;var a=l.memoizedState;if(t!==null&&uc(t,a[1]))return a[0];if(a=e(),Yl){Wn(!0);try{e()}finally{Wn(!1)}}return l.memoizedState=[a,t],a}function Sc(e,t,l){return l===void 0||(zn&1073741824)!==0&&(be&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=Bm(),ce.lanes|=e,fl|=e,l)}function Bh(e,t,l,a){return Zt(l,t)?l:Ni.current!==null?(e=Sc(e,l,a),Zt(e,t)||(rt=!0),e):(zn&42)===0||(zn&1073741824)!==0&&(be&261930)===0?(rt=!0,e.memoizedState=l):(e=Bm(),ce.lanes|=e,fl|=e,t)}function qh(e,t,l,a,o){var u=L.p;L.p=u!==0&&8>u?u:8;var h=T.T,y={};T.T=y,Nc(e,!1,t,l);try{var S=o(),A=T.S;if(A!==null&&A(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var j=Ly(S,a);Ns(e,t,j,Pt(e))}else Ns(e,t,a,Pt(e))}catch(U){Ns(e,t,{then:function(){},status:"rejected",reason:U},Pt())}finally{L.p=u,h!==null&&y.types!==null&&(h.types=y.types),T.T=h}}function Gy(){}function Ec(e,t,l,a){if(e.tag!==5)throw Error(r(476));var o=Yh(e).queue;qh(e,o,t,G,l===null?Gy:function(){return Gh(e),l(a)})}function Yh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:G},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Gh(e){var t=Yh(e);t.next===null&&(t=e.alternate.memoizedState),Ns(e,t.next.queue,{},Pt())}function Cc(){return Nt(Ys)}function Vh(){return nt().memoizedState}function Xh(){return nt().memoizedState}function Vy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=Pt();e=sl(l);var a=al(t,e,l);a!==null&&(qt(a,t,l),bs(a,t,l)),t={cache:Po()},e.payload=t;return}t=t.return}}function Xy(e,t,l){var a=Pt();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},lr(e)?Zh(t,l):(l=Yo(e,t,l,a),l!==null&&(qt(l,e,a),Kh(l,t,a)))}function Qh(e,t,l){var a=Pt();Ns(e,t,l,a)}function Ns(e,t,l,a){var o={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(lr(e))Zh(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,y=u(h,l);if(o.hasEagerState=!0,o.eagerState=y,Zt(y,h))return La(e,t,o,0),He===null&&Ua(),!1}catch{}finally{}if(l=Yo(e,t,o,a),l!==null)return qt(l,e,a),Kh(l,t,a),!0}return!1}function Nc(e,t,l,a){if(a={lane:2,revertLane:lu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},lr(e)){if(t)throw Error(r(479))}else t=Yo(e,l,a,2),t!==null&&qt(t,e,2)}function lr(e){var t=e.alternate;return e===ce||t!==null&&t===ce}function Zh(e,t){Ti=Ja=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function Kh(e,t,l){if((l&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,l|=a,t.lanes=l,Pf(e,l)}}var Ts={readContext:Nt,use:Pa,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};Ts.useEffectEvent=We;var Fh={readContext:Nt,use:Pa,useCallback:function(e,t){return jt().memoizedState=[e,t===void 0?null:t],e},useContext:Nt,useEffect:Mh,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,tr(4194308,4,Uh.bind(null,t,e),l)},useLayoutEffect:function(e,t){return tr(4194308,4,e,t)},useInsertionEffect:function(e,t){tr(4,2,e,t)},useMemo:function(e,t){var l=jt();t=t===void 0?null:t;var a=e();if(Yl){Wn(!0);try{e()}finally{Wn(!1)}}return l.memoizedState=[a,t],a},useReducer:function(e,t,l){var a=jt();if(l!==void 0){var o=l(t);if(Yl){Wn(!0);try{l(t)}finally{Wn(!1)}}}else o=t;return a.memoizedState=a.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},a.queue=e,e=e.dispatch=Xy.bind(null,ce,e),[a.memoizedState,e]},useRef:function(e){var t=jt();return e={current:e},t.memoizedState=e},useState:function(e){e=yc(e);var t=e.queue,l=Qh.bind(null,ce,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:xc,useDeferredValue:function(e,t){var l=jt();return Sc(l,e,t)},useTransition:function(){var e=yc(!1);return e=qh.bind(null,ce,e.queue,!0,!1),jt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var a=ce,o=jt();if(Se){if(l===void 0)throw Error(r(407));l=l()}else{if(l=t(),He===null)throw Error(r(349));(be&127)!==0||gh(a,t,l)}o.memoizedState=l;var u={value:l,getSnapshot:t};return o.queue=u,Mh(yh.bind(null,a,u,e),[e]),a.flags|=2048,Ai(9,{destroy:void 0},_h.bind(null,a,u,l,t),null),l},useId:function(){var e=jt(),t=He.identifierPrefix;if(Se){var l=Sn,a=xn;l=(a&~(1<<32-Qt(a)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Wa++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=Iy++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Cc,useFormState:wh,useActionState:wh,useOptimistic:function(e){var t=jt();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Nc.bind(null,ce,!0,l),l.dispatch=t,[e,t]},useMemoCache:pc,useCacheRefresh:function(){return jt().memoizedState=Vy.bind(null,ce)},useEffectEvent:function(e){var t=jt(),l={impl:e};return t.memoizedState=l,function(){if((Re&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Tc={readContext:Nt,use:Pa,useCallback:Ih,useContext:Nt,useEffect:bc,useImperativeHandle:Lh,useInsertionEffect:zh,useLayoutEffect:kh,useMemo:Hh,useReducer:er,useRef:Dh,useState:function(){return er(kn)},useDebugValue:xc,useDeferredValue:function(e,t){var l=nt();return Bh(l,ke.memoizedState,e,t)},useTransition:function(){var e=er(kn)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Cs(e),t]},useSyncExternalStore:ph,useId:Vh,useHostTransitionStatus:Cc,useFormState:Ah,useActionState:Ah,useOptimistic:function(e,t){var l=nt();return xh(l,ke,e,t)},useMemoCache:pc,useCacheRefresh:Xh};Tc.useEffectEvent=jh;var Jh={readContext:Nt,use:Pa,useCallback:Ih,useContext:Nt,useEffect:bc,useImperativeHandle:Lh,useInsertionEffect:zh,useLayoutEffect:kh,useMemo:Hh,useReducer:_c,useRef:Dh,useState:function(){return _c(kn)},useDebugValue:xc,useDeferredValue:function(e,t){var l=nt();return ke===null?Sc(l,e,t):Bh(l,ke.memoizedState,e,t)},useTransition:function(){var e=_c(kn)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:Cs(e),t]},useSyncExternalStore:ph,useId:Vh,useHostTransitionStatus:Cc,useFormState:Oh,useActionState:Oh,useOptimistic:function(e,t){var l=nt();return ke!==null?xh(l,ke,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:pc,useCacheRefresh:Xh};Jh.useEffectEvent=jh;function wc(e,t,l,a){t=e.memoizedState,l=l(a,t),l=l==null?t:v({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Ac={enqueueSetState:function(e,t,l){e=e._reactInternals;var a=Pt(),o=sl(a);o.payload=t,l!=null&&(o.callback=l),t=al(e,o,a),t!==null&&(qt(t,e,a),bs(t,e,a))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var a=Pt(),o=sl(a);o.tag=1,o.payload=t,l!=null&&(o.callback=l),t=al(e,o,a),t!==null&&(qt(t,e,a),bs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=Pt(),a=sl(l);a.tag=2,t!=null&&(a.callback=t),t=al(e,a,l),t!==null&&(qt(t,e,l),bs(t,e,l))}};function Wh(e,t,l,a,o,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,h):t.prototype&&t.prototype.isPureReactComponent?!ds(l,a)||!ds(o,u):!0}function $h(e,t,l,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,a),t.state!==e&&Ac.enqueueReplaceState(t,t.state,null)}function Gl(e,t){var l=t;if("ref"in t){l={};for(var a in t)a!=="ref"&&(l[a]=t[a])}if(e=e.defaultProps){l===t&&(l=v({},l));for(var o in e)l[o]===void 0&&(l[o]=e[o])}return l}function Ph(e){ka(e)}function em(e){console.error(e)}function tm(e){ka(e)}function ir(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function nm(e,t,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Rc(e,t,l){return l=sl(l),l.tag=3,l.payload={element:null},l.callback=function(){ir(e,t)},l}function lm(e){return e=sl(e),e.tag=3,e}function im(e,t,l,a){var o=l.type.getDerivedStateFromError;if(typeof o=="function"){var u=a.value;e.payload=function(){return o(u)},e.callback=function(){nm(t,l,a)}}var h=l.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){nm(t,l,a),typeof o!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var y=a.stack;this.componentDidCatch(a.value,{componentStack:y!==null?y:""})})}function Qy(e,t,l,a,o){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=l.alternate,t!==null&&bi(t,l,o,!0),l=Ft.current,l!==null){switch(l.tag){case 31:case 13:return on===null?gr():l.alternate===null&&$e===0&&($e=3),l.flags&=-257,l.flags|=65536,l.lanes=o,a===Xa?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([a]):t.add(a),eu(e,a,o)),!1;case 22:return l.flags|=65536,a===Xa?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([a]):l.add(a)),eu(e,a,o)),!1}throw Error(r(435,l.tag))}return eu(e,a,o),gr(),!1}if(Se)return t=Ft.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,a!==Ko&&(e=Error(r(422),{cause:a}),ps(ln(e,l)))):(a!==Ko&&(t=Error(r(423),{cause:a}),ps(ln(t,l))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,a=ln(a,l),o=Rc(e.stateNode,a,o),sc(e,o),$e!==4&&($e=2)),!1;var u=Error(r(520),{cause:a});if(u=ln(u,l),zs===null?zs=[u]:zs.push(u),$e!==4&&($e=2),t===null)return!0;a=ln(a,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=o&-o,l.lanes|=e,e=Rc(l.stateNode,a,e),sc(l,e),!1;case 1:if(t=l.type,u=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(dl===null||!dl.has(u))))return l.flags|=65536,o&=-o,l.lanes|=o,o=lm(o),im(o,e,l,a),sc(l,o),!1}l=l.return}while(l!==null);return!1}var Oc=Error(r(461)),rt=!1;function Tt(e,t,l,a){t.child=e===null?oh(t,null,l,a):ql(t,e.child,l,a)}function sm(e,t,l,a,o){l=l.render;var u=t.ref;if("ref"in a){var h={};for(var y in a)y!=="ref"&&(h[y]=a[y])}else h=a;return Ll(t),a=fc(e,t,l,h,u,o),y=dc(),e!==null&&!rt?(hc(e,t,o),Un(e,t,o)):(Se&&y&&Qo(t),t.flags|=1,Tt(e,t,a,o),t.child)}function am(e,t,l,a,o){if(e===null){var u=l.type;return typeof u=="function"&&!Go(u)&&u.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=u,rm(e,t,u,a,o)):(e=Ha(l.type,null,a,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Ic(e,o)){var h=u.memoizedProps;if(l=l.compare,l=l!==null?l:ds,l(h,a)&&e.ref===t.ref)return Un(e,t,o)}return t.flags|=1,e=On(u,a),e.ref=t.ref,e.return=t,t.child=e}function rm(e,t,l,a,o){if(e!==null){var u=e.memoizedProps;if(ds(u,a)&&e.ref===t.ref)if(rt=!1,t.pendingProps=a=u,Ic(e,o))(e.flags&131072)!==0&&(rt=!0);else return t.lanes=e.lanes,Un(e,t,o)}return Dc(e,t,l,a,o)}function om(e,t,l,a){var o=a.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|l:l,e!==null){for(a=t.child=e.child,o=0;a!==null;)o=o|a.lanes|a.childLanes,a=a.sibling;a=o&~u}else a=0,t.child=null;return cm(e,t,u,l,a)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ga(t,u!==null?u.cachePool:null),u!==null?fh(t,u):rc(),dh(t);else return a=t.lanes=536870912,cm(e,t,u!==null?u.baseLanes|l:l,l,a)}else u!==null?(Ga(t,u.cachePool),fh(t,u),ol(),t.memoizedState=null):(e!==null&&Ga(t,null),rc(),ol());return Tt(e,t,o,l),t.child}function ws(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function cm(e,t,l,a,o){var u=tc();return u=u===null?null:{parent:st._currentValue,pool:u},t.memoizedState={baseLanes:l,cachePool:u},e!==null&&Ga(t,null),rc(),dh(t),e!==null&&bi(e,t,a,!0),t.childLanes=o,null}function sr(e,t){return t=rr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function um(e,t,l){return ql(t,e.child,null,l),e=sr(t,t.pendingProps),e.flags|=2,Jt(t),t.memoizedState=null,e}function Zy(e,t,l){var a=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Se){if(a.mode==="hidden")return e=sr(t,a),t.lanes=536870912,ws(null,e);if(cc(t),(e=Xe)?(e=S0(e,rn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:el!==null?{id:xn,overflow:Sn}:null,retryLane:536870912,hydrationErrors:null},l=Zd(e),l.return=t,t.child=l,Ct=t,Xe=null)):e=null,e===null)throw nl(t);return t.lanes=536870912,null}return sr(t,a)}var u=e.memoizedState;if(u!==null){var h=u.dehydrated;if(cc(t),o)if(t.flags&256)t.flags&=-257,t=um(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(rt||bi(e,t,l,!1),o=(l&e.childLanes)!==0,rt||o){if(a=He,a!==null&&(h=ed(a,l),h!==0&&h!==u.retryLane))throw u.retryLane=h,jl(e,h),qt(a,e,h),Oc;gr(),t=um(e,t,l)}else e=u.treeContext,Xe=cn(h.nextSibling),Ct=t,Se=!0,tl=null,rn=!1,e!==null&&Jd(t,e),t=sr(t,a),t.flags|=4096;return t}return e=On(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ar(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function Dc(e,t,l,a,o){return Ll(t),l=fc(e,t,l,a,void 0,o),a=dc(),e!==null&&!rt?(hc(e,t,o),Un(e,t,o)):(Se&&a&&Qo(t),t.flags|=1,Tt(e,t,l,o),t.child)}function fm(e,t,l,a,o,u){return Ll(t),t.updateQueue=null,l=mh(t,a,l,o),hh(e),a=dc(),e!==null&&!rt?(hc(e,t,u),Un(e,t,u)):(Se&&a&&Qo(t),t.flags|=1,Tt(e,t,l,u),t.child)}function dm(e,t,l,a,o){if(Ll(t),t.stateNode===null){var u=gi,h=l.contextType;typeof h=="object"&&h!==null&&(u=Nt(h)),u=new l(a,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ac,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=a,u.state=t.memoizedState,u.refs={},lc(t),h=l.contextType,u.context=typeof h=="object"&&h!==null?Nt(h):gi,u.state=t.memoizedState,h=l.getDerivedStateFromProps,typeof h=="function"&&(wc(t,l,h,a),u.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&Ac.enqueueReplaceState(u,u.state,null),Ss(t,a,u,o),xs(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,S=Gl(l,y);u.props=S;var A=u.context,j=l.contextType;h=gi,typeof j=="object"&&j!==null&&(h=Nt(j));var U=l.getDerivedStateFromProps;j=typeof U=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,j||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||A!==h)&&$h(t,u,a,h),il=!1;var R=t.memoizedState;u.state=R,Ss(t,a,u,o),xs(),A=t.memoizedState,y||R!==A||il?(typeof U=="function"&&(wc(t,l,U,a),A=t.memoizedState),(S=il||Wh(t,l,S,a,R,A,h))?(j||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=A),u.props=a,u.state=A,u.context=h,a=S):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{u=t.stateNode,ic(e,t),h=t.memoizedProps,j=Gl(l,h),u.props=j,U=t.pendingProps,R=u.context,A=l.contextType,S=gi,typeof A=="object"&&A!==null&&(S=Nt(A)),y=l.getDerivedStateFromProps,(A=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==U||R!==S)&&$h(t,u,a,S),il=!1,R=t.memoizedState,u.state=R,Ss(t,a,u,o),xs();var D=t.memoizedState;h!==U||R!==D||il||e!==null&&e.dependencies!==null&&qa(e.dependencies)?(typeof y=="function"&&(wc(t,l,y,a),D=t.memoizedState),(j=il||Wh(t,l,j,a,R,D,S)||e!==null&&e.dependencies!==null&&qa(e.dependencies))?(A||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(a,D,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(a,D,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=D),u.props=a,u.state=D,u.context=S,a=j):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),a=!1)}return u=a,ar(e,t),a=(t.flags&128)!==0,u||a?(u=t.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&a?(t.child=ql(t,e.child,null,o),t.child=ql(t,null,l,o)):Tt(e,t,l,o),t.memoizedState=u.state,e=t.child):e=Un(e,t,o),e}function hm(e,t,l,a){return kl(),t.flags|=256,Tt(e,t,l,a),t.child}var Mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jc(e){return{baseLanes:e,cachePool:nh()}}function zc(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=$t),e}function mm(e,t,l){var a=t.pendingProps,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Se){if(o?rl(t):ol(),(e=Xe)?(e=S0(e,rn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:el!==null?{id:xn,overflow:Sn}:null,retryLane:536870912,hydrationErrors:null},l=Zd(e),l.return=t,t.child=l,Ct=t,Xe=null)):e=null,e===null)throw nl(t);return gu(e)?t.lanes=32:t.lanes=536870912,null}var y=a.children;return a=a.fallback,o?(ol(),o=t.mode,y=rr({mode:"hidden",children:y},o),a=zl(a,o,l,null),y.return=t,a.return=t,y.sibling=a,t.child=y,a=t.child,a.memoizedState=jc(l),a.childLanes=zc(e,h,l),t.memoizedState=Mc,ws(null,a)):(rl(t),kc(t,y))}var S=e.memoizedState;if(S!==null&&(y=S.dehydrated,y!==null)){if(u)t.flags&256?(rl(t),t.flags&=-257,t=Uc(e,t,l)):t.memoizedState!==null?(ol(),t.child=e.child,t.flags|=128,t=null):(ol(),y=a.fallback,o=t.mode,a=rr({mode:"visible",children:a.children},o),y=zl(y,o,l,null),y.flags|=2,a.return=t,y.return=t,a.sibling=y,t.child=a,ql(t,e.child,null,l),a=t.child,a.memoizedState=jc(l),a.childLanes=zc(e,h,l),t.memoizedState=Mc,t=ws(null,a));else if(rl(t),gu(y)){if(h=y.nextSibling&&y.nextSibling.dataset,h)var A=h.dgst;h=A,a=Error(r(419)),a.stack="",a.digest=h,ps({value:a,source:null,stack:null}),t=Uc(e,t,l)}else if(rt||bi(e,t,l,!1),h=(l&e.childLanes)!==0,rt||h){if(h=He,h!==null&&(a=ed(h,l),a!==0&&a!==S.retryLane))throw S.retryLane=a,jl(e,a),qt(h,e,a),Oc;pu(y)||gr(),t=Uc(e,t,l)}else pu(y)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Xe=cn(y.nextSibling),Ct=t,Se=!0,tl=null,rn=!1,e!==null&&Jd(t,e),t=kc(t,a.children),t.flags|=4096);return t}return o?(ol(),y=a.fallback,o=t.mode,S=e.child,A=S.sibling,a=On(S,{mode:"hidden",children:a.children}),a.subtreeFlags=S.subtreeFlags&65011712,A!==null?y=On(A,y):(y=zl(y,o,l,null),y.flags|=2),y.return=t,a.return=t,a.sibling=y,t.child=a,ws(null,a),a=t.child,y=e.child.memoizedState,y===null?y=jc(l):(o=y.cachePool,o!==null?(S=st._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=nh(),y={baseLanes:y.baseLanes|l,cachePool:o}),a.memoizedState=y,a.childLanes=zc(e,h,l),t.memoizedState=Mc,ws(e.child,a)):(rl(t),l=e.child,e=l.sibling,l=On(l,{mode:"visible",children:a.children}),l.return=t,l.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=l,t.memoizedState=null,l)}function kc(e,t){return t=rr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function rr(e,t){return e=Kt(22,e,null,t),e.lanes=0,e}function Uc(e,t,l){return ql(t,e.child,null,l),e=kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pm(e,t,l){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Wo(e.return,t,l)}function Lc(e,t,l,a,o,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:o,treeForkCount:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=l,h.tailMode=o,h.treeForkCount=u)}function gm(e,t,l){var a=t.pendingProps,o=a.revealOrder,u=a.tail;a=a.children;var h=tt.current,y=(h&2)!==0;if(y?(h=h&1|2,t.flags|=128):h&=1,q(tt,h),Tt(e,t,a,l),a=Se?ms:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pm(e,l,t);else if(e.tag===19)pm(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(l=t.child,o=null;l!==null;)e=l.alternate,e!==null&&Fa(e)===null&&(o=l),l=l.sibling;l=o,l===null?(o=t.child,t.child=null):(o=l.sibling,l.sibling=null),Lc(t,!1,o,l,u,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Fa(e)===null){t.child=o;break}e=o.sibling,o.sibling=l,l=o,o=e}Lc(t,!0,l,null,u,a);break;case"together":Lc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Un(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),fl|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(bi(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,l=On(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=On(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function Ic(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&qa(e)))}function Ky(e,t,l){switch(t.tag){case 3:mt(t,t.stateNode.containerInfo),ll(t,st,e.memoizedState.cache),kl();break;case 27:case 5:Nn(t);break;case 4:mt(t,t.stateNode.containerInfo);break;case 10:ll(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,cc(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(rl(t),t.flags|=128,null):(l&t.child.childLanes)!==0?mm(e,t,l):(rl(t),e=Un(e,t,l),e!==null?e.sibling:null);rl(t);break;case 19:var o=(e.flags&128)!==0;if(a=(l&t.childLanes)!==0,a||(bi(e,t,l,!1),a=(l&t.childLanes)!==0),o){if(a)return gm(e,t,l);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),q(tt,tt.current),a)break;return null;case 22:return t.lanes=0,om(e,t,l,t.pendingProps);case 24:ll(t,st,e.memoizedState.cache)}return Un(e,t,l)}function _m(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)rt=!0;else{if(!Ic(e,l)&&(t.flags&128)===0)return rt=!1,Ky(e,t,l);rt=(e.flags&131072)!==0}else rt=!1,Se&&(t.flags&1048576)!==0&&Fd(t,ms,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Hl(t.elementType),t.type=e,typeof e=="function")Go(e)?(a=Gl(e,a),t.tag=1,t=dm(null,t,e,a,l)):(t.tag=0,t=Dc(null,t,e,a,l));else{if(e!=null){var o=e.$$typeof;if(o===le){t.tag=11,t=sm(null,t,e,a,l);break e}else if(o===ue){t.tag=14,t=am(null,t,e,a,l);break e}}throw t=St(e)||e,Error(r(306,t,""))}}return t;case 0:return Dc(e,t,t.type,t.pendingProps,l);case 1:return a=t.type,o=Gl(a,t.pendingProps),dm(e,t,a,o,l);case 3:e:{if(mt(t,t.stateNode.containerInfo),e===null)throw Error(r(387));a=t.pendingProps;var u=t.memoizedState;o=u.element,ic(e,t),Ss(t,a,null,l);var h=t.memoizedState;if(a=h.cache,ll(t,st,a),a!==u.cache&&$o(t,[st],l,!0),xs(),a=h.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=hm(e,t,a,l);break e}else if(a!==o){o=ln(Error(r(424)),t),ps(o),t=hm(e,t,a,l);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xe=cn(e.firstChild),Ct=t,Se=!0,tl=null,rn=!0,l=oh(t,null,a,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(kl(),a===o){t=Un(e,t,l);break e}Tt(e,t,a,l)}t=t.child}return t;case 26:return ar(e,t),e===null?(l=A0(t.type,null,t.pendingProps,null))?t.memoizedState=l:Se||(l=t.type,e=t.pendingProps,a=Er(se.current).createElement(l),a[Et]=t,a[kt]=e,wt(a,l,e),gt(a),t.stateNode=a):t.memoizedState=A0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Nn(t),e===null&&Se&&(a=t.stateNode=N0(t.type,t.pendingProps,se.current),Ct=t,rn=!0,o=Xe,gl(t.type)?(_u=o,Xe=cn(a.firstChild)):Xe=o),Tt(e,t,t.pendingProps.children,l),ar(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Se&&((o=a=Xe)&&(a=Cv(a,t.type,t.pendingProps,rn),a!==null?(t.stateNode=a,Ct=t,Xe=cn(a.firstChild),rn=!1,o=!0):o=!1),o||nl(t)),Nn(t),o=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,a=u.children,du(o,u)?a=null:h!==null&&du(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=fc(e,t,Hy,null,null,l),Ys._currentValue=o),ar(e,t),Tt(e,t,a,l),t.child;case 6:return e===null&&Se&&((e=l=Xe)&&(l=Nv(l,t.pendingProps,rn),l!==null?(t.stateNode=l,Ct=t,Xe=null,e=!0):e=!1),e||nl(t)),null;case 13:return mm(e,t,l);case 4:return mt(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ql(t,null,a,l):Tt(e,t,a,l),t.child;case 11:return sm(e,t,t.type,t.pendingProps,l);case 7:return Tt(e,t,t.pendingProps,l),t.child;case 8:return Tt(e,t,t.pendingProps.children,l),t.child;case 12:return Tt(e,t,t.pendingProps.children,l),t.child;case 10:return a=t.pendingProps,ll(t,t.type,a.value),Tt(e,t,a.children,l),t.child;case 9:return o=t.type._context,a=t.pendingProps.children,Ll(t),o=Nt(o),a=a(o),t.flags|=1,Tt(e,t,a,l),t.child;case 14:return am(e,t,t.type,t.pendingProps,l);case 15:return rm(e,t,t.type,t.pendingProps,l);case 19:return gm(e,t,l);case 31:return Zy(e,t,l);case 22:return om(e,t,l,t.pendingProps);case 24:return Ll(t),a=Nt(st),e===null?(o=tc(),o===null&&(o=He,u=Po(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=l),o=u),t.memoizedState={parent:a,cache:o},lc(t),ll(t,st,o)):((e.lanes&l)!==0&&(ic(e,t),Ss(t,null,null,l),xs()),o=e.memoizedState,u=t.memoizedState,o.parent!==a?(o={parent:a,cache:a},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),ll(t,st,a)):(a=u.cache,ll(t,st,a),a!==o.cache&&$o(t,[st],l,!0))),Tt(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Ln(e){e.flags|=4}function Hc(e,t,l,a,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Vm())e.flags|=8192;else throw Bl=Xa,nc}else e.flags&=-16777217}function ym(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!j0(t))if(Vm())e.flags|=8192;else throw Bl=Xa,nc}function or(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Wf():536870912,e.lanes|=t,Mi|=t)}function As(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(t)for(var o=e.child;o!==null;)l|=o.lanes|o.childLanes,a|=o.subtreeFlags&65011712,a|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)l|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=l,t}function Fy(e,t,l){var a=t.pendingProps;switch(Zo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return l=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),jn(st),Ve(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(vi(t)?Ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Fo())),Qe(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(Ln(t),u!==null?(Qe(t),ym(t,u)):(Qe(t),Hc(t,o,null,a,l))):u?u!==e.memoizedState?(Ln(t),Qe(t),ym(t,u)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&Ln(t),Qe(t),Hc(t,o,e,a,l)),null;case 27:if(fn(t),l=se.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(!a){if(t.stateNode===null)throw Error(r(166));return Qe(t),null}e=V.current,vi(t)?Wd(t):(e=N0(o,a,l),t.stateNode=e,Ln(t))}return Qe(t),null;case 5:if(fn(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(!a){if(t.stateNode===null)throw Error(r(166));return Qe(t),null}if(u=V.current,vi(t))Wd(t);else{var h=Er(se.current);switch(u){case 1:u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=h.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof a.is=="string"?h.createElement("select",{is:a.is}):h.createElement("select"),a.multiple?u.multiple=!0:a.size&&(u.size=a.size);break;default:u=typeof a.is=="string"?h.createElement(o,{is:a.is}):h.createElement(o)}}u[Et]=t,u[kt]=a;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)u.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=u;e:switch(wt(u,o,a),o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ln(t)}}return Qe(t),Hc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(r(166));if(e=se.current,vi(t)){if(e=t.stateNode,l=t.memoizedProps,a=null,o=Ct,o!==null)switch(o.tag){case 27:case 5:a=o.memoizedProps}e[Et]=t,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||m0(e.nodeValue,l)),e||nl(t,!0)}else e=Er(e).createTextNode(a),e[Et]=t,t.stateNode=e}return Qe(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(a=vi(t),l!==null){if(e===null){if(!a)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Et]=t}else kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else l=Fo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(Jt(t),t):(Jt(t),null);if((t.flags&128)!==0)throw Error(r(558))}return Qe(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=vi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(r(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));o[Et]=t}else kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),o=!1}else o=Fo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Jt(t),t):(Jt(t),null)}return Jt(t),(t.flags&128)!==0?(t.lanes=l,t):(l=a!==null,e=e!==null&&e.memoizedState!==null,l&&(a=t.child,o=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(o=a.alternate.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),or(t,t.updateQueue),Qe(t),null);case 4:return Ve(),e===null&&ru(t.stateNode.containerInfo),Qe(t),null;case 10:return jn(t.type),Qe(t),null;case 19:if(M(tt),a=t.memoizedState,a===null)return Qe(t),null;if(o=(t.flags&128)!==0,u=a.rendering,u===null)if(o)As(a,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Fa(e),u!==null){for(t.flags|=128,As(a,!1),e=u.updateQueue,t.updateQueue=e,or(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Qd(l,e),l=l.sibling;return q(tt,tt.current&1|2),Se&&Dn(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Te()>hr&&(t.flags|=128,o=!0,As(a,!1),t.lanes=4194304)}else{if(!o)if(e=Fa(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,or(t,e),As(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Se)return Qe(t),null}else 2*Te()-a.renderingStartTime>hr&&l!==536870912&&(t.flags|=128,o=!0,As(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(e=a.last,e!==null?e.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Te(),e.sibling=null,l=tt.current,q(tt,o?l&1|2:l&1),Se&&Dn(t,a.treeForkCount),e):(Qe(t),null);case 22:case 23:return Jt(t),oc(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(l&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),l=t.updateQueue,l!==null&&or(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==l&&(t.flags|=2048),e!==null&&M(Il),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),jn(st),Qe(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Jy(e,t){switch(Zo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jn(st),Ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return fn(t),null;case 31:if(t.memoizedState!==null){if(Jt(t),t.alternate===null)throw Error(r(340));kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Jt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return M(tt),null;case 4:return Ve(),null;case 10:return jn(t.type),null;case 22:case 23:return Jt(t),oc(),e!==null&&M(Il),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return jn(st),null;case 25:return null;default:return null}}function vm(e,t){switch(Zo(t),t.tag){case 3:jn(st),Ve();break;case 26:case 27:case 5:fn(t);break;case 4:Ve();break;case 31:t.memoizedState!==null&&Jt(t);break;case 13:Jt(t);break;case 19:M(tt);break;case 10:jn(t.type);break;case 22:case 23:Jt(t),oc(),e!==null&&M(Il);break;case 24:jn(st)}}function Rs(e,t){try{var l=t.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var o=a.next;l=o;do{if((l.tag&e)===e){a=void 0;var u=l.create,h=l.inst;a=u(),h.destroy=a}l=l.next}while(l!==o)}}catch(y){ze(t,t.return,y)}}function cl(e,t,l){try{var a=t.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var u=o.next;a=u;do{if((a.tag&e)===e){var h=a.inst,y=h.destroy;if(y!==void 0){h.destroy=void 0,o=t;var S=l,A=y;try{A()}catch(j){ze(o,S,j)}}}a=a.next}while(a!==u)}}catch(j){ze(t,t.return,j)}}function bm(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{uh(t,l)}catch(a){ze(e,e.return,a)}}}function xm(e,t,l){l.props=Gl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){ze(e,t,a)}}function Os(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(o){ze(e,t,o)}}function En(e,t){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(o){ze(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(o){ze(e,t,o)}else l.current=null}function Sm(e){var t=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(o){ze(e,e.return,o)}}function Bc(e,t,l){try{var a=e.stateNode;yv(a,e.type,l,t),a[kt]=t}catch(o){ze(e,e.return,o)}}function Em(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&gl(e.type)||e.tag===4}function qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Em(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&gl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yc(e,t,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=An));else if(a!==4&&(a===27&&gl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(Yc(e,t,l),e=e.sibling;e!==null;)Yc(e,t,l),e=e.sibling}function cr(e,t,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(a!==4&&(a===27&&gl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(cr(e,t,l),e=e.sibling;e!==null;)cr(e,t,l),e=e.sibling}function Cm(e){var t=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);wt(t,a,l),t[Et]=e,t[kt]=l}catch(u){ze(e,e.return,u)}}var In=!1,ot=!1,Gc=!1,Nm=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Wy(e,t){if(e=e.containerInfo,uu=Or,e=Ld(e),Uo(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var o=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{l.nodeType,u.nodeType}catch{l=null;break e}var h=0,y=-1,S=-1,A=0,j=0,U=e,R=null;t:for(;;){for(var D;U!==l||o!==0&&U.nodeType!==3||(y=h+o),U!==u||a!==0&&U.nodeType!==3||(S=h+a),U.nodeType===3&&(h+=U.nodeValue.length),(D=U.firstChild)!==null;)R=U,U=D;for(;;){if(U===e)break t;if(R===l&&++A===o&&(y=h),R===u&&++j===a&&(S=h),(D=U.nextSibling)!==null)break;U=R,R=U.parentNode}U=D}l=y===-1||S===-1?null:{start:y,end:S}}else l=null}l=l||{start:0,end:0}}else l=null;for(fu={focusedElem:e,selectionRange:l},Or=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){switch(t=_t,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)o=e[l],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,l=t,o=u.memoizedProps,u=u.memoizedState,a=l.stateNode;try{var Q=Gl(l.type,o);e=a.getSnapshotBeforeUpdate(Q,u),a.__reactInternalSnapshotBeforeUpdate=e}catch($){ze(l,l.return,$)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)mu(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}}function Tm(e,t,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:Bn(e,l),a&4&&Rs(5,l);break;case 1:if(Bn(e,l),a&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(h){ze(l,l.return,h)}else{var o=Gl(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){ze(l,l.return,h)}}a&64&&bm(l),a&512&&Os(l,l.return);break;case 3:if(Bn(e,l),a&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{uh(e,t)}catch(h){ze(l,l.return,h)}}break;case 27:t===null&&a&4&&Cm(l);case 26:case 5:Bn(e,l),t===null&&a&4&&Sm(l),a&512&&Os(l,l.return);break;case 12:Bn(e,l);break;case 31:Bn(e,l),a&4&&Rm(e,l);break;case 13:Bn(e,l),a&4&&Om(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=av.bind(null,l),Tv(e,l))));break;case 22:if(a=l.memoizedState!==null||In,!a){t=t!==null&&t.memoizedState!==null||ot,o=In;var u=ot;In=a,(ot=t)&&!u?qn(e,l,(l.subtreeFlags&8772)!==0):Bn(e,l),In=o,ot=u}break;case 30:break;default:Bn(e,l)}}function wm(e){var t=e.alternate;t!==null&&(e.alternate=null,wm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&vo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ke=null,Lt=!1;function Hn(e,t,l){for(l=l.child;l!==null;)Am(e,t,l),l=l.sibling}function Am(e,t,l){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(bn,l)}catch{}switch(l.tag){case 26:ot||En(l,t),Hn(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ot||En(l,t);var a=Ke,o=Lt;gl(l.type)&&(Ke=l.stateNode,Lt=!1),Hn(e,t,l),Hs(l.stateNode),Ke=a,Lt=o;break;case 5:ot||En(l,t);case 6:if(a=Ke,o=Lt,Ke=null,Hn(e,t,l),Ke=a,Lt=o,Ke!==null)if(Lt)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(l.stateNode)}catch(u){ze(l,t,u)}else try{Ke.removeChild(l.stateNode)}catch(u){ze(l,t,u)}break;case 18:Ke!==null&&(Lt?(e=Ke,b0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Bi(e)):b0(Ke,l.stateNode));break;case 4:a=Ke,o=Lt,Ke=l.stateNode.containerInfo,Lt=!0,Hn(e,t,l),Ke=a,Lt=o;break;case 0:case 11:case 14:case 15:cl(2,l,t),ot||cl(4,l,t),Hn(e,t,l);break;case 1:ot||(En(l,t),a=l.stateNode,typeof a.componentWillUnmount=="function"&&xm(l,t,a)),Hn(e,t,l);break;case 21:Hn(e,t,l);break;case 22:ot=(a=ot)||l.memoizedState!==null,Hn(e,t,l),ot=a;break;default:Hn(e,t,l)}}function Rm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Bi(e)}catch(l){ze(t,t.return,l)}}}function Om(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Bi(e)}catch(l){ze(t,t.return,l)}}function $y(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nm),t;default:throw Error(r(435,e.tag))}}function ur(e,t){var l=$y(e);t.forEach(function(a){if(!l.has(a)){l.add(a);var o=rv.bind(null,e,a);a.then(o,o)}})}function It(e,t){var l=t.deletions;if(l!==null)for(var a=0;a<l.length;a++){var o=l[a],u=e,h=t,y=h;e:for(;y!==null;){switch(y.tag){case 27:if(gl(y.type)){Ke=y.stateNode,Lt=!1;break e}break;case 5:Ke=y.stateNode,Lt=!1;break e;case 3:case 4:Ke=y.stateNode.containerInfo,Lt=!0;break e}y=y.return}if(Ke===null)throw Error(r(160));Am(u,h,o),Ke=null,Lt=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Dm(t,e),t=t.sibling}var hn=null;function Dm(e,t){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:It(t,e),Ht(e),a&4&&(cl(3,e,e.return),Rs(3,e),cl(5,e,e.return));break;case 1:It(t,e),Ht(e),a&512&&(ot||l===null||En(l,l.return)),a&64&&In&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var o=hn;if(It(t,e),Ht(e),a&512&&(ot||l===null||En(l,l.return)),a&4){var u=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,o=o.ownerDocument||o;t:switch(a){case"title":u=o.getElementsByTagName("title")[0],(!u||u[ls]||u[Et]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(a),o.head.insertBefore(u,o.querySelector("head > title"))),wt(u,a,l),u[Et]=e,gt(u),a=u;break e;case"link":var h=D0("link","href",o).get(a+(l.href||""));if(h){for(var y=0;y<h.length;y++)if(u=h[y],u.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&u.getAttribute("rel")===(l.rel==null?null:l.rel)&&u.getAttribute("title")===(l.title==null?null:l.title)&&u.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){h.splice(y,1);break t}}u=o.createElement(a),wt(u,a,l),o.head.appendChild(u);break;case"meta":if(h=D0("meta","content",o).get(a+(l.content||""))){for(y=0;y<h.length;y++)if(u=h[y],u.getAttribute("content")===(l.content==null?null:""+l.content)&&u.getAttribute("name")===(l.name==null?null:l.name)&&u.getAttribute("property")===(l.property==null?null:l.property)&&u.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&u.getAttribute("charset")===(l.charSet==null?null:l.charSet)){h.splice(y,1);break t}}u=o.createElement(a),wt(u,a,l),o.head.appendChild(u);break;default:throw Error(r(468,a))}u[Et]=e,gt(u),a=u}e.stateNode=a}else M0(o,e.type,e.stateNode);else e.stateNode=O0(o,a,e.memoizedProps);else u!==a?(u===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):u.count--,a===null?M0(o,e.type,e.stateNode):O0(o,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Bc(e,e.memoizedProps,l.memoizedProps)}break;case 27:It(t,e),Ht(e),a&512&&(ot||l===null||En(l,l.return)),l!==null&&a&4&&Bc(e,e.memoizedProps,l.memoizedProps);break;case 5:if(It(t,e),Ht(e),a&512&&(ot||l===null||En(l,l.return)),e.flags&32){o=e.stateNode;try{ci(o,"")}catch(Q){ze(e,e.return,Q)}}a&4&&e.stateNode!=null&&(o=e.memoizedProps,Bc(e,o,l!==null?l.memoizedProps:o)),a&1024&&(Gc=!0);break;case 6:if(It(t,e),Ht(e),a&4){if(e.stateNode===null)throw Error(r(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(Q){ze(e,e.return,Q)}}break;case 3:if(Tr=null,o=hn,hn=Cr(t.containerInfo),It(t,e),hn=o,Ht(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Bi(t.containerInfo)}catch(Q){ze(e,e.return,Q)}Gc&&(Gc=!1,Mm(e));break;case 4:a=hn,hn=Cr(e.stateNode.containerInfo),It(t,e),Ht(e),hn=a;break;case 12:It(t,e),Ht(e);break;case 31:It(t,e),Ht(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ur(e,a)));break;case 13:It(t,e),Ht(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(dr=Te()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ur(e,a)));break;case 22:o=e.memoizedState!==null;var S=l!==null&&l.memoizedState!==null,A=In,j=ot;if(In=A||o,ot=j||S,It(t,e),ot=j,In=A,Ht(e),a&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(l===null||S||In||ot||Vl(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){S=l=t;try{if(u=S.stateNode,o)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{y=S.stateNode;var U=S.memoizedProps.style,R=U!=null&&U.hasOwnProperty("display")?U.display:null;y.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(Q){ze(S,S.return,Q)}}}else if(t.tag===6){if(l===null){S=t;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(Q){ze(S,S.return,Q)}}}else if(t.tag===18){if(l===null){S=t;try{var D=S.stateNode;o?x0(D,!0):x0(S.stateNode,!1)}catch(Q){ze(S,S.return,Q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,ur(e,l))));break;case 19:It(t,e),Ht(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ur(e,a)));break;case 30:break;case 21:break;default:It(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{for(var l,a=e.return;a!==null;){if(Em(a)){l=a;break}a=a.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var o=l.stateNode,u=qc(e);cr(e,u,o);break;case 5:var h=l.stateNode;l.flags&32&&(ci(h,""),l.flags&=-33);var y=qc(e);cr(e,y,h);break;case 3:case 4:var S=l.stateNode.containerInfo,A=qc(e);Yc(e,A,S);break;default:throw Error(r(161))}}catch(j){ze(e,e.return,j)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Mm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Bn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Tm(e,t.alternate,t),t=t.sibling}function Vl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),Vl(t);break;case 1:En(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&xm(t,t.return,l),Vl(t);break;case 27:Hs(t.stateNode);case 26:case 5:En(t,t.return),Vl(t);break;case 22:t.memoizedState===null&&Vl(t);break;case 30:Vl(t);break;default:Vl(t)}e=e.sibling}}function qn(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,o=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:qn(o,u,l),Rs(4,u);break;case 1:if(qn(o,u,l),a=u,o=a.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(A){ze(a,a.return,A)}if(a=u,o=a.updateQueue,o!==null){var y=a.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)ch(S[o],y)}catch(A){ze(a,a.return,A)}}l&&h&64&&bm(u),Os(u,u.return);break;case 27:Cm(u);case 26:case 5:qn(o,u,l),l&&a===null&&h&4&&Sm(u),Os(u,u.return);break;case 12:qn(o,u,l);break;case 31:qn(o,u,l),l&&h&4&&Rm(o,u);break;case 13:qn(o,u,l),l&&h&4&&Om(o,u);break;case 22:u.memoizedState===null&&qn(o,u,l),Os(u,u.return);break;case 30:break;default:qn(o,u,l)}t=t.sibling}}function Vc(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&gs(l))}function Xc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gs(e))}function mn(e,t,l,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jm(e,t,l,a),t=t.sibling}function jm(e,t,l,a){var o=t.flags;switch(t.tag){case 0:case 11:case 15:mn(e,t,l,a),o&2048&&Rs(9,t);break;case 1:mn(e,t,l,a);break;case 3:mn(e,t,l,a),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gs(e)));break;case 12:if(o&2048){mn(e,t,l,a),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,y=u.onPostCommit;typeof y=="function"&&y(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){ze(t,t.return,S)}}else mn(e,t,l,a);break;case 31:mn(e,t,l,a);break;case 13:mn(e,t,l,a);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?mn(e,t,l,a):Ds(e,t):u._visibility&2?mn(e,t,l,a):(u._visibility|=2,Ri(e,t,l,a,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Vc(h,t);break;case 24:mn(e,t,l,a),o&2048&&Xc(t.alternate,t);break;default:mn(e,t,l,a)}}function Ri(e,t,l,a,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,h=t,y=l,S=a,A=h.flags;switch(h.tag){case 0:case 11:case 15:Ri(u,h,y,S,o),Rs(8,h);break;case 23:break;case 22:var j=h.stateNode;h.memoizedState!==null?j._visibility&2?Ri(u,h,y,S,o):Ds(u,h):(j._visibility|=2,Ri(u,h,y,S,o)),o&&A&2048&&Vc(h.alternate,h);break;case 24:Ri(u,h,y,S,o),o&&A&2048&&Xc(h.alternate,h);break;default:Ri(u,h,y,S,o)}t=t.sibling}}function Ds(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,a=t,o=a.flags;switch(a.tag){case 22:Ds(l,a),o&2048&&Vc(a.alternate,a);break;case 24:Ds(l,a),o&2048&&Xc(a.alternate,a);break;default:Ds(l,a)}t=t.sibling}}var Ms=8192;function Oi(e,t,l){if(e.subtreeFlags&Ms)for(e=e.child;e!==null;)zm(e,t,l),e=e.sibling}function zm(e,t,l){switch(e.tag){case 26:Oi(e,t,l),e.flags&Ms&&e.memoizedState!==null&&Iv(l,hn,e.memoizedState,e.memoizedProps);break;case 5:Oi(e,t,l);break;case 3:case 4:var a=hn;hn=Cr(e.stateNode.containerInfo),Oi(e,t,l),hn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Ms,Ms=16777216,Oi(e,t,l),Ms=a):Oi(e,t,l));break;default:Oi(e,t,l)}}function km(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function js(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var a=t[l];_t=a,Lm(a,e)}km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Um(e),e=e.sibling}function Um(e){switch(e.tag){case 0:case 11:case 15:js(e),e.flags&2048&&cl(9,e,e.return);break;case 3:js(e);break;case 12:js(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,fr(e)):js(e);break;default:js(e)}}function fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var a=t[l];_t=a,Lm(a,e)}km(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:cl(8,t,t.return),fr(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,fr(t));break;default:fr(t)}e=e.sibling}}function Lm(e,t){for(;_t!==null;){var l=_t;switch(l.tag){case 0:case 11:case 15:cl(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:gs(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,_t=a;else e:for(l=e;_t!==null;){a=_t;var o=a.sibling,u=a.return;if(wm(a),a===l){_t=null;break e}if(o!==null){o.return=u,_t=o;break e}_t=u}}}var Py={getCacheForType:function(e){var t=Nt(st),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return Nt(st).controller.signal}},ev=typeof WeakMap=="function"?WeakMap:Map,Re=0,He=null,_e=null,be=0,je=0,Wt=null,ul=!1,Di=!1,Qc=!1,Yn=0,$e=0,fl=0,Xl=0,Zc=0,$t=0,Mi=0,zs=null,Bt=null,Kc=!1,dr=0,Im=0,hr=1/0,mr=null,dl=null,ft=0,hl=null,ji=null,Gn=0,Fc=0,Jc=null,Hm=null,ks=0,Wc=null;function Pt(){return(Re&2)!==0&&be!==0?be&-be:T.T!==null?lu():td()}function Bm(){if($t===0)if((be&536870912)===0||Se){var e=Sa;Sa<<=1,(Sa&3932160)===0&&(Sa=262144),$t=e}else $t=536870912;return e=Ft.current,e!==null&&(e.flags|=32),$t}function qt(e,t,l){(e===He&&(je===2||je===9)||e.cancelPendingCommit!==null)&&(zi(e,0),ml(e,be,$t,!1)),ns(e,l),((Re&2)===0||e!==He)&&(e===He&&((Re&2)===0&&(Xl|=l),$e===4&&ml(e,be,$t,!1)),Cn(e))}function qm(e,t,l){if((Re&6)!==0)throw Error(r(327));var a=!l&&(t&127)===0&&(t&e.expiredLanes)===0||ts(e,t),o=a?lv(e,t):Pc(e,t,!0),u=a;do{if(o===0){Di&&!a&&ml(e,t,0,!1);break}else{if(l=e.current.alternate,u&&!tv(l)){o=Pc(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var y=e;o=zs;var S=y.current.memoizedState.isDehydrated;if(S&&(zi(y,h).flags|=256),h=Pc(y,h,!1),h!==2){if(Qc&&!S){y.errorRecoveryDisabledLanes|=u,Xl|=u,o=4;break e}u=Bt,Bt=o,u!==null&&(Bt===null?Bt=u:Bt.push.apply(Bt,u))}o=h}if(u=!1,o!==2)continue}}if(o===1){zi(e,0),ml(e,t,0,!0);break}e:{switch(a=e,u=o,u){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:ml(a,t,$t,!ul);break e;case 2:Bt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(o=dr+300-Te(),10<o)){if(ml(a,t,$t,!ul),Ca(a,0,!0)!==0)break e;Gn=t,a.timeoutHandle=y0(Ym.bind(null,a,l,Bt,mr,Kc,t,$t,Xl,Mi,ul,u,"Throttled",-0,0),o);break e}Ym(a,l,Bt,mr,Kc,t,$t,Xl,Mi,ul,u,null,-0,0)}}break}while(!0);Cn(e)}function Ym(e,t,l,a,o,u,h,y,S,A,j,U,R,D){if(e.timeoutHandle=-1,U=t.subtreeFlags,U&8192||(U&16785408)===16785408){U={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},zm(t,u,U);var Q=(u&62914560)===u?dr-Te():(u&4194048)===u?Im-Te():0;if(Q=Hv(U,Q),Q!==null){Gn=u,e.cancelPendingCommit=Q(Jm.bind(null,e,t,u,l,a,o,h,y,S,j,U,null,R,D)),ml(e,u,h,!A);return}}Jm(e,t,u,l,a,o,h,y,S)}function tv(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var o=l[a],u=o.getSnapshot;o=o.value;try{if(!Zt(u(),o))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ml(e,t,l,a){t&=~Zc,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var o=t;0<o;){var u=31-Qt(o),h=1<<u;a[u]=-1,o&=~h}l!==0&&$f(e,l,t)}function pr(){return(Re&6)===0?(Us(0),!1):!0}function $c(){if(_e!==null){if(je===0)var e=_e.return;else e=_e,Mn=Ul=null,mc(e),Ci=null,ys=0,e=_e;for(;e!==null;)vm(e.alternate,e),e=e.return;_e=null}}function zi(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,xv(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Gn=0,$c(),He=e,_e=l=On(e.current,null),be=t,je=0,Wt=null,ul=!1,Di=ts(e,t),Qc=!1,Mi=$t=Zc=Xl=fl=$e=0,Bt=zs=null,Kc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var o=31-Qt(a),u=1<<o;t|=e[o],a&=~u}return Yn=t,Ua(),l}function Gm(e,t){ce=null,T.H=Ts,t===Ei||t===Va?(t=sh(),je=3):t===nc?(t=sh(),je=4):je=t===Oc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Wt=t,_e===null&&($e=1,ir(e,ln(t,e.current)))}function Vm(){var e=Ft.current;return e===null?!0:(be&4194048)===be?on===null:(be&62914560)===be||(be&536870912)!==0?e===on:!1}function Xm(){var e=T.H;return T.H=Ts,e===null?Ts:e}function Qm(){var e=T.A;return T.A=Py,e}function gr(){$e=4,ul||(be&4194048)!==be&&Ft.current!==null||(Di=!0),(fl&134217727)===0&&(Xl&134217727)===0||He===null||ml(He,be,$t,!1)}function Pc(e,t,l){var a=Re;Re|=2;var o=Xm(),u=Qm();(He!==e||be!==t)&&(mr=null,zi(e,t)),t=!1;var h=$e;e:do try{if(je!==0&&_e!==null){var y=_e,S=Wt;switch(je){case 8:$c(),h=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(t=!0);var A=je;if(je=0,Wt=null,ki(e,y,S,A),l&&Di){h=0;break e}break;default:A=je,je=0,Wt=null,ki(e,y,S,A)}}nv(),h=$e;break}catch(j){Gm(e,j)}while(!0);return t&&e.shellSuspendCounter++,Mn=Ul=null,Re=a,T.H=o,T.A=u,_e===null&&(He=null,be=0,Ua()),h}function nv(){for(;_e!==null;)Zm(_e)}function lv(e,t){var l=Re;Re|=2;var a=Xm(),o=Qm();He!==e||be!==t?(mr=null,hr=Te()+500,zi(e,t)):Di=ts(e,t);e:do try{if(je!==0&&_e!==null){t=_e;var u=Wt;t:switch(je){case 1:je=0,Wt=null,ki(e,t,u,1);break;case 2:case 9:if(lh(u)){je=0,Wt=null,Km(t);break}t=function(){je!==2&&je!==9||He!==e||(je=7),Cn(e)},u.then(t,t);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:lh(u)?(je=0,Wt=null,Km(t)):(je=0,Wt=null,ki(e,t,u,7));break;case 5:var h=null;switch(_e.tag){case 26:h=_e.memoizedState;case 5:case 27:var y=_e;if(h?j0(h):y.stateNode.complete){je=0,Wt=null;var S=y.sibling;if(S!==null)_e=S;else{var A=y.return;A!==null?(_e=A,_r(A)):_e=null}break t}}je=0,Wt=null,ki(e,t,u,5);break;case 6:je=0,Wt=null,ki(e,t,u,6);break;case 8:$c(),$e=6;break e;default:throw Error(r(462))}}iv();break}catch(j){Gm(e,j)}while(!0);return Mn=Ul=null,T.H=a,T.A=o,Re=l,_e!==null?0:(He=null,be=0,Ua(),$e)}function iv(){for(;_e!==null&&!zt();)Zm(_e)}function Zm(e){var t=_m(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?_r(e):_e=t}function Km(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=fm(l,t,t.pendingProps,t.type,void 0,be);break;case 11:t=fm(l,t,t.pendingProps,t.type.render,t.ref,be);break;case 5:mc(t);default:vm(l,t),t=_e=Qd(t,Yn),t=_m(l,t,Yn)}e.memoizedProps=e.pendingProps,t===null?_r(e):_e=t}function ki(e,t,l,a){Mn=Ul=null,mc(t),Ci=null,ys=0;var o=t.return;try{if(Qy(e,o,t,l,be)){$e=1,ir(e,ln(l,e.current)),_e=null;return}}catch(u){if(o!==null)throw _e=o,u;$e=1,ir(e,ln(l,e.current)),_e=null;return}t.flags&32768?(Se||a===1?e=!0:Di||(be&536870912)!==0?e=!1:(ul=e=!0,(a===2||a===9||a===3||a===6)&&(a=Ft.current,a!==null&&a.tag===13&&(a.flags|=16384))),Fm(t,e)):_r(t)}function _r(e){var t=e;do{if((t.flags&32768)!==0){Fm(t,ul);return}e=t.return;var l=Fy(t.alternate,t,Yn);if(l!==null){_e=l;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);$e===0&&($e=5)}function Fm(e,t){do{var l=Jy(e.alternate,e);if(l!==null){l.flags&=32767,_e=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=l}while(e!==null);$e=6,_e=null}function Jm(e,t,l,a,o,u,h,y,S){e.cancelPendingCommit=null;do yr();while(ft!==0);if((Re&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(u=t.lanes|t.childLanes,u|=qo,L_(e,l,u,h,y,S),e===He&&(_e=He=null,be=0),ji=t,hl=e,Gn=l,Fc=u,Jc=o,Hm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ov(qe,function(){return t0(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=T.T,T.T=null,o=L.p,L.p=2,h=Re,Re|=4;try{Wy(e,t,l)}finally{Re=h,L.p=o,T.T=a}}ft=1,Wm(),$m(),Pm()}}function Wm(){if(ft===1){ft=0;var e=hl,t=ji,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=T.T,T.T=null;var a=L.p;L.p=2;var o=Re;Re|=4;try{Dm(t,e);var u=fu,h=Ld(e.containerInfo),y=u.focusedElem,S=u.selectionRange;if(h!==y&&y&&y.ownerDocument&&Ud(y.ownerDocument.documentElement,y)){if(S!==null&&Uo(y)){var A=S.start,j=S.end;if(j===void 0&&(j=A),"selectionStart"in y)y.selectionStart=A,y.selectionEnd=Math.min(j,y.value.length);else{var U=y.ownerDocument||document,R=U&&U.defaultView||window;if(R.getSelection){var D=R.getSelection(),Q=y.textContent.length,$=Math.min(S.start,Q),Le=S.end===void 0?$:Math.min(S.end,Q);!D.extend&&$>Le&&(h=Le,Le=$,$=h);var N=kd(y,$),E=kd(y,Le);if(N&&E&&(D.rangeCount!==1||D.anchorNode!==N.node||D.anchorOffset!==N.offset||D.focusNode!==E.node||D.focusOffset!==E.offset)){var w=U.createRange();w.setStart(N.node,N.offset),D.removeAllRanges(),$>Le?(D.addRange(w),D.extend(E.node,E.offset)):(w.setEnd(E.node,E.offset),D.addRange(w))}}}}for(U=[],D=y;D=D.parentNode;)D.nodeType===1&&U.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<U.length;y++){var k=U[y];k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}Or=!!uu,fu=uu=null}finally{Re=o,L.p=a,T.T=l}}e.current=t,ft=2}}function $m(){if(ft===2){ft=0;var e=hl,t=ji,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=T.T,T.T=null;var a=L.p;L.p=2;var o=Re;Re|=4;try{Tm(e,t.alternate,t)}finally{Re=o,L.p=a,T.T=l}}ft=3}}function Pm(){if(ft===4||ft===3){ft=0,pt();var e=hl,t=ji,l=Gn,a=Hm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,ji=hl=null,e0(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(dl=null),_o(l),t=t.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(bn,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=T.T,o=L.p,L.p=2,T.T=null;try{for(var u=e.onRecoverableError,h=0;h<a.length;h++){var y=a[h];u(y.value,{componentStack:y.stack})}}finally{T.T=t,L.p=o}}(Gn&3)!==0&&yr(),Cn(e),o=e.pendingLanes,(l&261930)!==0&&(o&42)!==0?e===Wc?ks++:(ks=0,Wc=e):ks=0,Us(0)}}function e0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gs(t)))}function yr(){return Wm(),$m(),Pm(),t0()}function t0(){if(ft!==5)return!1;var e=hl,t=Fc;Fc=0;var l=_o(Gn),a=T.T,o=L.p;try{L.p=32>l?32:l,T.T=null,l=Jc,Jc=null;var u=hl,h=Gn;if(ft=0,ji=hl=null,Gn=0,(Re&6)!==0)throw Error(r(331));var y=Re;if(Re|=4,Um(u.current),jm(u,u.current,h,l),Re=y,Us(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(bn,u)}catch{}return!0}finally{L.p=o,T.T=a,e0(e,t)}}function n0(e,t,l){t=ln(l,t),t=Rc(e.stateNode,t,2),e=al(e,t,2),e!==null&&(ns(e,2),Cn(e))}function ze(e,t,l){if(e.tag===3)n0(e,e,l);else for(;t!==null;){if(t.tag===3){n0(t,e,l);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(dl===null||!dl.has(a))){e=ln(l,e),l=lm(2),a=al(t,l,2),a!==null&&(im(l,a,t,e),ns(a,2),Cn(a));break}}t=t.return}}function eu(e,t,l){var a=e.pingCache;if(a===null){a=e.pingCache=new ev;var o=new Set;a.set(t,o)}else o=a.get(t),o===void 0&&(o=new Set,a.set(t,o));o.has(l)||(Qc=!0,o.add(l),e=sv.bind(null,e,t,l),t.then(e,e))}function sv(e,t,l){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,He===e&&(be&l)===l&&($e===4||$e===3&&(be&62914560)===be&&300>Te()-dr?(Re&2)===0&&zi(e,0):Zc|=l,Mi===be&&(Mi=0)),Cn(e)}function l0(e,t){t===0&&(t=Wf()),e=jl(e,t),e!==null&&(ns(e,t),Cn(e))}function av(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),l0(e,l)}function rv(e,t){var l=0;switch(e.tag){case 31:case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(l=o.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(r(314))}a!==null&&a.delete(t),l0(e,l)}function ov(e,t){return Je(e,t)}var vr=null,Ui=null,tu=!1,br=!1,nu=!1,pl=0;function Cn(e){e!==Ui&&e.next===null&&(Ui===null?vr=Ui=e:Ui=Ui.next=e),br=!0,tu||(tu=!0,uv())}function Us(e,t){if(!nu&&br){nu=!0;do for(var l=!1,a=vr;a!==null;){if(e!==0){var o=a.pendingLanes;if(o===0)var u=0;else{var h=a.suspendedLanes,y=a.pingedLanes;u=(1<<31-Qt(42|e)+1)-1,u&=o&~(h&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(l=!0,r0(a,u))}else u=be,u=Ca(a,a===He?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(u&3)===0||ts(a,u)||(l=!0,r0(a,u));a=a.next}while(l);nu=!1}}function cv(){i0()}function i0(){br=tu=!1;var e=0;pl!==0&&bv()&&(e=pl);for(var t=Te(),l=null,a=vr;a!==null;){var o=a.next,u=s0(a,t);u===0?(a.next=null,l===null?vr=o:l.next=o,o===null&&(Ui=l)):(l=a,(e!==0||(u&3)!==0)&&(br=!0)),a=o}ft!==0&&ft!==5||Us(e),pl!==0&&(pl=0)}function s0(e,t){for(var l=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-Qt(u),y=1<<h,S=o[h];S===-1?((y&l)===0||(y&a)!==0)&&(o[h]=U_(y,t)):S<=t&&(e.expiredLanes|=y),u&=~y}if(t=He,l=be,l=Ca(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===t&&(je===2||je===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&it(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||ts(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(a!==null&&it(a),_o(l)){case 2:case 8:l=De;break;case 32:l=qe;break;case 268435456:l=vn;break;default:l=qe}return a=a0.bind(null,e),l=Je(l,a),e.callbackPriority=t,e.callbackNode=l,t}return a!==null&&a!==null&&it(a),e.callbackPriority=2,e.callbackNode=null,2}function a0(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(yr()&&e.callbackNode!==l)return null;var a=be;return a=Ca(e,e===He?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(qm(e,a,t),s0(e,Te()),e.callbackNode!=null&&e.callbackNode===l?a0.bind(null,e):null)}function r0(e,t){if(yr())return null;qm(e,t,!0)}function uv(){Sv(function(){(Re&6)!==0?Je(Ce,cv):i0()})}function lu(){if(pl===0){var e=xi;e===0&&(e=xa,xa<<=1,(xa&261888)===0&&(xa=256)),pl=e}return pl}function o0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Aa(""+e)}function c0(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function fv(e,t,l,a,o){if(t==="submit"&&l&&l.stateNode===o){var u=o0((o[kt]||null).action),h=a.submitter;h&&(t=(t=h[kt]||null)?o0(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var y=new Ma("action","action",null,a,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(pl!==0){var S=h?c0(o,h):new FormData(o);Ec(l,{pending:!0,data:S,method:o.method,action:u},null,S)}}else typeof u=="function"&&(y.preventDefault(),S=h?c0(o,h):new FormData(o),Ec(l,{pending:!0,data:S,method:o.method,action:u},u,S))},currentTarget:o}]})}}for(var iu=0;iu<Bo.length;iu++){var su=Bo[iu],dv=su.toLowerCase(),hv=su[0].toUpperCase()+su.slice(1);dn(dv,"on"+hv)}dn(Bd,"onAnimationEnd"),dn(qd,"onAnimationIteration"),dn(Yd,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(Ry,"onTransitionRun"),dn(Oy,"onTransitionStart"),dn(Dy,"onTransitionCancel"),dn(Gd,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),Rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ls));function u0(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],o=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var h=a.length-1;0<=h;h--){var y=a[h],S=y.instance,A=y.currentTarget;if(y=y.listener,S!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=A;try{u(o)}catch(j){ka(j)}o.currentTarget=null,u=S}else for(h=0;h<a.length;h++){if(y=a[h],S=y.instance,A=y.currentTarget,y=y.listener,S!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=A;try{u(o)}catch(j){ka(j)}o.currentTarget=null,u=S}}}}function ye(e,t){var l=t[yo];l===void 0&&(l=t[yo]=new Set);var a=e+"__bubble";l.has(a)||(f0(t,e,2,!1),l.add(a))}function au(e,t,l){var a=0;t&&(a|=4),f0(l,e,a,t)}var xr="_reactListening"+Math.random().toString(36).slice(2);function ru(e){if(!e[xr]){e[xr]=!0,id.forEach(function(l){l!=="selectionchange"&&(mv.has(l)||au(l,!1,e),au(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xr]||(t[xr]=!0,au("selectionchange",!1,t))}}function f0(e,t,l,a){switch(B0(t)){case 2:var o=Yv;break;case 8:o=Gv;break;default:o=Su}l=o.bind(null,t,l,e),o=void 0,!wo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(t,l,{capture:!0,passive:o}):e.addEventListener(t,l,!0):o!==void 0?e.addEventListener(t,l,{passive:o}):e.addEventListener(t,l,!1)}function ou(e,t,l,a,o){var u=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var y=a.stateNode.containerInfo;if(y===o)break;if(h===4)for(h=a.return;h!==null;){var S=h.tag;if((S===3||S===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;y!==null;){if(h=ii(y),h===null)return;if(S=h.tag,S===5||S===6||S===26||S===27){a=u=h;continue e}y=y.parentNode}}a=a.return}gd(function(){var A=u,j=No(l),U=[];e:{var R=Vd.get(e);if(R!==void 0){var D=Ma,Q=e;switch(e){case"keypress":if(Oa(l)===0)break e;case"keydown":case"keyup":D=ry;break;case"focusin":Q="focus",D=Do;break;case"focusout":Q="blur",D=Do;break;case"beforeblur":case"afterblur":D=Do;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=F_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=uy;break;case Bd:case qd:case Yd:D=$_;break;case Gd:D=dy;break;case"scroll":case"scrollend":D=Z_;break;case"wheel":D=my;break;case"copy":case"cut":case"paste":D=ey;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=xd;break;case"toggle":case"beforetoggle":D=gy}var $=(t&4)!==0,Le=!$&&(e==="scroll"||e==="scrollend"),N=$?R!==null?R+"Capture":null:R;$=[];for(var E=A,w;E!==null;){var k=E;if(w=k.stateNode,k=k.tag,k!==5&&k!==26&&k!==27||w===null||N===null||(k=ss(E,N),k!=null&&$.push(Is(E,k,w))),Le)break;E=E.return}0<$.length&&(R=new D(R,Q,null,l,j),U.push({event:R,listeners:$}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",R&&l!==Co&&(Q=l.relatedTarget||l.fromElement)&&(ii(Q)||Q[li]))break e;if((D||R)&&(R=j.window===j?j:(R=j.ownerDocument)?R.defaultView||R.parentWindow:window,D?(Q=l.relatedTarget||l.toElement,D=A,Q=Q?ii(Q):null,Q!==null&&(Le=f(Q),$=Q.tag,Q!==Le||$!==5&&$!==27&&$!==6)&&(Q=null)):(D=null,Q=A),D!==Q)){if($=vd,k="onMouseLeave",N="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&($=xd,k="onPointerLeave",N="onPointerEnter",E="pointer"),Le=D==null?R:is(D),w=Q==null?R:is(Q),R=new $(k,E+"leave",D,l,j),R.target=Le,R.relatedTarget=w,k=null,ii(j)===A&&($=new $(N,E+"enter",Q,l,j),$.target=w,$.relatedTarget=Le,k=$),Le=k,D&&Q)t:{for($=pv,N=D,E=Q,w=0,k=N;k;k=$(k))w++;k=0;for(var J=E;J;J=$(J))k++;for(;0<w-k;)N=$(N),w--;for(;0<k-w;)E=$(E),k--;for(;w--;){if(N===E||E!==null&&N===E.alternate){$=N;break t}N=$(N),E=$(E)}$=null}else $=null;D!==null&&d0(U,R,D,$,!1),Q!==null&&Le!==null&&d0(U,Le,Q,$,!0)}}e:{if(R=A?is(A):window,D=R.nodeName&&R.nodeName.toLowerCase(),D==="select"||D==="input"&&R.type==="file")var we=Rd;else if(wd(R))if(Od)we=Ty;else{we=Cy;var Z=Ey}else D=R.nodeName,!D||D.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?A&&Eo(A.elementType)&&(we=Rd):we=Ny;if(we&&(we=we(e,A))){Ad(U,we,l,j);break e}Z&&Z(e,R,A),e==="focusout"&&A&&R.type==="number"&&A.memoizedProps.value!=null&&So(R,"number",R.value)}switch(Z=A?is(A):window,e){case"focusin":(wd(Z)||Z.contentEditable==="true")&&(hi=Z,Lo=A,hs=null);break;case"focusout":hs=Lo=hi=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,Id(U,l,j);break;case"selectionchange":if(Ay)break;case"keydown":case"keyup":Id(U,l,j)}var de;if(jo)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else di?Nd(e,l)&&(xe="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(Sd&&l.locale!=="ko"&&(di||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&di&&(de=_d()):(Pn=j,Ao="value"in Pn?Pn.value:Pn.textContent,di=!0)),Z=Sr(A,xe),0<Z.length&&(xe=new bd(xe,e,null,l,j),U.push({event:xe,listeners:Z}),de?xe.data=de:(de=Td(l),de!==null&&(xe.data=de)))),(de=yy?vy(e,l):by(e,l))&&(xe=Sr(A,"onBeforeInput"),0<xe.length&&(Z=new bd("onBeforeInput","beforeinput",null,l,j),U.push({event:Z,listeners:xe}),Z.data=de)),fv(U,e,A,l,j)}u0(U,t)})}function Is(e,t,l){return{instance:e,listener:t,currentTarget:l}}function Sr(e,t){for(var l=t+"Capture",a=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=ss(e,l),o!=null&&a.unshift(Is(e,o,u)),o=ss(e,t),o!=null&&a.push(Is(e,o,u))),e.tag===3)return a;e=e.return}return[]}function pv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function d0(e,t,l,a,o){for(var u=t._reactName,h=[];l!==null&&l!==a;){var y=l,S=y.alternate,A=y.stateNode;if(y=y.tag,S!==null&&S===a)break;y!==5&&y!==26&&y!==27||A===null||(S=A,o?(A=ss(l,u),A!=null&&h.unshift(Is(l,A,S))):o||(A=ss(l,u),A!=null&&h.push(Is(l,A,S)))),l=l.return}h.length!==0&&e.push({event:t,listeners:h})}var gv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function h0(e){return(typeof e=="string"?e:""+e).replace(gv,`
`).replace(_v,"")}function m0(e,t){return t=h0(t),h0(e)===t}function Ue(e,t,l,a,o,u){switch(l){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||ci(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&ci(e,""+a);break;case"className":Ta(e,"class",a);break;case"tabIndex":Ta(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ta(e,l,a);break;case"style":md(e,a,u);break;case"data":if(t!=="object"){Ta(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=Aa(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(l==="formAction"?(t!=="input"&&Ue(e,t,"name",o.name,o,null),Ue(e,t,"formEncType",o.formEncType,o,null),Ue(e,t,"formMethod",o.formMethod,o,null),Ue(e,t,"formTarget",o.formTarget,o,null)):(Ue(e,t,"encType",o.encType,o,null),Ue(e,t,"method",o.method,o,null),Ue(e,t,"target",o.target,o,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=Aa(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=An);break;case"onScroll":a!=null&&ye("scroll",e);break;case"onScrollEnd":a!=null&&ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(l=a.__html,l!=null){if(o.children!=null)throw Error(r(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=Aa(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":ye("beforetoggle",e),ye("toggle",e),Na(e,"popover",a);break;case"xlinkActuate":wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":wn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":wn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":wn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":wn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Na(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=X_.get(l)||l,Na(e,l,a))}}function cu(e,t,l,a,o,u){switch(l){case"style":md(e,a,u);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(l=a.__html,l!=null){if(o.children!=null)throw Error(r(60));e.innerHTML=l}}break;case"children":typeof a=="string"?ci(e,a):(typeof a=="number"||typeof a=="bigint")&&ci(e,""+a);break;case"onScroll":a!=null&&ye("scroll",e);break;case"onScrollEnd":a!=null&&ye("scrollend",e);break;case"onClick":a!=null&&(e.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sd.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(o=l.endsWith("Capture"),t=l.slice(2,o?l.length-7:void 0),u=e[kt]||null,u=u!=null?u[l]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof a=="function")){typeof u!="function"&&u!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,a,o);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):Na(e,l,a)}}}function wt(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",e),ye("load",e);var a=!1,o=!1,u;for(u in l)if(l.hasOwnProperty(u)){var h=l[u];if(h!=null)switch(u){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ue(e,t,u,h,l,null)}}o&&Ue(e,t,"srcSet",l.srcSet,l,null),a&&Ue(e,t,"src",l.src,l,null);return;case"input":ye("invalid",e);var y=u=h=o=null,S=null,A=null;for(a in l)if(l.hasOwnProperty(a)){var j=l[a];if(j!=null)switch(a){case"name":o=j;break;case"type":h=j;break;case"checked":S=j;break;case"defaultChecked":A=j;break;case"value":u=j;break;case"defaultValue":y=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,t));break;default:Ue(e,t,a,j,l,null)}}ud(e,u,y,S,A,h,o,!1);return;case"select":ye("invalid",e),a=h=u=null;for(o in l)if(l.hasOwnProperty(o)&&(y=l[o],y!=null))switch(o){case"value":u=y;break;case"defaultValue":h=y;break;case"multiple":a=y;default:Ue(e,t,o,y,l,null)}t=u,l=h,e.multiple=!!a,t!=null?oi(e,!!a,t,!1):l!=null&&oi(e,!!a,l,!0);return;case"textarea":ye("invalid",e),u=o=a=null;for(h in l)if(l.hasOwnProperty(h)&&(y=l[h],y!=null))switch(h){case"value":a=y;break;case"defaultValue":o=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:Ue(e,t,h,y,l,null)}dd(e,a,o,u);return;case"option":for(S in l)if(l.hasOwnProperty(S)&&(a=l[S],a!=null))switch(S){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ue(e,t,S,a,l,null)}return;case"dialog":ye("beforetoggle",e),ye("toggle",e),ye("cancel",e),ye("close",e);break;case"iframe":case"object":ye("load",e);break;case"video":case"audio":for(a=0;a<Ls.length;a++)ye(Ls[a],e);break;case"image":ye("error",e),ye("load",e);break;case"details":ye("toggle",e);break;case"embed":case"source":case"link":ye("error",e),ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(A in l)if(l.hasOwnProperty(A)&&(a=l[A],a!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ue(e,t,A,a,l,null)}return;default:if(Eo(t)){for(j in l)l.hasOwnProperty(j)&&(a=l[j],a!==void 0&&cu(e,t,j,a,l,void 0));return}}for(y in l)l.hasOwnProperty(y)&&(a=l[y],a!=null&&Ue(e,t,y,a,l,null))}function yv(e,t,l,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,h=null,y=null,S=null,A=null,j=null;for(D in l){var U=l[D];if(l.hasOwnProperty(D)&&U!=null)switch(D){case"checked":break;case"value":break;case"defaultValue":S=U;default:a.hasOwnProperty(D)||Ue(e,t,D,null,a,U)}}for(var R in a){var D=a[R];if(U=l[R],a.hasOwnProperty(R)&&(D!=null||U!=null))switch(R){case"type":u=D;break;case"name":o=D;break;case"checked":A=D;break;case"defaultChecked":j=D;break;case"value":h=D;break;case"defaultValue":y=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,t));break;default:D!==U&&Ue(e,t,R,D,a,U)}}xo(e,h,y,S,A,j,u,o);return;case"select":D=h=y=R=null;for(u in l)if(S=l[u],l.hasOwnProperty(u)&&S!=null)switch(u){case"value":break;case"multiple":D=S;default:a.hasOwnProperty(u)||Ue(e,t,u,null,a,S)}for(o in a)if(u=a[o],S=l[o],a.hasOwnProperty(o)&&(u!=null||S!=null))switch(o){case"value":R=u;break;case"defaultValue":y=u;break;case"multiple":h=u;default:u!==S&&Ue(e,t,o,u,a,S)}t=y,l=h,a=D,R!=null?oi(e,!!l,R,!1):!!a!=!!l&&(t!=null?oi(e,!!l,t,!0):oi(e,!!l,l?[]:"",!1));return;case"textarea":D=R=null;for(y in l)if(o=l[y],l.hasOwnProperty(y)&&o!=null&&!a.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ue(e,t,y,null,a,o)}for(h in a)if(o=a[h],u=l[h],a.hasOwnProperty(h)&&(o!=null||u!=null))switch(h){case"value":R=o;break;case"defaultValue":D=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(r(91));break;default:o!==u&&Ue(e,t,h,o,a,u)}fd(e,R,D);return;case"option":for(var Q in l)if(R=l[Q],l.hasOwnProperty(Q)&&R!=null&&!a.hasOwnProperty(Q))switch(Q){case"selected":e.selected=!1;break;default:Ue(e,t,Q,null,a,R)}for(S in a)if(R=a[S],D=l[S],a.hasOwnProperty(S)&&R!==D&&(R!=null||D!=null))switch(S){case"selected":e.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:Ue(e,t,S,R,a,D)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $ in l)R=l[$],l.hasOwnProperty($)&&R!=null&&!a.hasOwnProperty($)&&Ue(e,t,$,null,a,R);for(A in a)if(R=a[A],D=l[A],a.hasOwnProperty(A)&&R!==D&&(R!=null||D!=null))switch(A){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(137,t));break;default:Ue(e,t,A,R,a,D)}return;default:if(Eo(t)){for(var Le in l)R=l[Le],l.hasOwnProperty(Le)&&R!==void 0&&!a.hasOwnProperty(Le)&&cu(e,t,Le,void 0,a,R);for(j in a)R=a[j],D=l[j],!a.hasOwnProperty(j)||R===D||R===void 0&&D===void 0||cu(e,t,j,R,a,D);return}}for(var N in l)R=l[N],l.hasOwnProperty(N)&&R!=null&&!a.hasOwnProperty(N)&&Ue(e,t,N,null,a,R);for(U in a)R=a[U],D=l[U],!a.hasOwnProperty(U)||R===D||R==null&&D==null||Ue(e,t,U,R,a,D)}function p0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var o=l[a],u=o.transferSize,h=o.initiatorType,y=o.duration;if(u&&y&&p0(h)){for(h=0,y=o.responseEnd,a+=1;a<l.length;a++){var S=l[a],A=S.startTime;if(A>y)break;var j=S.transferSize,U=S.initiatorType;j&&p0(U)&&(S=S.responseEnd,h+=j*(S<y?1:(y-A)/(S-A)))}if(--a,t+=8*(u+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var uu=null,fu=null;function Er(e){return e.nodeType===9?e:e.ownerDocument}function g0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function du(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hu=null;function bv(){var e=window.event;return e&&e.type==="popstate"?e===hu?!1:(hu=e,!0):(hu=null,!1)}var y0=typeof setTimeout=="function"?setTimeout:void 0,xv=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,Sv=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(e){return v0.resolve(null).then(e).catch(Ev)}:y0;function Ev(e){setTimeout(function(){throw e})}function gl(e){return e==="head"}function b0(e,t){var l=t,a=0;do{var o=l.nextSibling;if(e.removeChild(l),o&&o.nodeType===8)if(l=o.data,l==="/$"||l==="/&"){if(a===0){e.removeChild(o),Bi(t);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Hs(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Hs(l);for(var u=l.firstChild;u;){var h=u.nextSibling,y=u.nodeName;u[ls]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||l.removeChild(u),u=h}}else l==="body"&&Hs(e.ownerDocument.body);l=o}while(l);Bi(t)}function x0(e,t){var l=e;e=0;do{var a=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=a}while(l)}function mu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":mu(l),vo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Cv(e,t,l,a){for(;e.nodeType===1;){var o=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[ls])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=cn(e.nextSibling),e===null)break}return null}function Nv(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=cn(e.nextSibling),e===null))return null;return e}function S0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=cn(e.nextSibling),e===null))return null;return e}function pu(e){return e.data==="$?"||e.data==="$~"}function gu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Tv(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var a=function(){t(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _u=null;function E0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return cn(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function C0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function N0(e,t,l){switch(t=Er(l),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Hs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);vo(e)}var un=new Map,T0=new Set;function Cr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vn=L.d;L.d={f:wv,r:Av,D:Rv,C:Ov,L:Dv,m:Mv,X:zv,S:jv,M:kv};function wv(){var e=Vn.f(),t=pr();return e||t}function Av(e){var t=si(e);t!==null&&t.tag===5&&t.type==="form"?Gh(t):Vn.r(e)}var Li=typeof document>"u"?null:document;function w0(e,t,l){var a=Li;if(a&&typeof t=="string"&&t){var o=tn(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof l=="string"&&(o+='[crossorigin="'+l+'"]'),T0.has(o)||(T0.add(o),e={rel:e,crossOrigin:l,href:t},a.querySelector(o)===null&&(t=a.createElement("link"),wt(t,"link",e),gt(t),a.head.appendChild(t)))}}function Rv(e){Vn.D(e),w0("dns-prefetch",e,null)}function Ov(e,t){Vn.C(e,t),w0("preconnect",e,t)}function Dv(e,t,l){Vn.L(e,t,l);var a=Li;if(a&&e&&t){var o='link[rel="preload"][as="'+tn(t)+'"]';t==="image"&&l&&l.imageSrcSet?(o+='[imagesrcset="'+tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(o+='[imagesizes="'+tn(l.imageSizes)+'"]')):o+='[href="'+tn(e)+'"]';var u=o;switch(t){case"style":u=Ii(e);break;case"script":u=Hi(e)}un.has(u)||(e=v({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),un.set(u,e),a.querySelector(o)!==null||t==="style"&&a.querySelector(Bs(u))||t==="script"&&a.querySelector(qs(u))||(t=a.createElement("link"),wt(t,"link",e),gt(t),a.head.appendChild(t)))}}function Mv(e,t){Vn.m(e,t);var l=Li;if(l&&e){var a=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+tn(a)+'"][href="'+tn(e)+'"]',u=o;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Hi(e)}if(!un.has(u)&&(e=v({rel:"modulepreload",href:e},t),un.set(u,e),l.querySelector(o)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(qs(u)))return}a=l.createElement("link"),wt(a,"link",e),gt(a),l.head.appendChild(a)}}}function jv(e,t,l){Vn.S(e,t,l);var a=Li;if(a&&e){var o=ai(a).hoistableStyles,u=Ii(e);t=t||"default";var h=o.get(u);if(!h){var y={loading:0,preload:null};if(h=a.querySelector(Bs(u)))y.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},l),(l=un.get(u))&&yu(e,l);var S=h=a.createElement("link");gt(S),wt(S,"link",e),S._p=new Promise(function(A,j){S.onload=A,S.onerror=j}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Nr(h,t,a)}h={type:"stylesheet",instance:h,count:1,state:y},o.set(u,h)}}}function zv(e,t){Vn.X(e,t);var l=Li;if(l&&e){var a=ai(l).hoistableScripts,o=Hi(e),u=a.get(o);u||(u=l.querySelector(qs(o)),u||(e=v({src:e,async:!0},t),(t=un.get(o))&&vu(e,t),u=l.createElement("script"),gt(u),wt(u,"link",e),l.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(o,u))}}function kv(e,t){Vn.M(e,t);var l=Li;if(l&&e){var a=ai(l).hoistableScripts,o=Hi(e),u=a.get(o);u||(u=l.querySelector(qs(o)),u||(e=v({src:e,async:!0,type:"module"},t),(t=un.get(o))&&vu(e,t),u=l.createElement("script"),gt(u),wt(u,"link",e),l.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(o,u))}}function A0(e,t,l,a){var o=(o=se.current)?Cr(o):null;if(!o)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=Ii(l.href),l=ai(o).hoistableStyles,a=l.get(t),a||(a={type:"style",instance:null,count:0,state:null},l.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Ii(l.href);var u=ai(o).hoistableStyles,h=u.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=o.querySelector(Bs(e)))&&!u._p&&(h.instance=u,h.state.loading=5),un.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},un.set(e,l),u||Uv(o,e,l,h.state))),t&&a===null)throw Error(r(528,""));return h}if(t&&a!==null)throw Error(r(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Hi(l),l=ai(o).hoistableScripts,a=l.get(t),a||(a={type:"script",instance:null,count:0,state:null},l.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ii(e){return'href="'+tn(e)+'"'}function Bs(e){return'link[rel="stylesheet"]['+e+"]"}function R0(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Uv(e,t,l,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),wt(t,"link",l),gt(t),e.head.appendChild(t))}function Hi(e){return'[src="'+tn(e)+'"]'}function qs(e){return"script[async]"+e}function O0(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+tn(l.href)+'"]');if(a)return t.instance=a,gt(a),a;var o=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),gt(a),wt(a,"style",o),Nr(a,l.precedence,e),t.instance=a;case"stylesheet":o=Ii(l.href);var u=e.querySelector(Bs(o));if(u)return t.state.loading|=4,t.instance=u,gt(u),u;a=R0(l),(o=un.get(o))&&yu(a,o),u=(e.ownerDocument||e).createElement("link"),gt(u);var h=u;return h._p=new Promise(function(y,S){h.onload=y,h.onerror=S}),wt(u,"link",a),t.state.loading|=4,Nr(u,l.precedence,e),t.instance=u;case"script":return u=Hi(l.src),(o=e.querySelector(qs(u)))?(t.instance=o,gt(o),o):(a=l,(o=un.get(u))&&(a=v({},l),vu(a,o)),e=e.ownerDocument||e,o=e.createElement("script"),gt(o),wt(o,"link",a),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Nr(a,l.precedence,e));return t.instance}function Nr(e,t,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=a.length?a[a.length-1]:null,u=o,h=0;h<a.length;h++){var y=a[h];if(y.dataset.precedence===t)u=y;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function yu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function vu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Tr=null;function D0(e,t,l){if(Tr===null){var a=new Map,o=Tr=new Map;o.set(l,a)}else o=Tr,a=o.get(l),a||(a=new Map,o.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),o=0;o<l.length;o++){var u=l[o];if(!(u[ls]||u[Et]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var y=a.get(h);y?y.push(u):a.set(h,[u])}}return a}function M0(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function Lv(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function j0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Iv(e,t,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var o=Ii(a.href),u=t.querySelector(Bs(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=wr.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=u,gt(u);return}u=t.ownerDocument||t,a=R0(a),(o=un.get(o))&&yu(a,o),u=u.createElement("link"),gt(u);var h=u;h._p=new Promise(function(y,S){h.onload=y,h.onerror=S}),wt(u,"link",a),l.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=wr.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var bu=0;function Hv(e,t){return e.stylesheets&&e.count===0&&Rr(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var a=setTimeout(function(){if(e.stylesheets&&Rr(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&bu===0&&(bu=62500*vv());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rr(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>bu?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(o)}}:null}function wr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ar=null;function Rr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ar=new Map,t.forEach(Bv,e),Ar=null,wr.call(e))}function Bv(e,t){if(!(t.state.loading&4)){var l=Ar.get(e);if(l)var a=l.get(null);else{l=new Map,Ar.set(e,l);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var h=o[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(l.set(h.dataset.precedence,h),a=h)}a&&l.set(null,a)}o=t.instance,h=o.getAttribute("data-precedence"),u=l.get(h)||a,u===a&&l.set(null,o),l.set(h,o),this.count++,a=wr.bind(this),o.addEventListener("load",a),o.addEventListener("error",a),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Ys={$$typeof:W,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function qv(e,t,l,a,o,u,h,y,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=po(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=po(0),this.hiddenUpdates=po(null),this.identifierPrefix=a,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function z0(e,t,l,a,o,u,h,y,S,A,j,U){return e=new qv(e,t,l,h,S,A,j,U,y),t=1,u===!0&&(t|=24),u=Kt(3,null,null,t),e.current=u,u.stateNode=e,t=Po(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:a,isDehydrated:l,cache:t},lc(u),e}function k0(e){return e?(e=gi,e):gi}function U0(e,t,l,a,o,u){o=k0(o),a.context===null?a.context=o:a.pendingContext=o,a=sl(t),a.payload={element:l},u=u===void 0?null:u,u!==null&&(a.callback=u),l=al(e,a,t),l!==null&&(qt(l,e,t),bs(l,e,t))}function L0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function xu(e,t){L0(e,t),(e=e.alternate)&&L0(e,t)}function I0(e){if(e.tag===13||e.tag===31){var t=jl(e,67108864);t!==null&&qt(t,e,67108864),xu(e,67108864)}}function H0(e){if(e.tag===13||e.tag===31){var t=Pt();t=go(t);var l=jl(e,t);l!==null&&qt(l,e,t),xu(e,t)}}var Or=!0;function Yv(e,t,l,a){var o=T.T;T.T=null;var u=L.p;try{L.p=2,Su(e,t,l,a)}finally{L.p=u,T.T=o}}function Gv(e,t,l,a){var o=T.T;T.T=null;var u=L.p;try{L.p=8,Su(e,t,l,a)}finally{L.p=u,T.T=o}}function Su(e,t,l,a){if(Or){var o=Eu(a);if(o===null)ou(e,t,a,Dr,l),q0(e,a);else if(Xv(o,e,t,l,a))a.stopPropagation();else if(q0(e,a),t&4&&-1<Vv.indexOf(e)){for(;o!==null;){var u=si(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=Al(u.pendingLanes);if(h!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;h;){var S=1<<31-Qt(h);y.entanglements[1]|=S,h&=~S}Cn(u),(Re&6)===0&&(hr=Te()+500,Us(0))}}break;case 31:case 13:y=jl(u,2),y!==null&&qt(y,u,2),pr(),xu(u,2)}if(u=Eu(a),u===null&&ou(e,t,a,Dr,l),u===o)break;o=u}o!==null&&a.stopPropagation()}else ou(e,t,a,null,l)}}function Eu(e){return e=No(e),Cu(e)}var Dr=null;function Cu(e){if(Dr=null,e=ii(e),e!==null){var t=f(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=d(t),e!==null)return e;e=null}else if(l===31){if(e=p(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Dr=e,null}function B0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case Ce:return 2;case De:return 8;case qe:case Ot:return 32;case vn:return 268435456;default:return 32}default:return 32}}var Nu=!1,_l=null,yl=null,vl=null,Gs=new Map,Vs=new Map,bl=[],Vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q0(e,t){switch(e){case"focusin":case"focusout":_l=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":vl=null;break;case"pointerover":case"pointerout":Gs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(t.pointerId)}}function Xs(e,t,l,a,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:l,eventSystemFlags:a,nativeEvent:u,targetContainers:[o]},t!==null&&(t=si(t),t!==null&&I0(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Xv(e,t,l,a,o){switch(t){case"focusin":return _l=Xs(_l,e,t,l,a,o),!0;case"dragenter":return yl=Xs(yl,e,t,l,a,o),!0;case"mouseover":return vl=Xs(vl,e,t,l,a,o),!0;case"pointerover":var u=o.pointerId;return Gs.set(u,Xs(Gs.get(u)||null,e,t,l,a,o)),!0;case"gotpointercapture":return u=o.pointerId,Vs.set(u,Xs(Vs.get(u)||null,e,t,l,a,o)),!0}return!1}function Y0(e){var t=ii(e.target);if(t!==null){var l=f(t);if(l!==null){if(t=l.tag,t===13){if(t=d(l),t!==null){e.blockedOn=t,nd(e.priority,function(){H0(l)});return}}else if(t===31){if(t=p(l),t!==null){e.blockedOn=t,nd(e.priority,function(){H0(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Eu(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);Co=a,l.target.dispatchEvent(a),Co=null}else return t=si(l),t!==null&&I0(t),e.blockedOn=l,!1;t.shift()}return!0}function G0(e,t,l){Mr(e)&&l.delete(t)}function Qv(){Nu=!1,_l!==null&&Mr(_l)&&(_l=null),yl!==null&&Mr(yl)&&(yl=null),vl!==null&&Mr(vl)&&(vl=null),Gs.forEach(G0),Vs.forEach(G0)}function jr(e,t){e.blockedOn===t&&(e.blockedOn=null,Nu||(Nu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Qv)))}var zr=null;function V0(e){zr!==e&&(zr=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zr===e&&(zr=null);for(var t=0;t<e.length;t+=3){var l=e[t],a=e[t+1],o=e[t+2];if(typeof a!="function"){if(Cu(a||l)===null)continue;break}var u=si(l);u!==null&&(e.splice(t,3),t-=3,Ec(u,{pending:!0,data:o,method:l.method,action:a},a,o))}}))}function Bi(e){function t(S){return jr(S,e)}_l!==null&&jr(_l,e),yl!==null&&jr(yl,e),vl!==null&&jr(vl,e),Gs.forEach(t),Vs.forEach(t);for(var l=0;l<bl.length;l++){var a=bl[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<bl.length&&(l=bl[0],l.blockedOn===null);)Y0(l),l.blockedOn===null&&bl.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var o=l[a],u=l[a+1],h=o[kt]||null;if(typeof u=="function")h||V0(l);else if(h){var y=null;if(u&&u.hasAttribute("formAction")){if(o=u,h=u[kt]||null)y=h.formAction;else if(Cu(o)!==null)continue}else y=h.action;typeof y=="function"?l[a+1]=y:(l.splice(a,3),a-=3),V0(l)}}}function X0(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Tu(e){this._internalRoot=e}kr.prototype.render=Tu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var l=t.current,a=Pt();U0(l,a,e,t,null,null)},kr.prototype.unmount=Tu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;U0(e.current,2,null,e,null,null),pr(),t[li]=null}};function kr(e){this._internalRoot=e}kr.prototype.unstable_scheduleHydration=function(e){if(e){var t=td();e={blockedOn:null,target:e,priority:t};for(var l=0;l<bl.length&&t!==0&&t<bl[l].priority;l++);bl.splice(l,0,e),l===0&&Y0(e)}};var Q0=n.version;if(Q0!=="19.2.3")throw Error(r(527,Q0,"19.2.3"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=g(t),e=e!==null?C(e):null,e=e===null?null:e.stateNode,e};var Zv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ur=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ur.isDisabled&&Ur.supportsFiber)try{bn=Ur.inject(Zv),ut=Ur}catch{}}return Zs.createRoot=function(e,t){if(!c(e))throw Error(r(299));var l=!1,a="",o=Ph,u=em,h=tm;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=z0(e,1,!1,null,null,l,a,null,o,u,h,X0),e[li]=t.current,ru(e),new Tu(t)},Zs.hydrateRoot=function(e,t,l){if(!c(e))throw Error(r(299));var a=!1,o="",u=Ph,h=em,y=tm,S=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(o=l.identifierPrefix),l.onUncaughtError!==void 0&&(u=l.onUncaughtError),l.onCaughtError!==void 0&&(h=l.onCaughtError),l.onRecoverableError!==void 0&&(y=l.onRecoverableError),l.formState!==void 0&&(S=l.formState)),t=z0(e,1,!0,t,l??null,a,o,S,u,h,y,X0),t.context=k0(null),l=t.current,a=Pt(),a=go(a),o=sl(a),o.callback=null,al(l,o,a),l=a,t.current.lanes=l,ns(t,l),Cn(t),e[li]=t.current,ru(e),new kr(t)},Zs.version="19.2.3",Zs}var np;function ib(){if(np)return Ru.exports;np=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Ru.exports=lb(),Ru.exports}var sb=ib();const ab=ng(sb),rb=({children:s,activeTab:n,setActiveTab:i,isAdmin:r,onToggleAdmin:c,onDownloadDB:f,onUploadDB:d,onOpenSync:p,isSyncActive:_})=>{const g=F.useRef(null),C=[{id:"characters",label:"",icon:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})},{id:"connections",label:"",icon:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})},{id:"worlds",label:"",icon:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})},{id:"notes",label:"",icon:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})},{id:"admin",label:"",adminOnly:!0,icon:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})}],v=b=>{var X;const z=(X=b.target.files)==null?void 0:X[0];if(!z)return;const I=new FileReader;I.onload=re=>{var ge;const P=(ge=re.target)==null?void 0:ge.result;typeof P=="string"&&d(P)},I.readAsText(z),g.current&&(g.current.value="")};return m.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#050505] text-stone-300",children:[m.jsxs("div",{className:"md:hidden flex items-center justify-between px-6 py-5 border-b border-stone-900 bg-[#050505]/95 backdrop-blur sticky top-0 z-40",children:[m.jsx("h1",{className:"text-lg font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""}),m.jsx("button",{onClick:c,className:`p-2 rounded-lg transition-all border ${r?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500":"bg-stone-900/50 border-stone-800 text-stone-500"}`,children:m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),m.jsxs("aside",{className:"hidden md:flex w-64 border-r border-stone-900 flex-col fixed h-screen bg-[#050505] z-50",children:[m.jsx("div",{className:"p-8",children:m.jsx("h1",{className:"text-xl font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""})}),m.jsx("nav",{className:"flex-grow px-4 space-y-2",children:C.filter(b=>!b.adminOnly||r).map(b=>m.jsxs("button",{onClick:()=>i(b.id),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-3 ${n===b.id?"bg-stone-900 text-stone-100 border-l-2 border-emerald-500 rounded-l-none":"hover:bg-stone-900/50 text-stone-500 hover:text-stone-300"} ${b.adminOnly?"text-emerald-500/70":""}`,children:[m.jsx("svg",{className:"w-5 h-5 opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.icon}),b.label]},b.id))}),m.jsxs("div",{className:"p-6 space-y-4",children:[m.jsxs("button",{onClick:p,className:`w-full py-2 px-3 rounded-lg border text-[9px] uppercase tracking-widest font-bold flex items-center justify-center gap-2 transition-all ${_?"bg-emerald-900/10 border-emerald-500/30 text-emerald-500 hover:bg-emerald-900/20":"bg-stone-900/30 border-stone-800 text-stone-600 hover:bg-stone-900/60 hover:text-stone-400"}`,children:[m.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${_?"bg-emerald-500 animate-pulse":"bg-stone-600"}`}),_?"":""]}),m.jsx("button",{onClick:c,className:`w-full py-3 text-[10px] uppercase tracking-widest font-bold rounded-md transition-all border ${r?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500 shadow-lg shadow-emerald-900/10":"bg-stone-900/50 hover:bg-stone-900 border-stone-800 text-stone-400"}`,children:r?" ()":"  "})]})]}),m.jsx("nav",{className:"md:hidden fixed bottom-0 w-full bg-[#050505]/95 backdrop-blur-xl border-t border-stone-900 z-50 px-2 pb-safe-area",children:m.jsxs("div",{className:"flex justify-around items-center",children:[C.filter(b=>!b.adminOnly||r).map(b=>m.jsxs("button",{onClick:()=>i(b.id),className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${n===b.id?"text-emerald-500":"text-stone-600"}`,children:[m.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.icon}),m.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:b.label})]},b.id)),m.jsxs("button",{onClick:p,className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${_?"text-emerald-500":"text-stone-700"}`,children:[m.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),m.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:""})]})]})}),m.jsxs("main",{className:"flex-grow md:ml-64 min-h-screen relative pb-24 md:pb-0",children:[m.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 md:px-12 md:py-12",children:s}),m.jsxs("div",{className:"fixed bottom-24 md:bottom-8 right-4 md:right-8 flex gap-3 z-40 scale-90 md:scale-100 origin-bottom-right",children:[m.jsx("input",{type:"file",ref:g,onChange:v,accept:".json",className:"hidden"}),m.jsx("button",{onClick:()=>{var b;return(b=g.current)==null?void 0:b.click()},className:"px-4 py-2 md:px-5 md:py-2.5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-emerald-500 transition-all backdrop-blur-sm shadow-lg shadow-emerald-900/10",children:" "}),m.jsx("button",{onClick:f,className:"px-4 py-2 md:px-5 md:py-2.5 bg-stone-900/80 hover:bg-stone-800 border border-stone-700 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-stone-300 transition-all backdrop-blur-sm",children:" "})]})]})]})},ob=({character:s,onClick:n})=>{const i={objectFit:"cover",objectPosition:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transformOrigin:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transform:`scale(${s.miniImageScale??1})`},r=s.name.length,c=r>20?"text-sm":r>15?"text-base":"text-xl";return m.jsxs("div",{onClick:()=>n(s.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl p-6 flex flex-col items-center transition-all duration-300 hover:bg-stone-900/40 hover:border-emerald-900/30 group cursor-pointer shadow-lg h-full min-h-[320px] active:scale-95",children:[m.jsxs("div",{className:"relative mt-2 shrink-0",children:[m.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-2 border-stone-800 group-hover:border-emerald-600/50 transition-all duration-500 bg-black shadow-2xl",children:m.jsx("img",{src:s.imageUrl,alt:s.name,style:i,className:"w-full h-full opacity-80 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"})}),m.jsx("div",{className:"absolute inset-0 bg-emerald-500/10 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-700 -z-10"})]}),m.jsx("div",{className:"mt-6 h-14 flex items-center justify-center w-full px-2 shrink-0",children:m.jsx("h3",{className:`font-serif font-medium text-stone-100 group-hover:text-emerald-100 transition-colors text-center leading-tight line-clamp-2 ${c}`,children:s.name})}),m.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5 justify-center content-start min-h-[28px] w-full px-1",children:s.tags&&s.tags.length>0?m.jsxs(m.Fragment,{children:[s.tags.slice(0,3).map(f=>m.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/5 border border-emerald-500/10 text-emerald-500/60 text-[8px] uppercase tracking-wider font-black rounded-md whitespace-nowrap",children:f},f)),s.tags.length>3&&m.jsxs("span",{className:"text-[8px] text-stone-700 font-black self-center ml-0.5",children:["+",s.tags.length-3]})]}):m.jsx("div",{className:"h-4"})}),m.jsx("div",{className:"mt-auto pt-6 border-t border-stone-900/50 w-full flex justify-center shrink-0",children:m.jsx("span",{className:"text-[8px] uppercase tracking-[0.3em] font-black text-stone-700 group-hover:text-emerald-900 transition-colors",children:" "})})]})},lp=({imageUrl:s,scale:n,x:i,y:r,isCircular:c=!1,onUpdate:f})=>{const d=F.useRef(null),[p,_]=F.useState(!1),[g,C]=F.useState({x:0,y:0}),v=b=>{_(!0),C({x:b.clientX,y:b.clientY})};return F.useEffect(()=>{const b=I=>{if(!p||!d.current)return;const X=I.clientX-g.x,re=I.clientY-g.y,P=.2,ge=i-X*P/n,W=r-re*P/n;f({x:ge,y:W}),C({x:I.clientX,y:I.clientY})},z=()=>_(!1);return p&&(window.addEventListener("mousemove",b),window.addEventListener("mouseup",z)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",z)}},[p,g,i,r,n,f]),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{ref:d,className:`relative overflow-hidden bg-black border border-stone-800 cursor-move group select-none shadow-2xl transition-all duration-500 hover:border-emerald-500/40 ${c?"w-48 h-48 rounded-full mx-auto":"aspect-[4/5] rounded-3xl w-full"}`,onMouseDown:v,children:[m.jsx("img",{src:s,alt:"",draggable:!1,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${i}% ${r}%`,transformOrigin:`${i}% ${r}%`,transform:`scale(${n})`},className:"pointer-events-none transition-opacity duration-300 opacity-90 group-hover:opacity-100"}),m.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/5 pointer-events-none"}),m.jsx("div",{className:"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity flex items-center justify-center",children:m.jsx("div",{className:"bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-emerald-500/20",children:m.jsx("span",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-[0.25em]",children:" "})})})]}),m.jsxs("div",{className:"bg-stone-900/60 p-4 rounded-2xl border border-stone-800/50 space-y-3 shadow-inner",children:[m.jsxs("div",{className:"flex justify-between items-center px-1",children:[m.jsx("span",{className:"text-[10px] font-black text-stone-500 uppercase tracking-widest",children:""}),m.jsxs("span",{className:"text-[10px] font-mono text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded",children:[n.toFixed(2),"x"]})]}),m.jsx("input",{type:"range",min:"1",max:"5",step:"0.01",value:n,onChange:b=>f({scale:parseFloat(b.target.value)}),className:"w-full h-1.5 bg-stone-800 rounded-full appearance-none cursor-pointer accent-emerald-500"}),m.jsx("p",{className:"text-[8px] text-stone-700 text-center uppercase tracking-tighter",children:"      "})]})]})},hf=(s,n=800,i=.7)=>new Promise((r,c)=>{const f=new FileReader;f.readAsDataURL(s),f.onload=d=>{var _;const p=new Image;p.src=(_=d.target)==null?void 0:_.result,p.onload=()=>{const g=document.createElement("canvas");let C=p.width,v=p.height;C>n&&(v=v*n/C,C=n),g.width=C,g.height=v;const b=g.getContext("2d");if(b){b.drawImage(p,0,0,C,v);const z=g.toDataURL("image/jpeg",i);r(z)}else c(new Error("Canvas context not available"))},p.onerror=g=>c(g)},f.onerror=d=>c(d)}),cb=({character:s,isAdmin:n,allCharacters:i,availableTags:r,onBack:c,onSave:f,onSelectCharacter:d})=>{var ht,St;const[p,_]=F.useState(!1),[g,C]=F.useState(!1),[v,b]=F.useState(!1),[z,I]=F.useState(""),[X,re]=F.useState([]),P=(H,T)=>{f({...s,[H]:T})},ge=H=>{f({...s,imageScale:H.scale??s.imageScale,imageX:H.x??s.imageX,imageY:H.y??s.imageY})},W=H=>{f({...s,miniImageScale:H.scale??s.miniImageScale,miniImageX:H.x??s.miniImageX,miniImageY:H.y??s.miniImageY})},le=async H=>{var L;const T=(L=H.target.files)==null?void 0:L[0];if(T){b(!0);try{const G=await hf(T);P("imageUrl",G)}catch(G){console.error("Error processing image",G),alert("   ")}finally{b(!1)}}},et=H=>{const T=s.tags||[],L=T.includes(H)?T.filter(G=>G!==H):[...T,H];P("tags",L)},Me=H=>{re(T=>T.includes(H)?T.filter(L=>L!==H):[...T,H])},ue=()=>{C(!g),I(""),re([])},lt=H=>{const T={id:H.id,name:H.name,role:"",color:"#10b981"},L=s.connections||[];L.some(G=>G.id===H.id)||P("connections",[...L,T]),C(!1),I(""),re([])},xt=H=>{const T=s.connections||[];P("connections",T.filter(L=>L.id!==H))},Rt=(H,T)=>{const L=s.connections||[];P("connections",L.map(G=>G.id===H?{...G,role:T}:G))},ct=(H,T)=>{const L=s.connections||[];P("connections",L.map(G=>G.id===H?{...G,color:T}:G))},Fe=i.filter(H=>{var T;if(H.id===s.id||(T=s.connections)!=null&&T.some(L=>L.id===H.id)||z&&!H.name.toLowerCase().includes(z.toLowerCase()))return!1;if(X.length>0){const L=H.tags||[];if(!X.every(Ee=>L.includes(Ee)))return!1}return!0});return m.jsxs("div",{className:"animate-in fade-in duration-500 space-y-6 md:space-y-8 pb-20",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("button",{onClick:c,className:"flex items-center text-stone-500 hover:text-emerald-500 transition-colors group text-sm md:text-base",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),""]}),n&&m.jsxs("div",{className:"flex items-center gap-2 text-[8px] md:text-[10px] uppercase tracking-widest font-bold text-emerald-500/50 bg-emerald-500/5 px-3 py-1 rounded-full border border-emerald-500/10",children:[m.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," "]})]}),m.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-12",children:[m.jsxs("div",{className:"w-full lg:w-1/3 space-y-8",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 px-1",children:" "}),n?m.jsxs("div",{className:"space-y-4",children:[m.jsx(lp,{imageUrl:s.imageUrl,scale:s.imageScale??1,x:s.imageX??50,y:s.imageY??50,onUpdate:ge}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{className:"w-full bg-[#050505] border border-stone-800 rounded-lg px-3 py-2 text-[10px] text-stone-400 outline-none focus:border-emerald-500",placeholder:s.imageUrl.startsWith("data:")?"   ":"URL ...",value:s.imageUrl.startsWith("data:")?"":s.imageUrl,onChange:H=>P("imageUrl",H.target.value)}),m.jsxs("label",{className:`cursor-pointer bg-stone-900 border border-stone-800 hover:bg-stone-800 rounded-lg px-3 flex items-center justify-center transition-colors ${v?"opacity-50":""}`,children:[m.jsx("input",{type:"file",onChange:le,accept:"image/*",className:"hidden",disabled:v}),m.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})]})]})]}):m.jsx("div",{className:"aspect-[4/5] rounded-2xl overflow-hidden border border-stone-800 shadow-2xl bg-black",children:m.jsx("img",{src:s.imageUrl,alt:s.name,style:{objectFit:"cover",objectPosition:`${s.imageX??50}% ${s.imageY??50}%`,transformOrigin:`${s.imageX??50}% ${s.imageY??50}%`,transform:`scale(${s.imageScale??1})`},className:"w-full h-full"})})]}),n&&m.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-900/50",children:[m.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500/60 px-1",children:"- ()"}),m.jsx(lp,{imageUrl:s.imageUrl,scale:s.miniImageScale??1,x:s.miniImageX??50,y:s.miniImageY??50,isCircular:!0,onUpdate:W})]}),m.jsxs("div",{className:"space-y-5 p-5 md:p-7 bg-[#0f0f0f]/40 border border-stone-900 rounded-[2rem] md:rounded-[2.5rem] shadow-inner",children:[m.jsx("h4",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-emerald-500/60 px-1 text-center",children:""}),m.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[40px]",children:n?r.length===0?m.jsx("p",{className:"text-[9px] text-stone-700 italic text-center w-full py-4 uppercase tracking-widest",children:"  "}):r.sort().map(H=>{var L;const T=(L=s.tags)==null?void 0:L.includes(H);return m.jsx("button",{onClick:()=>et(H),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border ${T?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":"bg-stone-950 border-stone-800/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:H},H)}):s.tags&&s.tags.length>0?s.tags.map(H=>m.jsx("span",{className:"px-3 py-1.5 md:px-4 md:py-2 bg-emerald-500/5 border border-emerald-500/10 text-emerald-500/70 text-[9px] md:text-[10px] uppercase tracking-widest font-black rounded-xl",children:H},H)):m.jsx("p",{className:"text-[10px] text-stone-800 italic text-center w-full py-2",children:" "})})]})]}),m.jsxs("div",{className:"w-full lg:w-2/3 space-y-6 md:space-y-8",children:[m.jsxs("div",{children:[n?m.jsx("div",{className:"space-y-4 mb-4",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[m.jsxs("div",{className:"flex-grow",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),m.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-3xl md:text-4xl font-serif font-bold text-stone-100 outline-none focus:border-emerald-800 transition-colors py-1",value:s.name,onChange:H=>P("name",H.target.value)})]}),m.jsxs("div",{className:"w-full md:w-32",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),m.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-xl font-light text-stone-500 outline-none focus:border-emerald-800 transition-colors py-2",value:s.age,onChange:H=>P("age",H.target.value)})]})]})}):m.jsx("div",{className:"space-y-4 mb-6",children:m.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline gap-2 md:gap-4",children:[m.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-bold text-stone-100 leading-tight",children:s.name}),m.jsx("span",{className:"text-emerald-600/60 text-lg md:text-xl font-light",children:s.age})]})}),m.jsx("div",{className:"h-px bg-stone-900 w-full mb-6 md:mb-8"}),m.jsxs("section",{className:"space-y-4",children:[m.jsx("h4",{className:"text-emerald-500 text-sm font-semibold uppercase tracking-wider",children:""}),n?m.jsx("textarea",{className:"w-full bg-stone-900/20 border border-stone-800 rounded-xl p-4 text-stone-200 text-base md:text-lg leading-relaxed font-light outline-none focus:border-emerald-900 transition-colors resize-none",rows:12,value:s.additionalInfo,onChange:H=>P("additionalInfo",H.target.value)}):m.jsx("p",{className:"text-stone-300 text-base md:text-lg leading-relaxed font-light whitespace-pre-wrap",children:s.additionalInfo})]})]}),m.jsxs("div",{className:"space-y-4 pt-4",children:[m.jsxs("button",{onClick:()=>_(!p),className:"w-full flex items-center justify-between bg-[#0f0f0f]/30 border border-stone-900 p-4 md:p-5 rounded-xl transition-all group hover:border-emerald-900/30 shadow-md",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-emerald-500 font-bold tracking-widest text-xs uppercase",children:""}),m.jsxs("span",{className:"text-stone-600 text-sm",children:["(",((ht=s.connections)==null?void 0:ht.length)||0,")"]})]}),m.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform duration-300 ${p?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]}),p&&m.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-2 duration-300",children:[n&&m.jsxs("div",{className:"space-y-2 relative",children:[m.jsx("button",{onClick:ue,className:`w-full py-2.5 hover:bg-emerald-600 text-stone-100 text-[11px] font-bold uppercase tracking-wider rounded-lg transition-all shadow-lg shadow-emerald-900/20 flex items-center justify-center gap-2 ${g?"bg-emerald-600 ring-2 ring-emerald-500/50":"bg-emerald-700/80"}`,children:g?" ":" "}),g&&m.jsxs("div",{className:"bg-stone-950 border border-stone-900 rounded-xl overflow-hidden shadow-2xl animate-in fade-in slide-in-from-top-2 duration-200",children:[m.jsxs("div",{className:"p-3 bg-stone-900/50 border-b border-stone-900 space-y-3 sticky top-0 z-10 backdrop-blur-md",children:[m.jsx("input",{type:"text",placeholder:"  ...",value:z,onChange:H=>I(H.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors"}),r.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto custom-scrollbar",children:r.sort().map(H=>{const T=X.includes(H);return m.jsx("button",{onClick:()=>Me(H),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${T?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:H},H)})})]}),m.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-64 overflow-y-auto p-2",children:Fe.length>0?Fe.map(H=>m.jsxs("button",{onClick:()=>lt(H),className:"flex items-center gap-3 p-2 hover:bg-stone-900 rounded-lg text-left transition-colors group",children:[m.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0 group-hover:border-emerald-500/50 transition-colors",children:m.jsx("img",{src:H.imageUrl,style:{objectFit:"cover",objectPosition:`${H.miniImageX??50}% ${H.miniImageY??50}%`,transformOrigin:`${H.miniImageX??50}% ${H.miniImageY??50}%`,transform:`scale(${H.miniImageScale??1})`},className:"w-full h-full",alt:""})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("span",{className:"text-stone-300 text-xs font-bold block truncate",children:H.name}),H.tags&&H.tags.length>0&&m.jsxs("span",{className:"text-[8px] text-stone-600 truncate block mt-0.5",children:[H.tags.slice(0,3).join(", "),H.tags.length>3?"...":""]})]})]},H.id)):m.jsx("div",{className:"text-center py-4 text-[10px] text-stone-600 italic",children:"  "})})]})]}),m.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-xl overflow-hidden divide-y divide-stone-900/50",children:(St=s.connections)==null?void 0:St.map(H=>{const T=i.find(G=>G.id===H.id),L=H.color||"#10b981";return m.jsxs("div",{className:"p-4 flex items-center gap-4 group hover:bg-stone-900/20 transition-colors",children:[m.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full overflow-hidden border border-stone-800 shrink-0 shadow-inner bg-black",children:m.jsx("img",{src:(T==null?void 0:T.imageUrl)||"https://via.placeholder.com/48",style:{objectFit:"cover",objectPosition:`${(T==null?void 0:T.miniImageX)??50}% ${(T==null?void 0:T.miniImageY)??50}%`,transformOrigin:`${(T==null?void 0:T.miniImageX)??50}% ${(T==null?void 0:T.miniImageY)??50}%`,transform:`scale(${(T==null?void 0:T.miniImageScale)??1})`},className:"w-full h-full",alt:""})}),m.jsxs("div",{className:"flex-grow min-w-0",children:[m.jsx("p",{className:"text-stone-200 font-bold text-sm tracking-wide truncate",children:H.name}),n?m.jsx("input",{className:"w-full bg-stone-950/50 border border-transparent hover:border-stone-800 focus:border-emerald-900 rounded px-2 py-0.5 mt-1 text-xs text-stone-500 outline-none transition-all",value:H.role,onChange:G=>Rt(H.id,G.target.value)}):m.jsx("p",{className:"text-stone-600 text-xs mt-1 font-medium truncate",children:H.role})]}),m.jsxs("div",{className:"flex items-center gap-3 md:gap-4 shrink-0",children:[m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>{var G;return n&&((G=document.getElementById(`picker-${H.id}`))==null?void 0:G.click())},className:`w-4 h-4 md:w-5 md:h-5 rounded-[4px] shadow-sm transition-transform ${n?"hover:scale-110 cursor-pointer active:scale-95":"cursor-default"}`,style:{backgroundColor:L}}),n&&m.jsx("input",{id:`picker-${H.id}`,type:"color",value:L,onChange:G=>ct(H.id,G.target.value),className:"sr-only"})]}),m.jsx("button",{onClick:()=>d(H.id),className:"text-stone-700 hover:text-emerald-500 transition-colors text-[9px] md:text-[10px] uppercase font-bold tracking-[0.1em]",children:""}),n&&m.jsx("button",{onClick:()=>xt(H.id),className:"text-stone-800 hover:text-red-500 transition-colors p-1",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},H.id)})})]})]})]})]})]})},ub=({initialData:s,availableTags:n,onSave:i,onClose:r})=>{const[c,f]=F.useState({name:"",age:"",imageUrl:"",additionalInfo:"",imageScale:1,imageX:50,imageY:50,tags:[]}),[d,p]=F.useState(!1);F.useEffect(()=>{s&&f({name:s.name,age:s.age.toString(),imageUrl:s.imageUrl,additionalInfo:s.additionalInfo,imageScale:s.imageScale??1,imageX:s.imageX??50,imageY:s.imageY??50,tags:s.tags||[]})},[s]);const _=v=>{f(b=>({...b,tags:b.tags.includes(v)?b.tags.filter(z=>z!==v):[...b.tags,v]}))},g=async v=>{var z;const b=(z=v.target.files)==null?void 0:z[0];if(b){p(!0);try{const I=await hf(b);f(X=>({...X,imageUrl:I}))}catch(I){console.error("Error processing image",I),alert("   .")}finally{p(!1)}}},C=v=>{v.preventDefault();const b={id:(s==null?void 0:s.id)||Date.now().toString(),name:c.name,age:c.age,imageUrl:c.imageUrl||`https://picsum.photos/seed/${Date.now()}/400/500`,additionalInfo:c.additionalInfo,tags:c.tags,connections:(s==null?void 0:s.connections)||[],imageScale:c.imageScale,imageX:c.imageX,imageY:c.imageY};i(b)};return m.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/95 backdrop-blur-2xl animate-in fade-in duration-300",children:m.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-2xl rounded-[2rem] md:rounded-[3rem] overflow-hidden shadow-[0_0_120px_rgba(0,0,0,1)] border-white/5 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"p-6 md:p-10 border-b border-stone-900 flex justify-between items-center bg-gradient-to-b from-stone-900/30 to-transparent shrink-0",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-stone-100 italic",children:s?" ":" "}),m.jsx("p",{className:"text-stone-600 text-[10px] uppercase tracking-widest mt-1",children:"  "})]}),m.jsx("button",{onClick:r,className:"text-stone-700 hover:text-white transition-all p-2 md:p-3 hover:bg-white/5 rounded-full",children:m.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsxs("form",{onSubmit:C,className:"p-6 md:p-10 space-y-8 md:space-y-10 overflow-y-auto custom-scrollbar flex-grow",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:"  "}),m.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all font-serif italic text-lg shadow-inner",value:c.name,onChange:v=>f({...c,name:v.target.value})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),m.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all shadow-inner",value:c.age,onChange:v=>f({...c,age:v.target.value})})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-end px-1",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600",children:" ( )"}),m.jsxs("span",{className:"text-[9px] text-stone-800 font-black uppercase tracking-widest",children:[": ",c.tags.length]})]}),m.jsx("div",{className:"flex flex-wrap gap-2 p-6 bg-black/30 border border-stone-900 rounded-[2rem] min-h-[100px] shadow-inner",children:n.length===0?m.jsx("p",{className:"text-stone-800 italic text-xs w-full text-center py-4",children:"     -"}):n.sort().map(v=>{const b=c.tags.includes(v);return m.jsx("button",{type:"button",onClick:()=>_(v),className:`px-4 py-2 rounded-xl text-[10px] uppercase tracking-wider font-black transition-all border ${b?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":"bg-stone-900/20 border-stone-800/40 text-stone-600 hover:border-stone-700 hover:text-stone-400"}`,children:v},v)})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" (  )"}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[m.jsx("input",{className:"flex-grow bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-3 text-xs text-stone-500 outline-none focus:border-emerald-500/30 transition-all",placeholder:"    ...",value:c.imageUrl.startsWith("data:")?"":c.imageUrl,onChange:v=>f({...c,imageUrl:v.target.value})}),m.jsxs("label",{className:`cursor-pointer bg-stone-900/50 hover:bg-stone-800 px-5 py-3 rounded-2xl transition-all flex items-center justify-center border border-stone-800 gap-2 ${d?"opacity-50 cursor-wait":""}`,children:[m.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden",disabled:d}),m.jsx("svg",{className:"w-5 h-5 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.imageUrl.startsWith("data:")&&m.jsx("span",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-wider",children:""})]})]}),c.imageUrl.startsWith("data:")&&m.jsx("p",{className:"text-[9px] text-emerald-500/70 px-2",children:"    ."})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" "}),m.jsx("textarea",{required:!0,rows:8,className:"w-full bg-stone-900/30 border border-stone-800 rounded-[2rem] px-8 py-6 text-stone-300 text-base leading-relaxed outline-none focus:border-emerald-900/30 transition-all resize-none shadow-inner custom-scrollbar",value:c.additionalInfo,onChange:v=>f({...c,additionalInfo:v.target.value})})]})]}),m.jsxs("div",{className:"p-6 md:p-10 border-t border-stone-900 bg-stone-900/10 flex gap-4 md:gap-6 shrink-0",children:[m.jsx("button",{type:"button",onClick:r,className:"flex-1 py-4 md:py-5 text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 hover:text-stone-300 transition-all",children:""}),m.jsx("button",{onClick:C,disabled:d,className:"flex-[2] py-4 md:py-5 bg-white hover:bg-emerald-50 text-black rounded-2xl text-[10px] uppercase tracking-[0.3em] font-black transition-all shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:d?"...":""})]})]})})},fb=({characters:s,availableTags:n,onDelete:i,onEdit:r,onAdd:c,onUpdateTags:f})=>{const[d,p]=F.useState(""),_=v=>{v.preventDefault();const b=d.trim().toLowerCase();b&&!n.includes(b)&&(f([...n,b]),p(""))},g=v=>{f(n.filter(b=>b!==v))},C=()=>{window.confirm(" ,       ?")&&f([])};return m.jsxs("div",{className:"space-y-16 animate-in fade-in duration-700 pb-32",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""}),m.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-[10px]",children:"   "})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:" "}),m.jsx("button",{onClick:c,className:"bg-white hover:bg-emerald-50 text-black px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-black transition-all",children:""})]}),m.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl overflow-hidden shadow-xl",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-stone-900 bg-stone-900/20",children:[m.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),m.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),m.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600 text-right",children:""})]})}),m.jsx("tbody",{className:"divide-y divide-stone-900/50",children:s.map(v=>{var b,z;return m.jsxs("tr",{className:"hover:bg-stone-900/10 transition-colors",children:[m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:m.jsx("img",{src:v.imageUrl,style:{objectFit:"cover",objectPosition:`${v.miniImageX??50}% ${v.miniImageY??50}%`,transformOrigin:`${v.miniImageX??50}% ${v.miniImageY??50}%`,transform:`scale(${v.miniImageScale??1})`},className:"w-full h-full",alt:""})}),m.jsx("span",{className:"font-bold text-stone-200 text-sm tracking-wide",children:v.name})]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex flex-wrap gap-1",children:[(b=v.tags)==null?void 0:b.slice(0,2).map(I=>m.jsx("span",{className:"text-[8px] uppercase bg-stone-900 px-1.5 py-0.5 rounded text-stone-500",children:I},I)),(((z=v.tags)==null?void 0:z.length)||0)>2&&m.jsxs("span",{className:"text-[8px] text-stone-700",children:["+",v.tags.length-2]})]})}),m.jsxs("td",{className:"px-6 py-4 text-right space-x-3",children:[m.jsx("button",{onClick:()=>r(v),className:"text-emerald-500/70 hover:text-emerald-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""}),m.jsx("button",{onClick:()=>i(v.id),className:"text-stone-800 hover:text-red-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""})]})]},v.id)})})]})})})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:""}),m.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-500 px-2 py-0.5 rounded-full font-black",children:n.length})]}),n.length>0&&m.jsx("button",{onClick:C,className:"text-[8px] uppercase tracking-widest font-black text-red-900/50 hover:text-red-500 transition-colors",children:" "})]}),m.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl p-8 space-y-8 shadow-xl",children:[m.jsxs("form",{onSubmit:_,className:"space-y-4",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-[0.2em] font-black text-stone-600",children:" "}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:d,onChange:v=>p(v.target.value),placeholder:"",className:"flex-grow bg-black/50 border border-stone-800 rounded-xl px-4 py-3 text-sm text-stone-200 outline-none focus:border-emerald-500/50 transition-all"}),m.jsx("button",{className:"bg-stone-800 hover:bg-stone-700 text-white p-3 rounded-xl transition-all",children:m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:2.5})})})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("label",{className:"text-[10px] uppercase tracking-[0.2em] font-black text-stone-600",children:" "}),m.jsx("div",{className:"flex flex-wrap gap-2 max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:n.length===0?m.jsx("p",{className:"text-stone-800 italic text-[10px] w-full text-center py-8",children:" .    ."}):n.sort().map(v=>m.jsxs("div",{className:"group relative",children:[m.jsx("span",{className:"inline-block bg-stone-900/50 border border-stone-800/50 text-stone-500 px-3 py-1.5 rounded-xl text-[10px] uppercase tracking-wider font-bold transition-all group-hover:border-red-900/30 group-hover:text-stone-400 pr-8",children:v}),m.jsx("button",{onClick:()=>g(v),className:"absolute right-2 top-1/2 -translate-y-1/2 text-stone-700 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",children:m.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:m.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]},v))})]})]})]})]})]})},db="modulepreload",hb=function(s){return"/"+s},ip={},sp=function(n,i,r){let c=Promise.resolve();if(i&&i.length>0){let d=function(g){return Promise.all(g.map(C=>Promise.resolve(C).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),_=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=d(i.map(g=>{if(g=hb(g),g in ip)return;ip[g]=!0;const C=g.endsWith(".css"),v=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const b=document.createElement("link");if(b.rel=C?"stylesheet":db,C||(b.as="script"),b.crossOrigin="",b.href=g,_&&b.setAttribute("nonce",_),document.head.appendChild(b),C)return new Promise((z,I)=>{b.addEventListener("load",z),b.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${g}`)))})}))}function f(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return c.then(d=>{for(const p of d||[])p.status==="rejected"&&f(p.reason);return n().catch(f)})},mb=({characters:s,availableTags:n,filterStates:i,onToggleTag:r,onClearFilters:c,onSelectCharacter:f})=>{var ti;const[d,p]=F.useState("graph"),[_,g]=F.useState(""),[C,v]=F.useState(!1),[b,z]=F.useState(""),[I,X]=F.useState([]),re=F.useRef(null),[P,ge]=F.useState(!1),[W,le]=F.useState(null),[et,Me]=F.useState(null),[ue,lt]=F.useState(0),[xt,Rt]=F.useState(!0),[ct,Fe]=F.useState(!1),ht=F.useRef(null),St=F.useRef(null),H=F.useRef(null),T=F.useRef(null),L=F.useRef(new Map),[G,Ee]=F.useState({x:0,y:0,k:1}),B=Object.keys(i).length;F.useEffect(()=>{if(d==="graph"){Fe(!0);const O=setTimeout(()=>Fe(!1),2200);return()=>clearTimeout(O)}},[W,P,B,d]),F.useEffect(()=>{const O=K=>{re.current&&!re.current.contains(K.target)&&v(!1)};return C&&document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[C]);const{nodes:x,links:M,uniqueColors:q}=F.useMemo(()=>{if(d!=="graph")return{nodes:[],links:[],uniqueColors:[]};const O=s.filter(te=>Object.entries(i).every(([Ce,De])=>{var qe,Ot;return De==="include"?(qe=te.tags)==null?void 0:qe.includes(Ce):De==="exclude"?!((Ot=te.tags)!=null&&Ot.includes(Ce)):!0})),K=new Set(O.map(te=>te.id)),ee=new Set;W&&(ee.add(W),O.forEach(te=>{var Ce,De;te.id===W&&((Ce=te.connections)==null||Ce.forEach(qe=>{K.has(qe.id)&&ee.add(qe.id)})),(De=te.connections)!=null&&De.some(qe=>qe.id===W)&&ee.add(te.id)}));const fe=new Map,oe=[...n].sort(),Ie=380,he=260;oe.forEach((te,Ce)=>{const De=Ce/oe.length*2*Math.PI;fe.set(te,{x:500+Math.cos(De)*Ie,y:350+Math.sin(De)*he})});const Je=O.map(te=>{const Ce=L.current.get(te.id);let De=!1;if(W)De=!ee.has(te.id);else if(P){const vn=te.connections||[],ni=O.filter(Tn=>{var bn;return Tn.id!==te.id&&((bn=Tn.connections)==null?void 0:bn.some(ut=>ut.id===te.id))});De=vn.length+ni.length===0}let qe=500,Ot=350;if(!Ce)if(te.tags&&te.tags.length>0){let vn=0,ni=0,Tn=0;te.tags.forEach(bn=>{const ut=fe.get(bn);ut&&(vn+=ut.x,ni+=ut.y,Tn++)}),Tn>0?(qe=vn/Tn,Ot=ni/Tn,qe+=(Math.random()-.5)*80,Ot+=(Math.random()-.5)*80):(qe+=(Math.random()-.5)*150,Ot+=(Math.random()-.5)*150)}else qe+=(Math.random()-.5)*120,Ot+=(Math.random()-.5)*120;return{id:te.id,name:te.name,imageUrl:te.imageUrl,miniImageScale:te.miniImageScale,miniImageX:te.miniImageX,miniImageY:te.miniImageY,x:(Ce==null?void 0:Ce.x)??qe,y:(Ce==null?void 0:Ce.y)??Ot,vx:Ce==null?void 0:Ce.vx,vy:Ce==null?void 0:Ce.vy,isDimmed:De,tags:te.tags}}),it=new Map;Je.forEach(te=>it.set(te.id,te)),L.current=it;const zt=[],pt=new Set,Te=new Map;return O.forEach(te=>{var Ce;(Ce=te.connections)==null||Ce.forEach(De=>{if(K.has(De.id)){const qe=De.color||"#10b981";pt.add(qe);let Ot=!1;W&&(Ot=te.id!==W&&De.id!==W),zt.push({source:te.id,target:De.id,role:De.role,color:qe,isDouble:!1,isHidden:Ot}),Te.set(`${te.id}-${De.id}`,!0)}})}),zt.forEach(te=>{const Ce=typeof te.source=="string"?te.source:te.source.id,De=typeof te.target=="string"?te.target:te.target.id;Te.has(`${De}-${Ce}`)&&(te.isDouble=!0)}),{nodes:Je,links:zt,uniqueColors:Array.from(pt)}},[s,P,W,i,n,d]),V=O=>{if(!ht.current||!T.current)return;const K=x.find(ee=>ee.id===O);!K||K.x===void 0||K.y===void 0||sp(()=>import("https://esm.sh/d3@7"),[]).then(ee=>{const fe=ee.select(ht.current),oe=1e3,Ie=700,he=.8,Je=oe/2-K.x*he,it=Ie/2-K.y*he;fe.transition().duration(1200).ease(ee.easePolyInOut.exponent(3)).call(T.current.transform,ee.zoomIdentity.translate(Je,it).scale(he))})};F.useEffect(()=>{if(W&&d==="graph"){const O=setTimeout(()=>V(W),100);return()=>clearTimeout(O)}},[W,d]),F.useEffect(()=>{!ht.current||d!=="graph"||(Rt(!0),sp(()=>import("https://esm.sh/d3@7"),[]).then(O=>{const K=O.select(ht.current),ee=O.select(St.current),fe=O.zoom().scaleExtent([.1,4]).on("zoom",he=>{ee.attr("transform",he.transform),Ee({x:he.transform.x,y:he.transform.y,k:he.transform.k}),Me(null)});T.current=fe,K.call(fe);const oe=O.forceSimulation(x).force("link",O.forceLink(M.filter(he=>!he.isHidden)).id(he=>he.id).distance(he=>{const Je=he.source.tags||[],it=he.target.tags||[],zt=Je.some(pt=>it.includes(pt));return Je.length===0||it.length===0?250:zt?150:450}).strength(W?.05:.03)).force("charge",O.forceManyBody().strength(W?-2e3:-1200)).force("center",O.forceCenter(500,350)).force("gravityX",O.forceX(500).strength(.005)).force("gravityY",O.forceY(350).strength(.005)).force("collision",O.forceCollide().radius(75)).alphaDecay(.06);oe.on("tick",()=>{lt(he=>he+1),oe.alpha()<.2&&Rt(!1)}),H.current=oe;const Ie=he=>{function Je(pt,Te){pt.active||he.alphaTarget(.3).restart(),Te.fx=Te.x,Te.fy=Te.y,Me(null)}function it(pt,Te){Te.fx=pt.x,Te.fy=pt.y}function zt(pt,Te){pt.active||he.alphaTarget(0),Te.fx=null,Te.fy=null}return O.drag().on("start",Je).on("drag",it).on("end",zt)};return ee.selectAll(".node-group").data(x).call(Ie(oe)),()=>oe.stop()}))},[x,M,d]);const ie=O=>{const K=typeof O.source=="string"?x.find(qe=>qe.id===O.source):O.source,ee=typeof O.target=="string"?x.find(qe=>qe.id===O.target):O.target;if(!(K!=null&&K.x)||!(K!=null&&K.y)||!(ee!=null&&ee.x)||!(ee!=null&&ee.y))return null;const fe=52,oe=ee.x-K.x,Ie=ee.y-K.y,he=Math.sqrt(oe*oe+Ie*Ie);if(he<fe*2.2)return null;const Je=oe/he,it=Ie/he,zt=K.x+fe*Je,pt=K.y+fe*it,Te=ee.x-fe*Je,te=ee.y-fe*it;let Ce="",De={x:0,y:0};if(O.isDouble){const Ot=(K.x+ee.x)/2+-it*50,vn=(K.y+ee.y)/2+Je*50;Ce=`M${zt},${pt} Q${Ot},${vn} ${Te},${te}`,De.x=.25*zt+.5*Ot+.25*Te,De.y=.25*pt+.5*vn+.25*te}else Ce=`M${zt},${pt} L${Te},${te}`,De.x=(zt+Te)/2,De.y=(pt+te)/2;return{path:Ce,textPos:De}},se=O=>O.replace("#",""),Ne=O=>{X(K=>K.includes(O)?K.filter(ee=>ee!==O):[...K,O])},mt=F.useMemo(()=>s.filter(O=>{const K=O.name.toLowerCase().includes(b.toLowerCase()),ee=I.length===0||I.every(fe=>{var oe;return(oe=O.tags)==null?void 0:oe.includes(fe)});return K&&ee}).sort((O,K)=>O.name.localeCompare(K.name)),[s,b,I]),{outgoingConnections:Ve,incomingConnections:Nn,currentTableChar:fn}=F.useMemo(()=>{if(d!=="table"||!_)return{outgoingConnections:[],incomingConnections:[],currentTableChar:null};const O=s.find(fe=>fe.id===_),K=((O==null?void 0:O.connections)||[]).map(fe=>{const oe=s.find(Ie=>Ie.id===fe.id);return{...fe,targetChar:oe}}),ee=s.filter(fe=>{var oe;return(oe=fe.connections)==null?void 0:oe.some(Ie=>Ie.id===_)}).map(fe=>{var Ie;const oe=(Ie=fe.connections)==null?void 0:Ie.find(he=>he.id===_);return{sourceChar:fe,role:oe==null?void 0:oe.role,color:oe==null?void 0:oe.color}});return{outgoingConnections:K,incomingConnections:ee,currentTableChar:O}},[s,_,d]);return m.jsxs("div",{className:`flex flex-col h-full space-y-4 md:space-y-4 select-none relative ${ct?"is-mounting":""}`,onClick:()=>Me(null),children:[m.jsxs("div",{className:"bg-[#0f0f0f]/50 border border-stone-900 rounded-2xl p-4 flex flex-col gap-4 backdrop-blur-sm shadow-lg relative z-20",children:[m.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[m.jsxs("div",{className:"bg-stone-950 p-1 rounded-lg border border-stone-800 flex items-center",children:[m.jsx("button",{onClick:()=>p("graph"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${d==="graph"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""}),m.jsx("button",{onClick:()=>p("table"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${d==="table"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""})]}),d==="graph"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-6 w-px bg-stone-800 hidden md:block"}),m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[m.jsx("input",{type:"checkbox",checked:P,disabled:!!W,onChange:O=>ge(O.target.checked),className:"sr-only"}),m.jsx("div",{className:`w-4 h-4 border border-stone-700 rounded transition-colors ${P?"bg-emerald-600 border-emerald-500":"bg-transparent"}`,children:P&&m.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),m.jsx("span",{className:`text-[11px] uppercase tracking-wider font-bold text-stone-500 group-hover:text-stone-300 transition-colors ${W?"opacity-30":""}`,children:" "})]})]})]}),d==="graph"?W&&m.jsx("button",{onClick:()=>{le(null),Rt(!0)},className:"w-full md:w-auto bg-emerald-950/30 border border-emerald-900/50 text-emerald-500 px-4 py-2 rounded-full text-[10px] uppercase tracking-[0.2em] font-black hover:bg-emerald-900/40 transition-all",children:" "}):m.jsxs("div",{className:"w-full md:w-80 relative z-50",ref:re,children:[m.jsxs("button",{onClick:()=>v(!C),className:"w-full bg-stone-950 border border-stone-800 text-stone-300 text-xs py-2.5 pl-4 pr-10 rounded-xl text-left focus:border-emerald-900 transition-colors flex items-center justify-between",children:[m.jsx("span",{className:_?"":"text-stone-500 italic",children:_?(ti=s.find(O=>O.id===_))==null?void 0:ti.name:"--   --"}),m.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform ${C?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),C&&m.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#0a0a0a] border border-stone-800 rounded-xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 flex flex-col max-h-[400px]",children:[m.jsxs("div",{className:"p-3 bg-stone-900/50 border-b border-stone-800 space-y-3 shrink-0 backdrop-blur-md",children:[m.jsx("input",{type:"text",placeholder:"...",value:b,onChange:O=>z(O.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",autoFocus:!0}),n.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto custom-scrollbar",children:n.sort().map(O=>{const K=I.includes(O);return m.jsx("button",{onClick:()=>Ne(O),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${K?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:O},O)})})]}),m.jsx("div",{className:"overflow-y-auto p-1 custom-scrollbar",children:mt.length>0?mt.map(O=>m.jsxs("button",{onClick:()=>{g(O.id),v(!1),z(""),X([])},className:`w-full flex items-center gap-3 p-2 hover:bg-stone-900 rounded-lg text-left transition-colors group ${_===O.id?"bg-stone-900/80":""}`,children:[m.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:m.jsx("img",{src:O.imageUrl,style:{objectPosition:`${O.miniImageX??50}% ${O.miniImageY??50}%`,transform:`scale(${O.miniImageScale??1})`,transformOrigin:`${O.miniImageX??50}% ${O.miniImageY??50}%`},className:"w-full h-full object-cover",alt:""})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("span",{className:`text-xs font-bold block truncate ${_===O.id?"text-emerald-400":"text-stone-300"}`,children:O.name}),O.tags&&O.tags.length>0&&m.jsxs("span",{className:"text-[8px] text-stone-600 truncate block mt-0.5",children:[O.tags.slice(0,3).join(", "),O.tags.length>3?"...":""]})]}),_===O.id&&m.jsx("div",{className:"ml-auto text-emerald-500",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},O.id)):m.jsx("div",{className:"text-center py-4 text-[10px] text-stone-600 italic",children:"  "})})]})]})]}),d==="graph"&&n.length>0&&m.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-3 border-t border-stone-800/50 animate-in fade-in slide-in-from-top-1 duration-500",children:[m.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2",children:":"}),n.sort().map(O=>{const K=i[O]||"none";return m.jsxs("button",{onClick:()=>r(O),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${K==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":K==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[K==="include"&&m.jsx("span",{className:"text-emerald-500",children:"+"}),K==="exclude"&&m.jsx("span",{className:"text-red-500",children:""}),O]},O)}),B>0&&m.jsx("button",{onClick:c,className:"ml-2 text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:""})]})]}),m.jsxs("div",{className:"relative z-0 w-full h-full min-h-[500px] bg-[#030303] border border-stone-900 rounded-2xl overflow-hidden shadow-2xl graph-container-reveal",children:[d==="graph"&&m.jsxs(m.Fragment,{children:[m.jsxs("svg",{ref:ht,viewBox:"0 0 1000 700",className:"w-full h-full touch-none cursor-grab active:cursor-grabbing",children:[m.jsx("defs",{children:q.map(O=>m.jsx("marker",{id:`arrow-${se(O)}`,markerWidth:"8",markerHeight:"6",refX:"7.5",refY:"3",orient:"auto",children:m.jsx("path",{d:"M0,0 L8,3 L0,6",fill:O})},`arrow-${se(O)}`))}),m.jsxs("g",{ref:St,children:[M.map((O,K)=>{const ee=ie(O);if(!ee)return null;const fe=O.color||"#10b981",oe=O.isHidden;return m.jsxs("g",{className:`transition-opacity duration-700 ${oe?"opacity-0":"opacity-100"}`,children:[m.jsx("path",{d:ee.path,fill:"none",stroke:fe,strokeWidth:W?"3":"1.5",strokeOpacity:W?"0.8":"0.3",markerEnd:`url(#arrow-${se(fe)})`,className:"link-path",style:ct?{animationDelay:`${K*.015}s`}:{}}),W&&O.role&&!oe&&m.jsxs("g",{transform:`translate(${ee.textPos.x}, ${ee.textPos.y})`,children:[m.jsx("text",{dy:"-14",textAnchor:"middle",className:"fill-[#030303] text-[10px] font-bold uppercase tracking-[0.2em]",style:{paintOrder:"stroke",stroke:"#030303",strokeWidth:"5px"},children:O.role}),m.jsx("text",{dy:"-14",textAnchor:"middle",fill:fe,className:"text-[10px] font-bold uppercase tracking-[0.2em] opacity-90",children:O.role})]})]},`link-${K}-${ue}`)}),x.map((O,K)=>{const ee=W===O.id;return m.jsx("g",{transform:`translate(${O.x||500}, ${O.y||350})`,className:`node-group cursor-pointer group ${O.isDimmed?"opacity-0 pointer-events-none":"opacity-100"}`,onClick:fe=>{if(fe.stopPropagation(),O.x&&O.y){const oe=O.x*G.k+G.x,Ie=O.y*G.k+G.y;Me({id:O.id,x:oe,y:Ie})}},children:m.jsxs("g",{className:"node-animator",style:ct?{animationDelay:`${K*.06}s`}:{},children:[m.jsxs("g",{className:"node-content",children:[m.jsx("circle",{r:"48",fill:"#1c1917"}),m.jsx("circle",{r:"46",fill:"#050505",stroke:ee?"#10b981":"#292524",strokeWidth:ee?"4":"1.5"}),m.jsx("clipPath",{id:`clip-${O.id}`,children:m.jsx("circle",{r:"45"})}),m.jsx("foreignObject",{x:"-45",y:"-45",width:"90",height:"90",clipPath:`url(#clip-${O.id})`,children:m.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center overflow-hidden",children:m.jsx("img",{src:O.imageUrl,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${O.miniImageX??50}% ${O.miniImageY??50}%`,transformOrigin:`${O.miniImageX??50}% ${O.miniImageY??50}%`,transform:`scale(${O.miniImageScale??1})`},className:"opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500"})})})]}),m.jsx("text",{y:"70",textAnchor:"middle",className:"fill-stone-500 text-[12px] font-bold uppercase tracking-[0.15em] group-hover:fill-stone-100 transition-colors drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)] font-serif",children:O.name})]})},O.id)})]})]}),xt&&m.jsx("div",{className:"absolute inset-0 bg-[#030303]/40 flex items-center justify-center backdrop-blur-[1px] pointer-events-none",children:m.jsx("div",{className:"text-[10px] uppercase tracking-[0.4em] font-black text-emerald-500/50 animate-pulse",children:" ..."})})]}),d==="table"&&m.jsx("div",{className:"w-full h-full overflow-y-auto custom-scrollbar p-6 md:p-10",children:_?m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[m.jsx("span",{className:"text-emerald-500 bg-emerald-900/10 px-2 py-1 rounded text-xs font-bold",children:"OUT"}),m.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",fn==null?void 0:fn.name,"?"]}),m.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:Ve.length})]}),m.jsx("div",{className:"space-y-3",children:Ve.length===0?m.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"       ..."}):Ve.map((O,K)=>{var ee,fe,oe,Ie,he,Je;return m.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-emerald-900/30 transition-all group",children:[m.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:m.jsx("img",{src:(ee=O.targetChar)==null?void 0:ee.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((fe=O.targetChar)==null?void 0:fe.miniImageX)??50}% ${((oe=O.targetChar)==null?void 0:oe.miniImageY)??50}%`,transform:`scale(${((Ie=O.targetChar)==null?void 0:Ie.miniImageScale)??1})`,transformOrigin:`${((he=O.targetChar)==null?void 0:he.miniImageX)??50}% ${((Je=O.targetChar)==null?void 0:Je.miniImageY)??50}%`},alt:""})}),m.jsxs("div",{className:"flex-grow min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-baseline",children:[m.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:O.name}),m.jsx("button",{onClick:()=>f(O.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-emerald-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),m.jsx("p",{className:"text-stone-500 text-xs mt-1 font-medium",children:O.role})]}),m.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:O.color||"#10b981"}})]},K)})})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[m.jsx("span",{className:"text-blue-500 bg-blue-900/10 px-2 py-1 rounded text-xs font-bold",children:"IN"}),m.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",fn==null?void 0:fn.name,"?"]}),m.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:Nn.length})]}),m.jsx("div",{className:"space-y-3",children:Nn.length===0?m.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"    ..."}):Nn.map((O,K)=>{var ee,fe,oe,Ie,he,Je,it;return m.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-blue-900/30 transition-all group",children:[m.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:m.jsx("img",{src:(ee=O.sourceChar)==null?void 0:ee.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((fe=O.sourceChar)==null?void 0:fe.miniImageX)??50}% ${((oe=O.sourceChar)==null?void 0:oe.miniImageY)??50}%`,transform:`scale(${((Ie=O.sourceChar)==null?void 0:Ie.miniImageScale)??1})`,transformOrigin:`${((he=O.sourceChar)==null?void 0:he.miniImageX)??50}% ${((Je=O.sourceChar)==null?void 0:Je.miniImageY)??50}%`},alt:""})}),m.jsxs("div",{className:"flex-grow min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-baseline",children:[m.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:(it=O.sourceChar)==null?void 0:it.name}),m.jsx("button",{onClick:()=>f(O.sourceChar.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-blue-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("span",{className:"text-stone-600 text-[10px] uppercase tracking-wider",children:"  :"}),m.jsx("p",{className:"text-stone-400 text-xs font-medium",children:O.role})]})]}),m.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:O.color||"#10b981"}})]},K)})})]})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-stone-600 space-y-4",children:[m.jsx("svg",{className:"w-16 h-16 opacity-30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),m.jsx("p",{className:"text-sm italic font-serif opacity-70",children:"    ,    "})]})}),et&&d==="graph"&&m.jsx("div",{className:"absolute z-[100] animate-in zoom-in-95 fade-in duration-300",style:{left:et.x+40,top:et.y-40},onClick:O=>O.stopPropagation(),children:m.jsxs("div",{className:"bg-[#0f0f0f]/95 border border-stone-800 rounded-xl overflow-hidden shadow-2xl min-w-[200px] backdrop-blur-md",children:[m.jsx("button",{onClick:()=>f(et.id),className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-stone-200 hover:bg-emerald-900/40 border-b border-stone-900",children:" "}),m.jsx("button",{onClick:()=>{le(et.id),Me(null),Rt(!0)},className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-emerald-400 hover:bg-emerald-900/40",children:" "})]})})]})]})},pb=({worlds:s,onUpdate:n,isAdmin:i})=>{const[r,c]=F.useState(!1),[f,d]=F.useState({type:""}),[p,_]=F.useState(!1),g=()=>{if(!f.name)return;const v={id:Date.now().toString(),name:f.name||"",type:f.type||"",description:f.description||"",imageUrl:f.imageUrl||"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=800&auto=format&fit=crop"};n([...s,v]),c(!1),d({type:""})},C=async v=>{var z;const b=(z=v.target.files)==null?void 0:z[0];if(b){_(!0);try{const I=await hf(b);d(X=>({...X,imageUrl:I}))}catch(I){console.error("Failed to process image",I),alert("  ")}finally{_(!1)}}};return m.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700",children:[m.jsxs("div",{className:"flex justify-between items-baseline",children:[m.jsx("h1",{className:"text-5xl font-serif font-medium text-stone-100",children:""}),i&&m.jsx("button",{onClick:()=>c(!0),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-bold",children:"  "})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(v=>m.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl overflow-hidden group hover:border-emerald-900/30 transition-all",children:[m.jsxs("div",{className:"aspect-video relative",children:[m.jsx("img",{src:v.imageUrl,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity",alt:""}),m.jsx("div",{className:"absolute top-4 left-4 bg-black/80 px-3 py-1 rounded text-[9px] uppercase tracking-widest font-bold text-emerald-500 border border-emerald-900/50",children:v.type})]}),m.jsxs("div",{className:"p-6 space-y-3",children:[m.jsx("h3",{className:"text-xl font-serif text-stone-100",children:v.name}),m.jsx("p",{className:"text-stone-500 text-sm leading-relaxed line-clamp-3",children:v.description}),i&&m.jsx("button",{onClick:()=>n(s.filter(b=>b.id!==v.id)),className:"text-red-900/50 hover:text-red-500 text-[9px] uppercase font-bold tracking-widest pt-4",children:""})]})]},v.id))}),r&&m.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-6",children:m.jsxs("div",{className:"bg-[#0f0f0f] border border-stone-800 w-full max-w-lg rounded-2xl p-8 space-y-6",children:[m.jsx("h2",{className:"text-2xl font-serif text-stone-100",children:"  "}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("input",{placeholder:" (.  )",className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:f.name||"",onChange:v=>d({...f,name:v.target.value})}),m.jsxs("select",{className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none",value:f.type,onChange:v=>d({...f,type:v.target.value}),children:[m.jsx("option",{children:""}),m.jsx("option",{children:""}),m.jsx("option",{children:""}),m.jsx("option",{children:""})]}),m.jsx("textarea",{placeholder:"...",className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 h-32 outline-none",value:f.description||"",onChange:v=>d({...f,description:v.target.value})}),m.jsxs("div",{className:"flex gap-4 items-center",children:[m.jsxs("label",{className:`cursor-pointer flex items-center gap-2 ${p?"opacity-50":""}`,children:[m.jsx("input",{type:"file",onChange:C,className:"hidden",disabled:p,accept:"image/*"}),m.jsx("div",{className:"text-xs text-stone-500 hover:text-stone-300 border border-stone-800 px-3 py-1.5 rounded-lg transition-colors",children:p?"...":" "})]}),f.imageUrl&&f.imageUrl.startsWith("data:")&&m.jsx("span",{className:"text-emerald-500 text-[9px] font-bold",children:"   "})]})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-3 text-[10px] font-bold uppercase text-stone-500",children:""}),m.jsx("button",{onClick:g,disabled:p,className:"flex-1 py-3 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-lg font-bold text-[10px] uppercase disabled:opacity-50",children:""})]})]})})]})},gb=({notes:s,onUpdate:n,isAdmin:i})=>{const[r,c]=F.useState(!1),[f,d]=F.useState({}),p=()=>{if(!f.title)return;const _={id:Date.now().toString(),title:f.title||"",content:f.content||"",date:new Date().toLocaleDateString("ru-RU")};n([_,...s]),c(!1),d({})};return m.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 max-w-4xl mx-auto",children:[m.jsxs("div",{className:"flex justify-between items-baseline",children:[m.jsx("h1",{className:"text-5xl font-serif font-medium text-stone-100",children:""}),i&&m.jsx("button",{onClick:()=>c(!0),className:"text-emerald-500 text-[10px] uppercase tracking-widest font-bold hover:text-emerald-400 transition-colors",children:"+  "})]}),m.jsxs("div",{className:"space-y-8",children:[s.length===0&&m.jsx("div",{className:"py-20 text-center text-stone-700 italic font-serif",children:"  .    ."}),s.map(_=>m.jsxs("article",{className:"border-l border-stone-800 pl-8 relative space-y-4 py-2 group",children:[m.jsx("div",{className:"absolute -left-[5px] top-4 w-2 h-2 rounded-full bg-stone-800 group-hover:bg-emerald-500 transition-colors"}),m.jsxs("div",{className:"flex justify-between items-baseline",children:[m.jsx("h3",{className:"text-2xl font-serif text-stone-200",children:_.title}),m.jsx("span",{className:"text-[10px] font-bold text-stone-600 uppercase tracking-widest",children:_.date})]}),m.jsx("p",{className:"text-stone-400 leading-relaxed whitespace-pre-wrap font-light",children:_.content}),i&&m.jsx("button",{onClick:()=>n(s.filter(g=>g.id!==_.id)),className:"text-[9px] uppercase font-bold text-red-900/30 hover:text-red-500 pt-2 transition-colors",children:" "})]},_.id))]}),r&&m.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-6",children:m.jsxs("div",{className:"bg-[#0f0f0f] border border-stone-800 w-full max-w-2xl rounded-2xl p-10 space-y-8 shadow-2xl",children:[m.jsx("h2",{className:"text-3xl font-serif text-stone-100 italic",children:"  "}),m.jsxs("div",{className:"space-y-6",children:[m.jsx("input",{placeholder:" ...",className:"w-full bg-transparent border-b border-stone-800 pb-2 text-2xl font-serif text-stone-100 outline-none focus:border-emerald-900 transition-colors",value:f.title||"",onChange:_=>d({...f,title:_.target.value})}),m.jsx("textarea",{placeholder:"     ?..",className:"w-full bg-[#050505] border border-stone-900 p-6 rounded-xl text-stone-300 h-64 outline-none focus:border-emerald-900/50 transition-all resize-none leading-relaxed",value:f.content||"",onChange:_=>d({...f,content:_.target.value})})]}),m.jsxs("div",{className:"flex gap-6",children:[m.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-4 text-[10px] font-bold uppercase text-stone-600 hover:text-stone-300 transition-colors",children:" "}),m.jsx("button",{onClick:p,className:"flex-2 py-4 bg-emerald-900/20 text-emerald-500 border border-emerald-900/50 rounded-lg font-bold text-[10px] uppercase hover:bg-emerald-900/30 transition-all",children:"  "})]})]})})]})},_b=({onConnect:s,onDisconnect:n,onClose:i,isConnected:r})=>m.jsx("div",{className:"fixed inset-0 z-[120] bg-black/95 backdrop-blur-md flex items-center justify-center p-6",onClick:i,children:m.jsxs("div",{className:"bg-[#0a0a0a] border border-emerald-900/50 w-full max-w-lg rounded-3xl p-8 space-y-8 shadow-[0_0_80px_rgba(16,185,129,0.05)]",onClick:c=>c.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl font-serif text-emerald-500 italic",children:" "}),m.jsx("p",{className:"text-stone-500 text-[10px] uppercase tracking-widest mt-2",children:"  "})]}),m.jsx("button",{onClick:i,className:"text-stone-600 hover:text-stone-300 transition-colors",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r?m.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"p-6 rounded-2xl border bg-emerald-950/20 border-emerald-500/30",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse bg-emerald-500"}),m.jsx("span",{className:"text-sm font-bold uppercase tracking-widest text-emerald-400",children:" "})]}),m.jsx("div",{className:"space-y-2",children:m.jsx("p",{className:"text-[10px] text-stone-600 mt-2 leading-relaxed",children:"     .  ,     ,    ."})})]}),m.jsx("button",{onClick:n,className:"w-full py-4 rounded-xl border border-red-900/30 text-red-500/70 hover:bg-red-950/20 hover:text-red-500 hover:border-red-900/60 transition-all text-[10px] uppercase font-bold tracking-[0.2em]",children:" "})]}):m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"bg-stone-900/30 border border-stone-800 rounded-2xl p-6 text-center space-y-4",children:[m.jsx("div",{className:"w-16 h-16 bg-stone-900 rounded-full flex items-center justify-center mx-auto text-stone-600",children:m.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),m.jsx("p",{className:"text-stone-400 text-sm leading-relaxed",children:"  ,           ."})]}),m.jsx("button",{onClick:s,className:"w-full py-5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 hover:border-emerald-500/50 text-emerald-500 rounded-xl text-[11px] uppercase font-bold tracking-[0.25em] transition-all shadow-lg shadow-emerald-900/10",children:""}),m.jsx("p",{className:"text-[9px] text-stone-600 text-center border-t border-stone-900 pt-4",children:":          ."})]})]})}),ap=[],rp=[{id:"1",name:" ",age:34,imageUrl:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=800&auto=format&fit=crop",tags:[],connections:[{id:"2",name:"  ",role:""}],additionalInfo:"      ,     . ,         ,         .     ,    ."},{id:"2",name:"  ",age:21,imageUrl:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=800&auto=format&fit=crop",tags:[],connections:[{id:"1",name:" ",role:"  "}],additionalInfo:"   ,          .         .    ,        ."},{id:"3",name:"",age:"124 ",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=800&auto=format&fit=crop",tags:[],connections:[{id:"1",name:" ",role:" "}],additionalInfo:"  ,       .         .      ."}],yb=()=>{};var op={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(s,n){if(!s)throw Wi(n)},Wi=function(s){return new Error("Firebase Database ("+lg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=function(s){const n=[];let i=0;for(let r=0;r<s.length;r++){let c=s.charCodeAt(r);c<128?n[i++]=c:c<2048?(n[i++]=c>>6|192,n[i++]=c&63|128):(c&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(c=65536+((c&1023)<<10)+(s.charCodeAt(++r)&1023),n[i++]=c>>18|240,n[i++]=c>>12&63|128,n[i++]=c>>6&63|128,n[i++]=c&63|128):(n[i++]=c>>12|224,n[i++]=c>>6&63|128,n[i++]=c&63|128)}return n},vb=function(s){const n=[];let i=0,r=0;for(;i<s.length;){const c=s[i++];if(c<128)n[r++]=String.fromCharCode(c);else if(c>191&&c<224){const f=s[i++];n[r++]=String.fromCharCode((c&31)<<6|f&63)}else if(c>239&&c<365){const f=s[i++],d=s[i++],p=s[i++],_=((c&7)<<18|(f&63)<<12|(d&63)<<6|p&63)-65536;n[r++]=String.fromCharCode(55296+(_>>10)),n[r++]=String.fromCharCode(56320+(_&1023))}else{const f=s[i++],d=s[i++];n[r++]=String.fromCharCode((c&15)<<12|(f&63)<<6|d&63)}}return n.join("")},mf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,n){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let c=0;c<s.length;c+=3){const f=s[c],d=c+1<s.length,p=d?s[c+1]:0,_=c+2<s.length,g=_?s[c+2]:0,C=f>>2,v=(f&3)<<4|p>>4;let b=(p&15)<<2|g>>6,z=g&63;_||(z=64,d||(b=64)),r.push(i[C],i[v],i[b],i[z])}return r.join("")},encodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(s):this.encodeByteArray(ig(s),n)},decodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(s):vb(this.decodeStringToByteArray(s,n))},decodeStringToByteArray(s,n){this.init_();const i=n?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let c=0;c<s.length;){const f=i[s.charAt(c++)],p=c<s.length?i[s.charAt(c)]:0;++c;const g=c<s.length?i[s.charAt(c)]:64;++c;const v=c<s.length?i[s.charAt(c)]:64;if(++c,f==null||p==null||g==null||v==null)throw new bb;const b=f<<2|p>>4;if(r.push(b),g!==64){const z=p<<4&240|g>>2;if(r.push(z),v!==64){const I=g<<6&192|v;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class bb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sg=function(s){const n=ig(s);return mf.encodeByteArray(n,!0)},Br=function(s){return sg(s).replace(/\./g,"")},Qu=function(s){try{return mf.decodeString(s,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(s){return ag(void 0,s)}function ag(s,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const i=n;return new Date(i.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return n}for(const i in n)!n.hasOwnProperty(i)||!Sb(i)||(s[i]=ag(s[i],n[i]));return s}function Sb(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=()=>Eb().__FIREBASE_DEFAULTS__,Nb=()=>{if(typeof process>"u"||typeof op>"u")return;const s=op.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Tb=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=s&&Qu(s[1]);return n&&JSON.parse(n)},rg=()=>{try{return yb()||Cb()||Nb()||Tb()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},wb=s=>{var n,i;return(i=(n=rg())==null?void 0:n.emulatorHosts)==null?void 0:i[s]},Ab=s=>{const n=wb(s);if(!n)return;const i=n.lastIndexOf(":");if(i<=0||i+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const r=parseInt(n.substring(i+1),10);return n[0]==="["?[n.substring(1,i-1),r]:[n.substring(0,i),r]},og=()=>{var s;return(s=rg())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,i)=>{this.resolve=n,this.reject=i})}wrapCallback(n){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(i):n(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rb(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(s,n){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=n||"demo-project",c=s.iat||0,f=s.sub||s.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:c,exp:c+3600,auth_time:c,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Br(JSON.stringify(i)),Br(JSON.stringify(d)),""].join(".")}const $s={};function Db(){const s={prod:[],emulator:[]};for(const n of Object.keys($s))$s[n]?s.emulator.push(n):s.prod.push(n);return s}function Mb(s){let n=document.getElementById(s),i=!1;return n||(n=document.createElement("div"),n.setAttribute("id",s),i=!0),{created:i,element:n}}let cp=!1;function jb(s,n){if(typeof window>"u"||typeof document>"u"||!pf(window.location.host)||$s[s]===n||$s[s]||cp)return;$s[s]=n;function i(b){return`__firebase__banner__${b}`}const r="__firebase__banner",f=Db().prod.length>0;function d(){const b=document.getElementById(r);b&&b.remove()}function p(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function _(b,z){b.setAttribute("width","24"),b.setAttribute("id",z),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{cp=!0,d()},b}function C(b,z){b.setAttribute("id",z),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=Mb(r),z=i("text"),I=document.getElementById(z)||document.createElement("span"),X=i("learnmore"),re=document.getElementById(X)||document.createElement("a"),P=i("preprendIcon"),ge=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const W=b.element;p(W),C(re,X);const le=g();_(ge,P),W.append(ge,I,re,le),document.body.appendChild(W)}f?(I.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zb())}function kb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ub(){return lg.NODE_ADMIN===!0}function Lb(){try{return typeof indexedDB=="object"}catch{return!1}}function Ib(){return new Promise((s,n)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(r);c.onsuccess=()=>{c.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},c.onupgradeneeded=()=>{i=!1},c.onerror=()=>{var f;n(((f=c.error)==null?void 0:f.message)||"")}}catch(i){n(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="FirebaseError";class ma extends Error{constructor(n,i,r){super(i),this.code=n,this.customData=r,this.name=Hb,Object.setPrototypeOf(this,ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ug.prototype.create)}}class ug{constructor(n,i,r){this.service=n,this.serviceName=i,this.errors=r}create(n,...i){const r=i[0]||{},c=`${this.service}/${n}`,f=this.errors[n],d=f?Bb(f,r):"Error",p=`${this.serviceName}: ${d} (${c}).`;return new ma(c,p,r)}}function Bb(s,n){return s.replace(qb,(i,r)=>{const c=n[r];return c!=null?String(c):`<${r}?>`})}const qb=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(s){return JSON.parse(s)}function bt(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=function(s){let n={},i={},r={},c="";try{const f=s.split(".");n=ia(Qu(f[0])||""),i=ia(Qu(f[1])||""),c=f[2],r=i.d||{},delete i.d}catch{}return{header:n,claims:i,data:r,signature:c}},Yb=function(s){const n=fg(s),i=n.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},Gb=function(s){const n=fg(s).claims;return typeof n=="object"&&n.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(s,n){return Object.prototype.hasOwnProperty.call(s,n)}function Zi(s,n){if(Object.prototype.hasOwnProperty.call(s,n))return s[n]}function up(s){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n))return!1;return!0}function qr(s,n,i){const r={};for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=n.call(i,s[c],c,s));return r}function Yr(s,n){if(s===n)return!0;const i=Object.keys(s),r=Object.keys(n);for(const c of i){if(!r.includes(c))return!1;const f=s[c],d=n[c];if(fp(f)&&fp(d)){if(!Yr(f,d))return!1}else if(f!==d)return!1}for(const c of r)if(!i.includes(c))return!1;return!0}function fp(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(s){const n=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(c=>{n.push(encodeURIComponent(i)+"="+encodeURIComponent(c))}):n.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return n.length?"&"+n.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,i){i||(i=0);const r=this.W_;if(typeof n=="string")for(let v=0;v<16;v++)r[v]=n.charCodeAt(i)<<24|n.charCodeAt(i+1)<<16|n.charCodeAt(i+2)<<8|n.charCodeAt(i+3),i+=4;else for(let v=0;v<16;v++)r[v]=n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3],i+=4;for(let v=16;v<80;v++){const b=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(b<<1|b>>>31)&4294967295}let c=this.chain_[0],f=this.chain_[1],d=this.chain_[2],p=this.chain_[3],_=this.chain_[4],g,C;for(let v=0;v<80;v++){v<40?v<20?(g=p^f&(d^p),C=1518500249):(g=f^d^p,C=1859775393):v<60?(g=f&d|p&(f|d),C=2400959708):(g=f^d^p,C=3395469782);const b=(c<<5|c>>>27)+g+_+C+r[v]&4294967295;_=p,p=d,d=(f<<30|f>>>2)&4294967295,f=c,c=b}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+f&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+_&4294967295}update(n,i){if(n==null)return;i===void 0&&(i=n.length);const r=i-this.blockSize;let c=0;const f=this.buf_;let d=this.inbuf_;for(;c<i;){if(d===0)for(;c<=r;)this.compress_(n,c),c+=this.blockSize;if(typeof n=="string"){for(;c<i;)if(f[d]=n.charCodeAt(c),++d,++c,d===this.blockSize){this.compress_(f),d=0;break}}else for(;c<i;)if(f[d]=n[c],++d,++c,d===this.blockSize){this.compress_(f),d=0;break}}this.inbuf_=d,this.total_+=i}digest(){const n=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let c=this.blockSize-1;c>=56;c--)this.buf_[c]=i&255,i/=256;this.compress_(this.buf_);let r=0;for(let c=0;c<5;c++)for(let f=24;f>=0;f-=8)n[r]=this.chain_[c]>>f&255,++r;return n}}function gf(s,n){return`${s} failed: ${n} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=function(s){const n=[];let i=0;for(let r=0;r<s.length;r++){let c=s.charCodeAt(r);if(c>=55296&&c<=56319){const f=c-55296;r++,Y(r<s.length,"Surrogate pair missing trail surrogate.");const d=s.charCodeAt(r)-56320;c=65536+(f<<10)+d}c<128?n[i++]=c:c<2048?(n[i++]=c>>6|192,n[i++]=c&63|128):c<65536?(n[i++]=c>>12|224,n[i++]=c>>6&63|128,n[i++]=c&63|128):(n[i++]=c>>18|240,n[i++]=c>>12&63|128,n[i++]=c>>6&63|128,n[i++]=c&63|128)}return n},so=function(s){let n=0;for(let i=0;i<s.length;i++){const r=s.charCodeAt(i);r<128?n++:r<2048?n+=2:r>=55296&&r<=56319?(n+=4,i++):n+=3}return n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(s){return s&&s._delegate?s._delegate:s}class sa{constructor(n,i,r){this.name=n,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(n,i){this.name=n,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const i=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(i)){const r=new io;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:i});c&&r.resolve(c)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(n){const i=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),r=(n==null?void 0:n.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(r)return null;throw c}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(Fb(n))try{this.getOrInitializeService({instanceIdentifier:Ql})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);try{const f=this.getOrInitializeService({instanceIdentifier:c});r.resolve(f)}catch{}}}}clearInstance(n=Ql){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...n.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=Ql){return this.instances.has(n)}getOptions(n=Ql){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:i={}}=n,r=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[f,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(f);r===p&&d.resolve(c)}return c}onInit(n,i){const r=this.normalizeInstanceIdentifier(i),c=this.onInitCallbacks.get(r)??new Set;c.add(n),this.onInitCallbacks.set(r,c);const f=this.instances.get(r);return f&&n(f,r),()=>{c.delete(n)}}invokeOnInitCallbacks(n,i){const r=this.onInitCallbacks.get(i);if(r)for(const c of r)try{c(n,i)}catch{}}getOrInitializeService({instanceIdentifier:n,options:i={}}){let r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kb(n),options:i}),this.instances.set(n,r),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch{}return r||null}normalizeInstanceIdentifier(n=Ql){return this.component?this.component.multipleInstances?n:Ql:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kb(s){return s===Ql?void 0:s}function Fb(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const i=this.getProvider(n.name);if(i.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);i.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const i=new Zb(n,this);return this.providers.set(n,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ye||(Ye={}));const Wb={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},$b=Ye.INFO,Pb={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},ex=(s,n,...i)=>{if(n<s.logLevel)return;const r=new Date().toISOString(),c=Pb[n];if(c)console[c](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class dg{constructor(n){this.name=n,this._logLevel=$b,this._logHandler=ex,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Ye))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?Wb[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...n),this._logHandler(this,Ye.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...n),this._logHandler(this,Ye.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...n),this._logHandler(this,Ye.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...n),this._logHandler(this,Ye.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...n),this._logHandler(this,Ye.ERROR,...n)}}const tx=(s,n)=>n.some(i=>s instanceof i);let dp,hp;function nx(){return dp||(dp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lx(){return hp||(hp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hg=new WeakMap,Zu=new WeakMap,mg=new WeakMap,ju=new WeakMap,_f=new WeakMap;function ix(s){const n=new Promise((i,r)=>{const c=()=>{s.removeEventListener("success",f),s.removeEventListener("error",d)},f=()=>{i(Sl(s.result)),c()},d=()=>{r(s.error),c()};s.addEventListener("success",f),s.addEventListener("error",d)});return n.then(i=>{i instanceof IDBCursor&&hg.set(i,s)}).catch(()=>{}),_f.set(n,s),n}function sx(s){if(Zu.has(s))return;const n=new Promise((i,r)=>{const c=()=>{s.removeEventListener("complete",f),s.removeEventListener("error",d),s.removeEventListener("abort",d)},f=()=>{i(),c()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),c()};s.addEventListener("complete",f),s.addEventListener("error",d),s.addEventListener("abort",d)});Zu.set(s,n)}let Ku={get(s,n,i){if(s instanceof IDBTransaction){if(n==="done")return Zu.get(s);if(n==="objectStoreNames")return s.objectStoreNames||mg.get(s);if(n==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Sl(s[n])},set(s,n,i){return s[n]=i,!0},has(s,n){return s instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in s}};function ax(s){Ku=s(Ku)}function rx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...i){const r=s.call(zu(this),n,...i);return mg.set(r,n.sort?n.sort():[n]),Sl(r)}:lx().includes(s)?function(...n){return s.apply(zu(this),n),Sl(hg.get(this))}:function(...n){return Sl(s.apply(zu(this),n))}}function ox(s){return typeof s=="function"?rx(s):(s instanceof IDBTransaction&&sx(s),tx(s,nx())?new Proxy(s,Ku):s)}function Sl(s){if(s instanceof IDBRequest)return ix(s);if(ju.has(s))return ju.get(s);const n=ox(s);return n!==s&&(ju.set(s,n),_f.set(n,s)),n}const zu=s=>_f.get(s);function cx(s,n,{blocked:i,upgrade:r,blocking:c,terminated:f}={}){const d=indexedDB.open(s,n),p=Sl(d);return r&&d.addEventListener("upgradeneeded",_=>{r(Sl(d.result),_.oldVersion,_.newVersion,Sl(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),p.then(_=>{f&&_.addEventListener("close",()=>f()),c&&_.addEventListener("versionchange",g=>c(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const ux=["get","getKey","getAll","getAllKeys","count"],fx=["put","add","delete","clear"],ku=new Map;function mp(s,n){if(!(s instanceof IDBDatabase&&!(n in s)&&typeof n=="string"))return;if(ku.get(n))return ku.get(n);const i=n.replace(/FromIndex$/,""),r=n!==i,c=fx.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(c||ux.includes(i)))return;const f=async function(d,...p){const _=this.transaction(d,c?"readwrite":"readonly");let g=_.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),c&&_.done]))[0]};return ku.set(n,f),f}ax(s=>({...s,get:(n,i,r)=>mp(n,i)||s.get(n,i,r),has:(n,i)=>!!mp(n,i)||s.has(n,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(hx(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function hx(s){const n=s.getComponent();return(n==null?void 0:n.type)==="VERSION"}const Fu="@firebase/app",pp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new dg("@firebase/app"),mx="@firebase/app-compat",px="@firebase/analytics-compat",gx="@firebase/analytics",_x="@firebase/app-check-compat",yx="@firebase/app-check",vx="@firebase/auth",bx="@firebase/auth-compat",xx="@firebase/database",Sx="@firebase/data-connect",Ex="@firebase/database-compat",Cx="@firebase/functions",Nx="@firebase/functions-compat",Tx="@firebase/installations",wx="@firebase/installations-compat",Ax="@firebase/messaging",Rx="@firebase/messaging-compat",Ox="@firebase/performance",Dx="@firebase/performance-compat",Mx="@firebase/remote-config",jx="@firebase/remote-config-compat",zx="@firebase/storage",kx="@firebase/storage-compat",Ux="@firebase/firestore",Lx="@firebase/ai",Ix="@firebase/firestore-compat",Hx="firebase",Bx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="[DEFAULT]",qx={[Fu]:"fire-core",[mx]:"fire-core-compat",[gx]:"fire-analytics",[px]:"fire-analytics-compat",[yx]:"fire-app-check",[_x]:"fire-app-check-compat",[vx]:"fire-auth",[bx]:"fire-auth-compat",[xx]:"fire-rtdb",[Sx]:"fire-data-connect",[Ex]:"fire-rtdb-compat",[Cx]:"fire-fn",[Nx]:"fire-fn-compat",[Tx]:"fire-iid",[wx]:"fire-iid-compat",[Ax]:"fire-fcm",[Rx]:"fire-fcm-compat",[Ox]:"fire-perf",[Dx]:"fire-perf-compat",[Mx]:"fire-rc",[jx]:"fire-rc-compat",[zx]:"fire-gcs",[kx]:"fire-gcs-compat",[Ux]:"fire-fst",[Ix]:"fire-fst-compat",[Lx]:"fire-vertex","fire-js":"fire-js",[Hx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Map,Yx=new Map,Wu=new Map;function gp(s,n){try{s.container.addComponent(n)}catch(i){Zn.debug(`Component ${n.name} failed to register with FirebaseApp ${s.name}`,i)}}function Vr(s){const n=s.name;if(Wu.has(n))return Zn.debug(`There were multiple attempts to register component ${n}.`),!1;Wu.set(n,s);for(const i of Gr.values())gp(i,s);for(const i of Yx.values())gp(i,s);return!0}function Gx(s,n){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(n)}function Vx(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},El=new ug("app","Firebase",Xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(n,i,r){this._isDeleted=!1,this._options={...n},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw El.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=Bx;function pg(s,n={}){let i=s;typeof n!="object"&&(n={name:n});const r={name:Ju,automaticDataCollectionEnabled:!0,...n},c=r.name;if(typeof c!="string"||!c)throw El.create("bad-app-name",{appName:String(c)});if(i||(i=og()),!i)throw El.create("no-options");const f=Gr.get(c);if(f){if(Yr(i,f.options)&&Yr(r,f.config))return f;throw El.create("duplicate-app",{appName:c})}const d=new Jb(c);for(const _ of Wu.values())d.addComponent(_);const p=new Qx(i,r,d);return Gr.set(c,p),p}function Kx(s=Ju){const n=Gr.get(s);if(!n&&s===Ju&&og())return pg();if(!n)throw El.create("no-app",{appName:s});return n}function Gi(s,n,i){let r=qx[s]??s;i&&(r+=`-${i}`);const c=r.match(/\s|\//),f=n.match(/\s|\//);if(c||f){const d=[`Unable to register library "${r}" with version "${n}":`];c&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),c&&f&&d.push("and"),f&&d.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Zn.warn(d.join(" "));return}Vr(new sa(`${r}-version`,()=>({library:r,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="firebase-heartbeat-database",Jx=1,aa="firebase-heartbeat-store";let Uu=null;function gg(){return Uu||(Uu=cx(Fx,Jx,{upgrade:(s,n)=>{switch(n){case 0:try{s.createObjectStore(aa)}catch(i){console.warn(i)}}}}).catch(s=>{throw El.create("idb-open",{originalErrorMessage:s.message})})),Uu}async function Wx(s){try{const i=(await gg()).transaction(aa),r=await i.objectStore(aa).get(_g(s));return await i.done,r}catch(n){if(n instanceof ma)Zn.warn(n.message);else{const i=El.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});Zn.warn(i.message)}}}async function _p(s,n){try{const r=(await gg()).transaction(aa,"readwrite");await r.objectStore(aa).put(n,_g(s)),await r.done}catch(i){if(i instanceof ma)Zn.warn(i.message);else{const r=El.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Zn.warn(r.message)}}}function _g(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=1024,Px=30;class e1{constructor(n){this.container=n,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new n1(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var n,i;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=yp();if(((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(d=>d.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:c}),this._heartbeatsCache.heartbeats.length>Px){const d=l1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zn.warn(r)}}async getHeartbeatsHeader(){var n;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=yp(),{heartbeatsToSend:r,unsentEntries:c}=t1(this._heartbeatsCache.heartbeats),f=Br(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(i){return Zn.warn(i),""}}}function yp(){return new Date().toISOString().substring(0,10)}function t1(s,n=$x){const i=[];let r=s.slice();for(const c of s){const f=i.find(d=>d.agent===c.agent);if(f){if(f.dates.push(c.date),vp(i)>n){f.dates.pop();break}}else if(i.push({agent:c.agent,dates:[c.date]}),vp(i)>n){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class n1{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lb()?Ib().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Wx(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){if(await this._canUseIndexedDBPromise){const r=await this.read();return _p(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){if(await this._canUseIndexedDBPromise){const r=await this.read();return _p(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...n.heartbeats]})}else return}}function vp(s){return Br(JSON.stringify({version:2,heartbeats:s})).length}function l1(s){if(s.length===0)return-1;let n=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,n=r);return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(s){Vr(new sa("platform-logger",n=>new dx(n),"PRIVATE")),Vr(new sa("heartbeat",n=>new e1(n),"PRIVATE")),Gi(Fu,pp,s),Gi(Fu,pp,"esm2020"),Gi("fire-js","")}i1("");var s1="firebase",a1="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gi(s1,a1,"app");var bp={};const xp="@firebase/database",Sp="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yg="";function r1(s){yg=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,i){i==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),bt(i))}get(n){const i=this.domStorage_.getItem(this.prefixedName_(n));return i==null?null:ia(i)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,i){i==null?delete this.cache_[n]:this.cache_[n]=i}get(n){return Jn(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const n=window[s];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new o1(n)}}catch{}return new c1},Kl=vg("localStorage"),u1=vg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new dg("@firebase/database"),f1=(function(){let s=1;return function(){return s++}})(),bg=function(s){const n=Qb(s),i=new Xb;i.update(n);const r=i.digest();return mf.encodeByteArray(r)},ga=function(...s){let n="";for(let i=0;i<s.length;i++){const r=s[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?n+=ga.apply(null,r):typeof r=="object"?n+=bt(r):n+=r,n+=" "}return n};let Ps=null,Ep=!0;const d1=function(s,n){Y(!0,"Can't turn on custom loggers persistently."),Vi.logLevel=Ye.VERBOSE,Ps=Vi.log.bind(Vi)},Mt=function(...s){if(Ep===!0&&(Ep=!1,Ps===null&&u1.get("logging_enabled")===!0&&d1()),Ps){const n=ga.apply(null,s);Ps(n)}},_a=function(s){return function(...n){Mt(s,...n)}},$u=function(...s){const n="FIREBASE INTERNAL ERROR: "+ga(...s);Vi.error(n)},Kn=function(...s){const n=`FIREBASE FATAL ERROR: ${ga(...s)}`;throw Vi.error(n),new Error(n)},Vt=function(...s){const n="FIREBASE WARNING: "+ga(...s);Vi.warn(n)},h1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xg=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},m1=function(s){if(document.readyState==="complete")s();else{let n=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}n||(n=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Ki="[MIN_NAME]",Jl="[MAX_NAME]",$i=function(s,n){if(s===n)return 0;if(s===Ki||n===Jl)return-1;if(n===Ki||s===Jl)return 1;{const i=Cp(s),r=Cp(n);return i!==null?r!==null?i-r===0?s.length-n.length:i-r:-1:r!==null?1:s<n?-1:1}},p1=function(s,n){return s===n?0:s<n?-1:1},Ks=function(s,n){if(n&&s in n)return n[s];throw new Error("Missing required key ("+s+") in object: "+bt(n))},yf=function(s){if(typeof s!="object"||s===null)return bt(s);const n=[];for(const r in s)n.push(r);n.sort();let i="{";for(let r=0;r<n.length;r++)r!==0&&(i+=","),i+=bt(n[r]),i+=":",i+=yf(s[n[r]]);return i+="}",i},Sg=function(s,n){const i=s.length;if(i<=n)return[s];const r=[];for(let c=0;c<i;c+=n)c+n>i?r.push(s.substring(c,i)):r.push(s.substring(c,c+n));return r};function Xt(s,n){for(const i in s)s.hasOwnProperty(i)&&n(i,s[i])}const Eg=function(s){Y(!xg(s),"Invalid JSON number");const n=11,i=52,r=(1<<n-1)-1;let c,f,d,p,_;s===0?(f=0,d=0,c=1/s===-1/0?1:0):(c=s<0,s=Math.abs(s),s>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(s)/Math.LN2),r),f=p+r,d=Math.round(s*Math.pow(2,i-p)-Math.pow(2,i))):(f=0,d=Math.round(s/Math.pow(2,1-r-i))));const g=[];for(_=i;_;_-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(_=n;_;_-=1)g.push(f%2?1:0),f=Math.floor(f/2);g.push(c?1:0),g.reverse();const C=g.join("");let v="";for(_=0;_<64;_+=8){let b=parseInt(C.substr(_,8),2).toString(16);b.length===1&&(b="0"+b),v=v+b}return v.toLowerCase()},g1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function y1(s,n){let i="Unknown Error";s==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?i="Client doesn't have permission to access the desired data.":s==="unavailable"&&(i="The service is unavailable");const r=new Error(s+" at "+n._path.toString()+": "+i);return r.code=s.toUpperCase(),r}const v1=new RegExp("^-?(0*)\\d{1,10}$"),b1=-2147483648,x1=2147483647,Cp=function(s){if(v1.test(s)){const n=Number(s);if(n>=b1&&n<=x1)return n}return null},Pi=function(s){try{s()}catch(n){setTimeout(()=>{const i=n.stack||"";throw Vt("Exception was thrown by user callback.",i),n},Math.floor(0))}},S1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ea=function(s,n){const i=setTimeout(s,n);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(n,i){this.appCheckProvider=i,this.appName=n.name,Vx(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(r=>this.appCheck=r)}getToken(n){if(this.serverAppAppCheckToken){if(n)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(n):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(i,r):i(null)},0)})}addTokenChangeListener(n){var i;(i=this.appCheckProvider)==null||i.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){Vt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(n,i,r){this.appName_=n,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(c=>this.auth_=c)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(i=>i&&i.code==="auth/token-not-initialized"?(Mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(i,r):i(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(i=>i.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(i=>i.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vt(n)}}class Hr{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}Hr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="5",Cg="v",Ng="s",Tg="r",wg="f",Ag=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rg="ls",Og="p",Pu="ac",Dg="websocket",Mg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(n,i,r,c,f=!1,d="",p=!1,_=!1,g=null){this.secure=i,this.namespace=r,this.webSocketOnly=c,this.nodeAdmin=f,this.persistenceKey=d,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=_,this.emulatorOptions=g,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kl.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Kl.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${i}`}}function N1(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function zg(s,n,i){Y(typeof n=="string","typeof type must == string"),Y(typeof i=="object","typeof params must == object");let r;if(n===Dg)r=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(n===Mg)r=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);N1(s)&&(i.ns=s.namespace);const c=[];return Xt(i,(f,d)=>{c.push(f+"="+d)}),r+c.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.counters_={}}incrementCounter(n,i=1){Jn(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=i}get(){return xb(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu={},Iu={};function bf(s){const n=s.toString();return Lu[n]||(Lu[n]=new T1),Lu[n]}function w1(s,n){const i=s.toString();return Iu[i]||(Iu[i]=n()),Iu[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,i){this.closeAfterResponse=n,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,i){for(this.pendingResponses[n]=i;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let c=0;c<r.length;++c)r[c]&&Pi(()=>{this.onMessage_(r[c])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="start",R1="close",O1="pLPCommand",D1="pRTLPCB",kg="id",Ug="pw",Lg="ser",M1="cb",j1="seg",z1="ts",k1="d",U1="dframe",Ig=1870,Hg=30,L1=Ig-Hg,I1=25e3,H1=3e4;class Yi{constructor(n,i,r,c,f,d,p){this.connId=n,this.repoInfo=i,this.applicationId=r,this.appCheckToken=c,this.authToken=f,this.transportSessionId=d,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_a(n),this.stats_=bf(i),this.urlFn=_=>(this.appCheckToken&&(_[Pu]=this.appCheckToken),zg(i,Mg,_))}open(n,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new A1(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(H1)),m1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xf((...f)=>{const[d,p,_,g,C]=f;if(this.incrementIncomingBytes_(f),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===Np)this.id=p,this.password=_;else if(d===R1)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...f)=>{const[d,p]=f;this.incrementIncomingBytes_(f),this.myPacketOrderer.handleResponse(d,p)},()=>{this.onClosed_()},this.urlFn);const r={};r[Np]="t",r[Lg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[M1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Cg]=vf,this.transportSessionId&&(r[Ng]=this.transportSessionId),this.lastSessionId&&(r[Rg]=this.lastSessionId),this.applicationId&&(r[Og]=this.applicationId),this.appCheckToken&&(r[Pu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ag.test(location.hostname)&&(r[Tg]=wg);const c=this.urlFn(r);this.log_("Connecting via long-poll to "+c),this.scriptTagHolder.addTag(c,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yi.forceAllow_=!0}static forceDisallow(){Yi.forceDisallow_=!0}static isAvailable(){return Yi.forceAllow_?!0:!Yi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!g1()&&!_1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const i=bt(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=sg(i),c=Sg(r,L1);for(let f=0;f<c.length;f++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,c.length,c[f]),this.curSegmentNum++}addDisconnectPingFrame(n,i){this.myDisconnFrame=document.createElement("iframe");const r={};r[U1]="t",r[kg]=n,r[Ug]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const i=bt(n).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class xf{constructor(n,i,r,c){this.onDisconnect=r,this.urlFn=c,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=f1(),window[O1+this.uniqueCallbackIdentifier]=n,window[D1+this.uniqueCallbackIdentifier]=i,this.myIFrame=xf.createIFrame_();let f="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(f='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+f+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(p){Mt("frame writing exception"),p.stack&&Mt(p.stack),Mt(p)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Mt("No IE domain setting required")}catch{const r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,i){for(this.myID=n,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[kg]=this.myID,n[Ug]=this.myPW,n[Lg]=this.currentSerial;let i=this.urlFn(n),r="",c=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Hg+r.length<=Ig;){const d=this.pendingSegs.shift();r=r+"&"+j1+c+"="+d.seg+"&"+z1+c+"="+d.ts+"&"+k1+c+"="+d.d,c++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(n,i,r){this.pendingSegs.push({seg:n,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,i){this.outstandingRequests.add(i);const r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},c=setTimeout(r,Math.floor(I1)),f=()=>{clearTimeout(c),r()};this.addTag(n,f)}addTag(n,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){const c=r.readyState;(!c||c==="loaded"||c==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{Mt("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=16384,q1=45e3;let Xr=null;typeof MozWebSocket<"u"?Xr=MozWebSocket:typeof WebSocket<"u"&&(Xr=WebSocket);class pn{constructor(n,i,r,c,f,d,p){this.connId=n,this.applicationId=r,this.appCheckToken=c,this.authToken=f,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_a(this.connId),this.stats_=bf(i),this.connURL=pn.connectionURL_(i,d,p,c,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,c,f){const d={};return d[Cg]=vf,typeof location<"u"&&location.hostname&&Ag.test(location.hostname)&&(d[Tg]=wg),i&&(d[Ng]=i),r&&(d[Rg]=r),c&&(d[Pu]=c),f&&(d[Og]=f),zg(n,Dg,d)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kl.set("previous_websocket_failure",!0);try{let r;Ub(),this.mySock=new Xr(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const c=r.message||r.data;c&&this.log_(c),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const c=r.message||r.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){pn.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&Xr!==null&&!pn.forceDisallow_}static previouslyFailed(){return Kl.isInMemoryStorage||Kl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kl.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=ia(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Y(this.frames===null,"We already have a frame buffer"),n.length<=6){const i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();const i=bt(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Sg(i,B1);r.length>1&&this.sendString_(String(r.length));for(let c=0;c<r.length;c++)this.sendString_(r[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(q1))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}pn.responsesRequiredToBeHealthy=2;pn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{static get ALL_TRANSPORTS(){return[Yi,pn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const i=pn&&pn.isAvailable();let r=i&&!pn.previouslyFailed();if(n.webSocketOnly&&(i||Vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[pn];else{const c=this.transports_=[];for(const f of ra.ALL_TRANSPORTS)f&&f.isAvailable()&&c.push(f);ra.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ra.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=6e4,G1=5e3,V1=10*1024,X1=100*1024,Hu="t",Tp="d",Q1="s",wp="r",Z1="e",Ap="o",Rp="a",Op="n",Dp="p",K1="h";class F1{constructor(n,i,r,c,f,d,p,_,g,C){this.id=n,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=c,this.authToken_=f,this.onMessage_=d,this.onReady_=p,this.onDisconnect_=_,this.onKill_=g,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_a("c:"+this.id+":"),this.transportManager_=new ra(i),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));const c=n.healthyTimeout||0;c>0&&(this.healthyTimeout_=ea(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>X1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>V1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(c)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return i=>{n===this.conn_?this.onConnectionLost_(i):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return i=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(i):n===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(n){const i={t:"d",d:n};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(Hu in n){const i=n[Hu];i===Rp?this.upgradeIfSecondaryHealthy_():i===wp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===Ap&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const i=Ks("t",n),r=Ks("d",n);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Dp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Rp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Op,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const i=Ks("t",n),r=Ks("d",n);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const i=Ks(Hu,n);if(Tp in n){const r=n[Tp];if(i===K1){const c={...r};this.repoInfo_.isUsingEmulator&&(c.h=this.repoInfo_.host),this.onHandshake_(c)}else if(i===Op){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let c=0;c<this.pendingDataMessages.length;++c)this.onDataMessage_(this.pendingDataMessages[c]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===Q1?this.onConnectionShutdown_(r):i===wp?this.onReset_(r):i===Z1?$u("Server Error: "+r):i===Ap?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$u("Unknown control packet command: "+i)}}onHandshake_(n){const i=n.ts,r=n.v,c=n.h;this.sessionId=n.s,this.repoInfo_.host=c,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),vf!==r&&Vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),ea(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Y1))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,i){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ea(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(G1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Dp,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{put(n,i,r,c){}merge(n,i,r,c){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,i,r){}onDisconnectMerge(n,i,r){}onDisconnectCancel(n,i){}reportStats(n){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(n){this.allowedEvents_=n,this.listeners_={},Y(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...i){if(Array.isArray(this.listeners_[n])){const r=[...this.listeners_[n]];for(let c=0;c<r.length;c++)r[c].callback.apply(r[c].context,i)}}on(n,i,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:i,context:r});const c=this.getInitialEvent(n);c&&i.apply(r,c)}off(n,i,r){this.validateEventType_(n);const c=this.listeners_[n]||[];for(let f=0;f<c.length;f++)if(c[f].callback===i&&(!r||r===c[f].context)){c.splice(f,1);return}}validateEventType_(n){Y(this.allowedEvents_.find(i=>i===n),"Unknown event: "+n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends qg{static getInstance(){return new Qr}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return Y(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=32,jp=768;class Be{constructor(n,i){if(i===void 0){this.pieces_=n.split("/");let r=0;for(let c=0;c<this.pieces_.length;c++)this.pieces_[c].length>0&&(this.pieces_[r]=this.pieces_[c],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=i}toString(){let n="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(n+="/"+this.pieces_[i]);return n||"/"}}function Oe(){return new Be("")}function me(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Nl(s){return s.pieces_.length-s.pieceNum_}function Ge(s){let n=s.pieceNum_;return n<s.pieces_.length&&n++,new Be(s.pieces_,n)}function Yg(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function J1(s){let n="";for(let i=s.pieceNum_;i<s.pieces_.length;i++)s.pieces_[i]!==""&&(n+="/"+encodeURIComponent(String(s.pieces_[i])));return n||"/"}function Gg(s,n=0){return s.pieces_.slice(s.pieceNum_+n)}function Vg(s){if(s.pieceNum_>=s.pieces_.length)return null;const n=[];for(let i=s.pieceNum_;i<s.pieces_.length-1;i++)n.push(s.pieces_[i]);return new Be(n,0)}function dt(s,n){const i=[];for(let r=s.pieceNum_;r<s.pieces_.length;r++)i.push(s.pieces_[r]);if(n instanceof Be)for(let r=n.pieceNum_;r<n.pieces_.length;r++)i.push(n.pieces_[r]);else{const r=n.split("/");for(let c=0;c<r.length;c++)r[c].length>0&&i.push(r[c])}return new Be(i,0)}function ve(s){return s.pieceNum_>=s.pieces_.length}function Yt(s,n){const i=me(s),r=me(n);if(i===null)return n;if(i===r)return Yt(Ge(s),Ge(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+s+")")}function Sf(s,n){if(Nl(s)!==Nl(n))return!1;for(let i=s.pieceNum_,r=n.pieceNum_;i<=s.pieces_.length;i++,r++)if(s.pieces_[i]!==n.pieces_[r])return!1;return!0}function gn(s,n){let i=s.pieceNum_,r=n.pieceNum_;if(Nl(s)>Nl(n))return!1;for(;i<s.pieces_.length;){if(s.pieces_[i]!==n.pieces_[r])return!1;++i,++r}return!0}class W1{constructor(n,i){this.errorPrefix_=i,this.parts_=Gg(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=so(this.parts_[r]);Xg(this)}}function $1(s,n){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(n),s.byteLength_+=so(n),Xg(s)}function P1(s){const n=s.parts_.pop();s.byteLength_-=so(n),s.parts_.length>0&&(s.byteLength_-=1)}function Xg(s){if(s.byteLength_>jp)throw new Error(s.errorPrefix_+"has a key path longer than "+jp+" bytes ("+s.byteLength_+").");if(s.parts_.length>Mp)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Mp+") or object contains a cycle "+Zl(s))}function Zl(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends qg{static getInstance(){return new Ef}constructor(){super(["visible"]);let n,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(n){return Y(n==="visible","Unknown event type: "+n),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=1e3,eS=300*1e3,zp=30*1e3,tS=1.3,nS=3e4,lS="server_kill",kp=3;class Qn extends Bg{constructor(n,i,r,c,f,d,p,_){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=c,this.onServerInfoUpdate_=f,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=Qn.nextPersistentConnectionId_++,this.log_=_a("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fs,this.maxReconnectDelay_=eS,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ef.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Qr.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){const c=++this.requestNumber_,f={r:c,a:n,b:i};this.log_(bt(f)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(f),r&&(this.requestCBHash_[c]=r)}get(n){this.initConnection_();const i=new io,c={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:d=>{const p=d.d;d.s==="ok"?i.resolve(p):i.reject(p)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const f=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(f),i.promise}listen(n,i,r,c){this.initConnection_();const f=n._queryIdentifier,d=n._path.toString();this.log_("Listen called for "+d+" "+f),this.listens.has(d)||this.listens.set(d,new Map),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(d).has(f),"listen() called twice for same path/queryId.");const p={onComplete:c,hashFn:i,query:n,tag:r};this.listens.get(d).set(f,p),this.connected_&&this.sendListen_(p)}sendGet_(n){const i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){const i=n.query,r=i._path.toString(),c=i._queryIdentifier;this.log_("Listen on "+r+" for "+c);const f={p:r},d="q";n.tag&&(f.q=i._queryObject,f.t=n.tag),f.h=n.hashFn(),this.sendRequest(d,f,p=>{const _=p.d,g=p.s;Qn.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(c))===n&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(r,c),n.onComplete&&n.onComplete(g,_))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Jn(n,"w")){const r=Zi(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const c='".indexOn": "'+i._queryParams.getIndex().toString()+'"',f=i._path.toString();Vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${f} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Gb(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zp)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,i=Yb(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,c=>{const f=c.s,d=c.d||"error";this.authToken_===n&&(f==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(f,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){const r=n._path.toString(),c=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+c),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,c)&&this.connected_&&this.sendUnlisten_(r,c,n._queryObject,i)}sendUnlisten_(n,i,r,c){this.log_("Unlisten on "+n+" for "+i);const f={p:n},d="n";c&&(f.q=r,f.t=c),this.sendRequest(d,f)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,c){const f={p:i,d:r};this.log_("onDisconnect "+n,f),this.sendRequest(n,f,d=>{c&&setTimeout(()=>{c(d.s,d.d)},Math.floor(0))})}put(n,i,r,c){this.putInternal("p",n,i,r,c)}merge(n,i,r,c){this.putInternal("m",n,i,r,c)}putInternal(n,i,r,c,f){this.initConnection_();const d={p:i,d:r};f!==void 0&&(d.h=f),this.outstandingPuts_.push({action:n,request:d,onComplete:c}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+i)}sendPut_(n){const i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,c=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,f=>{this.log_(i+" response",f),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),c&&c(f.s,f.d)})}reportStats(n){if(this.connected_){const i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){const f=r.d;this.log_("reportStats","Error sending stats: "+f)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+bt(n));const i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):$u("Unrecognized action received from server: "+bt(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>nS&&(this.reconnectDelay_=Fs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*tS)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+Qn.nextConnectionId_++,f=this.lastSessionId;let d=!1,p=null;const _=function(){p?p.close():(d=!0,r())},g=function(v){Y(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(v)};this.realtime_={close:_,sendRequest:g};const C=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,b]=await Promise.all([this.authTokenProvider_.getToken(C),this.appCheckTokenProvider_.getToken(C)]);d?Mt("getToken() completed but was canceled"):(Mt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=b&&b.token,p=new F1(c,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,z=>{Vt(z+" ("+this.repoInfo_.toString()+")"),this.interrupt(lS)},f))}catch(v){this.log_("Failed to get token: "+v),d||(this.repoInfo_.nodeAdmin&&Vt(v),_())}}}interrupt(n){Mt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Mt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],up(this.interruptReasons_)&&(this.reconnectDelay_=Fs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(f=>yf(f)).join("$"):r="default";const c=this.removeListen_(n,r);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(n,i){const r=new Be(n).toString();let c;if(this.listens.has(r)){const f=this.listens.get(r);c=f.get(i),f.delete(i),f.size===0&&this.listens.delete(r)}else c=void 0;return c}onAuthRevoked_(n,i){Mt("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=kp&&(this.reconnectDelay_=zp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Mt("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=kp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let i="js";n["sdk."+i+"."+yg.replace(/\./g,"-")]=1,cg()?n["framework.cordova"]=1:kb()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Qr.getInstance().currentlyOnline();return up(this.interruptReasons_)&&n}}Qn.nextPersistentConnectionId_=0;Qn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(n,i){this.name=n,this.node=i}static Wrap(n,i){return new pe(n,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,i){const r=new pe(Ki,n),c=new pe(Ki,i);return this.compare(r,c)!==0}minPost(){return pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lr;class Qg extends ao{static get __EMPTY_NODE(){return Lr}static set __EMPTY_NODE(n){Lr=n}compare(n,i){return $i(n.name,i.name)}isDefinedOn(n){throw Wi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,i){return!1}minPost(){return pe.MIN}maxPost(){return new pe(Jl,Lr)}makePost(n,i){return Y(typeof n=="string","KeyIndex indexValue must always be a string."),new pe(n,Lr)}toString(){return".key"}}const Xi=new Qg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(n,i,r,c,f=null){this.isReverse_=c,this.resultGenerator_=f,this.nodeStack_=[];let d=1;for(;!n.isEmpty();)if(n=n,d=i?r(n.key,i):1,c&&(d*=-1),d<0)this.isReverse_?n=n.left:n=n.right;else if(d===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(n.key,n.value):i={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class vt{constructor(n,i,r,c,f){this.key=n,this.value=i,this.color=r??vt.RED,this.left=c??Gt.EMPTY_NODE,this.right=f??Gt.EMPTY_NODE}copy(n,i,r,c,f){return new vt(n??this.key,i??this.value,r??this.color,c??this.left,f??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let c=this;const f=r(n,c.key);return f<0?c=c.copy(null,null,null,c.left.insert(n,i,r),null):f===0?c=c.copy(null,i,null,null,null):c=c.copy(null,null,null,null,c.right.insert(n,i,r)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,c;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Gt.EMPTY_NODE;c=r.right.min_(),r=r.copy(c.key,c.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}vt.RED=!0;vt.BLACK=!1;class iS{copy(n,i,r,c,f){return this}insert(n,i,r){return new vt(n,i,null)}remove(n,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Gt{constructor(n,i=Gt.EMPTY_NODE){this.comparator_=n,this.root_=i}insert(n,i){return new Gt(this.comparator_,this.root_.insert(n,i,this.comparator_).copy(null,null,vt.BLACK,null,null))}remove(n){return new Gt(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,vt.BLACK,null,null))}get(n){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(n,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(n){let i,r=this.root_,c=null;for(;!r.isEmpty();)if(i=this.comparator_(n,r.key),i===0){if(r.left.isEmpty())return c?c.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(c=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Ir(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,i){return new Ir(this.root_,n,this.comparator_,!1,i)}getReverseIteratorFrom(n,i){return new Ir(this.root_,n,this.comparator_,!0,i)}getReverseIterator(n){return new Ir(this.root_,null,this.comparator_,!0,n)}}Gt.EMPTY_NODE=new iS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(s,n){return $i(s.name,n.name)}function Cf(s,n){return $i(s,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef;function aS(s){ef=s}const Zg=function(s){return typeof s=="number"?"number:"+Eg(s):"string:"+s},Kg=function(s){if(s.isLeafNode()){const n=s.val();Y(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Jn(n,".sv"),"Priority must be a string or number.")}else Y(s===ef||s.isEmpty(),"priority of unexpected type.");Y(s===ef||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up;class yt{static set __childrenNodeConstructor(n){Up=n}static get __childrenNodeConstructor(){return Up}constructor(n,i=yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Kg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new yt(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ve(n)?this:me(n)===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){const r=me(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(Y(r!==".priority"||Nl(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ge(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Zg(this.priorityNode_.val())+":");const i=typeof this.value_;n+=i+":",i==="number"?n+=Eg(this.value_):n+=this.value_,this.lazyHash_=bg(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===yt.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof yt.__childrenNodeConstructor?-1:(Y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const i=typeof n.value_,r=typeof this.value_,c=yt.VALUE_TYPE_ORDER.indexOf(i),f=yt.VALUE_TYPE_ORDER.indexOf(r);return Y(c>=0,"Unknown leaf type: "+i),Y(f>=0,"Unknown leaf type: "+r),c===f?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:f-c}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg,Jg;function rS(s){Fg=s}function oS(s){Jg=s}class cS extends ao{compare(n,i){const r=n.node.getPriority(),c=i.node.getPriority(),f=r.compareTo(c);return f===0?$i(n.name,i.name):f}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,i){return!n.getPriority().equals(i.getPriority())}minPost(){return pe.MIN}maxPost(){return new pe(Jl,new yt("[PRIORITY-POST]",Jg))}makePost(n,i){const r=Fg(n);return new pe(i,new yt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Pe=new cS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=Math.log(2);class fS{constructor(n){const i=f=>parseInt(Math.log(f)/uS,10),r=f=>parseInt(Array(f+1).join("1"),2);this.count=i(n+1),this.current_=this.count-1;const c=r(this.count);this.bits_=n+1&c}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Zr=function(s,n,i,r){s.sort(n);const c=function(_,g){const C=g-_;let v,b;if(C===0)return null;if(C===1)return v=s[_],b=i?i(v):v,new vt(b,v.node,vt.BLACK,null,null);{const z=parseInt(C/2,10)+_,I=c(_,z),X=c(z+1,g);return v=s[z],b=i?i(v):v,new vt(b,v.node,vt.BLACK,I,X)}},f=function(_){let g=null,C=null,v=s.length;const b=function(I,X){const re=v-I,P=v;v-=I;const ge=c(re+1,P),W=s[re],le=i?i(W):W;z(new vt(le,W.node,X,null,ge))},z=function(I){g?(g.left=I,g=I):(C=I,g=I)};for(let I=0;I<_.count;++I){const X=_.nextBitIsOne(),re=Math.pow(2,_.count-(I+1));X?b(re,vt.BLACK):(b(re,vt.BLACK),b(re,vt.RED))}return C},d=new fS(s.length),p=f(d);return new Gt(r||n,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu;const qi={};class Xn{static get Default(){return Y(qi&&Pe,"ChildrenNode.ts has not been loaded"),Bu=Bu||new Xn({".priority":qi},{".priority":Pe}),Bu}constructor(n,i){this.indexes_=n,this.indexSet_=i}get(n){const i=Zi(this.indexes_,n);if(!i)throw new Error("No index defined for "+n);return i instanceof Gt?i:null}hasIndex(n){return Jn(this.indexSet_,n.toString())}addIndex(n,i){Y(n!==Xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let c=!1;const f=i.getIterator(pe.Wrap);let d=f.getNext();for(;d;)c=c||n.isDefinedOn(d.node),r.push(d),d=f.getNext();let p;c?p=Zr(r,n.getCompare()):p=qi;const _=n.toString(),g={...this.indexSet_};g[_]=n;const C={...this.indexes_};return C[_]=p,new Xn(C,g)}addToIndexes(n,i){const r=qr(this.indexes_,(c,f)=>{const d=Zi(this.indexSet_,f);if(Y(d,"Missing index implementation for "+f),c===qi)if(d.isDefinedOn(n.node)){const p=[],_=i.getIterator(pe.Wrap);let g=_.getNext();for(;g;)g.name!==n.name&&p.push(g),g=_.getNext();return p.push(n),Zr(p,d.getCompare())}else return qi;else{const p=i.get(n.name);let _=c;return p&&(_=_.remove(new pe(n.name,p))),_.insert(n,n.node)}});return new Xn(r,this.indexSet_)}removeFromIndexes(n,i){const r=qr(this.indexes_,c=>{if(c===qi)return c;{const f=i.get(n.name);return f?c.remove(new pe(n.name,f)):c}});return new Xn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js;class ne{static get EMPTY_NODE(){return Js||(Js=new ne(new Gt(Cf),null,Xn.Default))}constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Kg(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Js}updatePriority(n){return this.children_.isEmpty()?this:new ne(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const i=this.children_.get(n);return i===null?Js:i}}getChild(n){const i=me(n);return i===null?this:this.getImmediateChild(i).getChild(Ge(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(Y(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{const r=new pe(n,i);let c,f;i.isEmpty()?(c=this.children_.remove(n),f=this.indexMap_.removeFromIndexes(r,this.children_)):(c=this.children_.insert(n,i),f=this.indexMap_.addToIndexes(r,this.children_));const d=c.isEmpty()?Js:this.priorityNode_;return new ne(c,d,f)}}updateChild(n,i){const r=me(n);if(r===null)return i;{Y(me(n)!==".priority"||Nl(n)===1,".priority must be the last token in a path");const c=this.getImmediateChild(r).updateChild(Ge(n),i);return this.updateImmediateChild(r,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const i={};let r=0,c=0,f=!0;if(this.forEachChild(Pe,(d,p)=>{i[d]=p.val(n),r++,f&&ne.INTEGER_REGEXP_.test(d)?c=Math.max(c,Number(d)):f=!1}),!n&&f&&c<2*r){const d=[];for(const p in i)d[p]=i[p];return d}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Zg(this.getPriority().val())+":"),this.forEachChild(Pe,(i,r)=>{const c=r.hash();c!==""&&(n+=":"+i+":"+c)}),this.lazyHash_=n===""?"":bg(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){const c=this.resolveIndex_(r);if(c){const f=c.getPredecessorKey(new pe(n,i));return f?f.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const i=this.resolveIndex_(n);if(i){const r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){const i=this.getFirstChildName(n);return i?new pe(i,this.children_.get(i)):null}getLastChildName(n){const i=this.resolveIndex_(n);if(i){const r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){const i=this.getLastChildName(n);return i?new pe(i,this.children_.get(i)):null}forEachChild(n,i){const r=this.resolveIndex_(n);return r?r.inorderTraversal(c=>i(c.name,c.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,c=>c);{const c=this.children_.getIteratorFrom(n.name,pe.Wrap);let f=c.peek();for(;f!=null&&i.compare(f,n)<0;)c.getNext(),f=c.peek();return c}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,c=>c);{const c=this.children_.getReverseIteratorFrom(n.name,pe.Wrap);let f=c.peek();for(;f!=null&&i.compare(f,n)>0;)c.getNext(),f=c.peek();return c}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ya?-1:0}withIndex(n){if(n===Xi||this.indexMap_.hasIndex(n))return this;{const i=this.indexMap_.addIndex(n,this.children_);return new ne(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Xi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const r=this.getIterator(Pe),c=i.getIterator(Pe);let f=r.getNext(),d=c.getNext();for(;f&&d;){if(f.name!==d.name||!f.node.equals(d.node))return!1;f=r.getNext(),d=c.getNext()}return f===null&&d===null}else return!1;else return!1}}resolveIndex_(n){return n===Xi?null:this.indexMap_.get(n.toString())}}ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class dS extends ne{constructor(){super(new Gt(Cf),ne.EMPTY_NODE,Xn.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return ne.EMPTY_NODE}isEmpty(){return!1}}const ya=new dS;Object.defineProperties(pe,{MIN:{value:new pe(Ki,ne.EMPTY_NODE)},MAX:{value:new pe(Jl,ya)}});Qg.__EMPTY_NODE=ne.EMPTY_NODE;yt.__childrenNodeConstructor=ne;aS(ya);oS(ya);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=!0;function At(s,n=null){if(s===null)return ne.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(n=s[".priority"]),Y(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const i=s;return new yt(i,At(n))}if(!(s instanceof Array)&&hS){const i=[];let r=!1;if(Xt(s,(d,p)=>{if(d.substring(0,1)!=="."){const _=At(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),i.push(new pe(d,_)))}}),i.length===0)return ne.EMPTY_NODE;const f=Zr(i,sS,d=>d.name,Cf);if(r){const d=Zr(i,Pe.getCompare());return new ne(f,At(n),new Xn({".priority":d},{".priority":Pe}))}else return new ne(f,At(n),Xn.Default)}else{let i=ne.EMPTY_NODE;return Xt(s,(r,c)=>{if(Jn(s,r)&&r.substring(0,1)!=="."){const f=At(c);(f.isLeafNode()||!f.isEmpty())&&(i=i.updateImmediateChild(r,f))}}),i.updatePriority(At(n))}}rS(At);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS extends ao{constructor(n){super(),this.indexPath_=n,Y(!ve(n)&&me(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,i){const r=this.extractChild(n.node),c=this.extractChild(i.node),f=r.compareTo(c);return f===0?$i(n.name,i.name):f}makePost(n,i){const r=At(n),c=ne.EMPTY_NODE.updateChild(this.indexPath_,r);return new pe(i,c)}maxPost(){const n=ne.EMPTY_NODE.updateChild(this.indexPath_,ya);return new pe(Jl,n)}toString(){return Gg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends ao{compare(n,i){const r=n.node.compareTo(i.node);return r===0?$i(n.name,i.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,i){return!n.equals(i)}minPost(){return pe.MIN}maxPost(){return pe.MAX}makePost(n,i){const r=At(n);return new pe(i,r)}toString(){return".value"}}const gS=new pS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(s){return{type:"value",snapshotNode:s}}function Fi(s,n){return{type:"child_added",snapshotNode:n,childName:s}}function oa(s,n){return{type:"child_removed",snapshotNode:n,childName:s}}function ca(s,n,i){return{type:"child_changed",snapshotNode:n,childName:s,oldSnap:i}}function _S(s,n){return{type:"child_moved",snapshotNode:n,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(n){this.index_=n}updateChild(n,i,r,c,f,d){Y(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=n.getImmediateChild(i);return p.getChild(c).equals(r.getChild(c))&&p.isEmpty()===r.isEmpty()||(d!=null&&(r.isEmpty()?n.hasChild(i)?d.trackChildChange(oa(i,p)):Y(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?d.trackChildChange(Fi(i,r)):d.trackChildChange(ca(i,r,p))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(i,r).withIndex(this.index_)}updateFullNode(n,i,r){return r!=null&&(n.isLeafNode()||n.forEachChild(Pe,(c,f)=>{i.hasChild(c)||r.trackChildChange(oa(c,f))}),i.isLeafNode()||i.forEachChild(Pe,(c,f)=>{if(n.hasChild(c)){const d=n.getImmediateChild(c);d.equals(f)||r.trackChildChange(ca(c,f,d))}else r.trackChildChange(Fi(c,f))})),i.withIndex(this.index_)}updatePriority(n,i){return n.isEmpty()?ne.EMPTY_NODE:n.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(n){this.indexedFilter_=new Nf(n.getIndex()),this.index_=n.getIndex(),this.startPost_=ua.getStartPost_(n),this.endPost_=ua.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return i&&r}updateChild(n,i,r,c,f,d){return this.matches(new pe(i,r))||(r=ne.EMPTY_NODE),this.indexedFilter_.updateChild(n,i,r,c,f,d)}updateFullNode(n,i,r){i.isLeafNode()&&(i=ne.EMPTY_NODE);let c=i.withIndex(this.index_);c=c.updatePriority(ne.EMPTY_NODE);const f=this;return i.forEachChild(Pe,(d,p)=>{f.matches(new pe(d,p))||(c=c.updateImmediateChild(d,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,c,r)}updatePriority(n,i){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const i=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),i)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const i=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),i)}else return n.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(n){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=i=>{const r=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ua(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,i,r,c,f,d){return this.rangedFilter_.matches(new pe(i,r))||(r=ne.EMPTY_NODE),n.getImmediateChild(i).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,i,r,c,f,d):this.fullLimitUpdateChild_(n,i,r,f,d)}updateFullNode(n,i,r){let c;if(i.isLeafNode()||i.isEmpty())c=ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){c=ne.EMPTY_NODE.withIndex(this.index_);let f;this.reverse_?f=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;f.hasNext()&&d<this.limit_;){const p=f.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))c=c.updateImmediateChild(p.name,p.node),d++;else break;else continue}}else{c=i.withIndex(this.index_),c=c.updatePriority(ne.EMPTY_NODE);let f;this.reverse_?f=c.getReverseIterator(this.index_):f=c.getIterator(this.index_);let d=0;for(;f.hasNext();){const p=f.getNext();d<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?d++:c=c.updateImmediateChild(p.name,ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,c,r)}updatePriority(n,i){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,i,r,c,f){let d;if(this.reverse_){const v=this.index_.getCompare();d=(b,z)=>v(z,b)}else d=this.index_.getCompare();const p=n;Y(p.numChildren()===this.limit_,"");const _=new pe(i,r),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),C=this.rangedFilter_.matches(_);if(p.hasChild(i)){const v=p.getImmediateChild(i);let b=c.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===i||p.hasChild(b.name));)b=c.getChildAfterChild(this.index_,b,this.reverse_);const z=b==null?1:d(b,_);if(C&&!r.isEmpty()&&z>=0)return f!=null&&f.trackChildChange(ca(i,r,v)),p.updateImmediateChild(i,r);{f!=null&&f.trackChildChange(oa(i,v));const X=p.updateImmediateChild(i,ne.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(f!=null&&f.trackChildChange(Fi(b.name,b.node)),X.updateImmediateChild(b.name,b.node)):X}}else return r.isEmpty()?n:C&&d(g,_)>=0?(f!=null&&(f.trackChildChange(oa(g.name,g.node)),f.trackChildChange(Fi(i,r))),p.updateImmediateChild(i,r).updateImmediateChild(g.name,ne.EMPTY_NODE)):n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ki}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pe}copy(){const n=new Tf;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function vS(s){return s.loadsAllData()?new Nf(s.getIndex()):s.hasLimit()?new yS(s):new ua(s)}function Lp(s){const n={};if(s.isDefault())return n;let i;if(s.index_===Pe?i="$priority":s.index_===gS?i="$value":s.index_===Xi?i="$key":(Y(s.index_ instanceof mS,"Unrecognized index type!"),i=s.index_.toString()),n.orderBy=bt(i),s.startSet_){const r=s.startAfterSet_?"startAfter":"startAt";n[r]=bt(s.indexStartValue_),s.startNameSet_&&(n[r]+=","+bt(s.indexStartName_))}if(s.endSet_){const r=s.endBeforeSet_?"endBefore":"endAt";n[r]=bt(s.indexEndValue_),s.endNameSet_&&(n[r]+=","+bt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?n.limitToFirst=s.limit_:n.limitToLast=s.limit_),n}function Ip(s){const n={};if(s.startSet_&&(n.sp=s.indexStartValue_,s.startNameSet_&&(n.sn=s.indexStartName_),n.sin=!s.startAfterSet_),s.endSet_&&(n.ep=s.indexEndValue_,s.endNameSet_&&(n.en=s.indexEndName_),n.ein=!s.endBeforeSet_),s.limitSet_){n.l=s.limit_;let i=s.viewFrom_;i===""&&(s.isViewFromLeft()?i="l":i="r"),n.vf=i}return s.index_!==Pe&&(n.i=s.index_.toString()),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Bg{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,i){return i!==void 0?"tag$"+i:(Y(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,i,r,c){super(),this.repoInfo_=n,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=c,this.log_=_a("p:rest:"),this.listens_={}}listen(n,i,r,c){const f=n._path.toString();this.log_("Listen called for "+f+" "+n._queryIdentifier);const d=Kr.getListenId_(n,r),p={};this.listens_[d]=p;const _=Lp(n._queryParams);this.restRequest_(f+".json",_,(g,C)=>{let v=C;if(g===404&&(v=null,g=null),g===null&&this.onDataUpdate_(f,v,!1,r),Zi(this.listens_,d)===p){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",c(b,null)}})}unlisten(n,i){const r=Kr.getListenId_(n,i);delete this.listens_[r]}get(n){const i=Lp(n._queryParams),r=n._path.toString(),c=new io;return this.restRequest_(r+".json",i,(f,d)=>{let p=d;f===404&&(p=null,f=null),f===null?(this.onDataUpdate_(r,p,!1,null),c.resolve(p)):c.reject(new Error(p))}),c.promise}refreshAuthToken(n){}restRequest_(n,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([c,f])=>{c&&c.accessToken&&(i.auth=c.accessToken),f&&f.token&&(i.ac=f.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+Vb(i);this.log_("Sending REST request for "+d);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&p.readyState===4){this.log_("REST Response for "+d+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=ia(p.responseText)}catch{Vt("Failed to parse JSON response for "+d+": "+p.responseText)}r(null,_)}else p.status!==401&&p.status!==404&&Vt("Got unsuccessful REST response for "+d+" Status: "+p.status),r(p.status);r=null}},p.open("GET",d,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.rootNode_=ne.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,i){this.rootNode_=this.rootNode_.updateChild(n,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return{value:null,children:new Map}}function $g(s,n,i){if(ve(n))s.value=i,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(n,i);else{const r=me(n);s.children.has(r)||s.children.set(r,Fr());const c=s.children.get(r);n=Ge(n),$g(c,n,i)}}function tf(s,n,i){s.value!==null?i(n,s.value):xS(s,(r,c)=>{const f=new Be(n.toString()+"/"+r);tf(c,f,i)})}function xS(s,n){s.children.forEach((i,r)=>{n(r,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),i={...n};return this.last_&&Xt(this.last_,(r,c)=>{i[r]=i[r]-c}),this.last_=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=10*1e3,ES=30*1e3,CS=300*1e3;class NS{constructor(n,i){this.server_=i,this.statsToReport_={},this.statsListener_=new SS(n);const r=Hp+(ES-Hp)*Math.random();ea(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const n=this.statsListener_.get(),i={};let r=!1;Xt(n,(c,f)=>{f>0&&Jn(this.statsToReport_,c)&&(i[c]=f,r=!0)}),r&&this.server_.reportStats(i),ea(this.reportStats_.bind(this),Math.floor(Math.random()*2*CS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_n||(_n={}));function Pg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Af(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(n,i,r){this.path=n,this.affectedTree=i,this.revert=r,this.type=_n.ACK_USER_WRITE,this.source=Pg()}operationForChild(n){if(ve(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Be(n));return new Jr(Oe(),i,this.revert)}}else return Y(me(this.path)===n,"operationForChild called for unrelated child."),new Jr(Ge(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(n,i){this.source=n,this.path=i,this.type=_n.LISTEN_COMPLETE}operationForChild(n){return ve(this.path)?new fa(this.source,Oe()):new fa(this.source,Ge(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(n,i,r){this.source=n,this.path=i,this.snap=r,this.type=_n.OVERWRITE}operationForChild(n){return ve(this.path)?new Wl(this.source,Oe(),this.snap.getImmediateChild(n)):new Wl(this.source,Ge(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(n,i,r){this.source=n,this.path=i,this.children=r,this.type=_n.MERGE}operationForChild(n){if(ve(this.path)){const i=this.children.subtree(new Be(n));return i.isEmpty()?null:i.value?new Wl(this.source,Oe(),i.value):new da(this.source,Oe(),i)}else return Y(me(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new da(this.source,Ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(n,i,r){this.node_=n,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(ve(n))return this.isFullyInitialized()&&!this.filtered_;const i=me(n);return this.isCompleteForChild(i)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function wS(s,n,i,r){const c=[],f=[];return n.forEach(d=>{d.type==="child_changed"&&s.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&f.push(_S(d.childName,d.snapshotNode))}),Ws(s,c,"child_removed",n,r,i),Ws(s,c,"child_added",n,r,i),Ws(s,c,"child_moved",f,r,i),Ws(s,c,"child_changed",n,r,i),Ws(s,c,"value",n,r,i),c}function Ws(s,n,i,r,c,f){const d=r.filter(p=>p.type===i);d.sort((p,_)=>RS(s,p,_)),d.forEach(p=>{const _=AS(s,p,f);c.forEach(g=>{g.respondsTo(p.type)&&n.push(g.createEvent(_,s.query_))})})}function AS(s,n,i){return n.type==="value"||n.type==="child_removed"||(n.prevName=i.getPredecessorChildName(n.childName,n.snapshotNode,s.index_)),n}function RS(s,n,i){if(n.childName==null||i.childName==null)throw Wi("Should only compare child_ events.");const r=new pe(n.childName,n.snapshotNode),c=new pe(i.childName,i.snapshotNode);return s.index_.compare(r,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(s,n){return{eventCache:s,serverCache:n}}function ta(s,n,i,r){return ro(new $l(n,i,r),s.serverCache)}function e_(s,n,i,r){return ro(s.eventCache,new $l(n,i,r))}function nf(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function Pl(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu;const OS=()=>(qu||(qu=new Gt(p1)),qu);class Ze{static fromObject(n){let i=new Ze(null);return Xt(n,(r,c)=>{i=i.set(new Be(r),c)}),i}constructor(n,i=OS()){this.value=n,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,i){if(this.value!=null&&i(this.value))return{path:Oe(),value:this.value};if(ve(n))return null;{const r=me(n),c=this.children.get(r);if(c!==null){const f=c.findRootMostMatchingPathAndValue(Ge(n),i);return f!=null?{path:dt(new Be(r),f.path),value:f.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(ve(n))return this;{const i=me(n),r=this.children.get(i);return r!==null?r.subtree(Ge(n)):new Ze(null)}}set(n,i){if(ve(n))return new Ze(i,this.children);{const r=me(n),f=(this.children.get(r)||new Ze(null)).set(Ge(n),i),d=this.children.insert(r,f);return new Ze(this.value,d)}}remove(n){if(ve(n))return this.children.isEmpty()?new Ze(null):new Ze(null,this.children);{const i=me(n),r=this.children.get(i);if(r){const c=r.remove(Ge(n));let f;return c.isEmpty()?f=this.children.remove(i):f=this.children.insert(i,c),this.value===null&&f.isEmpty()?new Ze(null):new Ze(this.value,f)}else return this}}get(n){if(ve(n))return this.value;{const i=me(n),r=this.children.get(i);return r?r.get(Ge(n)):null}}setTree(n,i){if(ve(n))return i;{const r=me(n),f=(this.children.get(r)||new Ze(null)).setTree(Ge(n),i);let d;return f.isEmpty()?d=this.children.remove(r):d=this.children.insert(r,f),new Ze(this.value,d)}}fold(n){return this.fold_(Oe(),n)}fold_(n,i){const r={};return this.children.inorderTraversal((c,f)=>{r[c]=f.fold_(dt(n,c),i)}),i(n,this.value,r)}findOnPath(n,i){return this.findOnPath_(n,Oe(),i)}findOnPath_(n,i,r){const c=this.value?r(i,this.value):!1;if(c)return c;if(ve(n))return null;{const f=me(n),d=this.children.get(f);return d?d.findOnPath_(Ge(n),dt(i,f),r):null}}foreachOnPath(n,i){return this.foreachOnPath_(n,Oe(),i)}foreachOnPath_(n,i,r){if(ve(n))return this;{this.value&&r(i,this.value);const c=me(n),f=this.children.get(c);return f?f.foreachOnPath_(Ge(n),dt(i,c),r):new Ze(null)}}foreach(n){this.foreach_(Oe(),n)}foreach_(n,i){this.children.inorderTraversal((r,c)=>{c.foreach_(dt(n,r),i)}),this.value&&i(n,this.value)}foreachChild(n){this.children.inorderTraversal((i,r)=>{r.value&&n(i,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(n){this.writeTree_=n}static empty(){return new yn(new Ze(null))}}function na(s,n,i){if(ve(n))return new yn(new Ze(i));{const r=s.writeTree_.findRootMostValueAndPath(n);if(r!=null){const c=r.path;let f=r.value;const d=Yt(c,n);return f=f.updateChild(d,i),new yn(s.writeTree_.set(c,f))}else{const c=new Ze(i),f=s.writeTree_.setTree(n,c);return new yn(f)}}}function Bp(s,n,i){let r=s;return Xt(i,(c,f)=>{r=na(r,dt(n,c),f)}),r}function qp(s,n){if(ve(n))return yn.empty();{const i=s.writeTree_.setTree(n,new Ze(null));return new yn(i)}}function lf(s,n){return ei(s,n)!=null}function ei(s,n){const i=s.writeTree_.findRootMostValueAndPath(n);return i!=null?s.writeTree_.get(i.path).getChild(Yt(i.path,n)):null}function Yp(s){const n=[],i=s.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Pe,(r,c)=>{n.push(new pe(r,c))}):s.writeTree_.children.inorderTraversal((r,c)=>{c.value!=null&&n.push(new pe(r,c.value))}),n}function Cl(s,n){if(ve(n))return s;{const i=ei(s,n);return i!=null?new yn(new Ze(i)):new yn(s.writeTree_.subtree(n))}}function sf(s){return s.writeTree_.isEmpty()}function Ji(s,n){return t_(Oe(),s.writeTree_,n)}function t_(s,n,i){if(n.value!=null)return i.updateChild(s,n.value);{let r=null;return n.children.inorderTraversal((c,f)=>{c===".priority"?(Y(f.value!==null,"Priority writes must always be leaf nodes"),r=f.value):i=t_(dt(s,c),f,i)}),!i.getChild(s).isEmpty()&&r!==null&&(i=i.updateChild(dt(s,".priority"),r)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(s,n){return s_(n,s)}function DS(s,n,i,r,c){Y(r>s.lastWriteId,"Stacking an older write on top of newer ones"),c===void 0&&(c=!0),s.allWrites.push({path:n,snap:i,writeId:r,visible:c}),c&&(s.visibleWrites=na(s.visibleWrites,n,i)),s.lastWriteId=r}function MS(s,n){for(let i=0;i<s.allWrites.length;i++){const r=s.allWrites[i];if(r.writeId===n)return r}return null}function jS(s,n){const i=s.allWrites.findIndex(p=>p.writeId===n);Y(i>=0,"removeWrite called with nonexistent writeId.");const r=s.allWrites[i];s.allWrites.splice(i,1);let c=r.visible,f=!1,d=s.allWrites.length-1;for(;c&&d>=0;){const p=s.allWrites[d];p.visible&&(d>=i&&zS(p,r.path)?c=!1:gn(r.path,p.path)&&(f=!0)),d--}if(c){if(f)return kS(s),!0;if(r.snap)s.visibleWrites=qp(s.visibleWrites,r.path);else{const p=r.children;Xt(p,_=>{s.visibleWrites=qp(s.visibleWrites,dt(r.path,_))})}return!0}else return!1}function zS(s,n){if(s.snap)return gn(s.path,n);for(const i in s.children)if(s.children.hasOwnProperty(i)&&gn(dt(s.path,i),n))return!0;return!1}function kS(s){s.visibleWrites=n_(s.allWrites,US,Oe()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function US(s){return s.visible}function n_(s,n,i){let r=yn.empty();for(let c=0;c<s.length;++c){const f=s[c];if(n(f)){const d=f.path;let p;if(f.snap)gn(i,d)?(p=Yt(i,d),r=na(r,p,f.snap)):gn(d,i)&&(p=Yt(d,i),r=na(r,Oe(),f.snap.getChild(p)));else if(f.children){if(gn(i,d))p=Yt(i,d),r=Bp(r,p,f.children);else if(gn(d,i))if(p=Yt(d,i),ve(p))r=Bp(r,Oe(),f.children);else{const _=Zi(f.children,me(p));if(_){const g=_.getChild(Ge(p));r=na(r,Oe(),g)}}}else throw Wi("WriteRecord should have .snap or .children")}}return r}function l_(s,n,i,r,c){if(!r&&!c){const f=ei(s.visibleWrites,n);if(f!=null)return f;{const d=Cl(s.visibleWrites,n);if(sf(d))return i;if(i==null&&!lf(d,Oe()))return null;{const p=i||ne.EMPTY_NODE;return Ji(d,p)}}}else{const f=Cl(s.visibleWrites,n);if(!c&&sf(f))return i;if(!c&&i==null&&!lf(f,Oe()))return null;{const d=function(g){return(g.visible||c)&&(!r||!~r.indexOf(g.writeId))&&(gn(g.path,n)||gn(n,g.path))},p=n_(s.allWrites,d,n),_=i||ne.EMPTY_NODE;return Ji(p,_)}}}function LS(s,n,i){let r=ne.EMPTY_NODE;const c=ei(s.visibleWrites,n);if(c)return c.isLeafNode()||c.forEachChild(Pe,(f,d)=>{r=r.updateImmediateChild(f,d)}),r;if(i){const f=Cl(s.visibleWrites,n);return i.forEachChild(Pe,(d,p)=>{const _=Ji(Cl(f,new Be(d)),p);r=r.updateImmediateChild(d,_)}),Yp(f).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}else{const f=Cl(s.visibleWrites,n);return Yp(f).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}}function IS(s,n,i,r,c){Y(r||c,"Either existingEventSnap or existingServerSnap must exist");const f=dt(n,i);if(lf(s.visibleWrites,f))return null;{const d=Cl(s.visibleWrites,f);return sf(d)?c.getChild(i):Ji(d,c.getChild(i))}}function HS(s,n,i,r){const c=dt(n,i),f=ei(s.visibleWrites,c);if(f!=null)return f;if(r.isCompleteForChild(i)){const d=Cl(s.visibleWrites,c);return Ji(d,r.getNode().getImmediateChild(i))}else return null}function BS(s,n){return ei(s.visibleWrites,n)}function qS(s,n,i,r,c,f,d){let p;const _=Cl(s.visibleWrites,n),g=ei(_,Oe());if(g!=null)p=g;else if(i!=null)p=Ji(_,i);else return[];if(p=p.withIndex(d),!p.isEmpty()&&!p.isLeafNode()){const C=[],v=d.getCompare(),b=f?p.getReverseIteratorFrom(r,d):p.getIteratorFrom(r,d);let z=b.getNext();for(;z&&C.length<c;)v(z,r)!==0&&C.push(z),z=b.getNext();return C}else return[]}function YS(){return{visibleWrites:yn.empty(),allWrites:[],lastWriteId:-1}}function Wr(s,n,i,r){return l_(s.writeTree,s.treePath,n,i,r)}function Of(s,n){return LS(s.writeTree,s.treePath,n)}function Gp(s,n,i,r){return IS(s.writeTree,s.treePath,n,i,r)}function $r(s,n){return BS(s.writeTree,dt(s.treePath,n))}function GS(s,n,i,r,c,f){return qS(s.writeTree,s.treePath,n,i,r,c,f)}function Df(s,n,i){return HS(s.writeTree,s.treePath,n,i)}function i_(s,n){return s_(dt(s.treePath,n),s.writeTree)}function s_(s,n){return{treePath:s,writeTree:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.changeMap=new Map}trackChildChange(n){const i=n.type,r=n.childName;Y(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Y(r!==".priority","Only non-priority child changes can be tracked.");const c=this.changeMap.get(r);if(c){const f=c.type;if(i==="child_added"&&f==="child_removed")this.changeMap.set(r,ca(r,n.snapshotNode,c.snapshotNode));else if(i==="child_removed"&&f==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&f==="child_changed")this.changeMap.set(r,oa(r,c.oldSnap));else if(i==="child_changed"&&f==="child_added")this.changeMap.set(r,Fi(r,n.snapshotNode));else if(i==="child_changed"&&f==="child_changed")this.changeMap.set(r,ca(r,n.snapshotNode,c.oldSnap));else throw Wi("Illegal combination of changes: "+n+" occurred after "+c)}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{getCompleteChild(n){return null}getChildAfterChild(n,i,r){return null}}const a_=new XS;class Mf{constructor(n,i,r=null){this.writes_=n,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(n){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(n))return i.getNode().getImmediateChild(n);{const r=this.optCompleteServerCache_!=null?new $l(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Df(this.writes_,n,r)}}getChildAfterChild(n,i,r){const c=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pl(this.viewCache_),f=GS(this.writes_,c,i,1,r,n);return f.length===0?null:f[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(s){return{filter:s}}function ZS(s,n){Y(n.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Y(n.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function KS(s,n,i,r,c){const f=new VS;let d,p;if(i.type===_n.OVERWRITE){const g=i;g.source.fromUser?d=af(s,n,g.path,g.snap,r,c,f):(Y(g.source.fromServer,"Unknown source."),p=g.source.tagged||n.serverCache.isFiltered()&&!ve(g.path),d=Pr(s,n,g.path,g.snap,r,c,p,f))}else if(i.type===_n.MERGE){const g=i;g.source.fromUser?d=JS(s,n,g.path,g.children,r,c,f):(Y(g.source.fromServer,"Unknown source."),p=g.source.tagged||n.serverCache.isFiltered(),d=rf(s,n,g.path,g.children,r,c,p,f))}else if(i.type===_n.ACK_USER_WRITE){const g=i;g.revert?d=PS(s,n,g.path,r,c,f):d=WS(s,n,g.path,g.affectedTree,r,c,f)}else if(i.type===_n.LISTEN_COMPLETE)d=$S(s,n,i.path,r,f);else throw Wi("Unknown operation type: "+i.type);const _=f.getChanges();return FS(n,d,_),{viewCache:d,changes:_}}function FS(s,n,i){const r=n.eventCache;if(r.isFullyInitialized()){const c=r.getNode().isLeafNode()||r.getNode().isEmpty(),f=nf(s);(i.length>0||!s.eventCache.isFullyInitialized()||c&&!r.getNode().equals(f)||!r.getNode().getPriority().equals(f.getPriority()))&&i.push(Wg(nf(n)))}}function r_(s,n,i,r,c,f){const d=n.eventCache;if($r(r,i)!=null)return n;{let p,_;if(ve(i))if(Y(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const g=Pl(n),C=g instanceof ne?g:ne.EMPTY_NODE,v=Of(r,C);p=s.filter.updateFullNode(n.eventCache.getNode(),v,f)}else{const g=Wr(r,Pl(n));p=s.filter.updateFullNode(n.eventCache.getNode(),g,f)}else{const g=me(i);if(g===".priority"){Y(Nl(i)===1,"Can't have a priority with additional path components");const C=d.getNode();_=n.serverCache.getNode();const v=Gp(r,i,C,_);v!=null?p=s.filter.updatePriority(C,v):p=d.getNode()}else{const C=Ge(i);let v;if(d.isCompleteForChild(g)){_=n.serverCache.getNode();const b=Gp(r,i,d.getNode(),_);b!=null?v=d.getNode().getImmediateChild(g).updateChild(C,b):v=d.getNode().getImmediateChild(g)}else v=Df(r,g,n.serverCache);v!=null?p=s.filter.updateChild(d.getNode(),g,v,C,c,f):p=d.getNode()}}return ta(n,p,d.isFullyInitialized()||ve(i),s.filter.filtersNodes())}}function Pr(s,n,i,r,c,f,d,p){const _=n.serverCache;let g;const C=d?s.filter:s.filter.getIndexedFilter();if(ve(i))g=C.updateFullNode(_.getNode(),r,null);else if(C.filtersNodes()&&!_.isFiltered()){const z=_.getNode().updateChild(i,r);g=C.updateFullNode(_.getNode(),z,null)}else{const z=me(i);if(!_.isCompleteForPath(i)&&Nl(i)>1)return n;const I=Ge(i),re=_.getNode().getImmediateChild(z).updateChild(I,r);z===".priority"?g=C.updatePriority(_.getNode(),re):g=C.updateChild(_.getNode(),z,re,I,a_,null)}const v=e_(n,g,_.isFullyInitialized()||ve(i),C.filtersNodes()),b=new Mf(c,v,f);return r_(s,v,i,c,b,p)}function af(s,n,i,r,c,f,d){const p=n.eventCache;let _,g;const C=new Mf(c,n,f);if(ve(i))g=s.filter.updateFullNode(n.eventCache.getNode(),r,d),_=ta(n,g,!0,s.filter.filtersNodes());else{const v=me(i);if(v===".priority")g=s.filter.updatePriority(n.eventCache.getNode(),r),_=ta(n,g,p.isFullyInitialized(),p.isFiltered());else{const b=Ge(i),z=p.getNode().getImmediateChild(v);let I;if(ve(b))I=r;else{const X=C.getCompleteChild(v);X!=null?Yg(b)===".priority"&&X.getChild(Vg(b)).isEmpty()?I=X:I=X.updateChild(b,r):I=ne.EMPTY_NODE}if(z.equals(I))_=n;else{const X=s.filter.updateChild(p.getNode(),v,I,b,C,d);_=ta(n,X,p.isFullyInitialized(),s.filter.filtersNodes())}}}return _}function Vp(s,n){return s.eventCache.isCompleteForChild(n)}function JS(s,n,i,r,c,f,d){let p=n;return r.foreach((_,g)=>{const C=dt(i,_);Vp(n,me(C))&&(p=af(s,p,C,g,c,f,d))}),r.foreach((_,g)=>{const C=dt(i,_);Vp(n,me(C))||(p=af(s,p,C,g,c,f,d))}),p}function Xp(s,n,i){return i.foreach((r,c)=>{n=n.updateChild(r,c)}),n}function rf(s,n,i,r,c,f,d,p){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let _=n,g;ve(i)?g=r:g=new Ze(null).setTree(i,r);const C=n.serverCache.getNode();return g.children.inorderTraversal((v,b)=>{if(C.hasChild(v)){const z=n.serverCache.getNode().getImmediateChild(v),I=Xp(s,z,b);_=Pr(s,_,new Be(v),I,c,f,d,p)}}),g.children.inorderTraversal((v,b)=>{const z=!n.serverCache.isCompleteForChild(v)&&b.value===null;if(!C.hasChild(v)&&!z){const I=n.serverCache.getNode().getImmediateChild(v),X=Xp(s,I,b);_=Pr(s,_,new Be(v),X,c,f,d,p)}}),_}function WS(s,n,i,r,c,f,d){if($r(c,i)!=null)return n;const p=n.serverCache.isFiltered(),_=n.serverCache;if(r.value!=null){if(ve(i)&&_.isFullyInitialized()||_.isCompleteForPath(i))return Pr(s,n,i,_.getNode().getChild(i),c,f,p,d);if(ve(i)){let g=new Ze(null);return _.getNode().forEachChild(Xi,(C,v)=>{g=g.set(new Be(C),v)}),rf(s,n,i,g,c,f,p,d)}else return n}else{let g=new Ze(null);return r.foreach((C,v)=>{const b=dt(i,C);_.isCompleteForPath(b)&&(g=g.set(C,_.getNode().getChild(b)))}),rf(s,n,i,g,c,f,p,d)}}function $S(s,n,i,r,c){const f=n.serverCache,d=e_(n,f.getNode(),f.isFullyInitialized()||ve(i),f.isFiltered());return r_(s,d,i,r,a_,c)}function PS(s,n,i,r,c,f){let d;if($r(r,i)!=null)return n;{const p=new Mf(r,n,c),_=n.eventCache.getNode();let g;if(ve(i)||me(i)===".priority"){let C;if(n.serverCache.isFullyInitialized())C=Wr(r,Pl(n));else{const v=n.serverCache.getNode();Y(v instanceof ne,"serverChildren would be complete if leaf node"),C=Of(r,v)}C=C,g=s.filter.updateFullNode(_,C,f)}else{const C=me(i);let v=Df(r,C,n.serverCache);v==null&&n.serverCache.isCompleteForChild(C)&&(v=_.getImmediateChild(C)),v!=null?g=s.filter.updateChild(_,C,v,Ge(i),p,f):n.eventCache.getNode().hasChild(C)?g=s.filter.updateChild(_,C,ne.EMPTY_NODE,Ge(i),p,f):g=_,g.isEmpty()&&n.serverCache.isFullyInitialized()&&(d=Wr(r,Pl(n)),d.isLeafNode()&&(g=s.filter.updateFullNode(g,d,f)))}return d=n.serverCache.isFullyInitialized()||$r(r,Oe())!=null,ta(n,g,d,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(n,i){this.query_=n,this.eventRegistrations_=[];const r=this.query_._queryParams,c=new Nf(r.getIndex()),f=vS(r);this.processor_=QS(f);const d=i.serverCache,p=i.eventCache,_=c.updateFullNode(ne.EMPTY_NODE,d.getNode(),null),g=f.updateFullNode(ne.EMPTY_NODE,p.getNode(),null),C=new $l(_,d.isFullyInitialized(),c.filtersNodes()),v=new $l(g,p.isFullyInitialized(),f.filtersNodes());this.viewCache_=ro(v,C),this.eventGenerator_=new TS(this.query_)}get query(){return this.query_}}function t2(s){return s.viewCache_.serverCache.getNode()}function n2(s,n){const i=Pl(s.viewCache_);return i&&(s.query._queryParams.loadsAllData()||!ve(n)&&!i.getImmediateChild(me(n)).isEmpty())?i.getChild(n):null}function Qp(s){return s.eventRegistrations_.length===0}function l2(s,n){s.eventRegistrations_.push(n)}function Zp(s,n,i){const r=[];if(i){Y(n==null,"A cancel should cancel all event registrations.");const c=s.query._path;s.eventRegistrations_.forEach(f=>{const d=f.createCancelEvent(i,c);d&&r.push(d)})}if(n){let c=[];for(let f=0;f<s.eventRegistrations_.length;++f){const d=s.eventRegistrations_[f];if(!d.matches(n))c.push(d);else if(n.hasAnyCallback()){c=c.concat(s.eventRegistrations_.slice(f+1));break}}s.eventRegistrations_=c}else s.eventRegistrations_=[];return r}function Kp(s,n,i,r){n.type===_n.MERGE&&n.source.queryId!==null&&(Y(Pl(s.viewCache_),"We should always have a full cache before handling merges"),Y(nf(s.viewCache_),"Missing event cache, even though we have a server cache"));const c=s.viewCache_,f=KS(s.processor_,c,n,i,r);return ZS(s.processor_,f.viewCache),Y(f.viewCache.serverCache.isFullyInitialized()||!c.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=f.viewCache,o_(s,f.changes,f.viewCache.eventCache.getNode(),null)}function i2(s,n){const i=s.viewCache_.eventCache,r=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Pe,(f,d)=>{r.push(Fi(f,d))}),i.isFullyInitialized()&&r.push(Wg(i.getNode())),o_(s,r,i.getNode(),n)}function o_(s,n,i,r){const c=r?[r]:s.eventRegistrations_;return wS(s.eventGenerator_,n,i,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo;class s2{constructor(){this.views=new Map}}function a2(s){Y(!eo,"__referenceConstructor has already been defined"),eo=s}function r2(){return Y(eo,"Reference.ts has not been loaded"),eo}function o2(s){return s.views.size===0}function jf(s,n,i,r){const c=n.source.queryId;if(c!==null){const f=s.views.get(c);return Y(f!=null,"SyncTree gave us an op for an invalid query."),Kp(f,n,i,r)}else{let f=[];for(const d of s.views.values())f=f.concat(Kp(d,n,i,r));return f}}function c2(s,n,i,r,c){const f=n._queryIdentifier,d=s.views.get(f);if(!d){let p=Wr(i,c?r:null),_=!1;p?_=!0:r instanceof ne?(p=Of(i,r),_=!1):(p=ne.EMPTY_NODE,_=!1);const g=ro(new $l(p,_,!1),new $l(r,c,!1));return new e2(n,g)}return d}function u2(s,n,i,r,c,f){const d=c2(s,n,r,c,f);return s.views.has(n._queryIdentifier)||s.views.set(n._queryIdentifier,d),l2(d,i),i2(d,i)}function f2(s,n,i,r){const c=n._queryIdentifier,f=[];let d=[];const p=Tl(s);if(c==="default")for(const[_,g]of s.views.entries())d=d.concat(Zp(g,i,r)),Qp(g)&&(s.views.delete(_),g.query._queryParams.loadsAllData()||f.push(g.query));else{const _=s.views.get(c);_&&(d=d.concat(Zp(_,i,r)),Qp(_)&&(s.views.delete(c),_.query._queryParams.loadsAllData()||f.push(_.query)))}return p&&!Tl(s)&&f.push(new(r2())(n._repo,n._path)),{removed:f,events:d}}function c_(s){const n=[];for(const i of s.views.values())i.query._queryParams.loadsAllData()||n.push(i);return n}function Qi(s,n){let i=null;for(const r of s.views.values())i=i||n2(r,n);return i}function u_(s,n){if(n._queryParams.loadsAllData())return oo(s);{const r=n._queryIdentifier;return s.views.get(r)}}function f_(s,n){return u_(s,n)!=null}function Tl(s){return oo(s)!=null}function oo(s){for(const n of s.views.values())if(n.query._queryParams.loadsAllData())return n;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to;function d2(s){Y(!to,"__referenceConstructor has already been defined"),to=s}function h2(){return Y(to,"Reference.ts has not been loaded"),to}let m2=1;class Fp{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Ze(null),this.pendingWriteTree_=YS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function d_(s,n,i,r,c){return DS(s.pendingWriteTree_,n,i,r,c),c?va(s,new Wl(Pg(),n,i)):[]}function Fl(s,n,i=!1){const r=MS(s.pendingWriteTree_,n);if(jS(s.pendingWriteTree_,n)){let f=new Ze(null);return r.snap!=null?f=f.set(Oe(),!0):Xt(r.children,d=>{f=f.set(new Be(d),!0)}),va(s,new Jr(r.path,f,i))}else return[]}function co(s,n,i){return va(s,new Wl(wf(),n,i))}function p2(s,n,i){const r=Ze.fromObject(i);return va(s,new da(wf(),n,r))}function g2(s,n){return va(s,new fa(wf(),n))}function _2(s,n,i){const r=kf(s,i);if(r){const c=Uf(r),f=c.path,d=c.queryId,p=Yt(f,n),_=new fa(Af(d),p);return Lf(s,f,_)}else return[]}function of(s,n,i,r,c=!1){const f=n._path,d=s.syncPointTree_.get(f);let p=[];if(d&&(n._queryIdentifier==="default"||f_(d,n))){const _=f2(d,n,i,r);o2(d)&&(s.syncPointTree_=s.syncPointTree_.remove(f));const g=_.removed;if(p=_.events,!c){const C=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,v=s.syncPointTree_.findOnPath(f,(b,z)=>Tl(z));if(C&&!v){const b=s.syncPointTree_.subtree(f);if(!b.isEmpty()){const z=b2(b);for(let I=0;I<z.length;++I){const X=z[I],re=X.query,P=p_(s,X);s.listenProvider_.startListening(la(re),no(s,re),P.hashFn,P.onComplete)}}}!v&&g.length>0&&!r&&(C?s.listenProvider_.stopListening(la(n),null):g.forEach(b=>{const z=s.queryToTagMap.get(uo(b));s.listenProvider_.stopListening(la(b),z)}))}x2(s,g)}return p}function y2(s,n,i,r){const c=kf(s,r);if(c!=null){const f=Uf(c),d=f.path,p=f.queryId,_=Yt(d,n),g=new Wl(Af(p),_,i);return Lf(s,d,g)}else return[]}function v2(s,n,i,r){const c=kf(s,r);if(c){const f=Uf(c),d=f.path,p=f.queryId,_=Yt(d,n),g=Ze.fromObject(i),C=new da(Af(p),_,g);return Lf(s,d,C)}else return[]}function Jp(s,n,i,r=!1){const c=n._path;let f=null,d=!1;s.syncPointTree_.foreachOnPath(c,(b,z)=>{const I=Yt(b,c);f=f||Qi(z,I),d=d||Tl(z)});let p=s.syncPointTree_.get(c);p?(d=d||Tl(p),f=f||Qi(p,Oe())):(p=new s2,s.syncPointTree_=s.syncPointTree_.set(c,p));let _;f!=null?_=!0:(_=!1,f=ne.EMPTY_NODE,s.syncPointTree_.subtree(c).foreachChild((z,I)=>{const X=Qi(I,Oe());X&&(f=f.updateImmediateChild(z,X))}));const g=f_(p,n);if(!g&&!n._queryParams.loadsAllData()){const b=uo(n);Y(!s.queryToTagMap.has(b),"View does not exist, but we have a tag");const z=S2();s.queryToTagMap.set(b,z),s.tagToQueryMap.set(z,b)}const C=Rf(s.pendingWriteTree_,c);let v=u2(p,n,i,C,f,_);if(!g&&!d&&!r){const b=u_(p,n);v=v.concat(E2(s,n,b))}return v}function zf(s,n,i){const c=s.pendingWriteTree_,f=s.syncPointTree_.findOnPath(n,(d,p)=>{const _=Yt(d,n),g=Qi(p,_);if(g)return g});return l_(c,n,f,i,!0)}function va(s,n){return h_(n,s.syncPointTree_,null,Rf(s.pendingWriteTree_,Oe()))}function h_(s,n,i,r){if(ve(s.path))return m_(s,n,i,r);{const c=n.get(Oe());i==null&&c!=null&&(i=Qi(c,Oe()));let f=[];const d=me(s.path),p=s.operationForChild(d),_=n.children.get(d);if(_&&p){const g=i?i.getImmediateChild(d):null,C=i_(r,d);f=f.concat(h_(p,_,g,C))}return c&&(f=f.concat(jf(c,s,r,i))),f}}function m_(s,n,i,r){const c=n.get(Oe());i==null&&c!=null&&(i=Qi(c,Oe()));let f=[];return n.children.inorderTraversal((d,p)=>{const _=i?i.getImmediateChild(d):null,g=i_(r,d),C=s.operationForChild(d);C&&(f=f.concat(m_(C,p,_,g)))}),c&&(f=f.concat(jf(c,s,r,i))),f}function p_(s,n){const i=n.query,r=no(s,i);return{hashFn:()=>(t2(n)||ne.EMPTY_NODE).hash(),onComplete:c=>{if(c==="ok")return r?_2(s,i._path,r):g2(s,i._path);{const f=y1(c,i);return of(s,i,null,f)}}}}function no(s,n){const i=uo(n);return s.queryToTagMap.get(i)}function uo(s){return s._path.toString()+"$"+s._queryIdentifier}function kf(s,n){return s.tagToQueryMap.get(n)}function Uf(s){const n=s.indexOf("$");return Y(n!==-1&&n<s.length-1,"Bad queryKey."),{queryId:s.substr(n+1),path:new Be(s.substr(0,n))}}function Lf(s,n,i){const r=s.syncPointTree_.get(n);Y(r,"Missing sync point for query tag that we're tracking");const c=Rf(s.pendingWriteTree_,n);return jf(r,i,c,null)}function b2(s){return s.fold((n,i,r)=>{if(i&&Tl(i))return[oo(i)];{let c=[];return i&&(c=c_(i)),Xt(r,(f,d)=>{c=c.concat(d)}),c}})}function la(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(h2())(s._repo,s._path):s}function x2(s,n){for(let i=0;i<n.length;++i){const r=n[i];if(!r._queryParams.loadsAllData()){const c=uo(r),f=s.queryToTagMap.get(c);s.queryToTagMap.delete(c),s.tagToQueryMap.delete(f)}}}function S2(){return m2++}function E2(s,n,i){const r=n._path,c=no(s,n),f=p_(s,i),d=s.listenProvider_.startListening(la(n),c,f.hashFn,f.onComplete),p=s.syncPointTree_.subtree(r);if(c)Y(!Tl(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((g,C,v)=>{if(!ve(g)&&C&&Tl(C))return[oo(C).query];{let b=[];return C&&(b=b.concat(c_(C).map(z=>z.query))),Xt(v,(z,I)=>{b=b.concat(I)}),b}});for(let g=0;g<_.length;++g){const C=_[g];s.listenProvider_.stopListening(la(C),no(s,C))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(n){this.node_=n}getImmediateChild(n){const i=this.node_.getImmediateChild(n);return new If(i)}node(){return this.node_}}class Hf{constructor(n,i){this.syncTree_=n,this.path_=i}getImmediateChild(n){const i=dt(this.path_,n);return new Hf(this.syncTree_,i)}node(){return zf(this.syncTree_,this.path_)}}const C2=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},Wp=function(s,n,i){if(!s||typeof s!="object")return s;if(Y(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return N2(s[".sv"],n,i);if(typeof s[".sv"]=="object")return T2(s[".sv"],n);Y(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},N2=function(s,n,i){switch(s){case"timestamp":return i.timestamp;default:Y(!1,"Unexpected server value: "+s)}},T2=function(s,n,i){s.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const r=s.increment;typeof r!="number"&&Y(!1,"Unexpected increment value: "+r);const c=n.node();if(Y(c!==null&&typeof c<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!c.isLeafNode())return r;const d=c.getValue();return typeof d!="number"?r:d+r},w2=function(s,n,i,r){return Bf(n,new Hf(i,s),r)},g_=function(s,n,i){return Bf(s,new If(n),i)};function Bf(s,n,i){const r=s.getPriority().val(),c=Wp(r,n.getImmediateChild(".priority"),i);let f;if(s.isLeafNode()){const d=s,p=Wp(d.getValue(),n,i);return p!==d.getValue()||c!==d.getPriority().val()?new yt(p,At(c)):s}else{const d=s;return f=d,c!==d.getPriority().val()&&(f=f.updatePriority(new yt(c))),d.forEachChild(Pe,(p,_)=>{const g=Bf(_,n.getImmediateChild(p),i);g!==_&&(f=f.updateImmediateChild(p,g))}),f}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(n="",i=null,r={children:{},childCount:0}){this.name=n,this.parent=i,this.node=r}}function Yf(s,n){let i=n instanceof Be?n:new Be(n),r=s,c=me(i);for(;c!==null;){const f=Zi(r.node.children,c)||{children:{},childCount:0};r=new qf(c,r,f),i=Ge(i),c=me(i)}return r}function es(s){return s.node.value}function __(s,n){s.node.value=n,cf(s)}function y_(s){return s.node.childCount>0}function A2(s){return es(s)===void 0&&!y_(s)}function fo(s,n){Xt(s.node.children,(i,r)=>{n(new qf(i,s,r))})}function v_(s,n,i,r){i&&n(s),fo(s,c=>{v_(c,n,!0)})}function R2(s,n,i){let r=s.parent;for(;r!==null;){if(n(r))return!0;r=r.parent}return!1}function ba(s){return new Be(s.parent===null?s.name:ba(s.parent)+"/"+s.name)}function cf(s){s.parent!==null&&O2(s.parent,s.name,s)}function O2(s,n,i){const r=A2(i),c=Jn(s.node.children,n);r&&c?(delete s.node.children[n],s.node.childCount--,cf(s)):!r&&!c&&(s.node.children[n]=i.node,s.node.childCount++,cf(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/[\[\].#$\/\u0000-\u001F\u007F]/,M2=/[\[\].#$\u0000-\u001F\u007F]/,Yu=10*1024*1024,b_=function(s){return typeof s=="string"&&s.length!==0&&!D2.test(s)},x_=function(s){return typeof s=="string"&&s.length!==0&&!M2.test(s)},j2=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),x_(s)},z2=function(s,n,i,r){Gf(gf(s,"value"),n,i)},Gf=function(s,n,i){const r=i instanceof Be?new W1(i,s):i;if(n===void 0)throw new Error(s+"contains undefined "+Zl(r));if(typeof n=="function")throw new Error(s+"contains a function "+Zl(r)+" with contents = "+n.toString());if(xg(n))throw new Error(s+"contains "+n.toString()+" "+Zl(r));if(typeof n=="string"&&n.length>Yu/3&&so(n)>Yu)throw new Error(s+"contains a string greater than "+Yu+" utf8 bytes "+Zl(r)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let c=!1,f=!1;if(Xt(n,(d,p)=>{if(d===".value")c=!0;else if(d!==".priority"&&d!==".sv"&&(f=!0,!b_(d)))throw new Error(s+" contains an invalid key ("+d+") "+Zl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$1(r,d),Gf(s,p,r),P1(r)}),c&&f)throw new Error(s+' contains ".value" child '+Zl(r)+" in addition to actual children.")}},S_=function(s,n,i,r){if(!x_(i))throw new Error(gf(s,n)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},k2=function(s,n,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),S_(s,n,i)},U2=function(s,n){if(me(n)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},L2=function(s,n){const i=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!b_(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!j2(i))throw new Error(gf(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vf(s,n){let i=null;for(let r=0;r<n.length;r++){const c=n[r],f=c.getPath();i!==null&&!Sf(f,i.path)&&(s.eventLists_.push(i),i=null),i===null&&(i={events:[],path:f}),i.events.push(c)}i&&s.eventLists_.push(i)}function E_(s,n,i){Vf(s,i),C_(s,r=>Sf(r,n))}function Fn(s,n,i){Vf(s,i),C_(s,r=>gn(r,n)||gn(n,r))}function C_(s,n){s.recursionDepth_++;let i=!0;for(let r=0;r<s.eventLists_.length;r++){const c=s.eventLists_[r];if(c){const f=c.path;n(f)?(H2(s.eventLists_[r]),s.eventLists_[r]=null):i=!1}}i&&(s.eventLists_=[]),s.recursionDepth_--}function H2(s){for(let n=0;n<s.events.length;n++){const i=s.events[n];if(i!==null){s.events[n]=null;const r=i.getEventRunner();Ps&&Mt("event: "+i.toString()),Pi(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="repo_interrupt",q2=25;class Y2{constructor(n,i,r,c){this.repoInfo_=n,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=c,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new I2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fr(),this.transactionQueueTree_=new qf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function G2(s,n,i){if(s.stats_=bf(s.repoInfo_),s.forceRestClient_||S1())s.server_=new Kr(s.repoInfo_,(r,c,f,d)=>{$p(s,r,c,f,d)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>Pp(s,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}s.persistentConnection_=new Qn(s.repoInfo_,n,(r,c,f,d)=>{$p(s,r,c,f,d)},r=>{Pp(s,r)},r=>{X2(s,r)},s.authTokenProvider_,s.appCheckProvider_,i),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(r=>{s.server_.refreshAuthToken(r)}),s.appCheckProvider_.addTokenChangeListener(r=>{s.server_.refreshAppCheckToken(r.token)}),s.statsReporter_=w1(s.repoInfo_,()=>new NS(s.stats_,s.server_)),s.infoData_=new bS,s.infoSyncTree_=new Fp({startListening:(r,c,f,d)=>{let p=[];const _=s.infoData_.getNode(r._path);return _.isEmpty()||(p=co(s.infoSyncTree_,r._path,_),setTimeout(()=>{d("ok")},0)),p},stopListening:()=>{}}),Qf(s,"connected",!1),s.serverSyncTree_=new Fp({startListening:(r,c,f,d)=>(s.server_.listen(r,f,c,(p,_)=>{const g=d(p,_);Fn(s.eventQueue_,r._path,g)}),[]),stopListening:(r,c)=>{s.server_.unlisten(r,c)}})}function V2(s){const i=s.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Xf(s){return C2({timestamp:V2(s)})}function $p(s,n,i,r,c){s.dataUpdateCount++;const f=new Be(n);i=s.interceptServerDataCallback_?s.interceptServerDataCallback_(n,i):i;let d=[];if(c)if(r){const _=qr(i,g=>At(g));d=v2(s.serverSyncTree_,f,_,c)}else{const _=At(i);d=y2(s.serverSyncTree_,f,_,c)}else if(r){const _=qr(i,g=>At(g));d=p2(s.serverSyncTree_,f,_)}else{const _=At(i);d=co(s.serverSyncTree_,f,_)}let p=f;d.length>0&&(p=ho(s,f)),Fn(s.eventQueue_,p,d)}function Pp(s,n){Qf(s,"connected",n),n===!1&&Z2(s)}function X2(s,n){Xt(n,(i,r)=>{Qf(s,i,r)})}function Qf(s,n,i){const r=new Be("/.info/"+n),c=At(i);s.infoData_.updateSnapshot(r,c);const f=co(s.infoSyncTree_,r,c);Fn(s.eventQueue_,r,f)}function N_(s){return s.nextWriteId_++}function Q2(s,n,i,r,c){Zf(s,"set",{path:n.toString(),value:i,priority:r});const f=Xf(s),d=At(i,r),p=zf(s.serverSyncTree_,n),_=g_(d,p,f),g=N_(s),C=d_(s.serverSyncTree_,n,_,g,!0);Vf(s.eventQueue_,C),s.server_.put(n.toString(),d.val(!0),(b,z)=>{const I=b==="ok";I||Vt("set at "+n+" failed: "+b);const X=Fl(s.serverSyncTree_,g,!I);Fn(s.eventQueue_,n,X),W2(s,c,b,z)});const v=O_(s,n);ho(s,v),Fn(s.eventQueue_,v,[])}function Z2(s){Zf(s,"onDisconnectEvents");const n=Xf(s),i=Fr();tf(s.onDisconnect_,Oe(),(c,f)=>{const d=w2(c,f,s.serverSyncTree_,n);$g(i,c,d)});let r=[];tf(i,Oe(),(c,f)=>{r=r.concat(co(s.serverSyncTree_,c,f));const d=O_(s,c);ho(s,d)}),s.onDisconnect_=Fr(),Fn(s.eventQueue_,Oe(),r)}function K2(s,n,i){let r;me(n._path)===".info"?r=Jp(s.infoSyncTree_,n,i):r=Jp(s.serverSyncTree_,n,i),E_(s.eventQueue_,n._path,r)}function F2(s,n,i){let r;me(n._path)===".info"?r=of(s.infoSyncTree_,n,i):r=of(s.serverSyncTree_,n,i),E_(s.eventQueue_,n._path,r)}function J2(s){s.persistentConnection_&&s.persistentConnection_.interrupt(B2)}function Zf(s,...n){let i="";s.persistentConnection_&&(i=s.persistentConnection_.id+":"),Mt(i,...n)}function W2(s,n,i,r){n&&Pi(()=>{if(i==="ok")n(null);else{const c=(i||"error").toUpperCase();let f=c;r&&(f+=": "+r);const d=new Error(f);d.code=c,n(d)}})}function T_(s,n,i){return zf(s.serverSyncTree_,n,i)||ne.EMPTY_NODE}function Kf(s,n=s.transactionQueueTree_){if(n||mo(s,n),es(n)){const i=A_(s,n);Y(i.length>0,"Sending zero length transaction queue"),i.every(c=>c.status===0)&&$2(s,ba(n),i)}else y_(n)&&fo(n,i=>{Kf(s,i)})}function $2(s,n,i){const r=i.map(g=>g.currentWriteId),c=T_(s,n,r);let f=c;const d=c.hash();for(let g=0;g<i.length;g++){const C=i[g];Y(C.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const v=Yt(n,C.path);f=f.updateChild(v,C.currentOutputSnapshotRaw)}const p=f.val(!0),_=n;s.server_.put(_.toString(),p,g=>{Zf(s,"transaction put response",{path:_.toString(),status:g});let C=[];if(g==="ok"){const v=[];for(let b=0;b<i.length;b++)i[b].status=2,C=C.concat(Fl(s.serverSyncTree_,i[b].currentWriteId)),i[b].onComplete&&v.push(()=>i[b].onComplete(null,!0,i[b].currentOutputSnapshotResolved)),i[b].unwatcher();mo(s,Yf(s.transactionQueueTree_,n)),Kf(s,s.transactionQueueTree_),Fn(s.eventQueue_,n,C);for(let b=0;b<v.length;b++)Pi(v[b])}else{if(g==="datastale")for(let v=0;v<i.length;v++)i[v].status===3?i[v].status=4:i[v].status=0;else{Vt("transaction at "+_.toString()+" failed: "+g);for(let v=0;v<i.length;v++)i[v].status=4,i[v].abortReason=g}ho(s,n)}},d)}function ho(s,n){const i=w_(s,n),r=ba(i),c=A_(s,i);return P2(s,c,r),r}function P2(s,n,i){if(n.length===0)return;const r=[];let c=[];const d=n.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<n.length;p++){const _=n[p],g=Yt(i,_.path);let C=!1,v;if(Y(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),_.status===4)C=!0,v=_.abortReason,c=c.concat(Fl(s.serverSyncTree_,_.currentWriteId,!0));else if(_.status===0)if(_.retryCount>=q2)C=!0,v="maxretry",c=c.concat(Fl(s.serverSyncTree_,_.currentWriteId,!0));else{const b=T_(s,_.path,d);_.currentInputSnapshot=b;const z=n[p].update(b.val());if(z!==void 0){Gf("transaction failed: Data returned ",z,_.path);let I=At(z);typeof z=="object"&&z!=null&&Jn(z,".priority")||(I=I.updatePriority(b.getPriority()));const re=_.currentWriteId,P=Xf(s),ge=g_(I,b,P);_.currentOutputSnapshotRaw=I,_.currentOutputSnapshotResolved=ge,_.currentWriteId=N_(s),d.splice(d.indexOf(re),1),c=c.concat(d_(s.serverSyncTree_,_.path,ge,_.currentWriteId,_.applyLocally)),c=c.concat(Fl(s.serverSyncTree_,re,!0))}else C=!0,v="nodata",c=c.concat(Fl(s.serverSyncTree_,_.currentWriteId,!0))}Fn(s.eventQueue_,i,c),c=[],C&&(n[p].status=2,(function(b){setTimeout(b,Math.floor(0))})(n[p].unwatcher),n[p].onComplete&&(v==="nodata"?r.push(()=>n[p].onComplete(null,!1,n[p].currentInputSnapshot)):r.push(()=>n[p].onComplete(new Error(v),!1,null))))}mo(s,s.transactionQueueTree_);for(let p=0;p<r.length;p++)Pi(r[p]);Kf(s,s.transactionQueueTree_)}function w_(s,n){let i,r=s.transactionQueueTree_;for(i=me(n);i!==null&&es(r)===void 0;)r=Yf(r,i),n=Ge(n),i=me(n);return r}function A_(s,n){const i=[];return R_(s,n,i),i.sort((r,c)=>r.order-c.order),i}function R_(s,n,i){const r=es(n);if(r)for(let c=0;c<r.length;c++)i.push(r[c]);fo(n,c=>{R_(s,c,i)})}function mo(s,n){const i=es(n);if(i){let r=0;for(let c=0;c<i.length;c++)i[c].status!==2&&(i[r]=i[c],r++);i.length=r,__(n,i.length>0?i:void 0)}fo(n,r=>{mo(s,r)})}function O_(s,n){const i=ba(w_(s,n)),r=Yf(s.transactionQueueTree_,n);return R2(r,c=>{Gu(s,c)}),Gu(s,r),v_(r,c=>{Gu(s,c)}),i}function Gu(s,n){const i=es(n);if(i){const r=[];let c=[],f=-1;for(let d=0;d<i.length;d++)i[d].status===3||(i[d].status===1?(Y(f===d-1,"All SENT items should be at beginning of queue."),f=d,i[d].status=3,i[d].abortReason="set"):(Y(i[d].status===0,"Unexpected transaction status in abort"),i[d].unwatcher(),c=c.concat(Fl(s.serverSyncTree_,i[d].currentWriteId,!0)),i[d].onComplete&&r.push(i[d].onComplete.bind(null,new Error("set"),!1,null))));f===-1?__(n,void 0):i.length=f+1,Fn(s.eventQueue_,ba(n),c);for(let d=0;d<r.length;d++)Pi(r[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(s){let n="";const i=s.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let c=i[r];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch{}n+="/"+c}return n}function tE(s){const n={};s.charAt(0)==="?"&&(s=s.substring(1));for(const i of s.split("&")){if(i.length===0)continue;const r=i.split("=");r.length===2?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vt(`Invalid query segment '${i}' in query '${s}'`)}return n}const eg=function(s,n){const i=nE(s),r=i.namespace;i.domain==="firebase.com"&&Kn(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&Kn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||h1();const c=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new jg(i.host,i.secure,r,c,n,"",r!==i.subdomain),path:new Be(i.pathString)}},nE=function(s){let n="",i="",r="",c="",f="",d=!0,p="https",_=443;if(typeof s=="string"){let g=s.indexOf("//");g>=0&&(p=s.substring(0,g-1),s=s.substring(g+2));let C=s.indexOf("/");C===-1&&(C=s.length);let v=s.indexOf("?");v===-1&&(v=s.length),n=s.substring(0,Math.min(C,v)),C<v&&(c=eE(s.substring(C,v)));const b=tE(s.substring(Math.min(s.length,v)));g=n.indexOf(":"),g>=0?(d=p==="https"||p==="wss",_=parseInt(n.substring(g+1),10)):g=n.length;const z=n.slice(0,g);if(z.toLowerCase()==="localhost")i="localhost";else if(z.split(".").length<=2)i=z;else{const I=n.indexOf(".");r=n.substring(0,I).toLowerCase(),i=n.substring(I+1),f=r}"ns"in b&&(f=b.ns)}return{host:n,port:_,domain:i,subdomain:r,secure:d,scheme:p,pathString:c,namespace:f}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(n,i,r,c){this.eventType=n,this.eventRegistration=i,this.snapshot=r,this.prevName=c}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bt(this.snapshot.exportVal())}}class iE{constructor(n,i,r){this.eventRegistration=n,this.error=i,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(n,i){this.snapshotCallback=n,this.cancelCallback=i}onValue(n,i){this.snapshotCallback.call(null,n,i)}onCancel(n){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(n,i,r,c){this._repo=n,this._path=i,this._queryParams=r,this._orderByCalled=c}get key(){return ve(this._path)?null:Yg(this._path)}get ref(){return new wl(this._repo,this._path)}get _queryIdentifier(){const n=Ip(this._queryParams),i=yf(n);return i==="{}"?"default":i}get _queryObject(){return Ip(this._queryParams)}isEqual(n){if(n=pa(n),!(n instanceof Ff))return!1;const i=this._repo===n._repo,r=Sf(this._path,n._path),c=this._queryIdentifier===n._queryIdentifier;return i&&r&&c}toJSON(){return this.toString()}toString(){return this._repo.toString()+J1(this._path)}}class wl extends Ff{constructor(n,i){super(n,i,new Tf,!1)}get parent(){const n=Vg(this._path);return n===null?null:new wl(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class lo{constructor(n,i,r){this._node=n,this.ref=i,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const i=new Be(n),r=uf(this.ref,n);return new lo(this._node.getChild(i),r,Pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,c)=>n(new lo(c,uf(this.ref,r),Pe)))}hasChild(n){const i=new Be(n);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function D_(s,n){return s=pa(s),s._checkNotDeleted("ref"),n!==void 0?uf(s._root,n):s._root}function uf(s,n){return s=pa(s),me(s._path)===null?k2("child","path",n):S_("child","path",n),new wl(s._repo,dt(s._path,n))}function aE(s,n){s=pa(s),U2("set",s._path),z2("set",n,s._path);const i=new io;return Q2(s._repo,s._path,n,null,i.wrapCallback(()=>{})),i.promise}class Jf{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,i){const r=i._queryParams.getIndex();return new lE("value",this,new lo(n.snapshotNode,new wl(i._repo,i._path),r))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,i){return this.callbackContext.hasCancelCallback?new iE(this,n,i):null}matches(n){return n instanceof Jf?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function rE(s,n,i,r,c){const f=new sE(i,void 0),d=new Jf(f);return K2(s._repo,s,d),()=>F2(s._repo,s,d)}function oE(s,n,i,r){return rE(s,"value",n)}a2(wl);d2(wl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="FIREBASE_DATABASE_EMULATOR_HOST",ff={};let uE=!1;function fE(s,n,i,r){const c=n.lastIndexOf(":"),f=n.substring(0,c),d=pf(f);s.repoInfo_=new jg(n,d,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,i),r&&(s.authTokenProvider_=r)}function dE(s,n,i,r,c){let f=r||s.options.databaseURL;f===void 0&&(s.options.projectId||Kn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mt("Using default host for project ",s.options.projectId),f=`${s.options.projectId}-default-rtdb.firebaseio.com`);let d=eg(f,c),p=d.repoInfo,_;typeof process<"u"&&bp&&(_=bp[cE]),_?(f=`http://${_}?ns=${p.namespace}`,d=eg(f,c),p=d.repoInfo):d.repoInfo.secure;const g=new C1(s.name,s.options,n);L2("Invalid Firebase Database URL",d),ve(d.path)||Kn("Database URL must point to the root of a Firebase Database (not including a child path).");const C=mE(p,s,g,new E1(s,i));return new pE(C,s)}function hE(s,n){const i=ff[n];(!i||i[s.key]!==s)&&Kn(`Database ${n}(${s.repoInfo_}) has already been deleted.`),J2(s),delete i[s.key]}function mE(s,n,i,r){let c=ff[n.name];c||(c={},ff[n.name]=c);let f=c[s.toURLString()];return f&&Kn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),f=new Y2(s,uE,i,r),c[s.toURLString()]=f,f}class pE{constructor(n,i){this._repoInternal=n,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(G2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wl(this._repo,Oe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&Kn("Cannot call "+n+" on a deleted database.")}}function gE(s=Kx(),n){const i=Gx(s,"database").getImmediate({identifier:n});if(!i._instanceStarted){const r=Ab("database");r&&_E(i,...r)}return i}function _E(s,n,i,r={}){s=pa(s),s._checkNotDeleted("useEmulator");const c=`${n}:${i}`,f=s._repoInternal;if(s._instanceStarted){if(c===s._repoInternal.repoInfo_.host&&Yr(r,f.repoInfo_.emulatorOptions))return;Kn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(f.repoInfo_.nodeAdmin)r.mockUserToken&&Kn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Hr(Hr.OWNER);else if(r.mockUserToken){const p=typeof r.mockUserToken=="string"?r.mockUserToken:Ob(r.mockUserToken,s.app.options.projectId);d=new Hr(p)}pf(n)&&(Rb(n),jb("Database",!0)),fE(f,c,r,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(s){r1(Zx),Vr(new sa("database",(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),c=n.getProvider("auth-internal"),f=n.getProvider("app-check-internal");return dE(r,c,f,i)},"PUBLIC").setMultipleInstances(!0)),Gi(xp,Sp,s),Gi(xp,Sp,"esm2020")}Qn.prototype.simpleListen=function(s,n){this.sendRequest("q",{p:s},n)};Qn.prototype.echo=function(s,n){this.sendRequest("echo",{d:s},n)};yE();const vE={apiKey:"AIzaSyCIA80U-Nb235O5SG_2d1TzdylvYQrzNUc",authDomain:"razlom-db061.firebaseapp.com",databaseURL:"https://razlom-db061-default-rtdb.firebaseio.com",projectId:"razlom-db061",storageBucket:"razlom-db061.appspot.com",messagingSenderId:"343432819418",appId:"1:343432819418:web:73f0fedc8a5e5a32912be3"};let tg,ha;try{tg=pg(vE),ha=gE(tg)}catch(s){console.error("Firebase init error:",s)}const bE=(s,n)=>{if(!ha)return()=>{};const i=D_(ha,`rooms/${s}`);return oE(i,c=>{const f=c.val();f&&n(f)})},xE=async(s,n)=>{if(!ha)return;const i=D_(ha,`rooms/${s}`);await aE(i,n)},Vu="rp_haven_master_data_v3",Xu="global_chronicles_main",SE=()=>{const[s,n]=F.useState("characters"),[i,r]=F.useState(null),[c,f]=F.useState(""),[d,p]=F.useState({}),[_,g]=F.useState(!1),[C,v]=F.useState(!1),[b,z]=F.useState(null),[I,X]=F.useState(!1),[re,P]=F.useState(!1),[ge,W]=F.useState(!0),[le,et]=F.useState(()=>{const B=localStorage.getItem(Vu);if(B)try{const x=JSON.parse(B);return{characters:x.characters||rp,worlds:x.worlds||[],notes:x.notes||[],availableTags:x.availableTags||ap}}catch(x){console.error("Failed to parse storage",x)}return{characters:rp,worlds:[],notes:[],availableTags:ap}});F.useEffect(()=>{if(ge){console.log(`Subscribing to global room: ${Xu}`);const B=bE(Xu,x=>{console.log("Received update from cloud"),x&&(et(x),localStorage.setItem(Vu,JSON.stringify(x)))});return()=>B()}},[ge]);const Me=B=>{et(B),localStorage.setItem(Vu,JSON.stringify(B)),X(!0),setTimeout(()=>X(!1),2e3),ge&&xE(Xu,B)},ue=()=>{W(!0)},lt=()=>{W(!1)},xt=F.useMemo(()=>le.characters.filter(B=>{const x=B.name.toLowerCase().includes(c.toLowerCase()),M=Object.entries(d).every(([q,V])=>{var ie,se;return V==="include"?(ie=B.tags)==null?void 0:ie.includes(q):V==="exclude"?!((se=B.tags)!=null&&se.includes(q)):!0});return x&&M}),[c,d,le.characters]),Rt=B=>{p(x=>{const M=x[B]||"none";let q="none";M==="none"?q="include":M==="include"?q="exclude":q="none";const V={...x};return q==="none"?delete V[B]:V[B]=q,V})},ct=F.useMemo(()=>le.characters.find(B=>B.id===i),[i,le.characters]),Fe=B=>{const x=le.characters.some(M=>M.id===B.id)?le.characters.map(M=>M.id===B.id?B:M):[...le.characters,B];Me({...le,characters:x}),v(!1),z(null)},ht=B=>Me({...le,worlds:B}),St=B=>Me({...le,notes:B}),H=B=>Me({...le,availableTags:B}),T=B=>{if(window.confirm("    ?")){const x=le.characters.filter(M=>M.id!==B);Me({...le,characters:x}),i===B&&r(null)}},L=()=>{const B=new Blob([JSON.stringify(le,null,2)],{type:"application/json"}),x=URL.createObjectURL(B),M=document.createElement("a");M.href=x,M.download=`rp-vault-${new Date().toISOString().slice(0,10)}.json`,M.click(),URL.revokeObjectURL(x)},G=B=>{try{const x=JSON.parse(B);if(!window.confirm("!      . ?"))return;const M={characters:x.characters||[],worlds:x.worlds||[],notes:x.notes||[],availableTags:x.availableTags||[]};r(null),z(null),v(!1),Me(M)}catch{alert(":      .")}},Ee=Object.keys(d).length;return m.jsxs(rb,{activeTab:s,setActiveTab:B=>{n(B),r(null),B!=="characters"&&B!=="connections"&&p({})},isAdmin:_,onToggleAdmin:()=>g(!_),onDownloadDB:L,onUploadDB:G,onOpenSync:()=>P(!0),isSyncActive:ge,children:[m.jsx("div",{className:`fixed top-20 md:top-6 right-6 z-[90] transition-all duration-500 pointer-events-none ${I?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:m.jsxs("div",{className:"bg-emerald-950/80 border border-emerald-500/30 backdrop-blur-2xl px-5 py-2.5 rounded-2xl flex items-center gap-3 shadow-2xl",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:`w-2 h-2 rounded-full ${ge?"bg-emerald-500":"bg-stone-500"}`}),ge&&m.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-emerald-500 rounded-full animate-ping"})]}),m.jsx("span",{className:`text-[10px] uppercase tracking-[0.2em] font-black ${ge?"text-emerald-400":"text-stone-400"}`,children:ge?" : Online":" "})]})}),re&&m.jsx(_b,{isConnected:ge,currentRoomId:null,onConnect:ue,onDisconnect:lt,onClose:()=>P(!1)}),m.jsxs("div",{className:"animate-tab-switch",children:[s==="characters"&&m.jsx("div",{className:"relative",children:i?m.jsx("div",{className:"animate-reveal-details",children:ct&&m.jsx(cb,{character:ct,isAdmin:_,allCharacters:le.characters,availableTags:le.availableTags,onBack:()=>r(null),onSave:Fe,onSelectCharacter:r})},`details-${i}`):m.jsxs("div",{className:"animate-reveal-list space-y-8",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-6",children:[m.jsxs("div",{className:"relative flex-grow w-full",children:[m.jsx("input",{type:"text",placeholder:"  ...",value:c,onChange:B=>f(B.target.value),className:"w-full bg-transparent border-none text-stone-300 placeholder-stone-800 focus:ring-0 text-2xl md:text-3xl outline-none font-serif italic py-2 md:py-4"}),m.jsx("div",{className:"h-px w-full bg-gradient-to-r from-stone-900 via-emerald-900/30 to-stone-900"})]}),_&&m.jsx("button",{onClick:()=>{z(null),v(!0)},className:"w-full sm:w-auto whitespace-nowrap bg-white hover:bg-emerald-50 text-black px-6 md:px-8 py-3.5 rounded-full text-[10px] uppercase tracking-widest font-black transition-all shadow-xl flex items-center justify-center gap-2",children:" "})]}),le.availableTags.length>0&&m.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-2 animate-in fade-in slide-in-from-top-4 duration-500",children:[m.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2 w-full sm:w-auto mb-2 sm:mb-0",children:"  :"}),le.availableTags.sort().map(B=>{const x=d[B]||"none";return m.jsxs("button",{onClick:()=>Rt(B),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${x==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":x==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[x==="include"&&m.jsx("span",{className:"text-emerald-500",children:"+"}),x==="exclude"&&m.jsx("span",{className:"text-red-500",children:""}),B]},B)}),Ee>0&&m.jsx("button",{onClick:()=>p({}),className:"ml-2 text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:" "})]})]}),xt.length>0?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-10",children:xt.map(B=>m.jsx(ob,{character:B,onClick:r},B.id))}):m.jsxs("div",{className:"py-20 text-center space-y-4",children:[m.jsx("p",{className:"text-stone-700 italic font-serif text-xl",children:"      ..."}),m.jsx("button",{onClick:()=>{f(""),p({})},className:"text-emerald-500/50 hover:text-emerald-500 text-[10px] uppercase tracking-[0.2em] font-black transition-all",children:" "})]})]},"character-list")}),s==="connections"&&m.jsx(mb,{characters:le.characters,availableTags:le.availableTags,filterStates:d,onToggleTag:Rt,onClearFilters:()=>p({}),onSelectCharacter:B=>{r(B),n("characters")}}),s==="worlds"&&m.jsx(pb,{worlds:le.worlds,onUpdate:ht,isAdmin:_}),s==="notes"&&m.jsx(gb,{notes:le.notes,onUpdate:St,isAdmin:_}),s==="admin"&&_&&m.jsx(fb,{characters:le.characters,availableTags:le.availableTags,onDelete:T,onEdit:B=>{z(B),v(!0)},onAdd:()=>{z(null),v(!0)},onUpdateTags:H})]},s),C&&m.jsx(ub,{initialData:b,availableTags:le.availableTags,onSave:Fe,onClose:()=>{v(!1),z(null)}})]})},M_=document.getElementById("root");if(!M_)throw new Error("Could not find root element to mount to");const EE=ab.createRoot(M_);EE.render(m.jsx($v.StrictMode,{children:m.jsx(SE,{})}));
