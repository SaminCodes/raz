(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=r(a);fetch(a.href,d)}})();function xp(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var tc={exports:{}},qs={},nc={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh;function Bg(){if(oh)return Le;oh=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),y=Symbol.iterator;function x(w){return w===null||typeof w!="object"?null:(w=y&&w[y]||w["@@iterator"],typeof w=="function"?w:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,H={};function Z(w,O,te){this.props=w,this.context=O,this.refs=H,this.updater=te||I}Z.prototype.isReactComponent={},Z.prototype.setState=function(w,O){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,O,"setState")},Z.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function le(){}le.prototype=Z.prototype;function re(w,O,te){this.props=w,this.context=O,this.refs=H,this.updater=te||I}var je=re.prototype=new le;je.constructor=re,D(je,Z.prototype),je.isPureReactComponent=!0;var ue=Array.isArray,Te=Object.prototype.hasOwnProperty,q={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function R(w,O,te){var M,P={},Q=null,pe=null;if(O!=null)for(M in O.ref!==void 0&&(pe=O.ref),O.key!==void 0&&(Q=""+O.key),O)Te.call(O,M)&&!L.hasOwnProperty(M)&&(P[M]=O[M]);var Se=arguments.length-2;if(Se===1)P.children=te;else if(1<Se){for(var T=Array(Se),J=0;J<Se;J++)T[J]=arguments[J+2];P.children=T}if(w&&w.defaultProps)for(M in Se=w.defaultProps,Se)P[M]===void 0&&(P[M]=Se[M]);return{$$typeof:s,type:w,key:Q,ref:pe,props:P,_owner:q.current}}function ke(w,O){return{$$typeof:s,type:w.type,key:O,ref:w.ref,props:w.props,_owner:w._owner}}function ie(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function z(w){var O={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(te){return O[te]})}var ee=/\/+/g;function be(w,O){return typeof w=="object"&&w!==null&&w.key!=null?z(""+w.key):O.toString(36)}function $e(w,O,te,M,P){var Q=typeof w;(Q==="undefined"||Q==="boolean")&&(w=null);var pe=!1;if(w===null)pe=!0;else switch(Q){case"string":case"number":pe=!0;break;case"object":switch(w.$$typeof){case s:case t:pe=!0}}if(pe)return pe=w,P=P(pe),w=M===""?"."+be(pe,0):M,ue(P)?(te="",w!=null&&(te=w.replace(ee,"$&/")+"/"),$e(P,O,te,"",function(J){return J})):P!=null&&(ie(P)&&(P=ke(P,te+(!P.key||pe&&pe.key===P.key?"":(""+P.key).replace(ee,"$&/")+"/")+w)),O.push(P)),1;if(pe=0,M=M===""?".":M+":",ue(w))for(var Se=0;Se<w.length;Se++){Q=w[Se];var T=M+be(Q,Se);pe+=$e(Q,O,te,T,P)}else if(T=x(w),typeof T=="function")for(w=T.call(w),Se=0;!(Q=w.next()).done;)Q=Q.value,T=M+be(Q,Se++),pe+=$e(Q,O,te,T,P);else if(Q==="object")throw O=String(w),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return pe}function tt(w,O,te){if(w==null)return w;var M=[],P=0;return $e(w,M,"","",function(Q){return O.call(te,Q,P++)}),M}function Ye(w){if(w._status===-1){var O=w._result;O=O(),O.then(function(te){(w._status===0||w._status===-1)&&(w._status=1,w._result=te)},function(te){(w._status===0||w._status===-1)&&(w._status=2,w._result=te)}),w._status===-1&&(w._status=0,w._result=O)}if(w._status===1)return w._result.default;throw w._result}var Fe={current:null},V={transition:null},X={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:V,ReactCurrentOwner:q};return Le.Children={map:tt,forEach:function(w,O,te){tt(w,function(){O.apply(this,arguments)},te)},count:function(w){var O=0;return tt(w,function(){O++}),O},toArray:function(w){return tt(w,function(O){return O})||[]},only:function(w){if(!ie(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Le.Component=Z,Le.Fragment=r,Le.Profiler=a,Le.PureComponent=re,Le.StrictMode=o,Le.Suspense=g,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Le.cloneElement=function(w,O,te){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var M=D({},w.props),P=w.key,Q=w.ref,pe=w._owner;if(O!=null){if(O.ref!==void 0&&(Q=O.ref,pe=q.current),O.key!==void 0&&(P=""+O.key),w.type&&w.type.defaultProps)var Se=w.type.defaultProps;for(T in O)Te.call(O,T)&&!L.hasOwnProperty(T)&&(M[T]=O[T]===void 0&&Se!==void 0?Se[T]:O[T])}var T=arguments.length-2;if(T===1)M.children=te;else if(1<T){Se=Array(T);for(var J=0;J<T;J++)Se[J]=arguments[J+2];M.children=Se}return{$$typeof:s,type:w.type,key:P,ref:Q,props:M,_owner:pe}},Le.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:d,_context:w},w.Consumer=w},Le.createElement=R,Le.createFactory=function(w){var O=R.bind(null,w);return O.type=w,O},Le.createRef=function(){return{current:null}},Le.forwardRef=function(w){return{$$typeof:p,render:w}},Le.isValidElement=ie,Le.lazy=function(w){return{$$typeof:k,_payload:{_status:-1,_result:w},_init:Ye}},Le.memo=function(w,O){return{$$typeof:v,type:w,compare:O===void 0?null:O}},Le.startTransition=function(w){var O=V.transition;V.transition={};try{w()}finally{V.transition=O}},Le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Le.useCallback=function(w,O){return Fe.current.useCallback(w,O)},Le.useContext=function(w){return Fe.current.useContext(w)},Le.useDebugValue=function(){},Le.useDeferredValue=function(w){return Fe.current.useDeferredValue(w)},Le.useEffect=function(w,O){return Fe.current.useEffect(w,O)},Le.useId=function(){return Fe.current.useId()},Le.useImperativeHandle=function(w,O,te){return Fe.current.useImperativeHandle(w,O,te)},Le.useInsertionEffect=function(w,O){return Fe.current.useInsertionEffect(w,O)},Le.useLayoutEffect=function(w,O){return Fe.current.useLayoutEffect(w,O)},Le.useMemo=function(w,O){return Fe.current.useMemo(w,O)},Le.useReducer=function(w,O,te){return Fe.current.useReducer(w,O,te)},Le.useRef=function(w){return Fe.current.useRef(w)},Le.useState=function(w){return Fe.current.useState(w)},Le.useSyncExternalStore=function(w,O,te){return Fe.current.useSyncExternalStore(w,O,te)},Le.useTransition=function(){return Fe.current.useTransition()},Le.version="18.2.0",Le}var lh;function Ac(){return lh||(lh=1,nc.exports=Bg()),nc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Wg(){if(ah)return qs;ah=1;var s=Ac(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,v){var k,y={},x=null,I=null;v!==void 0&&(x=""+v),g.key!==void 0&&(x=""+g.key),g.ref!==void 0&&(I=g.ref);for(k in g)o.call(g,k)&&!d.hasOwnProperty(k)&&(y[k]=g[k]);if(p&&p.defaultProps)for(k in g=p.defaultProps,g)y[k]===void 0&&(y[k]=g[k]);return{$$typeof:t,type:p,key:x,ref:I,props:y,_owner:a.current}}return qs.Fragment=r,qs.jsx=h,qs.jsxs=h,qs}var ch;function Hg(){return ch||(ch=1,tc.exports=Wg()),tc.exports}var c=Hg(),B=Ac();const Vg=xp(B);var Mo={},rc={exports:{}},Ot={},sc={exports:{}},ic={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh;function Yg(){return uh||(uh=1,(function(s){function t(V,X){var w=V.length;V.push(X);e:for(;0<w;){var O=w-1>>>1,te=V[O];if(0<a(te,X))V[O]=X,V[w]=te,w=O;else break e}}function r(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var X=V[0],w=V.pop();if(w!==X){V[0]=w;e:for(var O=0,te=V.length,M=te>>>1;O<M;){var P=2*(O+1)-1,Q=V[P],pe=P+1,Se=V[pe];if(0>a(Q,w))pe<te&&0>a(Se,Q)?(V[O]=Se,V[pe]=w,O=pe):(V[O]=Q,V[P]=w,O=P);else if(pe<te&&0>a(Se,w))V[O]=Se,V[pe]=w,O=pe;else break e}}return X}function a(V,X){var w=V.sortIndex-X.sortIndex;return w!==0?w:V.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],v=[],k=1,y=null,x=3,I=!1,D=!1,H=!1,Z=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function je(V){for(var X=r(v);X!==null;){if(X.callback===null)o(v);else if(X.startTime<=V)o(v),X.sortIndex=X.expirationTime,t(g,X);else break;X=r(v)}}function ue(V){if(H=!1,je(V),!D)if(r(g)!==null)D=!0,Ye(Te);else{var X=r(v);X!==null&&Fe(ue,X.startTime-V)}}function Te(V,X){D=!1,H&&(H=!1,le(R),R=-1),I=!0;var w=x;try{for(je(X),y=r(g);y!==null&&(!(y.expirationTime>X)||V&&!z());){var O=y.callback;if(typeof O=="function"){y.callback=null,x=y.priorityLevel;var te=O(y.expirationTime<=X);X=s.unstable_now(),typeof te=="function"?y.callback=te:y===r(g)&&o(g),je(X)}else o(g);y=r(g)}if(y!==null)var M=!0;else{var P=r(v);P!==null&&Fe(ue,P.startTime-X),M=!1}return M}finally{y=null,x=w,I=!1}}var q=!1,L=null,R=-1,ke=5,ie=-1;function z(){return!(s.unstable_now()-ie<ke)}function ee(){if(L!==null){var V=s.unstable_now();ie=V;var X=!0;try{X=L(!0,V)}finally{X?be():(q=!1,L=null)}}else q=!1}var be;if(typeof re=="function")be=function(){re(ee)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,tt=$e.port2;$e.port1.onmessage=ee,be=function(){tt.postMessage(null)}}else be=function(){Z(ee,0)};function Ye(V){L=V,q||(q=!0,be())}function Fe(V,X){R=Z(function(){V(s.unstable_now())},X)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(V){V.callback=null},s.unstable_continueExecution=function(){D||I||(D=!0,Ye(Te))},s.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<V?Math.floor(1e3/V):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_getFirstCallbackNode=function(){return r(g)},s.unstable_next=function(V){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var w=x;x=X;try{return V()}finally{x=w}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var w=x;x=V;try{return X()}finally{x=w}},s.unstable_scheduleCallback=function(V,X,w){var O=s.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?O+w:O):w=O,V){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=w+te,V={id:k++,callback:X,priorityLevel:V,startTime:w,expirationTime:te,sortIndex:-1},w>O?(V.sortIndex=w,t(v,V),r(g)===null&&V===r(v)&&(H?(le(R),R=-1):H=!0,Fe(ue,w-O))):(V.sortIndex=te,t(g,V),D||I||(D=!0,Ye(Te))),V},s.unstable_shouldYield=z,s.unstable_wrapCallback=function(V){var X=x;return function(){var w=x;x=X;try{return V.apply(this,arguments)}finally{x=w}}}})(ic)),ic}var dh;function Qg(){return dh||(dh=1,sc.exports=Yg()),sc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function Gg(){if(fh)return Ot;fh=1;var s=Ac(),t=Qg();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function d(e,n){h(e,n),h(e+"Capture",n)}function h(e,n){for(a[e]=n,e=0;e<n.length;e++)o.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},y={};function x(e){return g.call(y,e)?!0:g.call(k,e)?!1:v.test(e)?y[e]=!0:(k[e]=!0,!1)}function I(e,n,i,l){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function D(e,n,i,l){if(n===null||typeof n>"u"||I(e,n,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function H(e,n,i,l,u,f,m){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=n,this.sanitizeURL=f,this.removeEmptyString=m}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Z[e]=new H(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Z[n]=new H(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Z[e]=new H(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Z[e]=new H(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Z[e]=new H(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Z[e]=new H(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Z[e]=new H(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Z[e]=new H(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Z[e]=new H(e,5,!1,e.toLowerCase(),null,!1,!1)});var le=/[\-:]([a-z])/g;function re(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(le,re);Z[n]=new H(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(le,re);Z[n]=new H(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(le,re);Z[n]=new H(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Z[e]=new H(e,1,!1,e.toLowerCase(),null,!1,!1)}),Z.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Z[e]=new H(e,1,!1,e.toLowerCase(),null,!0,!0)});function je(e,n,i,l){var u=Z.hasOwnProperty(n)?Z[n]:null;(u!==null?u.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(D(n,i,u,l)&&(i=null),l||u===null?x(n)&&(i===null?e.removeAttribute(n):e.setAttribute(n,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(n=u.attributeName,l=u.attributeNamespace,i===null?e.removeAttribute(n):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,l?e.setAttributeNS(l,n,i):e.setAttribute(n,i))))}var ue=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),q=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),z=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),tt=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),V=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var w=Object.assign,O;function te(e){if(O===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);O=n&&n[1]||""}return`
`+O+e}var M=!1;function P(e,n){if(!e||M)return"";M=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(j){var l=j}Reflect.construct(e,[],n)}else{try{n.call()}catch(j){l=j}e.call(n.prototype)}else{try{throw Error()}catch(j){l=j}e()}}catch(j){if(j&&l&&typeof j.stack=="string"){for(var u=j.stack.split(`
`),f=l.stack.split(`
`),m=u.length-1,_=f.length-1;1<=m&&0<=_&&u[m]!==f[_];)_--;for(;1<=m&&0<=_;m--,_--)if(u[m]!==f[_]){if(m!==1||_!==1)do if(m--,_--,0>_||u[m]!==f[_]){var b=`
`+u[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=_);break}}}finally{M=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?te(e):""}function Q(e){switch(e.tag){case 5:return te(e.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return e=P(e.type,!1),e;case 11:return e=P(e.type.render,!1),e;case 1:return e=P(e.type,!0),e;default:return""}}function pe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case q:return"Portal";case ke:return"Profiler";case R:return"StrictMode";case be:return"Suspense";case $e:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case ie:return(e._context.displayName||"Context")+".Provider";case ee:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tt:return n=e.displayName||null,n!==null?n:pe(e.type)||"Memo";case Ye:n=e._payload,e=e._init;try{return pe(e(n))}catch{}}return null}function Se(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(n);case 8:return n===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function T(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function J(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ye(e){var n=J(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(m){l=""+m,f.call(this,m)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(m){l=""+m},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Oe(e){e._valueTracker||(e._valueTracker=ye(e))}function Nt(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=J(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function hn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function E(e,n){var i=n.checked;return w({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function ae(e,n){var i=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;i=T(n.value!=null?n.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function me(e,n){n=n.checked,n!=null&&je(e,"checked",n,!1)}function Ce(e,n){me(e,n);var i=T(n.value),l=n.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Ae(e,n.type,i):n.hasOwnProperty("defaultValue")&&Ae(e,n.type,T(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Ne(e,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,i||n===e.value||(e.value=n),e.defaultValue=n}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Ae(e,n,i){(n!=="number"||hn(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Ee=Array.isArray;function We(e,n,i,l){if(e=e.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=n.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&l&&(e[i].defaultSelected=!0)}else{for(i=""+T(i),n=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function rt(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return w({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function A(e,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(r(92));if(Ee(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}n==null&&(n=""),i=n}e._wrapperState={initialValue:T(i)}}function se(e,n){var i=T(n.value),l=T(n.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),n.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function ve(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function G(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?G(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fe,Ie=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,l,u){MSApp.execUnsafeLocalFunction(function(){return e(n,i,l,u)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(fe=fe||document.createElement("div"),fe.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function De(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yn=["Webkit","ms","Moz","O"];Object.keys(Ve).forEach(function(e){yn.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ve[n]=Ve[e]})});function Wt(e,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Ve.hasOwnProperty(e)&&Ve[e]?(""+n).trim():n+"px"}function or(e,n){e=e.style;for(var i in n)if(n.hasOwnProperty(i)){var l=i.indexOf("--")===0,u=Wt(i,n[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,u):e[i]=u}}var lr=w({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hl(e,n){if(n){if(lr[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function pl(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=null;function gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xl=null,Tr=null,Rr=null;function wu(e){if(e=Ds(e)){if(typeof xl!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Gi(n),xl(e.stateNode,e.type,n))}}function bu(e){Tr?Rr?Rr.push(e):Rr=[e]:Tr=e}function Nu(){if(Tr){var e=Tr,n=Rr;if(Rr=Tr=null,wu(e),n)for(e=0;e<n.length;e++)wu(n[e])}}function ku(e,n){return e(n)}function Cu(){}var vl=!1;function Su(e,n,i){if(vl)return e(n,i);vl=!0;try{return ku(e,n,i)}finally{vl=!1,(Tr!==null||Rr!==null)&&(Cu(),Nu())}}function ps(e,n){var i=e.stateNode;if(i===null)return null;var l=Gi(i);if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var yl=!1;if(p)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){yl=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{yl=!1}function Gm(e,n,i,l,u,f,m,_,b){var j=Array.prototype.slice.call(arguments,3);try{n.apply(i,j)}catch(U){this.onError(U)}}var gs=!1,Si=null,Ei=!1,_l=null,Km={onError:function(e){gs=!0,Si=e}};function qm(e,n,i,l,u,f,m,_,b){gs=!1,Si=null,Gm.apply(Km,arguments)}function Xm(e,n,i,l,u,f,m,_,b){if(qm.apply(this,arguments),gs){if(gs){var j=Si;gs=!1,Si=null}else throw Error(r(198));Ei||(Ei=!0,_l=j)}}function ar(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function Eu(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function ju(e){if(ar(e)!==e)throw Error(r(188))}function Jm(e){var n=e.alternate;if(!n){if(n=ar(e),n===null)throw Error(r(188));return n!==e?null:e}for(var i=e,l=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return ju(u),e;if(f===l)return ju(u),n;f=f.sibling}throw Error(r(188))}if(i.return!==l.return)i=u,l=f;else{for(var m=!1,_=u.child;_;){if(_===i){m=!0,i=u,l=f;break}if(_===l){m=!0,l=u,i=f;break}_=_.sibling}if(!m){for(_=f.child;_;){if(_===i){m=!0,i=f,l=u;break}if(_===l){m=!0,l=f,i=u;break}_=_.sibling}if(!m)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:n}function Iu(e){return e=Jm(e),e!==null?Tu(e):null}function Tu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Tu(e);if(n!==null)return n;e=e.sibling}return null}var Ru=t.unstable_scheduleCallback,Pu=t.unstable_cancelCallback,Zm=t.unstable_shouldYield,e0=t.unstable_requestPaint,at=t.unstable_now,t0=t.unstable_getCurrentPriorityLevel,wl=t.unstable_ImmediatePriority,Lu=t.unstable_UserBlockingPriority,ji=t.unstable_NormalPriority,n0=t.unstable_LowPriority,Mu=t.unstable_IdlePriority,Ii=null,pn=null;function r0(e){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Ii,e,void 0,(e.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:o0,s0=Math.log,i0=Math.LN2;function o0(e){return e>>>=0,e===0?32:31-(s0(e)/i0|0)|0}var Ti=64,Ri=4194304;function xs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pi(e,n){var i=e.pendingLanes;if(i===0)return 0;var l=0,u=e.suspendedLanes,f=e.pingedLanes,m=i&268435455;if(m!==0){var _=m&~u;_!==0?l=xs(_):(f&=m,f!==0&&(l=xs(f)))}else m=i&~u,m!==0?l=xs(m):f!==0&&(l=xs(f));if(l===0)return 0;if(n!==0&&n!==l&&(n&u)===0&&(u=l&-l,f=n&-n,u>=f||u===16&&(f&4194240)!==0))return n;if((l&4)!==0&&(l|=i&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)i=31-tn(n),u=1<<i,l|=e[i],n&=~u;return l}function l0(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a0(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var m=31-tn(f),_=1<<m,b=u[m];b===-1?((_&i)===0||(_&l)!==0)&&(u[m]=l0(_,n)):b<=n&&(e.expiredLanes|=_),f&=~_}}function bl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Du(){var e=Ti;return Ti<<=1,(Ti&4194240)===0&&(Ti=64),e}function Nl(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function vs(e,n,i){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-tn(n),e[n]=i}function c0(e,n){var i=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-tn(i),f=1<<u;n[u]=0,l[u]=-1,e[u]=-1,i&=~f}}function kl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-tn(i),u=1<<l;u&n|e[l]&n&&(e[l]|=n),i&=~u}}var He=0;function Ou(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Au,Cl,Fu,zu,$u,Sl=!1,Li=[],Mn=null,Dn=null,On=null,ys=new Map,_s=new Map,An=[],u0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uu(e,n){switch(e){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":ys.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(n.pointerId)}}function ws(e,n,i,l,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Ds(n),n!==null&&Cl(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function d0(e,n,i,l,u){switch(n){case"focusin":return Mn=ws(Mn,e,n,i,l,u),!0;case"dragenter":return Dn=ws(Dn,e,n,i,l,u),!0;case"mouseover":return On=ws(On,e,n,i,l,u),!0;case"pointerover":var f=u.pointerId;return ys.set(f,ws(ys.get(f)||null,e,n,i,l,u)),!0;case"gotpointercapture":return f=u.pointerId,_s.set(f,ws(_s.get(f)||null,e,n,i,l,u)),!0}return!1}function Bu(e){var n=cr(e.target);if(n!==null){var i=ar(n);if(i!==null){if(n=i.tag,n===13){if(n=Eu(i),n!==null){e.blockedOn=n,$u(e.priority,function(){Fu(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mi(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=jl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);ml=l,i.target.dispatchEvent(l),ml=null}else return n=Ds(i),n!==null&&Cl(n),e.blockedOn=i,!1;n.shift()}return!0}function Wu(e,n,i){Mi(e)&&i.delete(n)}function f0(){Sl=!1,Mn!==null&&Mi(Mn)&&(Mn=null),Dn!==null&&Mi(Dn)&&(Dn=null),On!==null&&Mi(On)&&(On=null),ys.forEach(Wu),_s.forEach(Wu)}function bs(e,n){e.blockedOn===n&&(e.blockedOn=null,Sl||(Sl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,f0)))}function Ns(e){function n(u){return bs(u,e)}if(0<Li.length){bs(Li[0],e);for(var i=1;i<Li.length;i++){var l=Li[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Mn!==null&&bs(Mn,e),Dn!==null&&bs(Dn,e),On!==null&&bs(On,e),ys.forEach(n),_s.forEach(n),i=0;i<An.length;i++)l=An[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<An.length&&(i=An[0],i.blockedOn===null);)Bu(i),i.blockedOn===null&&An.shift()}var Pr=ue.ReactCurrentBatchConfig,Di=!0;function h0(e,n,i,l){var u=He,f=Pr.transition;Pr.transition=null;try{He=1,El(e,n,i,l)}finally{He=u,Pr.transition=f}}function p0(e,n,i,l){var u=He,f=Pr.transition;Pr.transition=null;try{He=4,El(e,n,i,l)}finally{He=u,Pr.transition=f}}function El(e,n,i,l){if(Di){var u=jl(e,n,i,l);if(u===null)Vl(e,n,l,Oi,i),Uu(e,l);else if(d0(u,e,n,i,l))l.stopPropagation();else if(Uu(e,l),n&4&&-1<u0.indexOf(e)){for(;u!==null;){var f=Ds(u);if(f!==null&&Au(f),f=jl(e,n,i,l),f===null&&Vl(e,n,l,Oi,i),f===u)break;u=f}u!==null&&l.stopPropagation()}else Vl(e,n,l,null,i)}}var Oi=null;function jl(e,n,i,l){if(Oi=null,e=gl(l),e=cr(e),e!==null)if(n=ar(e),n===null)e=null;else if(i=n.tag,i===13){if(e=Eu(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Oi=e,null}function Hu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t0()){case wl:return 1;case Lu:return 4;case ji:case n0:return 16;case Mu:return 536870912;default:return 16}default:return 16}}var Fn=null,Il=null,Ai=null;function Vu(){if(Ai)return Ai;var e,n=Il,i=n.length,l,u="value"in Fn?Fn.value:Fn.textContent,f=u.length;for(e=0;e<i&&n[e]===u[e];e++);var m=i-e;for(l=1;l<=m&&n[i-l]===u[f-l];l++);return Ai=u.slice(e,1<l?1-l:void 0)}function Fi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function Yu(){return!1}function Ht(e){function n(i,l,u,f,m){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?zi:Yu,this.isPropagationStopped=Yu,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),n}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=Ht(Lr),ks=w({},Lr,{view:0,detail:0}),m0=Ht(ks),Rl,Pl,Cs,$i=w({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ml,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cs&&(Cs&&e.type==="mousemove"?(Rl=e.screenX-Cs.screenX,Pl=e.screenY-Cs.screenY):Pl=Rl=0,Cs=e),Rl)},movementY:function(e){return"movementY"in e?e.movementY:Pl}}),Qu=Ht($i),g0=w({},$i,{dataTransfer:0}),x0=Ht(g0),v0=w({},ks,{relatedTarget:0}),Ll=Ht(v0),y0=w({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=Ht(y0),w0=w({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),b0=Ht(w0),N0=w({},Lr,{data:0}),Gu=Ht(N0),k0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=S0[e])?!!n[e]:!1}function Ml(){return E0}var j0=w({},ks,{key:function(e){if(e.key){var n=k0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Fi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ml,charCode:function(e){return e.type==="keypress"?Fi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),I0=Ht(j0),T0=w({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ku=Ht(T0),R0=w({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ml}),P0=Ht(R0),L0=w({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=Ht(L0),D0=w({},$i,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O0=Ht(D0),A0=[9,13,27,32],Dl=p&&"CompositionEvent"in window,Ss=null;p&&"documentMode"in document&&(Ss=document.documentMode);var F0=p&&"TextEvent"in window&&!Ss,qu=p&&(!Dl||Ss&&8<Ss&&11>=Ss),Xu=" ",Ju=!1;function Zu(e,n){switch(e){case"keyup":return A0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mr=!1;function z0(e,n){switch(e){case"compositionend":return ed(n);case"keypress":return n.which!==32?null:(Ju=!0,Xu);case"textInput":return e=n.data,e===Xu&&Ju?null:e;default:return null}}function $0(e,n){if(Mr)return e==="compositionend"||!Dl&&Zu(e,n)?(e=Vu(),Ai=Il=Fn=null,Mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return qu&&n.locale!=="ko"?null:n.data;default:return null}}var U0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!U0[e.type]:n==="textarea"}function nd(e,n,i,l){bu(l),n=Vi(n,"onChange"),0<n.length&&(i=new Tl("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var Es=null,js=null;function B0(e){_d(e,0)}function Ui(e){var n=zr(e);if(Nt(n))return e}function W0(e,n){if(e==="change")return n}var rd=!1;if(p){var Ol;if(p){var Al="oninput"in document;if(!Al){var sd=document.createElement("div");sd.setAttribute("oninput","return;"),Al=typeof sd.oninput=="function"}Ol=Al}else Ol=!1;rd=Ol&&(!document.documentMode||9<document.documentMode)}function id(){Es&&(Es.detachEvent("onpropertychange",od),js=Es=null)}function od(e){if(e.propertyName==="value"&&Ui(js)){var n=[];nd(n,js,e,gl(e)),Su(B0,n)}}function H0(e,n,i){e==="focusin"?(id(),Es=n,js=i,Es.attachEvent("onpropertychange",od)):e==="focusout"&&id()}function V0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ui(js)}function Y0(e,n){if(e==="click")return Ui(n)}function Q0(e,n){if(e==="input"||e==="change")return Ui(n)}function G0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var nn=typeof Object.is=="function"?Object.is:G0;function Is(e,n){if(nn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!g.call(n,u)||!nn(e[u],n[u]))return!1}return!0}function ld(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ad(e,n){var i=ld(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ld(i)}}function cd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?cd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ud(){for(var e=window,n=hn();n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=hn(e.document)}return n}function Fl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function K0(e){var n=ud(),i=e.focusedElem,l=e.selectionRange;if(n!==i&&i&&i.ownerDocument&&cd(i.ownerDocument.documentElement,i)){if(l!==null&&Fl(i)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(e,i.value.length);else if(e=(n=i.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,f=Math.min(l.start,u);l=l.end===void 0?f:Math.min(l.end,u),!e.extend&&f>l&&(u=l,l=f,f=u),u=ad(i,f);var m=ad(i,l);u&&m&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(n=n.createRange(),n.setStart(u.node,u.offset),e.removeAllRanges(),f>l?(e.addRange(n),e.extend(m.node,m.offset)):(n.setEnd(m.node,m.offset),e.addRange(n)))}}for(n=[],e=i;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)e=n[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var q0=p&&"documentMode"in document&&11>=document.documentMode,Dr=null,zl=null,Ts=null,$l=!1;function dd(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;$l||Dr==null||Dr!==hn(l)||(l=Dr,"selectionStart"in l&&Fl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ts&&Is(Ts,l)||(Ts=l,l=Vi(zl,"onSelect"),0<l.length&&(n=new Tl("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=Dr)))}function Bi(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Or={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionend:Bi("Transition","TransitionEnd")},Ul={},fd={};p&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function Wi(e){if(Ul[e])return Ul[e];if(!Or[e])return e;var n=Or[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in fd)return Ul[e]=n[i];return e}var hd=Wi("animationend"),pd=Wi("animationiteration"),md=Wi("animationstart"),gd=Wi("transitionend"),xd=new Map,vd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(e,n){xd.set(e,n),d(n,[e])}for(var Bl=0;Bl<vd.length;Bl++){var Wl=vd[Bl],X0=Wl.toLowerCase(),J0=Wl[0].toUpperCase()+Wl.slice(1);zn(X0,"on"+J0)}zn(hd,"onAnimationEnd"),zn(pd,"onAnimationIteration"),zn(md,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(gd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function yd(e,n,i){var l=e.type||"unknown-event";e.currentTarget=i,Xm(l,n,void 0,e),e.currentTarget=null}function _d(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],u=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var m=l.length-1;0<=m;m--){var _=l[m],b=_.instance,j=_.currentTarget;if(_=_.listener,b!==f&&u.isPropagationStopped())break e;yd(u,_,j),f=b}else for(m=0;m<l.length;m++){if(_=l[m],b=_.instance,j=_.currentTarget,_=_.listener,b!==f&&u.isPropagationStopped())break e;yd(u,_,j),f=b}}}if(Ei)throw e=_l,Ei=!1,_l=null,e}function Je(e,n){var i=n[Xl];i===void 0&&(i=n[Xl]=new Set);var l=e+"__bubble";i.has(l)||(wd(n,e,2,!1),i.add(l))}function Hl(e,n,i){var l=0;n&&(l|=4),wd(i,e,l,n)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function Ps(e){if(!e[Hi]){e[Hi]=!0,o.forEach(function(i){i!=="selectionchange"&&(Z0.has(i)||Hl(i,!1,e),Hl(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Hi]||(n[Hi]=!0,Hl("selectionchange",!1,n))}}function wd(e,n,i,l){switch(Hu(n)){case 1:var u=h0;break;case 4:u=p0;break;default:u=El}i=u.bind(null,n,i,e),u=void 0,!yl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,i,{capture:!0,passive:u}):e.addEventListener(n,i,!0):u!==void 0?e.addEventListener(n,i,{passive:u}):e.addEventListener(n,i,!1)}function Vl(e,n,i,l,u){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var _=l.stateNode.containerInfo;if(_===u||_.nodeType===8&&_.parentNode===u)break;if(m===4)for(m=l.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===u||b.nodeType===8&&b.parentNode===u))return;m=m.return}for(;_!==null;){if(m=cr(_),m===null)return;if(b=m.tag,b===5||b===6){l=f=m;continue e}_=_.parentNode}}l=l.return}Su(function(){var j=f,U=gl(i),W=[];e:{var F=xd.get(e);if(F!==void 0){var ne=Tl,ce=e;switch(e){case"keypress":if(Fi(i)===0)break e;case"keydown":case"keyup":ne=I0;break;case"focusin":ce="focus",ne=Ll;break;case"focusout":ce="blur",ne=Ll;break;case"beforeblur":case"afterblur":ne=Ll;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=x0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=P0;break;case hd:case pd:case md:ne=_0;break;case gd:ne=M0;break;case"scroll":ne=m0;break;case"wheel":ne=O0;break;case"copy":case"cut":case"paste":ne=b0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Ku}var de=(n&4)!==0,ct=!de&&e==="scroll",C=de?F!==null?F+"Capture":null:F;de=[];for(var N=j,S;N!==null;){S=N;var Y=S.stateNode;if(S.tag===5&&Y!==null&&(S=Y,C!==null&&(Y=ps(N,C),Y!=null&&de.push(Ls(N,Y,S)))),ct)break;N=N.return}0<de.length&&(F=new ne(F,ce,null,i,U),W.push({event:F,listeners:de}))}}if((n&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",F&&i!==ml&&(ce=i.relatedTarget||i.fromElement)&&(cr(ce)||ce[_n]))break e;if((ne||F)&&(F=U.window===U?U:(F=U.ownerDocument)?F.defaultView||F.parentWindow:window,ne?(ce=i.relatedTarget||i.toElement,ne=j,ce=ce?cr(ce):null,ce!==null&&(ct=ar(ce),ce!==ct||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ne=null,ce=j),ne!==ce)){if(de=Qu,Y="onMouseLeave",C="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(de=Ku,Y="onPointerLeave",C="onPointerEnter",N="pointer"),ct=ne==null?F:zr(ne),S=ce==null?F:zr(ce),F=new de(Y,N+"leave",ne,i,U),F.target=ct,F.relatedTarget=S,Y=null,cr(U)===j&&(de=new de(C,N+"enter",ce,i,U),de.target=S,de.relatedTarget=ct,Y=de),ct=Y,ne&&ce)t:{for(de=ne,C=ce,N=0,S=de;S;S=Ar(S))N++;for(S=0,Y=C;Y;Y=Ar(Y))S++;for(;0<N-S;)de=Ar(de),N--;for(;0<S-N;)C=Ar(C),S--;for(;N--;){if(de===C||C!==null&&de===C.alternate)break t;de=Ar(de),C=Ar(C)}de=null}else de=null;ne!==null&&bd(W,F,ne,de,!1),ce!==null&&ct!==null&&bd(W,ct,ce,de,!0)}}e:{if(F=j?zr(j):window,ne=F.nodeName&&F.nodeName.toLowerCase(),ne==="select"||ne==="input"&&F.type==="file")var he=W0;else if(td(F))if(rd)he=Q0;else{he=V0;var ge=H0}else(ne=F.nodeName)&&ne.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(he=Y0);if(he&&(he=he(e,j))){nd(W,he,i,U);break e}ge&&ge(e,F,j),e==="focusout"&&(ge=F._wrapperState)&&ge.controlled&&F.type==="number"&&Ae(F,"number",F.value)}switch(ge=j?zr(j):window,e){case"focusin":(td(ge)||ge.contentEditable==="true")&&(Dr=ge,zl=j,Ts=null);break;case"focusout":Ts=zl=Dr=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,dd(W,i,U);break;case"selectionchange":if(q0)break;case"keydown":case"keyup":dd(W,i,U)}var xe;if(Dl)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Mr?Zu(e,i)&&(we="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(we="onCompositionStart");we&&(qu&&i.locale!=="ko"&&(Mr||we!=="onCompositionStart"?we==="onCompositionEnd"&&Mr&&(xe=Vu()):(Fn=U,Il="value"in Fn?Fn.value:Fn.textContent,Mr=!0)),ge=Vi(j,we),0<ge.length&&(we=new Gu(we,e,null,i,U),W.push({event:we,listeners:ge}),xe?we.data=xe:(xe=ed(i),xe!==null&&(we.data=xe)))),(xe=F0?z0(e,i):$0(e,i))&&(j=Vi(j,"onBeforeInput"),0<j.length&&(U=new Gu("onBeforeInput","beforeinput",null,i,U),W.push({event:U,listeners:j}),U.data=xe))}_d(W,n)})}function Ls(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Vi(e,n){for(var i=n+"Capture",l=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=ps(e,i),f!=null&&l.unshift(Ls(e,f,u)),f=ps(e,n),f!=null&&l.push(Ls(e,f,u))),e=e.return}return l}function Ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bd(e,n,i,l,u){for(var f=n._reactName,m=[];i!==null&&i!==l;){var _=i,b=_.alternate,j=_.stateNode;if(b!==null&&b===l)break;_.tag===5&&j!==null&&(_=j,u?(b=ps(i,f),b!=null&&m.unshift(Ls(i,b,_))):u||(b=ps(i,f),b!=null&&m.push(Ls(i,b,_)))),i=i.return}m.length!==0&&e.push({event:n,listeners:m})}var eg=/\r\n?/g,tg=/\u0000|\uFFFD/g;function Nd(e){return(typeof e=="string"?e:""+e).replace(eg,`
`).replace(tg,"")}function Yi(e,n,i){if(n=Nd(n),Nd(e)!==n&&i)throw Error(r(425))}function Qi(){}var Yl=null,Ql=null;function Gl(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,ng=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,rg=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(e){return kd.resolve(null).then(e).catch(sg)}:Kl;function sg(e){setTimeout(function(){throw e})}function ql(e,n){var i=n,l=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(l===0){e.removeChild(u),Ns(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=u}while(i);Ns(n)}function $n(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Cd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),mn="__reactFiber$"+Fr,Ms="__reactProps$"+Fr,_n="__reactContainer$"+Fr,Xl="__reactEvents$"+Fr,ig="__reactListeners$"+Fr,og="__reactHandles$"+Fr;function cr(e){var n=e[mn];if(n)return n;for(var i=e.parentNode;i;){if(n=i[_n]||i[mn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Cd(e);e!==null;){if(i=e[mn])return i;e=Cd(e)}return n}e=i,i=e.parentNode}return null}function Ds(e){return e=e[mn]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Gi(e){return e[Ms]||null}var Jl=[],$r=-1;function Un(e){return{current:e}}function Ze(e){0>$r||(e.current=Jl[$r],Jl[$r]=null,$r--)}function Ke(e,n){$r++,Jl[$r]=e.current,e.current=n}var Bn={},kt=Un(Bn),Rt=Un(!1),ur=Bn;function Ur(e,n){var i=e.type.contextTypes;if(!i)return Bn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in i)u[f]=n[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),u}function Pt(e){return e=e.childContextTypes,e!=null}function Ki(){Ze(Rt),Ze(kt)}function Sd(e,n,i){if(kt.current!==Bn)throw Error(r(168));Ke(kt,n),Ke(Rt,i)}function Ed(e,n,i){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var u in l)if(!(u in n))throw Error(r(108,Se(e)||"Unknown",u));return w({},i,l)}function qi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bn,ur=kt.current,Ke(kt,e),Ke(Rt,Rt.current),!0}function jd(e,n,i){var l=e.stateNode;if(!l)throw Error(r(169));i?(e=Ed(e,n,ur),l.__reactInternalMemoizedMergedChildContext=e,Ze(Rt),Ze(kt),Ke(kt,e)):Ze(Rt),Ke(Rt,i)}var wn=null,Xi=!1,Zl=!1;function Id(e){wn===null?wn=[e]:wn.push(e)}function lg(e){Xi=!0,Id(e)}function Wn(){if(!Zl&&wn!==null){Zl=!0;var e=0,n=He;try{var i=wn;for(He=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}wn=null,Xi=!1}catch(u){throw wn!==null&&(wn=wn.slice(e+1)),Ru(wl,Wn),u}finally{He=n,Zl=!1}}return null}var Br=[],Wr=0,Ji=null,Zi=0,Kt=[],qt=0,dr=null,bn=1,Nn="";function fr(e,n){Br[Wr++]=Zi,Br[Wr++]=Ji,Ji=e,Zi=n}function Td(e,n,i){Kt[qt++]=bn,Kt[qt++]=Nn,Kt[qt++]=dr,dr=e;var l=bn;e=Nn;var u=32-tn(l)-1;l&=~(1<<u),i+=1;var f=32-tn(n)+u;if(30<f){var m=u-u%5;f=(l&(1<<m)-1).toString(32),l>>=m,u-=m,bn=1<<32-tn(n)+u|i<<u|l,Nn=f+e}else bn=1<<f|i<<u|l,Nn=e}function ea(e){e.return!==null&&(fr(e,1),Td(e,1,0))}function ta(e){for(;e===Ji;)Ji=Br[--Wr],Br[Wr]=null,Zi=Br[--Wr],Br[Wr]=null;for(;e===dr;)dr=Kt[--qt],Kt[qt]=null,Nn=Kt[--qt],Kt[qt]=null,bn=Kt[--qt],Kt[qt]=null}var Vt=null,Yt=null,nt=!1,rn=null;function Rd(e,n){var i=en(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=e,n=e.deletions,n===null?(e.deletions=[i],e.flags|=16):n.push(i)}function Pd(e,n){switch(e.tag){case 5:var i=e.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Vt=e,Yt=$n(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Vt=e,Yt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=dr!==null?{id:bn,overflow:Nn}:null,e.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=en(18,null,null,0),i.stateNode=n,i.return=e,e.child=i,Vt=e,Yt=null,!0):!1;default:return!1}}function na(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ra(e){if(nt){var n=Yt;if(n){var i=n;if(!Pd(e,n)){if(na(e))throw Error(r(418));n=$n(i.nextSibling);var l=Vt;n&&Pd(e,n)?Rd(l,i):(e.flags=e.flags&-4097|2,nt=!1,Vt=e)}}else{if(na(e))throw Error(r(418));e.flags=e.flags&-4097|2,nt=!1,Vt=e}}}function Ld(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function eo(e){if(e!==Vt)return!1;if(!nt)return Ld(e),nt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Gl(e.type,e.memoizedProps)),n&&(n=Yt)){if(na(e))throw Md(),Error(r(418));for(;n;)Rd(e,n),n=$n(n.nextSibling)}if(Ld(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(n===0){Yt=$n(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}e=e.nextSibling}Yt=null}}else Yt=Vt?$n(e.stateNode.nextSibling):null;return!0}function Md(){for(var e=Yt;e;)e=$n(e.nextSibling)}function Hr(){Yt=Vt=null,nt=!1}function sa(e){rn===null?rn=[e]:rn.push(e)}var ag=ue.ReactCurrentBatchConfig;function sn(e,n){if(e&&e.defaultProps){n=w({},n),e=e.defaultProps;for(var i in e)n[i]===void 0&&(n[i]=e[i]);return n}return n}var to=Un(null),no=null,Vr=null,ia=null;function oa(){ia=Vr=no=null}function la(e){var n=to.current;Ze(to),e._currentValue=n}function aa(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function Yr(e,n){no=e,ia=Vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Lt=!0),e.firstContext=null)}function Xt(e){var n=e._currentValue;if(ia!==e)if(e={context:e,memoizedValue:n,next:null},Vr===null){if(no===null)throw Error(r(308));Vr=e,no.dependencies={lanes:0,firstContext:e}}else Vr=Vr.next=e;return n}var hr=null;function ca(e){hr===null?hr=[e]:hr.push(e)}function Dd(e,n,i,l){var u=n.interleaved;return u===null?(i.next=i,ca(n)):(i.next=u.next,u.next=i),n.interleaved=i,kn(e,l)}function kn(e,n){e.lanes|=n;var i=e.alternate;for(i!==null&&(i.lanes|=n),i=e,e=e.return;e!==null;)e.childLanes|=n,i=e.alternate,i!==null&&(i.childLanes|=n),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Hn=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Od(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Vn(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ze&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,kn(e,i)}return u=l.interleaved,u===null?(n.next=n,ca(l)):(n.next=u.next,u.next=n),l.interleaved=n,kn(e,i)}function ro(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,kl(e,i)}}function Ad(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?u=f=m:f=f.next=m,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}function so(e,n,i,l){var u=e.updateQueue;Hn=!1;var f=u.firstBaseUpdate,m=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var b=_,j=b.next;b.next=null,m===null?f=j:m.next=j,m=b;var U=e.alternate;U!==null&&(U=U.updateQueue,_=U.lastBaseUpdate,_!==m&&(_===null?U.firstBaseUpdate=j:_.next=j,U.lastBaseUpdate=b))}if(f!==null){var W=u.baseState;m=0,U=j=b=null,_=f;do{var F=_.lane,ne=_.eventTime;if((l&F)===F){U!==null&&(U=U.next={eventTime:ne,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var ce=e,de=_;switch(F=n,ne=i,de.tag){case 1:if(ce=de.payload,typeof ce=="function"){W=ce.call(ne,W,F);break e}W=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=de.payload,F=typeof ce=="function"?ce.call(ne,W,F):ce,F==null)break e;W=w({},W,F);break e;case 2:Hn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,F=u.effects,F===null?u.effects=[_]:F.push(_))}else ne={eventTime:ne,lane:F,tag:_.tag,payload:_.payload,callback:_.callback,next:null},U===null?(j=U=ne,b=W):U=U.next=ne,m|=F;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;F=_,_=F.next,F.next=null,u.lastBaseUpdate=F,u.shared.pending=null}}while(!0);if(U===null&&(b=W),u.baseState=b,u.firstBaseUpdate=j,u.lastBaseUpdate=U,n=u.shared.interleaved,n!==null){u=n;do m|=u.lane,u=u.next;while(u!==n)}else f===null&&(u.shared.lanes=0);gr|=m,e.lanes=m,e.memoizedState=W}}function Fd(e,n,i){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],u=l.callback;if(u!==null){if(l.callback=null,l=i,typeof u!="function")throw Error(r(191,u));u.call(l)}}}var zd=new s.Component().refs;function da(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:w({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var io={isMounted:function(e){return(e=e._reactInternals)?ar(e)===e:!1},enqueueSetState:function(e,n,i){e=e._reactInternals;var l=Tt(),u=Kn(e),f=Cn(l,u);f.payload=n,i!=null&&(f.callback=i),n=Vn(e,f,u),n!==null&&(an(n,e,u,l),ro(n,e,u))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=Tt(),u=Kn(e),f=Cn(l,u);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=Vn(e,f,u),n!==null&&(an(n,e,u,l),ro(n,e,u))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Tt(),l=Kn(e),u=Cn(i,l);u.tag=2,n!=null&&(u.callback=n),n=Vn(e,u,l),n!==null&&(an(n,e,l,i),ro(n,e,l))}};function $d(e,n,i,l,u,f,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,m):n.prototype&&n.prototype.isPureReactComponent?!Is(i,l)||!Is(u,f):!0}function Ud(e,n,i){var l=!1,u=Bn,f=n.contextType;return typeof f=="object"&&f!==null?f=Xt(f):(u=Pt(n)?ur:kt.current,l=n.contextTypes,f=(l=l!=null)?Ur(e,u):Bn),n=new n(i,f),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=io,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),n}function Bd(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&io.enqueueReplaceState(n,n.state,null)}function fa(e,n,i,l){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs=zd,ua(e);var f=n.contextType;typeof f=="object"&&f!==null?u.context=Xt(f):(f=Pt(n)?ur:kt.current,u.context=Ur(e,f)),u.state=e.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(da(e,n,f,i),u.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(n=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),n!==u.state&&io.enqueueReplaceState(u,u.state,null),so(e,i,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Os(e,n,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var l=i.stateNode}if(!l)throw Error(r(147,e));var u=l,f=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(m){var _=u.refs;_===zd&&(_=u.refs={}),m===null?delete _[f]:_[f]=m},n._stringRef=f,n)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function oo(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Wd(e){var n=e._init;return n(e._payload)}function Hd(e){function n(C,N){if(e){var S=C.deletions;S===null?(C.deletions=[N],C.flags|=16):S.push(N)}}function i(C,N){if(!e)return null;for(;N!==null;)n(C,N),N=N.sibling;return null}function l(C,N){for(C=new Map;N!==null;)N.key!==null?C.set(N.key,N):C.set(N.index,N),N=N.sibling;return C}function u(C,N){return C=Xn(C,N),C.index=0,C.sibling=null,C}function f(C,N,S){return C.index=S,e?(S=C.alternate,S!==null?(S=S.index,S<N?(C.flags|=2,N):S):(C.flags|=2,N)):(C.flags|=1048576,N)}function m(C){return e&&C.alternate===null&&(C.flags|=2),C}function _(C,N,S,Y){return N===null||N.tag!==6?(N=Ka(S,C.mode,Y),N.return=C,N):(N=u(N,S),N.return=C,N)}function b(C,N,S,Y){var he=S.type;return he===L?U(C,N,S.props.children,Y,S.key):N!==null&&(N.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ye&&Wd(he)===N.type)?(Y=u(N,S.props),Y.ref=Os(C,N,S),Y.return=C,Y):(Y=So(S.type,S.key,S.props,null,C.mode,Y),Y.ref=Os(C,N,S),Y.return=C,Y)}function j(C,N,S,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==S.containerInfo||N.stateNode.implementation!==S.implementation?(N=qa(S,C.mode,Y),N.return=C,N):(N=u(N,S.children||[]),N.return=C,N)}function U(C,N,S,Y,he){return N===null||N.tag!==7?(N=_r(S,C.mode,Y,he),N.return=C,N):(N=u(N,S),N.return=C,N)}function W(C,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Ka(""+N,C.mode,S),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Te:return S=So(N.type,N.key,N.props,null,C.mode,S),S.ref=Os(C,null,N),S.return=C,S;case q:return N=qa(N,C.mode,S),N.return=C,N;case Ye:var Y=N._init;return W(C,Y(N._payload),S)}if(Ee(N)||X(N))return N=_r(N,C.mode,S,null),N.return=C,N;oo(C,N)}return null}function F(C,N,S,Y){var he=N!==null?N.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return he!==null?null:_(C,N,""+S,Y);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Te:return S.key===he?b(C,N,S,Y):null;case q:return S.key===he?j(C,N,S,Y):null;case Ye:return he=S._init,F(C,N,he(S._payload),Y)}if(Ee(S)||X(S))return he!==null?null:U(C,N,S,Y,null);oo(C,S)}return null}function ne(C,N,S,Y,he){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return C=C.get(S)||null,_(N,C,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Te:return C=C.get(Y.key===null?S:Y.key)||null,b(N,C,Y,he);case q:return C=C.get(Y.key===null?S:Y.key)||null,j(N,C,Y,he);case Ye:var ge=Y._init;return ne(C,N,S,ge(Y._payload),he)}if(Ee(Y)||X(Y))return C=C.get(S)||null,U(N,C,Y,he,null);oo(N,Y)}return null}function ce(C,N,S,Y){for(var he=null,ge=null,xe=N,we=N=0,gt=null;xe!==null&&we<S.length;we++){xe.index>we?(gt=xe,xe=null):gt=xe.sibling;var Ue=F(C,xe,S[we],Y);if(Ue===null){xe===null&&(xe=gt);break}e&&xe&&Ue.alternate===null&&n(C,xe),N=f(Ue,N,we),ge===null?he=Ue:ge.sibling=Ue,ge=Ue,xe=gt}if(we===S.length)return i(C,xe),nt&&fr(C,we),he;if(xe===null){for(;we<S.length;we++)xe=W(C,S[we],Y),xe!==null&&(N=f(xe,N,we),ge===null?he=xe:ge.sibling=xe,ge=xe);return nt&&fr(C,we),he}for(xe=l(C,xe);we<S.length;we++)gt=ne(xe,C,we,S[we],Y),gt!==null&&(e&&gt.alternate!==null&&xe.delete(gt.key===null?we:gt.key),N=f(gt,N,we),ge===null?he=gt:ge.sibling=gt,ge=gt);return e&&xe.forEach(function(Jn){return n(C,Jn)}),nt&&fr(C,we),he}function de(C,N,S,Y){var he=X(S);if(typeof he!="function")throw Error(r(150));if(S=he.call(S),S==null)throw Error(r(151));for(var ge=he=null,xe=N,we=N=0,gt=null,Ue=S.next();xe!==null&&!Ue.done;we++,Ue=S.next()){xe.index>we?(gt=xe,xe=null):gt=xe.sibling;var Jn=F(C,xe,Ue.value,Y);if(Jn===null){xe===null&&(xe=gt);break}e&&xe&&Jn.alternate===null&&n(C,xe),N=f(Jn,N,we),ge===null?he=Jn:ge.sibling=Jn,ge=Jn,xe=gt}if(Ue.done)return i(C,xe),nt&&fr(C,we),he;if(xe===null){for(;!Ue.done;we++,Ue=S.next())Ue=W(C,Ue.value,Y),Ue!==null&&(N=f(Ue,N,we),ge===null?he=Ue:ge.sibling=Ue,ge=Ue);return nt&&fr(C,we),he}for(xe=l(C,xe);!Ue.done;we++,Ue=S.next())Ue=ne(xe,C,we,Ue.value,Y),Ue!==null&&(e&&Ue.alternate!==null&&xe.delete(Ue.key===null?we:Ue.key),N=f(Ue,N,we),ge===null?he=Ue:ge.sibling=Ue,ge=Ue);return e&&xe.forEach(function(Ug){return n(C,Ug)}),nt&&fr(C,we),he}function ct(C,N,S,Y){if(typeof S=="object"&&S!==null&&S.type===L&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Te:e:{for(var he=S.key,ge=N;ge!==null;){if(ge.key===he){if(he=S.type,he===L){if(ge.tag===7){i(C,ge.sibling),N=u(ge,S.props.children),N.return=C,C=N;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ye&&Wd(he)===ge.type){i(C,ge.sibling),N=u(ge,S.props),N.ref=Os(C,ge,S),N.return=C,C=N;break e}i(C,ge);break}else n(C,ge);ge=ge.sibling}S.type===L?(N=_r(S.props.children,C.mode,Y,S.key),N.return=C,C=N):(Y=So(S.type,S.key,S.props,null,C.mode,Y),Y.ref=Os(C,N,S),Y.return=C,C=Y)}return m(C);case q:e:{for(ge=S.key;N!==null;){if(N.key===ge)if(N.tag===4&&N.stateNode.containerInfo===S.containerInfo&&N.stateNode.implementation===S.implementation){i(C,N.sibling),N=u(N,S.children||[]),N.return=C,C=N;break e}else{i(C,N);break}else n(C,N);N=N.sibling}N=qa(S,C.mode,Y),N.return=C,C=N}return m(C);case Ye:return ge=S._init,ct(C,N,ge(S._payload),Y)}if(Ee(S))return ce(C,N,S,Y);if(X(S))return de(C,N,S,Y);oo(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,N!==null&&N.tag===6?(i(C,N.sibling),N=u(N,S),N.return=C,C=N):(i(C,N),N=Ka(S,C.mode,Y),N.return=C,C=N),m(C)):i(C,N)}return ct}var Qr=Hd(!0),Vd=Hd(!1),As={},gn=Un(As),Fs=Un(As),zs=Un(As);function pr(e){if(e===As)throw Error(r(174));return e}function ha(e,n){switch(Ke(zs,n),Ke(Fs,e),Ke(gn,As),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:$(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=$(n,e)}Ze(gn),Ke(gn,n)}function Gr(){Ze(gn),Ze(Fs),Ze(zs)}function Yd(e){pr(zs.current);var n=pr(gn.current),i=$(n,e.type);n!==i&&(Ke(Fs,e),Ke(gn,i))}function pa(e){Fs.current===e&&(Ze(gn),Ze(Fs))}var st=Un(0);function lo(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ma=[];function ga(){for(var e=0;e<ma.length;e++)ma[e]._workInProgressVersionPrimary=null;ma.length=0}var ao=ue.ReactCurrentDispatcher,xa=ue.ReactCurrentBatchConfig,mr=0,it=null,dt=null,pt=null,co=!1,$s=!1,Us=0,cg=0;function Ct(){throw Error(r(321))}function va(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!nn(e[i],n[i]))return!1;return!0}function ya(e,n,i,l,u,f){if(mr=f,it=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ao.current=e===null||e.memoizedState===null?hg:pg,e=i(l,u),$s){f=0;do{if($s=!1,Us=0,25<=f)throw Error(r(301));f+=1,pt=dt=null,n.updateQueue=null,ao.current=mg,e=i(l,u)}while($s)}if(ao.current=ho,n=dt!==null&&dt.next!==null,mr=0,pt=dt=it=null,co=!1,n)throw Error(r(300));return e}function _a(){var e=Us!==0;return Us=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?it.memoizedState=pt=e:pt=pt.next=e,pt}function Jt(){if(dt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var n=pt===null?it.memoizedState:pt.next;if(n!==null)pt=n,dt=e;else{if(e===null)throw Error(r(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},pt===null?it.memoizedState=pt=e:pt=pt.next=e}return pt}function Bs(e,n){return typeof n=="function"?n(e):n}function wa(e){var n=Jt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=dt,u=l.baseQueue,f=i.pending;if(f!==null){if(u!==null){var m=u.next;u.next=f.next,f.next=m}l.baseQueue=u=f,i.pending=null}if(u!==null){f=u.next,l=l.baseState;var _=m=null,b=null,j=f;do{var U=j.lane;if((mr&U)===U)b!==null&&(b=b.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),l=j.hasEagerState?j.eagerState:e(l,j.action);else{var W={lane:U,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};b===null?(_=b=W,m=l):b=b.next=W,it.lanes|=U,gr|=U}j=j.next}while(j!==null&&j!==f);b===null?m=l:b.next=_,nn(l,n.memoizedState)||(Lt=!0),n.memoizedState=l,n.baseState=m,n.baseQueue=b,i.lastRenderedState=l}if(e=i.interleaved,e!==null){u=e;do f=u.lane,it.lanes|=f,gr|=f,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function ba(e){var n=Jt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var m=u=u.next;do f=e(f,m.action),m=m.next;while(m!==u);nn(f,n.memoizedState)||(Lt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,l]}function Qd(){}function Gd(e,n){var i=it,l=Jt(),u=n(),f=!nn(l.memoizedState,u);if(f&&(l.memoizedState=u,Lt=!0),l=l.queue,Na(Xd.bind(null,i,l,e),[e]),l.getSnapshot!==n||f||pt!==null&&pt.memoizedState.tag&1){if(i.flags|=2048,Ws(9,qd.bind(null,i,l,u,n),void 0,null),mt===null)throw Error(r(349));(mr&30)!==0||Kd(i,n,u)}return u}function Kd(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=it.updateQueue,n===null?(n={lastEffect:null,stores:null},it.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function qd(e,n,i,l){n.value=i,n.getSnapshot=l,Jd(n)&&Zd(e)}function Xd(e,n,i){return i(function(){Jd(n)&&Zd(e)})}function Jd(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!nn(e,i)}catch{return!0}}function Zd(e){var n=kn(e,1);n!==null&&an(n,e,1,-1)}function ef(e){var n=xn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},n.queue=e,e=e.dispatch=fg.bind(null,it,e),[n.memoizedState,e]}function Ws(e,n,i,l){return e={tag:e,create:n,destroy:i,deps:l,next:null},n=it.updateQueue,n===null?(n={lastEffect:null,stores:null},it.updateQueue=n,n.lastEffect=e.next=e):(i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e)),e}function tf(){return Jt().memoizedState}function uo(e,n,i,l){var u=xn();it.flags|=e,u.memoizedState=Ws(1|n,i,void 0,l===void 0?null:l)}function fo(e,n,i,l){var u=Jt();l=l===void 0?null:l;var f=void 0;if(dt!==null){var m=dt.memoizedState;if(f=m.destroy,l!==null&&va(l,m.deps)){u.memoizedState=Ws(n,i,f,l);return}}it.flags|=e,u.memoizedState=Ws(1|n,i,f,l)}function nf(e,n){return uo(8390656,8,e,n)}function Na(e,n){return fo(2048,8,e,n)}function rf(e,n){return fo(4,2,e,n)}function sf(e,n){return fo(4,4,e,n)}function of(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function lf(e,n,i){return i=i!=null?i.concat([e]):null,fo(4,4,of.bind(null,n,e),i)}function ka(){}function af(e,n){var i=Jt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&va(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function cf(e,n){var i=Jt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&va(n,l[1])?l[0]:(e=e(),i.memoizedState=[e,n],e)}function uf(e,n,i){return(mr&21)===0?(e.baseState&&(e.baseState=!1,Lt=!0),e.memoizedState=i):(nn(i,n)||(i=Du(),it.lanes|=i,gr|=i,e.baseState=!0),n)}function ug(e,n){var i=He;He=i!==0&&4>i?i:4,e(!0);var l=xa.transition;xa.transition={};try{e(!1),n()}finally{He=i,xa.transition=l}}function df(){return Jt().memoizedState}function dg(e,n,i){var l=Kn(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},ff(e))hf(n,i);else if(i=Dd(e,n,i,l),i!==null){var u=Tt();an(i,e,l,u),pf(i,n,l)}}function fg(e,n,i){var l=Kn(e),u={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(ff(e))hf(n,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var m=n.lastRenderedState,_=f(m,i);if(u.hasEagerState=!0,u.eagerState=_,nn(_,m)){var b=n.interleaved;b===null?(u.next=u,ca(n)):(u.next=b.next,b.next=u),n.interleaved=u;return}}catch{}finally{}i=Dd(e,n,u,l),i!==null&&(u=Tt(),an(i,e,l,u),pf(i,n,l))}}function ff(e){var n=e.alternate;return e===it||n!==null&&n===it}function hf(e,n){$s=co=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function pf(e,n,i){if((i&4194240)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,kl(e,i)}}var ho={readContext:Xt,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},hg={readContext:Xt,useCallback:function(e,n){return xn().memoizedState=[e,n===void 0?null:n],e},useContext:Xt,useEffect:nf,useImperativeHandle:function(e,n,i){return i=i!=null?i.concat([e]):null,uo(4194308,4,of.bind(null,n,e),i)},useLayoutEffect:function(e,n){return uo(4194308,4,e,n)},useInsertionEffect:function(e,n){return uo(4,2,e,n)},useMemo:function(e,n){var i=xn();return n=n===void 0?null:n,e=e(),i.memoizedState=[e,n],e},useReducer:function(e,n,i){var l=xn();return n=i!==void 0?i(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=dg.bind(null,it,e),[l.memoizedState,e]},useRef:function(e){var n=xn();return e={current:e},n.memoizedState=e},useState:ef,useDebugValue:ka,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=ef(!1),n=e[0];return e=ug.bind(null,e[1]),xn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,i){var l=it,u=xn();if(nt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),mt===null)throw Error(r(349));(mr&30)!==0||Kd(l,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,nf(Xd.bind(null,l,f,e),[e]),l.flags|=2048,Ws(9,qd.bind(null,l,f,i,n),void 0,null),i},useId:function(){var e=xn(),n=mt.identifierPrefix;if(nt){var i=Nn,l=bn;i=(l&~(1<<32-tn(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=Us++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=cg++,n=":"+n+"r"+i.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},pg={readContext:Xt,useCallback:af,useContext:Xt,useEffect:Na,useImperativeHandle:lf,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:wa,useRef:tf,useState:function(){return wa(Bs)},useDebugValue:ka,useDeferredValue:function(e){var n=Jt();return uf(n,dt.memoizedState,e)},useTransition:function(){var e=wa(Bs)[0],n=Jt().memoizedState;return[e,n]},useMutableSource:Qd,useSyncExternalStore:Gd,useId:df,unstable_isNewReconciler:!1},mg={readContext:Xt,useCallback:af,useContext:Xt,useEffect:Na,useImperativeHandle:lf,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:ba,useRef:tf,useState:function(){return ba(Bs)},useDebugValue:ka,useDeferredValue:function(e){var n=Jt();return dt===null?n.memoizedState=e:uf(n,dt.memoizedState,e)},useTransition:function(){var e=ba(Bs)[0],n=Jt().memoizedState;return[e,n]},useMutableSource:Qd,useSyncExternalStore:Gd,useId:df,unstable_isNewReconciler:!1};function Kr(e,n){try{var i="",l=n;do i+=Q(l),l=l.return;while(l);var u=i}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:n,stack:u,digest:null}}function Ca(e,n,i){return{value:e,source:null,stack:i??null,digest:n??null}}function Sa(e,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var gg=typeof WeakMap=="function"?WeakMap:Map;function mf(e,n,i){i=Cn(-1,i),i.tag=3,i.payload={element:null};var l=n.value;return i.callback=function(){_o||(_o=!0,Ua=l),Sa(e,n)},i}function gf(e,n,i){i=Cn(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;i.payload=function(){return l(u)},i.callback=function(){Sa(e,n)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){Sa(e,n),typeof l!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})}),i}function xf(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new gg;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(i)||(u.add(i),e=Tg.bind(null,e,n,i),n.then(e,e))}function vf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function yf(e,n,i,l,u){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=Cn(-1,1),n.tag=2,Vn(i,n,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var xg=ue.ReactCurrentOwner,Lt=!1;function It(e,n,i,l){n.child=e===null?Vd(n,null,i,l):Qr(n,e.child,i,l)}function _f(e,n,i,l,u){i=i.render;var f=n.ref;return Yr(n,u),l=ya(e,n,i,l,f,u),i=_a(),e!==null&&!Lt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,Sn(e,n,u)):(nt&&i&&ea(n),n.flags|=1,It(e,n,l,u),n.child)}function wf(e,n,i,l,u){if(e===null){var f=i.type;return typeof f=="function"&&!Ga(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=f,bf(e,n,f,l,u)):(e=So(i.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,(e.lanes&u)===0){var m=f.memoizedProps;if(i=i.compare,i=i!==null?i:Is,i(m,l)&&e.ref===n.ref)return Sn(e,n,u)}return n.flags|=1,e=Xn(f,l),e.ref=n.ref,e.return=n,n.child=e}function bf(e,n,i,l,u){if(e!==null){var f=e.memoizedProps;if(Is(f,l)&&e.ref===n.ref)if(Lt=!1,n.pendingProps=l=f,(e.lanes&u)!==0)(e.flags&131072)!==0&&(Lt=!0);else return n.lanes=e.lanes,Sn(e,n,u)}return Ea(e,n,i,l,u)}function Nf(e,n,i){var l=n.pendingProps,u=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Xr,Qt),Qt|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ke(Xr,Qt),Qt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:i,Ke(Xr,Qt),Qt|=l}else f!==null?(l=f.baseLanes|i,n.memoizedState=null):l=i,Ke(Xr,Qt),Qt|=l;return It(e,n,u,i),n.child}function kf(e,n){var i=n.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Ea(e,n,i,l,u){var f=Pt(i)?ur:kt.current;return f=Ur(n,f),Yr(n,u),i=ya(e,n,i,l,f,u),l=_a(),e!==null&&!Lt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,Sn(e,n,u)):(nt&&l&&ea(n),n.flags|=1,It(e,n,i,u),n.child)}function Cf(e,n,i,l,u){if(Pt(i)){var f=!0;qi(n)}else f=!1;if(Yr(n,u),n.stateNode===null)mo(e,n),Ud(n,i,l),fa(n,i,l,u),l=!0;else if(e===null){var m=n.stateNode,_=n.memoizedProps;m.props=_;var b=m.context,j=i.contextType;typeof j=="object"&&j!==null?j=Xt(j):(j=Pt(i)?ur:kt.current,j=Ur(n,j));var U=i.getDerivedStateFromProps,W=typeof U=="function"||typeof m.getSnapshotBeforeUpdate=="function";W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==l||b!==j)&&Bd(n,m,l,j),Hn=!1;var F=n.memoizedState;m.state=F,so(n,l,m,u),b=n.memoizedState,_!==l||F!==b||Rt.current||Hn?(typeof U=="function"&&(da(n,i,U,l),b=n.memoizedState),(_=Hn||$d(n,i,_,l,F,b,j))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=b),m.props=l,m.state=b,m.context=j,l=_):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Od(e,n),_=n.memoizedProps,j=n.type===n.elementType?_:sn(n.type,_),m.props=j,W=n.pendingProps,F=m.context,b=i.contextType,typeof b=="object"&&b!==null?b=Xt(b):(b=Pt(i)?ur:kt.current,b=Ur(n,b));var ne=i.getDerivedStateFromProps;(U=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==W||F!==b)&&Bd(n,m,l,b),Hn=!1,F=n.memoizedState,m.state=F,so(n,l,m,u);var ce=n.memoizedState;_!==W||F!==ce||Rt.current||Hn?(typeof ne=="function"&&(da(n,i,ne,l),ce=n.memoizedState),(j=Hn||$d(n,i,j,l,F,ce,b)||!1)?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ce,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ce,b)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ce),m.props=l,m.state=ce,m.context=b,l=j):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),l=!1)}return ja(e,n,i,l,f,u)}function ja(e,n,i,l,u,f){kf(e,n);var m=(n.flags&128)!==0;if(!l&&!m)return u&&jd(n,i,!1),Sn(e,n,f);l=n.stateNode,xg.current=n;var _=m&&typeof i.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&m?(n.child=Qr(n,e.child,null,f),n.child=Qr(n,null,_,f)):It(e,n,_,f),n.memoizedState=l.state,u&&jd(n,i,!0),n.child}function Sf(e){var n=e.stateNode;n.pendingContext?Sd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Sd(e,n.context,!1),ha(e,n.containerInfo)}function Ef(e,n,i,l,u){return Hr(),sa(u),n.flags|=256,It(e,n,i,l),n.child}var Ia={dehydrated:null,treeContext:null,retryLane:0};function Ta(e){return{baseLanes:e,cachePool:null,transitions:null}}function jf(e,n,i){var l=n.pendingProps,u=st.current,f=!1,m=(n.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(u&2)!==0),_?(f=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ke(st,u&1),e===null)return ra(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(m=l.children,e=l.fallback,f?(l=n.mode,f=n.child,m={mode:"hidden",children:m},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=m):f=Eo(m,l,0,null),e=_r(e,l,i,null),f.return=n,e.return=n,f.sibling=e,n.child=f,n.child.memoizedState=Ta(i),n.memoizedState=Ia,e):Ra(n,m));if(u=e.memoizedState,u!==null&&(_=u.dehydrated,_!==null))return vg(e,n,m,l,_,u,i);if(f){f=l.fallback,m=n.mode,u=e.child,_=u.sibling;var b={mode:"hidden",children:l.children};return(m&1)===0&&n.child!==u?(l=n.child,l.childLanes=0,l.pendingProps=b,n.deletions=null):(l=Xn(u,b),l.subtreeFlags=u.subtreeFlags&14680064),_!==null?f=Xn(_,f):(f=_r(f,m,i,null),f.flags|=2),f.return=n,l.return=n,l.sibling=f,n.child=l,l=f,f=n.child,m=e.child.memoizedState,m=m===null?Ta(i):{baseLanes:m.baseLanes|i,cachePool:null,transitions:m.transitions},f.memoizedState=m,f.childLanes=e.childLanes&~i,n.memoizedState=Ia,l}return f=e.child,e=f.sibling,l=Xn(f,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=i),l.return=n,l.sibling=null,e!==null&&(i=n.deletions,i===null?(n.deletions=[e],n.flags|=16):i.push(e)),n.child=l,n.memoizedState=null,l}function Ra(e,n){return n=Eo({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function po(e,n,i,l){return l!==null&&sa(l),Qr(n,e.child,null,i),e=Ra(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function vg(e,n,i,l,u,f,m){if(i)return n.flags&256?(n.flags&=-257,l=Ca(Error(r(422))),po(e,n,m,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(f=l.fallback,u=n.mode,l=Eo({mode:"visible",children:l.children},u,0,null),f=_r(f,u,m,null),f.flags|=2,l.return=n,f.return=n,l.sibling=f,n.child=l,(n.mode&1)!==0&&Qr(n,e.child,null,m),n.child.memoizedState=Ta(m),n.memoizedState=Ia,f);if((n.mode&1)===0)return po(e,n,m,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var _=l.dgst;return l=_,f=Error(r(419)),l=Ca(f,l,void 0),po(e,n,m,l)}if(_=(m&e.childLanes)!==0,Lt||_){if(l=mt,l!==null){switch(m&-m){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|m))!==0?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,kn(e,u),an(l,e,u,-1))}return Qa(),l=Ca(Error(r(421))),po(e,n,m,l)}return u.data==="$?"?(n.flags|=128,n.child=e.child,n=Rg.bind(null,e),u._reactRetry=n,null):(e=f.treeContext,Yt=$n(u.nextSibling),Vt=n,nt=!0,rn=null,e!==null&&(Kt[qt++]=bn,Kt[qt++]=Nn,Kt[qt++]=dr,bn=e.id,Nn=e.overflow,dr=n),n=Ra(n,l.children),n.flags|=4096,n)}function If(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),aa(e.return,n,i)}function Pa(e,n,i,l,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=u)}function Tf(e,n,i){var l=n.pendingProps,u=l.revealOrder,f=l.tail;if(It(e,n,l.children,i),l=st.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&If(e,i,n);else if(e.tag===19)If(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ke(st,l),(n.mode&1)===0)n.memoizedState=null;else switch(u){case"forwards":for(i=n.child,u=null;i!==null;)e=i.alternate,e!==null&&lo(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),Pa(n,!1,u,i,f);break;case"backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&lo(e)===null){n.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}Pa(n,!0,i,null,f);break;case"together":Pa(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function mo(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Sn(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),gr|=n.lanes,(i&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,i=Xn(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Xn(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function yg(e,n,i){switch(n.tag){case 3:Sf(n),Hr();break;case 5:Yd(n);break;case 1:Pt(n.type)&&qi(n);break;case 4:ha(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,u=n.memoizedProps.value;Ke(to,l._currentValue),l._currentValue=u;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(Ke(st,st.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?jf(e,n,i):(Ke(st,st.current&1),e=Sn(e,n,i),e!==null?e.sibling:null);Ke(st,st.current&1);break;case 19:if(l=(i&n.childLanes)!==0,(e.flags&128)!==0){if(l)return Tf(e,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ke(st,st.current),l)break;return null;case 22:case 23:return n.lanes=0,Nf(e,n,i)}return Sn(e,n,i)}var Rf,La,Pf,Lf;Rf=function(e,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},La=function(){},Pf=function(e,n,i,l){var u=e.memoizedProps;if(u!==l){e=n.stateNode,pr(gn.current);var f=null;switch(i){case"input":u=E(e,u),l=E(e,l),f=[];break;case"select":u=w({},u,{value:void 0}),l=w({},l,{value:void 0}),f=[];break;case"textarea":u=rt(e,u),l=rt(e,l),f=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Qi)}hl(i,l);var m;i=null;for(j in u)if(!l.hasOwnProperty(j)&&u.hasOwnProperty(j)&&u[j]!=null)if(j==="style"){var _=u[j];for(m in _)_.hasOwnProperty(m)&&(i||(i={}),i[m]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(a.hasOwnProperty(j)?f||(f=[]):(f=f||[]).push(j,null));for(j in l){var b=l[j];if(_=u!=null?u[j]:void 0,l.hasOwnProperty(j)&&b!==_&&(b!=null||_!=null))if(j==="style")if(_){for(m in _)!_.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(i||(i={}),i[m]="");for(m in b)b.hasOwnProperty(m)&&_[m]!==b[m]&&(i||(i={}),i[m]=b[m])}else i||(f||(f=[]),f.push(j,i)),i=b;else j==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,_=_?_.__html:void 0,b!=null&&_!==b&&(f=f||[]).push(j,b)):j==="children"?typeof b!="string"&&typeof b!="number"||(f=f||[]).push(j,""+b):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(a.hasOwnProperty(j)?(b!=null&&j==="onScroll"&&Je("scroll",e),f||_===b||(f=[])):(f=f||[]).push(j,b))}i&&(f=f||[]).push("style",i);var j=f;(n.updateQueue=j)&&(n.flags|=4)}},Lf=function(e,n,i,l){i!==l&&(n.flags|=4)};function Hs(e,n){if(!nt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function St(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function _g(e,n,i){var l=n.pendingProps;switch(ta(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(n),null;case 1:return Pt(n.type)&&Ki(),St(n),null;case 3:return l=n.stateNode,Gr(),Ze(Rt),Ze(kt),ga(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(eo(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,rn!==null&&(Ha(rn),rn=null))),La(e,n),St(n),null;case 5:pa(n);var u=pr(zs.current);if(i=n.type,e!==null&&n.stateNode!=null)Pf(e,n,i,l,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(r(166));return St(n),null}if(e=pr(gn.current),eo(n)){l=n.stateNode,i=n.type;var f=n.memoizedProps;switch(l[mn]=n,l[Ms]=f,e=(n.mode&1)!==0,i){case"dialog":Je("cancel",l),Je("close",l);break;case"iframe":case"object":case"embed":Je("load",l);break;case"video":case"audio":for(u=0;u<Rs.length;u++)Je(Rs[u],l);break;case"source":Je("error",l);break;case"img":case"image":case"link":Je("error",l),Je("load",l);break;case"details":Je("toggle",l);break;case"input":ae(l,f),Je("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Je("invalid",l);break;case"textarea":A(l,f),Je("invalid",l)}hl(i,f),u=null;for(var m in f)if(f.hasOwnProperty(m)){var _=f[m];m==="children"?typeof _=="string"?l.textContent!==_&&(f.suppressHydrationWarning!==!0&&Yi(l.textContent,_,e),u=["children",_]):typeof _=="number"&&l.textContent!==""+_&&(f.suppressHydrationWarning!==!0&&Yi(l.textContent,_,e),u=["children",""+_]):a.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&Je("scroll",l)}switch(i){case"input":Oe(l),Ne(l,f,!0);break;case"textarea":Oe(l),ve(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Qi)}l=u,n.updateQueue=l,l!==null&&(n.flags|=4)}else{m=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=G(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=m.createElement(i,{is:l.is}):(e=m.createElement(i),i==="select"&&(m=e,l.multiple?m.multiple=!0:l.size&&(m.size=l.size))):e=m.createElementNS(e,i),e[mn]=n,e[Ms]=l,Rf(e,n,!1,!1),n.stateNode=e;e:{switch(m=pl(i,l),i){case"dialog":Je("cancel",e),Je("close",e),u=l;break;case"iframe":case"object":case"embed":Je("load",e),u=l;break;case"video":case"audio":for(u=0;u<Rs.length;u++)Je(Rs[u],e);u=l;break;case"source":Je("error",e),u=l;break;case"img":case"image":case"link":Je("error",e),Je("load",e),u=l;break;case"details":Je("toggle",e),u=l;break;case"input":ae(e,l),u=E(e,l),Je("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=w({},l,{value:void 0}),Je("invalid",e);break;case"textarea":A(e,l),u=rt(e,l),Je("invalid",e);break;default:u=l}hl(i,u),_=u;for(f in _)if(_.hasOwnProperty(f)){var b=_[f];f==="style"?or(e,b):f==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Ie(e,b)):f==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&De(e,b):typeof b=="number"&&De(e,""+b):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(a.hasOwnProperty(f)?b!=null&&f==="onScroll"&&Je("scroll",e):b!=null&&je(e,f,b,m))}switch(i){case"input":Oe(e),Ne(e,l,!1);break;case"textarea":Oe(e),ve(e);break;case"option":l.value!=null&&e.setAttribute("value",""+T(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?We(e,!!l.multiple,f,!1):l.defaultValue!=null&&We(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Qi)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return St(n),null;case 6:if(e&&n.stateNode!=null)Lf(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(i=pr(zs.current),pr(gn.current),eo(n)){if(l=n.stateNode,i=n.memoizedProps,l[mn]=n,(f=l.nodeValue!==i)&&(e=Vt,e!==null))switch(e.tag){case 3:Yi(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yi(l.nodeValue,i,(e.mode&1)!==0)}f&&(n.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[mn]=n,n.stateNode=l}return St(n),null;case 13:if(Ze(st),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nt&&Yt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Md(),Hr(),n.flags|=98560,f=!1;else if(f=eo(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[mn]=n}else Hr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;St(n),f=!1}else rn!==null&&(Ha(rn),rn=null),f=!0;if(!f)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(st.current&1)!==0?ft===0&&(ft=3):Qa())),n.updateQueue!==null&&(n.flags|=4),St(n),null);case 4:return Gr(),La(e,n),e===null&&Ps(n.stateNode.containerInfo),St(n),null;case 10:return la(n.type._context),St(n),null;case 17:return Pt(n.type)&&Ki(),St(n),null;case 19:if(Ze(st),f=n.memoizedState,f===null)return St(n),null;if(l=(n.flags&128)!==0,m=f.rendering,m===null)if(l)Hs(f,!1);else{if(ft!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=lo(e),m!==null){for(n.flags|=128,Hs(f,!1),l=m.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=i,i=n.child;i!==null;)f=i,e=l,f.flags&=14680066,m=f.alternate,m===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=m.childLanes,f.lanes=m.lanes,f.child=m.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=m.memoizedProps,f.memoizedState=m.memoizedState,f.updateQueue=m.updateQueue,f.type=m.type,e=m.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ke(st,st.current&1|2),n.child}e=e.sibling}f.tail!==null&&at()>Jr&&(n.flags|=128,l=!0,Hs(f,!1),n.lanes=4194304)}else{if(!l)if(e=lo(m),e!==null){if(n.flags|=128,l=!0,i=e.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),Hs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!nt)return St(n),null}else 2*at()-f.renderingStartTime>Jr&&i!==1073741824&&(n.flags|=128,l=!0,Hs(f,!1),n.lanes=4194304);f.isBackwards?(m.sibling=n.child,n.child=m):(i=f.last,i!==null?i.sibling=m:n.child=m,f.last=m)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=at(),n.sibling=null,i=st.current,Ke(st,l?i&1|2:i&1),n):(St(n),null);case 22:case 23:return Ya(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(Qt&1073741824)!==0&&(St(n),n.subtreeFlags&6&&(n.flags|=8192)):St(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function wg(e,n){switch(ta(n),n.tag){case 1:return Pt(n.type)&&Ki(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Gr(),Ze(Rt),Ze(kt),ga(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return pa(n),null;case 13:if(Ze(st),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Hr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ze(st),null;case 4:return Gr(),null;case 10:return la(n.type._context),null;case 22:case 23:return Ya(),null;case 24:return null;default:return null}}var go=!1,Et=!1,bg=typeof WeakSet=="function"?WeakSet:Set,oe=null;function qr(e,n){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){ot(e,n,l)}else i.current=null}function Ma(e,n,i){try{i()}catch(l){ot(e,n,l)}}var Mf=!1;function Ng(e,n){if(Yl=Di,e=ud(),Fl(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var m=0,_=-1,b=-1,j=0,U=0,W=e,F=null;t:for(;;){for(var ne;W!==i||u!==0&&W.nodeType!==3||(_=m+u),W!==f||l!==0&&W.nodeType!==3||(b=m+l),W.nodeType===3&&(m+=W.nodeValue.length),(ne=W.firstChild)!==null;)F=W,W=ne;for(;;){if(W===e)break t;if(F===i&&++j===u&&(_=m),F===f&&++U===l&&(b=m),(ne=W.nextSibling)!==null)break;W=F,F=W.parentNode}W=ne}i=_===-1||b===-1?null:{start:_,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ql={focusedElem:e,selectionRange:i},Di=!1,oe=n;oe!==null;)if(n=oe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,oe=e;else for(;oe!==null;){n=oe;try{var ce=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var de=ce.memoizedProps,ct=ce.memoizedState,C=n.stateNode,N=C.getSnapshotBeforeUpdate(n.elementType===n.type?de:sn(n.type,de),ct);C.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var S=n.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Y){ot(n,n.return,Y)}if(e=n.sibling,e!==null){e.return=n.return,oe=e;break}oe=n.return}return ce=Mf,Mf=!1,ce}function Vs(e,n,i){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&Ma(n,i,f)}u=u.next}while(u!==l)}}function xo(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==n)}}function Da(e){var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof n=="function"?n(e):n.current=e}}function Df(e){var n=e.alternate;n!==null&&(e.alternate=null,Df(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[mn],delete n[Ms],delete n[Xl],delete n[ig],delete n[og])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Of(e){return e.tag===5||e.tag===3||e.tag===4}function Af(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oa(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(e,n):i.insertBefore(e,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(e,i)):(n=i,n.appendChild(e)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Qi));else if(l!==4&&(e=e.child,e!==null))for(Oa(e,n,i),e=e.sibling;e!==null;)Oa(e,n,i),e=e.sibling}function Aa(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Aa(e,n,i),e=e.sibling;e!==null;)Aa(e,n,i),e=e.sibling}var _t=null,on=!1;function Yn(e,n,i){for(i=i.child;i!==null;)Ff(e,n,i),i=i.sibling}function Ff(e,n,i){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Ii,i)}catch{}switch(i.tag){case 5:Et||qr(i,n);case 6:var l=_t,u=on;_t=null,Yn(e,n,i),_t=l,on=u,_t!==null&&(on?(e=_t,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):_t.removeChild(i.stateNode));break;case 18:_t!==null&&(on?(e=_t,i=i.stateNode,e.nodeType===8?ql(e.parentNode,i):e.nodeType===1&&ql(e,i),Ns(e)):ql(_t,i.stateNode));break;case 4:l=_t,u=on,_t=i.stateNode.containerInfo,on=!0,Yn(e,n,i),_t=l,on=u;break;case 0:case 11:case 14:case 15:if(!Et&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var f=u,m=f.destroy;f=f.tag,m!==void 0&&((f&2)!==0||(f&4)!==0)&&Ma(i,n,m),u=u.next}while(u!==l)}Yn(e,n,i);break;case 1:if(!Et&&(qr(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(_){ot(i,n,_)}Yn(e,n,i);break;case 21:Yn(e,n,i);break;case 22:i.mode&1?(Et=(l=Et)||i.memoizedState!==null,Yn(e,n,i),Et=l):Yn(e,n,i);break;default:Yn(e,n,i)}}function zf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new bg),n.forEach(function(l){var u=Pg.bind(null,e,l);i.has(l)||(i.add(l),l.then(u,u))})}}function ln(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];try{var f=e,m=n,_=m;e:for(;_!==null;){switch(_.tag){case 5:_t=_.stateNode,on=!1;break e;case 3:_t=_.stateNode.containerInfo,on=!0;break e;case 4:_t=_.stateNode.containerInfo,on=!0;break e}_=_.return}if(_t===null)throw Error(r(160));Ff(f,m,u),_t=null,on=!1;var b=u.alternate;b!==null&&(b.return=null),u.return=null}catch(j){ot(u,n,j)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)$f(n,e),n=n.sibling}function $f(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ln(n,e),vn(e),l&4){try{Vs(3,e,e.return),xo(3,e)}catch(de){ot(e,e.return,de)}try{Vs(5,e,e.return)}catch(de){ot(e,e.return,de)}}break;case 1:ln(n,e),vn(e),l&512&&i!==null&&qr(i,i.return);break;case 5:if(ln(n,e),vn(e),l&512&&i!==null&&qr(i,i.return),e.flags&32){var u=e.stateNode;try{De(u,"")}catch(de){ot(e,e.return,de)}}if(l&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,m=i!==null?i.memoizedProps:f,_=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{_==="input"&&f.type==="radio"&&f.name!=null&&me(u,f),pl(_,m);var j=pl(_,f);for(m=0;m<b.length;m+=2){var U=b[m],W=b[m+1];U==="style"?or(u,W):U==="dangerouslySetInnerHTML"?Ie(u,W):U==="children"?De(u,W):je(u,U,W,j)}switch(_){case"input":Ce(u,f);break;case"textarea":se(u,f);break;case"select":var F=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var ne=f.value;ne!=null?We(u,!!f.multiple,ne,!1):F!==!!f.multiple&&(f.defaultValue!=null?We(u,!!f.multiple,f.defaultValue,!0):We(u,!!f.multiple,f.multiple?[]:"",!1))}u[Ms]=f}catch(de){ot(e,e.return,de)}}break;case 6:if(ln(n,e),vn(e),l&4){if(e.stateNode===null)throw Error(r(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(de){ot(e,e.return,de)}}break;case 3:if(ln(n,e),vn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Ns(n.containerInfo)}catch(de){ot(e,e.return,de)}break;case 4:ln(n,e),vn(e);break;case 13:ln(n,e),vn(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||($a=at())),l&4&&zf(e);break;case 22:if(U=i!==null&&i.memoizedState!==null,e.mode&1?(Et=(j=Et)||U,ln(n,e),Et=j):ln(n,e),vn(e),l&8192){if(j=e.memoizedState!==null,(e.stateNode.isHidden=j)&&!U&&(e.mode&1)!==0)for(oe=e,U=e.child;U!==null;){for(W=oe=U;oe!==null;){switch(F=oe,ne=F.child,F.tag){case 0:case 11:case 14:case 15:Vs(4,F,F.return);break;case 1:qr(F,F.return);var ce=F.stateNode;if(typeof ce.componentWillUnmount=="function"){l=F,i=F.return;try{n=l,ce.props=n.memoizedProps,ce.state=n.memoizedState,ce.componentWillUnmount()}catch(de){ot(l,i,de)}}break;case 5:qr(F,F.return);break;case 22:if(F.memoizedState!==null){Wf(W);continue}}ne!==null?(ne.return=F,oe=ne):Wf(W)}U=U.sibling}e:for(U=null,W=e;;){if(W.tag===5){if(U===null){U=W;try{u=W.stateNode,j?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(_=W.stateNode,b=W.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,_.style.display=Wt("display",m))}catch(de){ot(e,e.return,de)}}}else if(W.tag===6){if(U===null)try{W.stateNode.nodeValue=j?"":W.memoizedProps}catch(de){ot(e,e.return,de)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===e)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===e)break e;for(;W.sibling===null;){if(W.return===null||W.return===e)break e;U===W&&(U=null),W=W.return}U===W&&(U=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:ln(n,e),vn(e),l&4&&zf(e);break;case 21:break;default:ln(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{e:{for(var i=e.return;i!==null;){if(Of(i)){var l=i;break e}i=i.return}throw Error(r(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(De(u,""),l.flags&=-33);var f=Af(e);Aa(e,f,u);break;case 3:case 4:var m=l.stateNode.containerInfo,_=Af(e);Oa(e,_,m);break;default:throw Error(r(161))}}catch(b){ot(e,e.return,b)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function kg(e,n,i){oe=e,Uf(e)}function Uf(e,n,i){for(var l=(e.mode&1)!==0;oe!==null;){var u=oe,f=u.child;if(u.tag===22&&l){var m=u.memoizedState!==null||go;if(!m){var _=u.alternate,b=_!==null&&_.memoizedState!==null||Et;_=go;var j=Et;if(go=m,(Et=b)&&!j)for(oe=u;oe!==null;)m=oe,b=m.child,m.tag===22&&m.memoizedState!==null?Hf(u):b!==null?(b.return=m,oe=b):Hf(u);for(;f!==null;)oe=f,Uf(f),f=f.sibling;oe=u,go=_,Et=j}Bf(e)}else(u.subtreeFlags&8772)!==0&&f!==null?(f.return=u,oe=f):Bf(e)}}function Bf(e){for(;oe!==null;){var n=oe;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Et||xo(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Et)if(i===null)l.componentDidMount();else{var u=n.elementType===n.type?i.memoizedProps:sn(n.type,i.memoizedProps);l.componentDidUpdate(u,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&Fd(n,f,l);break;case 3:var m=n.updateQueue;if(m!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Fd(n,m,i)}break;case 5:var _=n.stateNode;if(i===null&&n.flags&4){i=_;var b=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var j=n.alternate;if(j!==null){var U=j.memoizedState;if(U!==null){var W=U.dehydrated;W!==null&&Ns(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Et||n.flags&512&&Da(n)}catch(F){ot(n,n.return,F)}}if(n===e){oe=null;break}if(i=n.sibling,i!==null){i.return=n.return,oe=i;break}oe=n.return}}function Wf(e){for(;oe!==null;){var n=oe;if(n===e){oe=null;break}var i=n.sibling;if(i!==null){i.return=n.return,oe=i;break}oe=n.return}}function Hf(e){for(;oe!==null;){var n=oe;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{xo(4,n)}catch(b){ot(n,i,b)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var u=n.return;try{l.componentDidMount()}catch(b){ot(n,u,b)}}var f=n.return;try{Da(n)}catch(b){ot(n,f,b)}break;case 5:var m=n.return;try{Da(n)}catch(b){ot(n,m,b)}}}catch(b){ot(n,n.return,b)}if(n===e){oe=null;break}var _=n.sibling;if(_!==null){_.return=n.return,oe=_;break}oe=n.return}}var Cg=Math.ceil,vo=ue.ReactCurrentDispatcher,Fa=ue.ReactCurrentOwner,Zt=ue.ReactCurrentBatchConfig,ze=0,mt=null,ut=null,wt=0,Qt=0,Xr=Un(0),ft=0,Ys=null,gr=0,yo=0,za=0,Qs=null,Mt=null,$a=0,Jr=1/0,En=null,_o=!1,Ua=null,Qn=null,wo=!1,Gn=null,bo=0,Gs=0,Ba=null,No=-1,ko=0;function Tt(){return(ze&6)!==0?at():No!==-1?No:No=at()}function Kn(e){return(e.mode&1)===0?1:(ze&2)!==0&&wt!==0?wt&-wt:ag.transition!==null?(ko===0&&(ko=Du()),ko):(e=He,e!==0||(e=window.event,e=e===void 0?16:Hu(e.type)),e)}function an(e,n,i,l){if(50<Gs)throw Gs=0,Ba=null,Error(r(185));vs(e,i,l),((ze&2)===0||e!==mt)&&(e===mt&&((ze&2)===0&&(yo|=i),ft===4&&qn(e,wt)),Dt(e,l),i===1&&ze===0&&(n.mode&1)===0&&(Jr=at()+500,Xi&&Wn()))}function Dt(e,n){var i=e.callbackNode;a0(e,n);var l=Pi(e,e===mt?wt:0);if(l===0)i!==null&&Pu(i),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(i!=null&&Pu(i),n===1)e.tag===0?lg(Yf.bind(null,e)):Id(Yf.bind(null,e)),rg(function(){(ze&6)===0&&Wn()}),i=null;else{switch(Ou(l)){case 1:i=wl;break;case 4:i=Lu;break;case 16:i=ji;break;case 536870912:i=Mu;break;default:i=ji}i=eh(i,Vf.bind(null,e))}e.callbackPriority=n,e.callbackNode=i}}function Vf(e,n){if(No=-1,ko=0,(ze&6)!==0)throw Error(r(327));var i=e.callbackNode;if(Zr()&&e.callbackNode!==i)return null;var l=Pi(e,e===mt?wt:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||n)n=Co(e,l);else{n=l;var u=ze;ze|=2;var f=Gf();(mt!==e||wt!==n)&&(En=null,Jr=at()+500,vr(e,n));do try{jg();break}catch(_){Qf(e,_)}while(!0);oa(),vo.current=f,ze=u,ut!==null?n=0:(mt=null,wt=0,n=ft)}if(n!==0){if(n===2&&(u=bl(e),u!==0&&(l=u,n=Wa(e,u))),n===1)throw i=Ys,vr(e,0),qn(e,l),Dt(e,at()),i;if(n===6)qn(e,l);else{if(u=e.current.alternate,(l&30)===0&&!Sg(u)&&(n=Co(e,l),n===2&&(f=bl(e),f!==0&&(l=f,n=Wa(e,f))),n===1))throw i=Ys,vr(e,0),qn(e,l),Dt(e,at()),i;switch(e.finishedWork=u,e.finishedLanes=l,n){case 0:case 1:throw Error(r(345));case 2:yr(e,Mt,En);break;case 3:if(qn(e,l),(l&130023424)===l&&(n=$a+500-at(),10<n)){if(Pi(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){Tt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Kl(yr.bind(null,e,Mt,En),n);break}yr(e,Mt,En);break;case 4:if(qn(e,l),(l&4194240)===l)break;for(n=e.eventTimes,u=-1;0<l;){var m=31-tn(l);f=1<<m,m=n[m],m>u&&(u=m),l&=~f}if(l=u,l=at()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Cg(l/1960))-l,10<l){e.timeoutHandle=Kl(yr.bind(null,e,Mt,En),l);break}yr(e,Mt,En);break;case 5:yr(e,Mt,En);break;default:throw Error(r(329))}}}return Dt(e,at()),e.callbackNode===i?Vf.bind(null,e):null}function Wa(e,n){var i=Qs;return e.current.memoizedState.isDehydrated&&(vr(e,n).flags|=256),e=Co(e,n),e!==2&&(n=Mt,Mt=i,n!==null&&Ha(n)),e}function Ha(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function Sg(e){for(var n=e;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var u=i[l],f=u.getSnapshot;u=u.value;try{if(!nn(f(),u))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function qn(e,n){for(n&=~za,n&=~yo,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var i=31-tn(n),l=1<<i;e[i]=-1,n&=~l}}function Yf(e){if((ze&6)!==0)throw Error(r(327));Zr();var n=Pi(e,0);if((n&1)===0)return Dt(e,at()),null;var i=Co(e,n);if(e.tag!==0&&i===2){var l=bl(e);l!==0&&(n=l,i=Wa(e,l))}if(i===1)throw i=Ys,vr(e,0),qn(e,n),Dt(e,at()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,yr(e,Mt,En),Dt(e,at()),null}function Va(e,n){var i=ze;ze|=1;try{return e(n)}finally{ze=i,ze===0&&(Jr=at()+500,Xi&&Wn())}}function xr(e){Gn!==null&&Gn.tag===0&&(ze&6)===0&&Zr();var n=ze;ze|=1;var i=Zt.transition,l=He;try{if(Zt.transition=null,He=1,e)return e()}finally{He=l,Zt.transition=i,ze=n,(ze&6)===0&&Wn()}}function Ya(){Qt=Xr.current,Ze(Xr)}function vr(e,n){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,ng(i)),ut!==null)for(i=ut.return;i!==null;){var l=i;switch(ta(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Ki();break;case 3:Gr(),Ze(Rt),Ze(kt),ga();break;case 5:pa(l);break;case 4:Gr();break;case 13:Ze(st);break;case 19:Ze(st);break;case 10:la(l.type._context);break;case 22:case 23:Ya()}i=i.return}if(mt=e,ut=e=Xn(e.current,null),wt=Qt=n,ft=0,Ys=null,za=yo=gr=0,Mt=Qs=null,hr!==null){for(n=0;n<hr.length;n++)if(i=hr[n],l=i.interleaved,l!==null){i.interleaved=null;var u=l.next,f=i.pending;if(f!==null){var m=f.next;f.next=u,l.next=m}i.pending=l}hr=null}return e}function Qf(e,n){do{var i=ut;try{if(oa(),ao.current=ho,co){for(var l=it.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}co=!1}if(mr=0,pt=dt=it=null,$s=!1,Us=0,Fa.current=null,i===null||i.return===null){ft=1,Ys=n,ut=null;break}e:{var f=e,m=i.return,_=i,b=n;if(n=wt,_.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var j=b,U=_,W=U.tag;if((U.mode&1)===0&&(W===0||W===11||W===15)){var F=U.alternate;F?(U.updateQueue=F.updateQueue,U.memoizedState=F.memoizedState,U.lanes=F.lanes):(U.updateQueue=null,U.memoizedState=null)}var ne=vf(m);if(ne!==null){ne.flags&=-257,yf(ne,m,_,f,n),ne.mode&1&&xf(f,j,n),n=ne,b=j;var ce=n.updateQueue;if(ce===null){var de=new Set;de.add(b),n.updateQueue=de}else ce.add(b);break e}else{if((n&1)===0){xf(f,j,n),Qa();break e}b=Error(r(426))}}else if(nt&&_.mode&1){var ct=vf(m);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),yf(ct,m,_,f,n),sa(Kr(b,_));break e}}f=b=Kr(b,_),ft!==4&&(ft=2),Qs===null?Qs=[f]:Qs.push(f),f=m;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var C=mf(f,b,n);Ad(f,C);break e;case 1:_=b;var N=f.type,S=f.stateNode;if((f.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qn===null||!Qn.has(S)))){f.flags|=65536,n&=-n,f.lanes|=n;var Y=gf(f,_,n);Ad(f,Y);break e}}f=f.return}while(f!==null)}qf(i)}catch(he){n=he,ut===i&&i!==null&&(ut=i=i.return);continue}break}while(!0)}function Gf(){var e=vo.current;return vo.current=ho,e===null?ho:e}function Qa(){(ft===0||ft===3||ft===2)&&(ft=4),mt===null||(gr&268435455)===0&&(yo&268435455)===0||qn(mt,wt)}function Co(e,n){var i=ze;ze|=2;var l=Gf();(mt!==e||wt!==n)&&(En=null,vr(e,n));do try{Eg();break}catch(u){Qf(e,u)}while(!0);if(oa(),ze=i,vo.current=l,ut!==null)throw Error(r(261));return mt=null,wt=0,ft}function Eg(){for(;ut!==null;)Kf(ut)}function jg(){for(;ut!==null&&!Zm();)Kf(ut)}function Kf(e){var n=Zf(e.alternate,e,Qt);e.memoizedProps=e.pendingProps,n===null?qf(e):ut=n,Fa.current=null}function qf(e){var n=e;do{var i=n.alternate;if(e=n.return,(n.flags&32768)===0){if(i=_g(i,n,Qt),i!==null){ut=i;return}}else{if(i=wg(i,n),i!==null){i.flags&=32767,ut=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,ut=null;return}}if(n=n.sibling,n!==null){ut=n;return}ut=n=e}while(n!==null);ft===0&&(ft=5)}function yr(e,n,i){var l=He,u=Zt.transition;try{Zt.transition=null,He=1,Ig(e,n,i,l)}finally{Zt.transition=u,He=l}return null}function Ig(e,n,i,l){do Zr();while(Gn!==null);if((ze&6)!==0)throw Error(r(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(c0(e,f),e===mt&&(ut=mt=null,wt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||wo||(wo=!0,eh(ji,function(){return Zr(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=Zt.transition,Zt.transition=null;var m=He;He=1;var _=ze;ze|=4,Fa.current=null,Ng(e,i),$f(i,e),K0(Ql),Di=!!Yl,Ql=Yl=null,e.current=i,kg(i),e0(),ze=_,He=m,Zt.transition=f}else e.current=i;if(wo&&(wo=!1,Gn=e,bo=u),f=e.pendingLanes,f===0&&(Qn=null),r0(i.stateNode),Dt(e,at()),n!==null)for(l=e.onRecoverableError,i=0;i<n.length;i++)u=n[i],l(u.value,{componentStack:u.stack,digest:u.digest});if(_o)throw _o=!1,e=Ua,Ua=null,e;return(bo&1)!==0&&e.tag!==0&&Zr(),f=e.pendingLanes,(f&1)!==0?e===Ba?Gs++:(Gs=0,Ba=e):Gs=0,Wn(),null}function Zr(){if(Gn!==null){var e=Ou(bo),n=Zt.transition,i=He;try{if(Zt.transition=null,He=16>e?16:e,Gn===null)var l=!1;else{if(e=Gn,Gn=null,bo=0,(ze&6)!==0)throw Error(r(331));var u=ze;for(ze|=4,oe=e.current;oe!==null;){var f=oe,m=f.child;if((oe.flags&16)!==0){var _=f.deletions;if(_!==null){for(var b=0;b<_.length;b++){var j=_[b];for(oe=j;oe!==null;){var U=oe;switch(U.tag){case 0:case 11:case 15:Vs(8,U,f)}var W=U.child;if(W!==null)W.return=U,oe=W;else for(;oe!==null;){U=oe;var F=U.sibling,ne=U.return;if(Df(U),U===j){oe=null;break}if(F!==null){F.return=ne,oe=F;break}oe=ne}}}var ce=f.alternate;if(ce!==null){var de=ce.child;if(de!==null){ce.child=null;do{var ct=de.sibling;de.sibling=null,de=ct}while(de!==null)}}oe=f}}if((f.subtreeFlags&2064)!==0&&m!==null)m.return=f,oe=m;else e:for(;oe!==null;){if(f=oe,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Vs(9,f,f.return)}var C=f.sibling;if(C!==null){C.return=f.return,oe=C;break e}oe=f.return}}var N=e.current;for(oe=N;oe!==null;){m=oe;var S=m.child;if((m.subtreeFlags&2064)!==0&&S!==null)S.return=m,oe=S;else e:for(m=N;oe!==null;){if(_=oe,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:xo(9,_)}}catch(he){ot(_,_.return,he)}if(_===m){oe=null;break e}var Y=_.sibling;if(Y!==null){Y.return=_.return,oe=Y;break e}oe=_.return}}if(ze=u,Wn(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Ii,e)}catch{}l=!0}return l}finally{He=i,Zt.transition=n}}return!1}function Xf(e,n,i){n=Kr(i,n),n=mf(e,n,1),e=Vn(e,n,1),n=Tt(),e!==null&&(vs(e,1,n),Dt(e,n))}function ot(e,n,i){if(e.tag===3)Xf(e,e,i);else for(;n!==null;){if(n.tag===3){Xf(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qn===null||!Qn.has(l))){e=Kr(i,e),e=gf(n,e,1),n=Vn(n,e,1),e=Tt(),n!==null&&(vs(n,1,e),Dt(n,e));break}}n=n.return}}function Tg(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),n=Tt(),e.pingedLanes|=e.suspendedLanes&i,mt===e&&(wt&i)===i&&(ft===4||ft===3&&(wt&130023424)===wt&&500>at()-$a?vr(e,0):za|=i),Dt(e,n)}function Jf(e,n){n===0&&((e.mode&1)===0?n=1:(n=Ri,Ri<<=1,(Ri&130023424)===0&&(Ri=4194304)));var i=Tt();e=kn(e,n),e!==null&&(vs(e,n,i),Dt(e,i))}function Rg(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Jf(e,i)}function Pg(e,n){var i=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(r(314))}l!==null&&l.delete(n),Jf(e,i)}var Zf;Zf=function(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps||Rt.current)Lt=!0;else{if((e.lanes&i)===0&&(n.flags&128)===0)return Lt=!1,yg(e,n,i);Lt=(e.flags&131072)!==0}else Lt=!1,nt&&(n.flags&1048576)!==0&&Td(n,Zi,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;mo(e,n),e=n.pendingProps;var u=Ur(n,kt.current);Yr(n,i),u=ya(null,n,l,e,u,i);var f=_a();return n.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Pt(l)?(f=!0,qi(n)):f=!1,n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ua(n),u.updater=io,n.stateNode=u,u._reactInternals=n,fa(n,l,e,i),n=ja(null,n,l,!0,f,i)):(n.tag=0,nt&&f&&ea(n),It(null,n,u,i),n=n.child),n;case 16:l=n.elementType;e:{switch(mo(e,n),e=n.pendingProps,u=l._init,l=u(l._payload),n.type=l,u=n.tag=Mg(l),e=sn(l,e),u){case 0:n=Ea(null,n,l,e,i);break e;case 1:n=Cf(null,n,l,e,i);break e;case 11:n=_f(null,n,l,e,i);break e;case 14:n=wf(null,n,l,sn(l.type,e),i);break e}throw Error(r(306,l,""))}return n;case 0:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:sn(l,u),Ea(e,n,l,u,i);case 1:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:sn(l,u),Cf(e,n,l,u,i);case 3:e:{if(Sf(n),e===null)throw Error(r(387));l=n.pendingProps,f=n.memoizedState,u=f.element,Od(e,n),so(n,l,null,i);var m=n.memoizedState;if(l=m.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){u=Kr(Error(r(423)),n),n=Ef(e,n,l,i,u);break e}else if(l!==u){u=Kr(Error(r(424)),n),n=Ef(e,n,l,i,u);break e}else for(Yt=$n(n.stateNode.containerInfo.firstChild),Vt=n,nt=!0,rn=null,i=Vd(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Hr(),l===u){n=Sn(e,n,i);break e}It(e,n,l,i)}n=n.child}return n;case 5:return Yd(n),e===null&&ra(n),l=n.type,u=n.pendingProps,f=e!==null?e.memoizedProps:null,m=u.children,Gl(l,u)?m=null:f!==null&&Gl(l,f)&&(n.flags|=32),kf(e,n),It(e,n,m,i),n.child;case 6:return e===null&&ra(n),null;case 13:return jf(e,n,i);case 4:return ha(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Qr(n,null,l,i):It(e,n,l,i),n.child;case 11:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:sn(l,u),_f(e,n,l,u,i);case 7:return It(e,n,n.pendingProps,i),n.child;case 8:return It(e,n,n.pendingProps.children,i),n.child;case 12:return It(e,n,n.pendingProps.children,i),n.child;case 10:e:{if(l=n.type._context,u=n.pendingProps,f=n.memoizedProps,m=u.value,Ke(to,l._currentValue),l._currentValue=m,f!==null)if(nn(f.value,m)){if(f.children===u.children&&!Rt.current){n=Sn(e,n,i);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var _=f.dependencies;if(_!==null){m=f.child;for(var b=_.firstContext;b!==null;){if(b.context===l){if(f.tag===1){b=Cn(-1,i&-i),b.tag=2;var j=f.updateQueue;if(j!==null){j=j.shared;var U=j.pending;U===null?b.next=b:(b.next=U.next,U.next=b),j.pending=b}}f.lanes|=i,b=f.alternate,b!==null&&(b.lanes|=i),aa(f.return,i,n),_.lanes|=i;break}b=b.next}}else if(f.tag===10)m=f.type===n.type?null:f.child;else if(f.tag===18){if(m=f.return,m===null)throw Error(r(341));m.lanes|=i,_=m.alternate,_!==null&&(_.lanes|=i),aa(m,i,n),m=f.sibling}else m=f.child;if(m!==null)m.return=f;else for(m=f;m!==null;){if(m===n){m=null;break}if(f=m.sibling,f!==null){f.return=m.return,m=f;break}m=m.return}f=m}It(e,n,u.children,i),n=n.child}return n;case 9:return u=n.type,l=n.pendingProps.children,Yr(n,i),u=Xt(u),l=l(u),n.flags|=1,It(e,n,l,i),n.child;case 14:return l=n.type,u=sn(l,n.pendingProps),u=sn(l.type,u),wf(e,n,l,u,i);case 15:return bf(e,n,n.type,n.pendingProps,i);case 17:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:sn(l,u),mo(e,n),n.tag=1,Pt(l)?(e=!0,qi(n)):e=!1,Yr(n,i),Ud(n,l,u),fa(n,l,u,i),ja(null,n,l,!0,e,i);case 19:return Tf(e,n,i);case 22:return Nf(e,n,i)}throw Error(r(156,n.tag))};function eh(e,n){return Ru(e,n)}function Lg(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,n,i,l){return new Lg(e,n,i,l)}function Ga(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mg(e){if(typeof e=="function")return Ga(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ee)return 11;if(e===tt)return 14}return 2}function Xn(e,n){var i=e.alternate;return i===null?(i=en(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function So(e,n,i,l,u,f){var m=2;if(l=e,typeof e=="function")Ga(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case L:return _r(i.children,u,f,n);case R:m=8,u|=8;break;case ke:return e=en(12,i,n,u|2),e.elementType=ke,e.lanes=f,e;case be:return e=en(13,i,n,u),e.elementType=be,e.lanes=f,e;case $e:return e=en(19,i,n,u),e.elementType=$e,e.lanes=f,e;case Fe:return Eo(i,u,f,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:m=10;break e;case z:m=9;break e;case ee:m=11;break e;case tt:m=14;break e;case Ye:m=16,l=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=en(m,i,n,u),n.elementType=e,n.type=l,n.lanes=f,n}function _r(e,n,i,l){return e=en(7,e,l,n),e.lanes=i,e}function Eo(e,n,i,l){return e=en(22,e,l,n),e.elementType=Fe,e.lanes=i,e.stateNode={isHidden:!1},e}function Ka(e,n,i){return e=en(6,e,null,n),e.lanes=i,e}function qa(e,n,i){return n=en(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Dg(e,n,i,l,u){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Xa(e,n,i,l,u,f,m,_,b){return e=new Dg(e,n,i,_,b),n===1?(n=1,f===!0&&(n|=8)):n=0,f=en(3,null,null,n),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ua(f),e}function Og(e,n,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:l==null?null:""+l,children:e,containerInfo:n,implementation:i}}function th(e){if(!e)return Bn;e=e._reactInternals;e:{if(ar(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Pt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(Pt(i))return Ed(e,i,n)}return n}function nh(e,n,i,l,u,f,m,_,b){return e=Xa(i,l,!0,e,u,f,m,_,b),e.context=th(null),i=e.current,l=Tt(),u=Kn(i),f=Cn(l,u),f.callback=n??null,Vn(i,f,u),e.current.lanes=u,vs(e,u,l),Dt(e,l),e}function jo(e,n,i,l){var u=n.current,f=Tt(),m=Kn(u);return i=th(i),n.context===null?n.context=i:n.pendingContext=i,n=Cn(f,m),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=Vn(u,n,m),e!==null&&(an(e,u,m,f),ro(e,u,m)),m}function Io(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Ja(e,n){rh(e,n),(e=e.alternate)&&rh(e,n)}function Ag(){return null}var sh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Za(e){this._internalRoot=e}To.prototype.render=Za.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));jo(e,n,null,null)},To.prototype.unmount=Za.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;xr(function(){jo(null,e,null,null)}),n[_n]=null}};function To(e){this._internalRoot=e}To.prototype.unstable_scheduleHydration=function(e){if(e){var n=zu();e={blockedOn:null,target:e,priority:n};for(var i=0;i<An.length&&n!==0&&n<An[i].priority;i++);An.splice(i,0,e),i===0&&Bu(e)}};function ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ro(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ih(){}function Fg(e,n,i,l,u){if(u){if(typeof l=="function"){var f=l;l=function(){var j=Io(m);f.call(j)}}var m=nh(n,l,e,0,null,!1,!1,"",ih);return e._reactRootContainer=m,e[_n]=m.current,Ps(e.nodeType===8?e.parentNode:e),xr(),m}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var _=l;l=function(){var j=Io(b);_.call(j)}}var b=Xa(e,0,!1,null,null,!1,!1,"",ih);return e._reactRootContainer=b,e[_n]=b.current,Ps(e.nodeType===8?e.parentNode:e),xr(function(){jo(n,b,i,l)}),b}function Po(e,n,i,l,u){var f=i._reactRootContainer;if(f){var m=f;if(typeof u=="function"){var _=u;u=function(){var b=Io(m);_.call(b)}}jo(n,m,e,u)}else m=Fg(i,n,e,u,l);return Io(m)}Au=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var i=xs(n.pendingLanes);i!==0&&(kl(n,i|1),Dt(n,at()),(ze&6)===0&&(Jr=at()+500,Wn()))}break;case 13:xr(function(){var l=kn(e,1);if(l!==null){var u=Tt();an(l,e,1,u)}}),Ja(e,1)}},Cl=function(e){if(e.tag===13){var n=kn(e,134217728);if(n!==null){var i=Tt();an(n,e,134217728,i)}Ja(e,134217728)}},Fu=function(e){if(e.tag===13){var n=Kn(e),i=kn(e,n);if(i!==null){var l=Tt();an(i,e,n,l)}Ja(e,n)}},zu=function(){return He},$u=function(e,n){var i=He;try{return He=e,n()}finally{He=i}},xl=function(e,n,i){switch(n){case"input":if(Ce(e,i),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var u=Gi(l);if(!u)throw Error(r(90));Nt(l),Ce(l,u)}}}break;case"textarea":se(e,i);break;case"select":n=i.value,n!=null&&We(e,!!i.multiple,n,!1)}},ku=Va,Cu=xr;var zg={usingClientEntryPoint:!1,Events:[Ds,zr,Gi,bu,Nu,Va]},Ks={findFiberByHostInstance:cr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$g={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Iu(e),e===null?null:e.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||Ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{Ii=Lo.inject($g),pn=Lo}catch{}}return Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zg,Ot.createPortal=function(e,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ec(n))throw Error(r(200));return Og(e,n,null,i)},Ot.createRoot=function(e,n){if(!ec(e))throw Error(r(299));var i=!1,l="",u=sh;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),n=Xa(e,1,!1,null,null,i,!1,l,u),e[_n]=n.current,Ps(e.nodeType===8?e.parentNode:e),new Za(n)},Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Iu(n),e=e===null?null:e.stateNode,e},Ot.flushSync=function(e){return xr(e)},Ot.hydrate=function(e,n,i){if(!Ro(n))throw Error(r(200));return Po(null,e,n,!0,i)},Ot.hydrateRoot=function(e,n,i){if(!ec(e))throw Error(r(405));var l=i!=null&&i.hydratedSources||null,u=!1,f="",m=sh;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),n=nh(n,null,e,1,i??null,u,!1,f,m),e[_n]=n.current,Ps(e),l)for(e=0;e<l.length;e++)i=l[e],u=i._getVersion,u=u(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,u]:n.mutableSourceEagerHydrationData.push(i,u);return new To(n)},Ot.render=function(e,n,i){if(!Ro(n))throw Error(r(200));return Po(null,e,n,!1,i)},Ot.unmountComponentAtNode=function(e){if(!Ro(e))throw Error(r(40));return e._reactRootContainer?(xr(function(){Po(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1},Ot.unstable_batchedUpdates=Va,Ot.unstable_renderSubtreeIntoContainer=function(e,n,i,l){if(!Ro(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Po(e,n,i,!1,l)},Ot.version="18.2.0-next-9e3b772b8-20220608",Ot}var hh;function Kg(){if(hh)return rc.exports;hh=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),rc.exports=Gg(),rc.exports}var ph;function qg(){if(ph)return Mo;ph=1;var s=Kg();return Mo.createRoot=s.createRoot,Mo.hydrateRoot=s.hydrateRoot,Mo}var Xg=qg();const Jg=xp(Xg),Zg=({children:s,activeTab:t,setActiveTab:r,isAdmin:o,onToggleAdmin:a,onDownloadDB:d,onUploadDB:h,onOpenSync:p,isSyncActive:g})=>{const v=B.useRef(null),k=[{id:"characters",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})},{id:"connections",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})},{id:"worlds",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})},{id:"notes",label:"",icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})},{id:"admin",label:"",adminOnly:!0,icon:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})}],y=x=>{var H;const I=(H=x.target.files)==null?void 0:H[0];if(!I)return;const D=new FileReader;D.onload=Z=>{var re;const le=(re=Z.target)==null?void 0:re.result;typeof le=="string"&&h(le)},D.readAsText(I),v.current&&(v.current.value="")};return c.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#050505] text-stone-300",children:[c.jsxs("div",{className:"md:hidden flex items-center justify-between px-6 py-5 border-b border-stone-900 bg-[#050505]/95 backdrop-blur sticky top-0 z-40",children:[c.jsx("h1",{className:"text-lg font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""}),c.jsx("button",{onClick:a,className:`p-2 rounded-lg transition-all border ${o?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500":"bg-stone-900/50 border-stone-800 text-stone-500"}`,children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),c.jsxs("aside",{className:"hidden md:flex w-64 border-r border-stone-900 flex-col fixed h-screen bg-[#050505] z-50",children:[c.jsx("div",{className:"p-8",children:c.jsx("h1",{className:"text-xl font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""})}),c.jsx("nav",{className:"flex-grow px-4 space-y-2",children:k.filter(x=>!x.adminOnly||o).map(x=>c.jsxs("button",{onClick:()=>r(x.id),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-3 ${t===x.id?"bg-stone-900 text-stone-100 border-l-2 border-emerald-500 rounded-l-none":"hover:bg-stone-900/50 text-stone-500 hover:text-stone-300"} ${x.adminOnly?"text-emerald-500/70":""}`,children:[c.jsx("svg",{className:"w-5 h-5 opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.icon}),x.label]},x.id))}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("button",{onClick:p,className:`w-full py-2 px-3 rounded-lg border text-[9px] uppercase tracking-widest font-bold flex items-center justify-center gap-2 transition-all ${g?"bg-emerald-900/10 border-emerald-500/30 text-emerald-500 hover:bg-emerald-900/20":"bg-stone-900/30 border-stone-800 text-stone-600 hover:bg-stone-900/60 hover:text-stone-400"}`,children:[c.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${g?"bg-emerald-500 animate-pulse":"bg-stone-600"}`}),g?"":""]}),c.jsx("button",{onClick:a,className:`w-full py-3 text-[10px] uppercase tracking-widest font-bold rounded-md transition-all border ${o?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500 shadow-lg shadow-emerald-900/10":"bg-stone-900/50 hover:bg-stone-900 border-stone-800 text-stone-400"}`,children:o?" ()":"  "})]})]}),c.jsx("nav",{className:"md:hidden fixed bottom-0 w-full bg-[#050505]/95 backdrop-blur-xl border-t border-stone-900 z-50 px-2 pb-safe-area",children:c.jsxs("div",{className:"flex justify-around items-center",children:[k.filter(x=>!x.adminOnly||o).map(x=>c.jsxs("button",{onClick:()=>r(x.id),className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${t===x.id?"text-emerald-500":"text-stone-600"}`,children:[c.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.icon}),c.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:x.label})]},x.id)),c.jsxs("button",{onClick:p,className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${g?"text-emerald-500":"text-stone-700"}`,children:[c.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:""})]})]})}),c.jsxs("main",{className:"flex-grow md:ml-64 min-h-screen relative pb-24 md:pb-0",children:[c.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 md:px-12 md:py-12",children:s}),c.jsxs("div",{className:"fixed bottom-24 md:bottom-8 right-4 md:right-8 flex gap-3 z-40 scale-90 md:scale-100 origin-bottom-right",children:[c.jsx("input",{type:"file",ref:v,onChange:y,accept:".json",className:"hidden"}),c.jsx("button",{onClick:()=>{var x;return(x=v.current)==null?void 0:x.click()},className:"px-4 py-2 md:px-5 md:py-2.5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-emerald-500 transition-all backdrop-blur-sm shadow-lg shadow-emerald-900/10",children:" "}),c.jsx("button",{onClick:d,className:"px-4 py-2 md:px-5 md:py-2.5 bg-stone-900/80 hover:bg-stone-800 border border-stone-700 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-stone-300 transition-all backdrop-blur-sm",children:" "})]})]})]})},ex=({character:s,isVisible:t=!0,staggerIndex:r=0,onClick:o})=>{const a=B.useRef(null),[d,h]=B.useState({x:0,y:0}),[p,g]=B.useState({x:50,y:50,opacity:0}),[v,k]=B.useState(!1),[y,x]=B.useState(!1),I=B.useMemo(()=>Array.from({length:8}).map((L,R)=>({id:R,left:`${Math.random()*100}%`,delay:`${Math.random()*.6}s`,duration:`${1+Math.random()}s`,size:`${1.5+Math.random()*2}px`})),[]),D=L=>{if(!a.current||!t)return;const R=a.current.getBoundingClientRect(),ke=R.left+R.width/2,ie=R.top+R.height/2,z=-(L.clientY-ie)/(R.height/2)*12,ee=(L.clientX-ke)/(R.width/2)*12,be=(L.clientX-R.left)/R.width*100,$e=(L.clientY-R.top)/R.height*100;h({x:z,y:ee}),g({x:be,y:$e,opacity:.5})},H=()=>t&&k(!0),Z=()=>{h({x:0,y:0}),g(L=>({...L,opacity:0})),k(!1),x(!1)},le={objectFit:"cover",objectPosition:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transformOrigin:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transform:`scale(${s.miniImageScale??1})`},re=s.name.length,je=re>20?"text-sm":re>15?"text-base":"text-xl",ue=v?`${-d.y*2.5}px ${d.x*2.5}px 50px -10px rgba(16, 185, 129, 0.3)`:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",Te=t?`${Math.min(r*45,900)}ms`:"0ms",q=y?.96:v?1.04:1;return c.jsx("div",{className:`relative mb-10 px-5 w-full sm:w-1/2 lg:w-1/4 perspective-2000 preserve-3d transition-opacity duration-500 ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,style:{animation:t?"reveal-3d-fire 1.1s cubic-bezier(0.22, 1, 0.36, 1) both":"disappear-3d-fire 0.6s cubic-bezier(0.22, 1, 0.36, 1) both",animationDelay:t?Te:"0ms"},children:c.jsxs("div",{className:"h-full relative preserve-3d pointer-events-none",children:[t&&I.map(L=>c.jsx("div",{className:"absolute bottom-4 bg-emerald-400 rounded-full blur-[0.5px] z-0 pointer-events-none",style:{left:L.left,width:L.size,height:L.size,animation:`ember-float ${L.duration} ease-out both`,animationDelay:`calc(${Te} + ${L.delay})`,boxShadow:"0 0 6px #10b981"}},L.id)),c.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-[60px] rounded-full transition-opacity duration-700 pointer-events-none -z-10",style:{opacity:v?.45:0,transform:`translate3d(${-d.y*4}px, ${d.x*4}px, -50px) scale(${v?1.1:1})`}}),c.jsxs("div",{ref:a,onMouseMove:D,onMouseEnter:H,onMouseLeave:Z,onMouseDown:()=>t&&x(!0),onMouseUp:()=>x(!1),onClick:()=>t&&o(s.id),style:{transform:`rotateX(${d.x}deg) rotateY(${d.y}deg) scale(${q})`,boxShadow:ue,transition:v&&!y?"transform 0.1s ease-out, box-shadow 0.1s ease-out":"transform 0.7s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.7s ease"},className:"relative bg-[#0f0f0f]/80 border border-stone-900 rounded-2xl p-6 flex flex-col items-center group cursor-pointer h-full min-h-[320px] preserve-3d overflow-hidden backdrop-blur-sm pointer-events-auto z-10",children:[c.jsx("div",{className:"absolute inset-0 pointer-events-none z-20 transition-opacity duration-300",style:{background:`radial-gradient(circle at ${p.x}% ${p.y}%, rgba(255,255,255,0.12) 0%, transparent 60%)`,opacity:p.opacity}}),c.jsx("div",{className:`absolute inset-0 border border-emerald-500/20 rounded-2xl transition-opacity duration-500 pointer-events-none ${v?"opacity-100":"opacity-0"}`}),c.jsx("div",{className:"relative mt-2 shrink-0 translate-z-30 pointer-events-none",children:c.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-2 border-stone-800 group-hover:border-emerald-500/50 transition-all duration-500 bg-black shadow-2xl",children:c.jsx("img",{src:s.imageUrl,alt:s.name,style:le,className:"w-full h-full opacity-80 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"})})}),c.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center w-full px-2 shrink-0 translate-z-20 pointer-events-none",children:[c.jsx("h3",{className:`font-serif font-medium text-stone-100 group-hover:text-emerald-100 transition-colors text-center leading-tight line-clamp-1 ${je}`,children:s.name}),c.jsxs("div",{className:"flex items-center gap-1.5 mt-3",children:[s.age&&c.jsxs("div",{className:"bg-stone-900/60 border border-stone-800 px-2.5 py-1 rounded-lg flex items-baseline gap-1 shadow-inner",children:[c.jsx("span",{className:"text-[11px] font-bold text-stone-300 tracking-tight",children:s.age.toString().replace(/[^0-9]/g,"")||s.age}),c.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-emerald-600/80",children:""})]}),s.height&&c.jsxs("div",{className:"bg-stone-900/60 border border-stone-800 px-2.5 py-1 rounded-lg flex items-baseline gap-1 shadow-inner",children:[c.jsx("span",{className:"text-[11px] font-bold text-stone-300 tracking-tight",children:s.height.toString().replace(/[^0-9]/g,"")||s.height}),c.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-emerald-600/80",children:""})]})]})]}),c.jsx("div",{className:"mt-5 flex flex-wrap gap-1.5 justify-center content-start min-h-[28px] w-full px-1 translate-z-10 pointer-events-none",children:s.tags&&s.tags.length>0?c.jsx(c.Fragment,{children:s.tags.slice(0,3).map(L=>c.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[8px] uppercase tracking-wider font-black rounded-md whitespace-nowrap",children:L},L))}):c.jsx("div",{className:"h-4"})}),c.jsx("div",{className:"mt-auto pt-6 border-t border-stone-900/50 w-full flex justify-center shrink-0 translate-z-10 pointer-events-none",children:c.jsx("span",{className:"text-[8px] uppercase tracking-[0.3em] font-black text-stone-700 group-hover:text-emerald-500 transition-colors",children:" "})})]})]})})},mh=({imageUrl:s,scale:t,x:r,y:o,isCircular:a=!1,onUpdate:d})=>{const h=B.useRef(null),[p,g]=B.useState(!1),[v,k]=B.useState({x:0,y:0}),y=x=>{g(!0),k({x:x.clientX,y:x.clientY})};return B.useEffect(()=>{const x=D=>{if(!p||!h.current)return;const H=D.clientX-v.x,Z=D.clientY-v.y,le=.2,re=r-H*le/t,je=o-Z*le/t;d({x:re,y:je}),k({x:D.clientX,y:D.clientY})},I=()=>g(!1);return p&&(window.addEventListener("mousemove",x),window.addEventListener("mouseup",I)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",I)}},[p,v,r,o,t,d]),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{ref:h,className:`relative overflow-hidden bg-black border border-stone-800 cursor-move group select-none shadow-2xl transition-all duration-500 hover:border-emerald-500/40 ${a?"w-48 h-48 rounded-full mx-auto":"aspect-[4/5] rounded-3xl w-full"}`,onMouseDown:y,children:[c.jsx("img",{src:s,alt:"",draggable:!1,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${r}% ${o}%`,transformOrigin:`${r}% ${o}%`,transform:`scale(${t})`},className:"pointer-events-none transition-opacity duration-300 opacity-90 group-hover:opacity-100"}),c.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/5 pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity flex items-center justify-center",children:c.jsx("div",{className:"bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-emerald-500/20",children:c.jsx("span",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-[0.25em]",children:" "})})})]}),c.jsxs("div",{className:"bg-stone-900/60 p-4 rounded-2xl border border-stone-800/50 space-y-3 shadow-inner",children:[c.jsxs("div",{className:"flex justify-between items-center px-1",children:[c.jsx("span",{className:"text-[10px] font-black text-stone-500 uppercase tracking-widest",children:""}),c.jsxs("span",{className:"text-[10px] font-mono text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded",children:[t.toFixed(2),"x"]})]}),c.jsx("input",{type:"range",min:"1",max:"5",step:"0.01",value:t,onChange:x=>d({scale:parseFloat(x.target.value)}),className:"w-full h-1.5 bg-stone-800 rounded-full appearance-none cursor-pointer accent-emerald-500"}),c.jsx("p",{className:"text-[8px] text-stone-700 text-center uppercase tracking-tighter",children:"      "})]})]})},Fo=(s,t=800,r=.6)=>new Promise((o,a)=>{const d=new FileReader;d.readAsDataURL(s),d.onload=h=>{var g;const p=new Image;p.src=(g=h.target)==null?void 0:g.result,p.onload=()=>{const v=document.createElement("canvas");let k=p.width,y=p.height;k>t&&(y=y*t/k,k=t),v.width=k,v.height=y;const x=v.getContext("2d");if(x){x.drawImage(p,0,0,k,y);const I=v.toDataURL("image/jpeg",r);o(I)}else a(new Error("Canvas context not available"))},p.onerror=v=>a(v)},d.onerror=h=>a(h)}),tx=({character:s,isAdmin:t,allCharacters:r,availableTags:o,availableHiddenTags:a,worlds:d,notes:h=[],onBack:p,onSave:g,onSelectCharacter:v,onDeleteNote:k})=>{var pe,Se;const[y,x]=B.useState(s),[I,D]=B.useState(!1),[H,Z]=B.useState(!1),[le,re]=B.useState(!1),[je,ue]=B.useState(!1),[Te,q]=B.useState(""),[L,R]=B.useState([]);B.useEffect(()=>{x(s)},[s]);const ke=B.useMemo(()=>{var T,J;if(!d)return null;for(const ye of d){if((T=ye.characterIds)!=null&&T.includes(s.id))return ye.name;if(ye.subLocations){for(const Oe of ye.subLocations)if((J=Oe.characterIds)!=null&&J.includes(s.id))return`${ye.name} / ${Oe.name}`}}return null},[d,s.id]),ie=B.useMemo(()=>Array.isArray(h)?h.filter(T=>T&&(T.targetId===s.id||T.authorId===s.id)):[],[h,s.id]),z=(T,J)=>{x(ye=>({...ye,[T]:J}))},ee=T=>{x(J=>({...J,imageScale:T.scale??J.imageScale,imageX:T.x??J.imageX,imageY:T.y??J.imageY}))},be=T=>{x(J=>({...J,miniImageScale:T.scale??J.miniImageScale,miniImageX:T.x??J.miniImageX,miniImageY:T.y??J.miniImageY}))},$e=async T=>{var ye;const J=(ye=T.target.files)==null?void 0:ye[0];if(J){ue(!0);try{const Oe=await Fo(J);z("imageUrl",Oe)}catch(Oe){console.error("Error processing image",Oe),alert("   ")}finally{ue(!1)}}},tt=(T,J=!1)=>{if(J){const ye=y.hiddenTags||[],Oe=ye.includes(T)?ye.filter(Nt=>Nt!==T):[...ye,T];z("hiddenTags",Oe)}else{const ye=y.tags||[],Oe=ye.includes(T)?ye.filter(Nt=>Nt!==T):[...ye,T];z("tags",Oe)}},Ye=()=>{g(y)},Fe=()=>{x(s)},V=()=>{t&&g(y),p()},X=()=>{re(!le),q(""),R([])},w=T=>{const J={id:T.id,name:T.name,role:"",color:"#ef4444"},ye=y.connections||[];ye.some(Oe=>Oe.id===T.id)||z("connections",[...ye,J]),re(!1)},O=T=>{const J=y.connections||[];z("connections",J.filter(ye=>ye.id!==T))},te=(T,J)=>{const ye=y.connections||[];z("connections",ye.map(Oe=>Oe.id===T?{...Oe,role:J}:Oe))},M=(T,J)=>{const ye=y.connections||[];z("connections",ye.map(Oe=>Oe.id===T?{...Oe,color:J}:Oe))},P=T=>{R(J=>J.includes(T)?J.filter(ye=>ye!==T):[...J,T])},Q=r.filter(T=>{var J;if(!T||T.id===y.id||(J=y.connections)!=null&&J.some(ye=>ye.id===T.id)||Te&&!T.name.toLowerCase().includes(Te.toLowerCase()))return!1;if(L.length>0){const ye=[...T.tags||[],...T.hiddenTags||[]];return L.every(Oe=>ye.includes(Oe))}return!0});return c.jsxs("div",{className:"animate-reveal-details space-y-6 md:space-y-8 pb-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4 animate-stagger-1",children:[c.jsxs("button",{onClick:V,className:"flex items-center text-stone-500 hover:text-emerald-500 transition-colors group text-sm md:text-base order-1",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})," ()"]}),t&&c.jsxs("div",{className:"flex items-center gap-3 order-2 w-full md:w-auto justify-end",children:[c.jsx("button",{onClick:Fe,className:"px-4 py-2 rounded-lg border border-stone-800 text-stone-500 hover:text-white hover:bg-stone-800 text-[10px] uppercase font-bold tracking-wider transition-all",children:""}),c.jsxs("button",{onClick:Ye,className:"px-5 py-2 rounded-lg bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 hover:bg-emerald-900/40 text-[10px] uppercase font-bold tracking-wider transition-all flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]})]})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-12",children:[c.jsxs("div",{className:"w-full lg:w-1/3 space-y-8 animate-stagger-2",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 px-1",children:" "}),t?c.jsxs("div",{className:"space-y-4",children:[c.jsx(mh,{imageUrl:y.imageUrl,scale:y.imageScale??1,x:y.imageX??50,y:y.imageY??50,onUpdate:ee}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{className:"w-full bg-[#050505] border border-stone-800 rounded-lg px-3 py-2 text-[10px] text-stone-400 outline-none focus:border-emerald-500",placeholder:y.imageUrl.startsWith("data:")?"   ":"URL ...",value:y.imageUrl.startsWith("data:")?"":y.imageUrl,onChange:T=>z("imageUrl",T.target.value)}),c.jsxs("label",{className:`cursor-pointer bg-stone-900 border border-stone-800 hover:bg-stone-800 rounded-lg px-3 flex items-center justify-center transition-colors ${je?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:$e,accept:"image/*",className:"hidden",disabled:je}),c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})]})]})]}):c.jsx("div",{className:"aspect-[4/5] rounded-2xl overflow-hidden border border-stone-800 shadow-2xl bg-black transition-transform duration-700 hover:scale-[1.02]",children:c.jsx("img",{src:y.imageUrl,alt:y.name,style:{objectFit:"cover",objectPosition:`${y.imageX??50}% ${y.imageY??50}%`,transformOrigin:`${y.imageX??50}% ${y.imageY??50}%`,transform:`scale(${y.imageScale??1})`},className:"w-full h-full"})})]}),t&&c.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-900/50",children:[c.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500/60 px-1",children:"- ()"}),c.jsx(mh,{imageUrl:y.imageUrl,scale:y.miniImageScale??1,x:y.miniImageX??50,y:y.miniImageY??50,isCircular:!0,onUpdate:be})]}),c.jsxs("div",{className:"space-y-5 p-5 md:p-7 bg-[#0f0f0f]/40 border border-stone-900 rounded-[2rem] md:rounded-[2.5rem] shadow-inner transition-all hover:bg-[#0f0f0f]/50",children:[c.jsx("h4",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-emerald-500/60 px-1 text-center",children:""}),c.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[40px]",children:t?o.map(T=>{var J;return c.jsx("button",{onClick:()=>tt(T,!1),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border ${(J=y.tags)!=null&&J.includes(T)?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400":"bg-stone-950 border-stone-800/50 text-stone-700 hover:text-stone-400"}`,children:T},T)}):(pe=y.tags)==null?void 0:pe.map(T=>c.jsx("span",{className:"px-3 py-1.5 md:px-4 md:py-2 bg-emerald-500/5 border border-emerald-500/10 text-emerald-500/70 text-[9px] md:text-[10px] uppercase tracking-widest font-black rounded-xl",children:T},T))})]})]}),c.jsxs("div",{className:"w-full lg:w-2/3 space-y-6 md:space-y-8 animate-stagger-3",children:[c.jsxs("div",{children:[t?c.jsx("div",{className:"space-y-4 mb-4",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),c.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-3xl md:text-4xl font-serif font-bold text-stone-100 outline-none focus:border-emerald-800 transition-colors py-1",value:y.name,onChange:T=>z("name",T.target.value)})]}),c.jsxs("div",{className:"w-full md:w-32",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),c.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-xl font-light text-stone-500 outline-none focus:border-emerald-800 transition-colors py-2",value:y.age,onChange:T=>z("age",T.target.value)})]}),c.jsxs("div",{className:"w-full md:w-32",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),c.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-xl font-light text-stone-500 outline-none focus:border-emerald-800 transition-colors py-2",value:y.height||"",placeholder:". 180 ",onChange:T=>z("height",T.target.value)})]})]})}):c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6",children:[c.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-bold text-stone-100 leading-tight",children:y.name}),c.jsxs("div",{className:"flex items-center gap-2",children:[y.age&&c.jsxs("div",{className:"bg-stone-900 border border-stone-800 px-3 py-1 rounded-xl flex items-baseline gap-1.5 shadow-lg",children:[c.jsx("span",{className:"text-stone-100 font-bold text-lg",children:y.age.toString().replace(/[^0-9]/g,"")||y.age}),c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-500/70",children:""})]}),y.height&&c.jsxs("div",{className:"bg-stone-900 border border-stone-800 px-3 py-1 rounded-xl flex items-baseline gap-1.5 shadow-lg",children:[c.jsx("span",{className:"text-stone-100 font-bold text-lg",children:y.height.toString().replace(/[^0-9]/g,"")||y.height}),c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-500/70",children:""})]})]})]}),ke&&c.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/10 border border-emerald-900/30 px-3 py-1.5 rounded-full mt-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500",children:ke})]})]}),c.jsx("div",{className:"h-px bg-stone-900 w-full mb-6 md:mb-8"}),c.jsxs("section",{className:"space-y-4 animate-stagger-4",children:[c.jsx("h4",{className:"text-emerald-500 text-sm font-semibold uppercase tracking-wider",children:""}),t?c.jsx("textarea",{className:"w-full bg-stone-900/20 border border-stone-800 rounded-xl p-4 text-stone-200 text-base md:text-lg leading-relaxed font-light outline-none focus:border-emerald-900 transition-colors resize-none",rows:12,value:y.additionalInfo,onChange:T=>z("additionalInfo",T.target.value)}):c.jsx("p",{className:"text-stone-300 text-base md:text-lg leading-relaxed font-light whitespace-pre-wrap break-words",children:y.additionalInfo})]})]}),c.jsxs("div",{className:"space-y-6 pt-4 animate-stagger-5",children:[ie.length>0&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>Z(!H),className:"w-full flex items-center justify-between bg-[#0f0f0f]/30 border border-stone-900 p-4 md:p-5 rounded-xl transition-all group hover:border-amber-900/30 shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-amber-600 font-bold tracking-widest text-xs uppercase",children:"  "}),c.jsxs("span",{className:"text-stone-600 text-sm",children:["(",ie.length,")"]})]}),c.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform duration-300 ${H?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]}),H&&c.jsx("div",{className:"space-y-4 animate-reveal-details",children:ie.map(T=>c.jsxs("div",{className:"bg-stone-900/20 border border-stone-900/50 rounded-xl p-4 md:p-5",children:[c.jsx("h5",{className:"text-stone-200 font-serif italic text-lg mb-2 break-words",children:T.title}),c.jsx("p",{className:"text-stone-400 text-sm leading-relaxed whitespace-pre-wrap font-light break-words",children:T.content}),c.jsx("div",{className:"mt-4 pt-3 border-t border-stone-900/50 flex justify-between",children:c.jsx("span",{className:"text-[10px] uppercase font-bold text-stone-600",children:T.date})})]},T.id))})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-col gap-4",children:[t&&c.jsxs("button",{onClick:X,className:`w-full py-4 rounded-xl border transition-all text-[10px] uppercase font-bold tracking-[0.2em] flex items-center justify-center gap-3 ${le?"bg-emerald-500 border-emerald-400 text-black shadow-[0_0_20px_rgba(16,185,129,0.2)]":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400 hover:bg-emerald-900/30"}`,children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:le?"M6 18L18 6M6 6l12 12":"M12 4v16m8-8H4"})}),le?"":" "]}),c.jsxs("button",{onClick:()=>D(!I),className:"w-full flex items-center justify-between bg-[#0f0f0f]/30 border border-stone-900 p-4 md:p-5 rounded-xl transition-all group hover:border-emerald-900/30 shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-emerald-500 font-bold tracking-widest text-xs uppercase",children:""}),c.jsxs("span",{className:"text-stone-600 text-sm",children:["(",((Se=y.connections)==null?void 0:Se.length)||0,")"]})]}),c.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform duration-300 ${I?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]})]}),t&&le&&c.jsxs("div",{className:"animate-reveal-details bg-[#0a0a0a] border border-emerald-900/30 rounded-2xl p-4 md:p-6 space-y-4 shadow-2xl overflow-hidden relative",children:[c.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:c.jsx("input",{autoFocus:!0,type:"text",placeholder:"   ...",className:"flex-grow bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-sm text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",value:Te,onChange:T=>q(T.target.value)})}),c.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto custom-scrollbar",children:o.map(T=>c.jsx("button",{onClick:()=>P(T),className:`px-2 py-1 rounded-lg text-[9px] uppercase font-bold tracking-wider transition-all border ${L.includes(T)?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:T},T))}),c.jsx("div",{className:"flex flex-col gap-2 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:Q.length>0?Q.map(T=>c.jsxs("button",{onClick:()=>w(T),className:"flex items-center gap-4 p-3 bg-stone-900/50 border border-stone-800 rounded-xl hover:bg-emerald-900/20 hover:border-emerald-900/40 transition-all text-left group",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:T.imageUrl,style:{objectFit:"cover",objectPosition:`${T.miniImageX??50}% ${T.miniImageY??50}%`,transformOrigin:`${T.miniImageX??50}% ${T.miniImageY??50}%`,transform:`scale(${T.miniImageScale??1})`},className:"w-full h-full",alt:""})}),c.jsxs("div",{className:"min-w-0 flex-grow",children:[c.jsx("span",{className:"text-stone-200 font-bold text-sm block truncate group-hover:text-emerald-400",children:T.name}),c.jsx("span",{className:"text-[10px] text-stone-600 uppercase tracking-widest block truncate",children:"  "})]}),c.jsx("svg",{className:"w-4 h-4 text-emerald-500 opacity-0 group-hover:opacity-100 transition-all",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})]},T.id)):c.jsx("p",{className:"text-stone-700 italic text-xs py-4 text-center",children:"  "})})]}),I&&c.jsx("div",{className:"space-y-3 animate-reveal-details",children:c.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-xl overflow-hidden divide-y divide-stone-900/50",children:y.connections&&y.connections.length>0?y.connections.map(T=>{const J=r.find(ye=>ye&&ye.id===T.id);return c.jsxs("div",{className:"p-4 flex flex-row items-center gap-4 group hover:bg-stone-900/20 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[c.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full overflow-hidden border border-stone-800 shrink-0 bg-black",children:c.jsx("img",{src:(J==null?void 0:J.imageUrl)||"",style:{objectFit:"cover",objectPosition:`${(J==null?void 0:J.miniImageX)??50}% ${(J==null?void 0:J.miniImageY)??50}%`,transformOrigin:`${(J==null?void 0:J.miniImageX)??50}% ${(J==null?void 0:J.miniImageY)??50}%`,transform:`scale(${(J==null?void 0:J.miniImageScale)??1})`},className:"w-full h-full",alt:""})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsx("p",{className:"text-stone-200 font-bold text-sm truncate",children:T.name}),t?c.jsx("input",{className:"bg-transparent border-b border-stone-800 text-xs text-stone-500 outline-none focus:border-emerald-500 py-1 w-full max-w-[150px]",value:T.role,onChange:ye=>te(T.id,ye.target.value)}):c.jsx("p",{className:"text-stone-600 text-xs mt-1 font-medium truncate",children:T.role})]})]}),c.jsxs("div",{className:"flex items-center justify-end gap-5 shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[t?c.jsx("input",{type:"color",className:"w-6 h-6 rounded-sm bg-transparent border-none cursor-pointer p-0 appearance-none shadow-lg",value:T.color||"#ef4444",onChange:ye=>M(T.id,ye.target.value)}):c.jsx("div",{className:"w-4 h-4 rounded-sm shadow-sm",style:{backgroundColor:T.color||"#ef4444"}}),c.jsx("button",{onClick:()=>v(T.id),className:"text-stone-700 hover:text-stone-100 transition-colors text-[9px] md:text-[10px] uppercase font-bold tracking-[0.2em]",children:""})]}),t&&c.jsx("button",{onClick:()=>O(T.id),className:"text-stone-800 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]},T.id)}):c.jsx("div",{className:"p-10 text-center text-stone-700 italic text-sm",children:"  "})})})]})]})]})]})]})},nx=({initialData:s,availableTags:t,availableHiddenTags:r,onSave:o,onClose:a})=>{const[d,h]=B.useState({name:"",age:"",height:"",imageUrl:"",additionalInfo:"",imageScale:1,imageX:50,imageY:50,tags:[],hiddenTags:[]}),[p,g]=B.useState(!1);B.useEffect(()=>{var x;s&&h({name:s.name,age:s.age.toString(),height:((x=s.height)==null?void 0:x.toString())||"",imageUrl:s.imageUrl,additionalInfo:s.additionalInfo,imageScale:s.imageScale??1,imageX:s.imageX??50,imageY:s.imageY??50,tags:s.tags||[],hiddenTags:s.hiddenTags||[]})},[s]);const v=(x,I)=>{h(I?D=>({...D,hiddenTags:D.hiddenTags.includes(x)?D.hiddenTags.filter(H=>H!==x):[...D.hiddenTags,x]}):D=>({...D,tags:D.tags.includes(x)?D.tags.filter(H=>H!==x):[...D.tags,x]}))},k=async x=>{var D;const I=(D=x.target.files)==null?void 0:D[0];if(I){g(!0);try{const H=await Fo(I);h(Z=>({...Z,imageUrl:H}))}catch(H){console.error("Error processing image",H),alert("   .")}finally{g(!1)}}},y=x=>{x.preventDefault();const I={id:(s==null?void 0:s.id)||Date.now().toString(),name:d.name,age:d.age,height:d.height,imageUrl:d.imageUrl||`https://picsum.photos/seed/${Date.now()}/400/500`,additionalInfo:d.additionalInfo,tags:d.tags,hiddenTags:d.hiddenTags,connections:(s==null?void 0:s.connections)||[],imageScale:d.imageScale,imageX:d.imageX,imageY:d.imageY};o(I)};return c.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/95 backdrop-blur-2xl animate-in fade-in duration-300",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-2xl rounded-[2rem] md:rounded-[3rem] overflow-hidden shadow-[0_0_120px_rgba(0,0,0,1)] border-white/5 flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-6 md:p-10 border-b border-stone-900 flex justify-between items-center bg-gradient-to-b from-stone-900/30 to-transparent shrink-0",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-stone-100 italic",children:s?" ":" "}),c.jsx("p",{className:"text-stone-600 text-[10px] uppercase tracking-widest mt-1",children:"  "})]}),c.jsx("button",{onClick:a,className:"text-stone-700 hover:text-white transition-all p-2 md:p-3 hover:bg-white/5 rounded-full",children:c.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("form",{onSubmit:y,className:"p-6 md:p-10 space-y-8 md:space-y-10 overflow-y-auto custom-scrollbar flex-grow",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:"  "}),c.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all font-serif italic text-lg shadow-inner",value:d.name,onChange:x=>h({...d,name:x.target.value})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),c.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all shadow-inner",value:d.age,onChange:x=>h({...d,age:x.target.value})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),c.jsx("input",{className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all shadow-inner",value:d.height,placeholder:". 185 ",onChange:x=>h({...d,height:x.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end px-1",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600",children:"  ()"}),c.jsxs("span",{className:"text-[9px] text-stone-800 font-black uppercase tracking-widest",children:[": ",d.tags.length]})]}),c.jsx("div",{className:"flex flex-wrap gap-2 p-6 bg-black/30 border border-stone-900 rounded-[2rem] min-h-[80px] shadow-inner",children:t.length===0?c.jsx("p",{className:"text-stone-800 italic text-xs w-full text-center py-4",children:"     -"}):t.map(x=>{const I=d.tags.includes(x);return c.jsx("button",{type:"button",onClick:()=>v(x,!1),className:`px-4 py-2 rounded-xl text-[10px] uppercase tracking-wider font-black transition-all border ${I?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":"bg-stone-900/20 border-stone-800/40 text-stone-600 hover:border-stone-700 hover:text-stone-400"}`,children:x},x)})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end px-1",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-amber-600",children:"  ()"}),c.jsxs("span",{className:"text-[9px] text-amber-900/60 font-black uppercase tracking-widest",children:[": ",d.hiddenTags.length]})]}),c.jsx("div",{className:"flex flex-wrap gap-2 p-6 bg-black/30 border border-amber-900/20 rounded-[2rem] min-h-[80px] shadow-inner",children:r.length===0?c.jsx("p",{className:"text-stone-800 italic text-xs w-full text-center py-4",children:"    "}):r.map(x=>{const I=d.hiddenTags.includes(x);return c.jsx("button",{type:"button",onClick:()=>v(x,!0),className:`px-4 py-2 rounded-xl text-[10px] uppercase tracking-wider font-black transition-all border ${I?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":"bg-stone-900/20 border-stone-800/40 text-stone-600 hover:border-amber-900/30 hover:text-amber-500/50"}`,children:x},x)})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" (  )"}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsx("input",{className:"flex-grow bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-3 text-xs text-stone-500 outline-none focus:border-emerald-500/30 transition-all",placeholder:"    ...",value:d.imageUrl.startsWith("data:")?"":d.imageUrl,onChange:x=>h({...d,imageUrl:x.target.value})}),c.jsxs("label",{className:`cursor-pointer bg-stone-900/50 hover:bg-stone-800 px-5 py-3 rounded-2xl transition-all flex items-center justify-center border border-stone-800 gap-2 ${p?"opacity-50 cursor-wait":""}`,children:[c.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",disabled:p}),c.jsx("svg",{className:"w-5 h-5 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),d.imageUrl.startsWith("data:")&&c.jsx("span",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-wider",children:""})]})]}),d.imageUrl.startsWith("data:")&&c.jsx("p",{className:"text-[9px] text-emerald-500/70 px-2",children:"    ."})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" "}),c.jsx("textarea",{required:!0,rows:8,className:"w-full bg-stone-900/30 border border-stone-800 rounded-[2rem] px-8 py-6 text-stone-300 text-base leading-relaxed outline-none focus:border-emerald-900/30 transition-all resize-none shadow-inner custom-scrollbar",value:d.additionalInfo,onChange:x=>h({...d,additionalInfo:x.target.value})})]})]}),c.jsxs("div",{className:"p-6 md:p-10 border-t border-stone-900 bg-stone-900/10 flex gap-4 md:gap-6 shrink-0",children:[c.jsx("button",{type:"button",onClick:a,className:"flex-1 py-4 md:py-5 text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 hover:text-stone-300 transition-all",children:""}),c.jsx("button",{onClick:y,disabled:p,className:"flex-[2] py-4 md:py-5 bg-white hover:bg-emerald-50 text-black rounded-2xl text-[10px] uppercase tracking-[0.3em] font-black transition-all shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:p?"...":""})]})]})})},rx=({characters:s,availableTags:t,availableHiddenTags:r,onDelete:o,onEdit:a,onAdd:d,onUpdateTags:h,onUpdateHiddenTags:p,onDownloadDB:g,onUploadDB:v})=>{const[k,y]=B.useState(""),[x,I]=B.useState(""),D=B.useRef(null),H=L=>{L.preventDefault();const R=k.trim().toLowerCase();R&&!t.includes(R)&&(h([...t,R]),y(""))},Z=L=>{L.preventDefault();const R=x.trim().toLowerCase();R&&!r.includes(R)&&(p([...r,R]),I(""))},le=L=>{h(t.filter(R=>R!==L))},re=L=>{p(r.filter(R=>R!==L))},je=(L,R,ke=!1)=>{const ie=ke?[...r]:[...t],z=ke?p:h;R==="left"&&L>0?[ie[L-1],ie[L]]=[ie[L],ie[L-1]]:R==="right"&&L<ie.length-1&&([ie[L+1],ie[L]]=[ie[L],ie[L+1]]),z(ie)},ue=(L=!1)=>{window.confirm(` ,      ${L?"":""} ?`)&&(L?p([]):h([]))},Te=L=>{var ie;const R=(ie=L.target.files)==null?void 0:ie[0];if(!R)return;const ke=new FileReader;ke.onload=z=>{var be;const ee=(be=z.target)==null?void 0:be.result;typeof ee=="string"&&v(ee)},ke.readAsText(R),D.current&&(D.current.value="")},q=(L,R)=>c.jsx("div",{className:"flex flex-wrap gap-2 max-h-[300px] overflow-y-auto custom-scrollbar pr-2",children:L.length===0?c.jsx("p",{className:"text-stone-800 italic text-[10px] w-full text-center py-8",children:" ."}):L.map((ke,ie)=>c.jsxs("div",{className:`group flex items-center border rounded-xl pr-2 pl-1 py-1 transition-all hover:bg-stone-900 ${R?"bg-amber-900/10 border-amber-900/30 hover:border-amber-700":"bg-stone-900/50 border-stone-800/50 hover:border-stone-600"}`,children:[c.jsx("button",{onClick:()=>je(ie,"left",R),disabled:ie===0,className:`p-1 text-stone-600 hover:text-emerald-500 transition-all ${ie===0?"opacity-0 pointer-events-none":"opacity-0 group-hover:opacity-100"}`,children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),c.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-1 select-none ${R?"text-amber-500":"text-stone-500"}`,children:ke}),c.jsx("button",{onClick:()=>je(ie,"right",R),disabled:ie===L.length-1,className:`p-1 text-stone-600 hover:text-emerald-500 transition-all ${ie===L.length-1?"opacity-0 pointer-events-none":"opacity-0 group-hover:opacity-100"}`,children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})}),c.jsx("div",{className:`w-px h-3 mx-1 ${R?"bg-amber-900/30":"bg-stone-800"}`}),c.jsx("button",{onClick:()=>R?re(ke):le(ke),className:"text-stone-700 hover:text-red-500 transition-colors ml-1",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:c.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]},ke))});return c.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 pb-32",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-stone-900/50 pb-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""}),c.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-[10px]",children:"   "})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"file",ref:D,onChange:Te,accept:".json",className:"hidden"}),c.jsxs("button",{onClick:()=>{var L;return(L=D.current)==null?void 0:L.click()},className:"px-5 py-2.5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 rounded-lg text-[10px] uppercase tracking-widest font-bold text-emerald-500 transition-all flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})," "]}),c.jsxs("button",{onClick:g,className:"px-5 py-2.5 bg-stone-900/80 hover:bg-stone-800 border border-stone-700 rounded-lg text-[10px] uppercase tracking-widest font-bold text-stone-300 transition-all flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})," "]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:" "}),c.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-500 px-2 py-0.5 rounded-full font-black",children:s.length})]}),c.jsx("button",{onClick:d,className:"bg-white hover:bg-emerald-50 text-black px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-black transition-all",children:""})]}),c.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl overflow-hidden shadow-xl",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-stone-900 bg-stone-900/20",children:[c.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),c.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),c.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600 text-right",children:""})]})}),c.jsx("tbody",{className:"divide-y divide-stone-900/50",children:s.map(L=>{var R,ke,ie,z;return c.jsxs("tr",{className:"hover:bg-stone-900/10 transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:L.imageUrl,style:{objectFit:"cover",objectPosition:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transformOrigin:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transform:`scale(${L.miniImageScale??1})`},className:"w-full h-full",alt:""})}),c.jsx("span",{className:"font-bold text-stone-200 text-sm tracking-wide",children:L.name})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex flex-wrap gap-1",children:[(R=L.tags)==null?void 0:R.slice(0,3).map(ee=>c.jsx("span",{className:"text-[8px] uppercase bg-stone-900 px-1.5 py-0.5 rounded text-stone-500",children:ee},ee)),(((ke=L.tags)==null?void 0:ke.length)||0)>3&&c.jsxs("span",{className:"text-[8px] text-stone-700",children:["+",L.tags.length-3]})]}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[(ie=L.hiddenTags)==null?void 0:ie.slice(0,3).map(ee=>c.jsx("span",{className:"text-[8px] uppercase bg-amber-900/20 border border-amber-900/30 px-1.5 py-0.5 rounded text-amber-600",children:ee},ee)),(((z=L.hiddenTags)==null?void 0:z.length)||0)>3&&c.jsxs("span",{className:"text-[8px] text-amber-700",children:["+",L.hiddenTags.length-3]})]})]})}),c.jsxs("td",{className:"px-6 py-4 text-right space-x-3",children:[c.jsx("button",{onClick:()=>a(L),className:"text-emerald-500/70 hover:text-emerald-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""}),c.jsx("button",{onClick:()=>o(L.id),className:"text-stone-800 hover:text-red-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""})]})]},L.id)})})]})})})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl p-6 space-y-6 shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-serif text-stone-100 italic",children:" "}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] bg-stone-800 text-stone-400 px-2 py-0.5 rounded-full font-black",children:t.length}),t.length>0&&c.jsx("button",{onClick:()=>ue(!1),className:"text-[8px] text-red-900 hover:text-red-500 uppercase font-black",children:""})]})]}),c.jsxs("form",{onSubmit:H,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:k,onChange:L=>y(L.target.value),placeholder:" ...",className:"flex-grow bg-black/50 border border-stone-800 rounded-xl px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-all"}),c.jsx("button",{className:"bg-stone-800 hover:bg-stone-700 text-white p-2 rounded-xl transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:2.5})})})]}),q(t,!1)]}),c.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl p-6 space-y-6 shadow-xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-amber-500/5 rounded-full blur-2xl -translate-y-10 translate-x-10 pointer-events-none"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-serif text-amber-500 italic",children:" "}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] bg-amber-900/20 text-amber-500 px-2 py-0.5 rounded-full font-black",children:r.length}),r.length>0&&c.jsx("button",{onClick:()=>ue(!0),className:"text-[8px] text-red-900 hover:text-red-500 uppercase font-black",children:""})]})]}),c.jsxs("form",{onSubmit:Z,className:"flex gap-2",children:[c.jsx("input",{type:"text",value:x,onChange:L=>I(L.target.value),placeholder:"  ...",className:"flex-grow bg-black/50 border border-amber-900/30 rounded-xl px-3 py-2 text-xs text-stone-200 outline-none focus:border-amber-500/50 transition-all placeholder-amber-900/50"}),c.jsx("button",{className:"bg-amber-900/20 hover:bg-amber-900/40 text-amber-500 border border-amber-900/30 p-2 rounded-xl transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:2.5})})})]}),q(r,!0)]})]})]})]})},sx="modulepreload",ix=function(s){return"/raz/"+s},gh={},xh=function(t,r,o){let a=Promise.resolve();if(r&&r.length>0){let h=function(v){return Promise.all(v.map(k=>Promise.resolve(k).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));a=h(r.map(v=>{if(v=ix(v),v in gh)return;gh[v]=!0;const k=v.endsWith(".css"),y=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${y}`))return;const x=document.createElement("link");if(x.rel=k?"stylesheet":sx,k||(x.as="script"),x.crossOrigin="",x.href=v,g&&x.setAttribute("nonce",g),document.head.appendChild(x),k)return new Promise((I,D)=>{x.addEventListener("load",I),x.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${v}`)))})}))}function d(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return a.then(h=>{for(const p of h||[])p.status==="rejected"&&d(p.reason);return t().catch(d)})},ox=({characters:s,availableTags:t,availableHiddenTags:r,filterStates:o,onToggleTag:a,onClearFilters:d,onSelectCharacter:h})=>{var hn;const[p,g]=B.useState("graph"),[v,k]=B.useState(""),[y,x]=B.useState(!1),[I,D]=B.useState(""),[H,Z]=B.useState([]),le=B.useRef(null),[re,je]=B.useState(!1),[ue,Te]=B.useState(null),[q,L]=B.useState(null),[R,ke]=B.useState(0),[ie,z]=B.useState(!0),[ee,be]=B.useState(!1),$e=B.useRef(null),tt=B.useRef(null),Ye=B.useRef(null),Fe=B.useRef(null),V=B.useRef(new Map),[X,w]=B.useState({x:0,y:0,k:1}),O=Object.keys(o).length;B.useEffect(()=>{if(p==="graph"){be(!0);const E=setTimeout(()=>be(!1),2200);return()=>clearTimeout(E)}},[ue,re,O,p]),B.useEffect(()=>{const E=ae=>{le.current&&!le.current.contains(ae.target)&&x(!1)};return y&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[y]);const{nodes:te,links:M,uniqueColors:P}=B.useMemo(()=>{if(p!=="graph")return{nodes:[],links:[],uniqueColors:[]};const E=s.filter(G=>ue&&G.id===ue?!0:Object.entries(o).every(([$,fe])=>{var yn,Wt;const Ie=(yn=G.tags)==null?void 0:yn.includes($),De=(Wt=G.hiddenTags)==null?void 0:Wt.includes($),Ve=Ie||De;return fe==="include"?Ve:fe==="exclude"?!Ve:!0})),ae=new Set(E.map(G=>G.id)),me=new Set;ue&&(me.add(ue),E.forEach(G=>{var $,fe;G.id===ue&&(($=G.connections)==null||$.forEach(Ie=>{ae.has(Ie.id)&&me.add(Ie.id)})),(fe=G.connections)!=null&&fe.some(Ie=>Ie.id===ue)&&me.add(G.id)}));const Ce=new Map,Ne=[...t],Ae=380,Ee=260;Ne.forEach((G,$)=>{const fe=$/Ne.length*2*Math.PI;Ce.set(G,{x:500+Math.cos(fe)*Ae,y:350+Math.sin(fe)*Ee})});const We=E.map(G=>{const $=V.current.get(G.id);let fe=!1;if(ue)fe=!me.has(G.id);else if(re){const Ve=G.connections||[],yn=E.filter(Wt=>{var or;return Wt.id!==G.id&&((or=Wt.connections)==null?void 0:or.some(lr=>lr.id===G.id))});fe=Ve.length+yn.length===0}let Ie=500,De=350;if(!$)if(G.tags&&G.tags.length>0){let Ve=0,yn=0,Wt=0;G.tags.forEach(or=>{const lr=Ce.get(or);lr&&(Ve+=lr.x,yn+=lr.y,Wt++)}),Wt>0?(Ie=Ve/Wt,De=yn/Wt,Ie+=(Math.random()-.5)*80,De+=(Math.random()-.5)*80):(Ie+=(Math.random()-.5)*150,De+=(Math.random()-.5)*150)}else Ie+=(Math.random()-.5)*120,De+=(Math.random()-.5)*120;return{id:G.id,name:G.name,imageUrl:G.imageUrl,miniImageScale:G.miniImageScale,miniImageX:G.miniImageX,miniImageY:G.miniImageY,x:($==null?void 0:$.x)??Ie,y:($==null?void 0:$.y)??De,vx:$==null?void 0:$.vx,vy:$==null?void 0:$.vy,isDimmed:fe,tags:G.tags,hiddenTags:G.hiddenTags}}),rt=new Map;We.forEach(G=>rt.set(G.id,G)),V.current=rt;const A=[],se=new Set,ve=new Map;return E.forEach(G=>{var $;($=G.connections)==null||$.forEach(fe=>{if(ae.has(fe.id)){const Ie=fe.color||"#10b981";se.add(Ie);let De=!1;ue&&(De=G.id!==ue&&fe.id!==ue),A.push({source:G.id,target:fe.id,role:fe.role,color:Ie,isDouble:!1,isHidden:De}),ve.set(`${G.id}-${fe.id}`,!0)}})}),A.forEach(G=>{const $=typeof G.source=="string"?G.source:G.source.id,fe=typeof G.target=="string"?G.target:G.target.id;ve.has(`${fe}-${$}`)&&(G.isDouble=!0)}),{nodes:We,links:A,uniqueColors:Array.from(se)}},[s,re,ue,o,t,p]),Q=E=>{if(!$e.current||!Fe.current)return;const ae=te.find(me=>me.id===E);!ae||ae.x===void 0||ae.y===void 0||xh(()=>import("https://esm.sh/d3@7"),[]).then(me=>{const Ce=me.select($e.current),Ne=1e3,Ae=700,Ee=.8,We=Ne/2-ae.x*Ee,rt=Ae/2-ae.y*Ee;Ce.transition().duration(1200).ease(me.easePolyInOut.exponent(3)).call(Fe.current.transform,me.zoomIdentity.translate(We,rt).scale(Ee))})};B.useEffect(()=>{if(ue&&p==="graph"){const E=setTimeout(()=>Q(ue),100);return()=>clearTimeout(E)}},[ue,p]),B.useEffect(()=>{!$e.current||p!=="graph"||(z(!0),xh(()=>import("https://esm.sh/d3@7"),[]).then(E=>{const ae=E.select($e.current),me=E.select(tt.current),Ce=E.zoom().scaleExtent([.1,4]).on("zoom",Ee=>{me.attr("transform",Ee.transform),w({x:Ee.transform.x,y:Ee.transform.y,k:Ee.transform.k}),L(null)});Fe.current=Ce,ae.call(Ce);const Ne=E.forceSimulation(te).force("link",E.forceLink(M.filter(Ee=>!Ee.isHidden)).id(Ee=>Ee.id).distance(Ee=>{const We=Ee.source.tags||[],rt=Ee.target.tags||[],A=We.some(se=>rt.includes(se));return We.length===0||rt.length===0?250:A?150:450}).strength(ue?.05:.03)).force("charge",E.forceManyBody().strength(ue?-2e3:-1200)).force("center",E.forceCenter(500,350)).force("gravityX",E.forceX(500).strength(.005)).force("gravityY",E.forceY(350).strength(.005)).force("collision",E.forceCollide().radius(75)).alphaDecay(.06);Ne.on("tick",()=>{ke(Ee=>Ee+1),Ne.alpha()<.2&&z(!1)}),Ye.current=Ne;const Ae=Ee=>{function We(se,ve){se.active||Ee.alphaTarget(.3).restart(),ve.fx=ve.x,ve.fy=ve.y,L(null)}function rt(se,ve){ve.fx=se.x,ve.fy=se.y}function A(se,ve){se.active||Ee.alphaTarget(0),ve.fx=null,ve.fy=null}return E.drag().on("start",We).on("drag",rt).on("end",A)};return me.selectAll(".node-group").data(te).call(Ae(Ne)),()=>Ne.stop()}))},[te,M,p]);const pe=E=>{const ae=typeof E.source=="string"?te.find(Ie=>Ie.id===E.source):E.source,me=typeof E.target=="string"?te.find(Ie=>Ie.id===E.target):E.target;if(!(ae!=null&&ae.x)||!(ae!=null&&ae.y)||!(me!=null&&me.x)||!(me!=null&&me.y))return null;const Ce=52,Ne=me.x-ae.x,Ae=me.y-ae.y,Ee=Math.sqrt(Ne*Ne+Ae*Ae);if(Ee<Ce*2.2)return null;const We=Ne/Ee,rt=Ae/Ee,A=ae.x+Ce*We,se=ae.y+Ce*rt,ve=me.x-Ce*We,G=me.y-Ce*rt;let $="",fe={x:0,y:0};if(E.isDouble){const De=(ae.x+me.x)/2+-rt*50,Ve=(ae.y+me.y)/2+We*50;$=`M${A},${se} Q${De},${Ve} ${ve},${G}`,fe.x=.25*A+.5*De+.25*ve,fe.y=.25*se+.5*Ve+.25*G}else $=`M${A},${se} L${ve},${G}`,fe.x=(A+ve)/2,fe.y=(se+G)/2;return{path:$,textPos:fe}},Se=E=>E.replace("#",""),T=E=>{Z(ae=>ae.includes(E)?ae.filter(me=>me!==E):[...ae,E])},J=B.useMemo(()=>s.filter(E=>{const ae=E.name.toLowerCase().includes(I.toLowerCase()),me=H.length===0||H.every(Ce=>{var Ne,Ae;return((Ne=E.tags)==null?void 0:Ne.includes(Ce))||((Ae=E.hiddenTags)==null?void 0:Ae.includes(Ce))});return ae&&me}).sort((E,ae)=>E.name.localeCompare(ae.name)),[s,I,H]),{outgoingConnections:ye,incomingConnections:Oe,currentTableChar:Nt}=B.useMemo(()=>{if(p!=="table"||!v)return{outgoingConnections:[],incomingConnections:[],currentTableChar:null};const E=s.find(Ce=>Ce.id===v),ae=((E==null?void 0:E.connections)||[]).map(Ce=>{const Ne=s.find(Ae=>Ae.id===Ce.id);return{...Ce,targetChar:Ne}}),me=s.filter(Ce=>{var Ne;return(Ne=Ce.connections)==null?void 0:Ne.some(Ae=>Ae.id===v)}).map(Ce=>{var Ae;const Ne=(Ae=Ce.connections)==null?void 0:Ae.find(Ee=>Ee.id===v);return{sourceChar:Ce,role:Ne==null?void 0:Ne.role,color:Ne==null?void 0:Ne.color}});return{outgoingConnections:ae,incomingConnections:me,currentTableChar:E}},[s,v,p]);return c.jsxs("div",{className:`flex flex-col h-full space-y-4 md:space-y-4 select-none relative ${ee?"is-mounting":""}`,onClick:()=>L(null),children:[c.jsxs("div",{className:"bg-[#0f0f0f]/50 border border-stone-900 rounded-2xl p-4 flex flex-col gap-4 backdrop-blur-sm shadow-lg relative z-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[c.jsxs("div",{className:"bg-stone-950 p-1 rounded-lg border border-stone-800 flex items-center",children:[c.jsx("button",{onClick:()=>g("graph"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${p==="graph"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""}),c.jsx("button",{onClick:()=>g("table"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${p==="table"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""})]}),p==="graph"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"h-6 w-px bg-stone-800 hidden md:block"}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[c.jsx("input",{type:"checkbox",checked:re,disabled:!!ue,onChange:E=>je(E.target.checked),className:"sr-only"}),c.jsx("div",{className:`w-4 h-4 border border-stone-700 rounded transition-colors ${re?"bg-emerald-600 border-emerald-500":"bg-transparent"}`,children:re&&c.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),c.jsx("span",{className:`text-[11px] uppercase tracking-wider font-bold text-stone-500 group-hover:text-stone-300 transition-colors ${ue?"opacity-30":""}`,children:" "})]})]})]}),p==="graph"?ue&&c.jsx("button",{onClick:()=>{Te(null),z(!0)},className:"w-full md:w-auto bg-emerald-950/30 border border-emerald-900/50 text-emerald-500 px-4 py-2 rounded-full text-[10px] uppercase tracking-[0.2em] font-black hover:bg-emerald-900/40 transition-all",children:" "}):c.jsxs("div",{className:"w-full md:w-80 relative z-50",ref:le,children:[c.jsxs("button",{onClick:()=>x(!y),className:"w-full bg-stone-950 border border-stone-800 text-stone-300 text-xs py-2.5 pl-4 pr-10 rounded-xl text-left focus:border-emerald-900 transition-colors flex items-center justify-between",children:[c.jsx("span",{className:v?"":"text-stone-500 italic",children:v?(hn=s.find(E=>E.id===v))==null?void 0:hn.name:"--   --"}),c.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform ${y?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#0a0a0a] border border-stone-800 rounded-xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 flex flex-col max-h-[400px]",children:[c.jsxs("div",{className:"p-3 bg-stone-900/50 border-b border-stone-900 space-y-3 shrink-0 backdrop-blur-md",children:[c.jsx("input",{type:"text",placeholder:"...",value:I,onChange:E=>D(E.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",autoFocus:!0}),(t.length>0||r.length>0)&&c.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto custom-scrollbar",children:[t.map(E=>{const ae=H.includes(E);return c.jsx("button",{onClick:()=>T(E),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${ae?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:E},E)}),r.map(E=>{const ae=H.includes(E);return c.jsx("button",{onClick:()=>T(E),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${ae?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-amber-500"}`,children:E},E)})]})]}),c.jsx("div",{className:"overflow-y-auto p-1 custom-scrollbar",children:J.length>0?J.map(E=>c.jsxs("button",{onClick:()=>{k(E.id),x(!1),D(""),Z([])},className:`w-full flex items-center gap-3 p-2 hover:bg-stone-900 rounded-lg text-left transition-colors group ${v===E.id?"bg-stone-900/80":""}`,children:[c.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:E.imageUrl,style:{objectPosition:`${E.miniImageX??50}% ${E.miniImageY??50}%`,transform:`scale(${E.miniImageScale??1})`,transformOrigin:`${E.miniImageX??50}% ${E.miniImageY??50}%`},className:"w-full h-full object-cover",alt:""})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("span",{className:`text-xs font-bold block truncate ${v===E.id?"text-emerald-400":"text-stone-300"}`,children:E.name}),E.tags&&E.tags.length>0&&c.jsxs("span",{className:"text-[8px] text-stone-600 truncate block mt-0.5",children:[E.tags.slice(0,3).join(", "),E.tags.length>3?"...":""]})]}),v===E.id&&c.jsx("div",{className:"ml-auto text-emerald-500",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},E.id)):c.jsx("div",{className:"text-center py-4 text-[10px] text-stone-600 italic",children:"  "})})]})]})]}),p==="graph"&&(t.length>0||r.length>0)&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-3 border-t border-stone-800/50 animate-in fade-in slide-in-from-top-1 duration-500",children:[c.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2",children:":"}),t.map(E=>{const ae=o[E]||"none";return c.jsxs("button",{onClick:()=>a(E),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${ae==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":ae==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[ae==="include"&&c.jsx("span",{className:"text-emerald-500",children:"+"}),ae==="exclude"&&c.jsx("span",{className:"text-red-500",children:""}),E]},E)}),r.map(E=>{const ae=o[E]||"none";return c.jsxs("button",{onClick:()=>a(E),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${ae==="include"?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":ae==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-amber-500 hover:border-amber-900/30"}`,children:[ae==="include"&&c.jsx("span",{className:"text-amber-500",children:"+"}),ae==="exclude"&&c.jsx("span",{className:"text-red-500",children:""}),E]},E)}),O>0&&c.jsx("button",{onClick:d,className:"ml-2 text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:""})]})]}),c.jsxs("div",{className:"relative z-0 w-full h-full min-h-[500px] bg-[#030303] border border-stone-900 rounded-2xl overflow-hidden shadow-2xl graph-container-reveal",children:[p==="graph"&&c.jsxs(c.Fragment,{children:[c.jsxs("svg",{ref:$e,viewBox:"0 0 1000 700",className:"w-full h-full touch-none cursor-grab active:cursor-grabbing",children:[c.jsx("defs",{children:P.map(E=>c.jsx("marker",{id:`arrow-${Se(E)}`,markerWidth:"8",markerHeight:"6",refX:"7.5",refY:"3",orient:"auto",children:c.jsx("path",{d:"M0,0 L8,3 L0,6",fill:E})},`arrow-${Se(E)}`))}),c.jsxs("g",{ref:tt,children:[M.map((E,ae)=>{const me=pe(E);if(!me)return null;const Ce=E.color||"#10b981",Ne=E.isHidden;return c.jsxs("g",{className:`transition-opacity duration-700 ${Ne?"opacity-0":"opacity-100"}`,children:[c.jsx("path",{d:me.path,fill:"none",stroke:Ce,strokeWidth:ue?"3":"1.5",strokeOpacity:ue?"0.8":"0.3",markerEnd:`url(#arrow-${Se(Ce)})`,className:"link-path",style:ee?{animationDelay:`${ae*.015}s`}:{}}),ue&&E.role&&!Ne&&c.jsxs("g",{transform:`translate(${me.textPos.x}, ${me.textPos.y})`,children:[c.jsx("text",{dy:"-14",textAnchor:"middle",className:"fill-[#030303] text-[10px] font-bold uppercase tracking-[0.2em]",style:{paintOrder:"stroke",stroke:"#030303",strokeWidth:"5px"},children:E.role}),c.jsx("text",{dy:"-14",textAnchor:"middle",fill:Ce,className:"text-[10px] font-bold uppercase tracking-[0.2em] opacity-90",children:E.role})]})]},`link-${ae}-${R}`)}),te.map((E,ae)=>{const me=ue===E.id;return c.jsx("g",{transform:`translate(${E.x||500}, ${E.y||350})`,className:`node-group cursor-pointer group ${E.isDimmed?"opacity-0 pointer-events-none":"opacity-100"}`,onClick:Ce=>{if(Ce.stopPropagation(),E.x&&E.y){const Ne=E.x*X.k+X.x,Ae=E.y*X.k+X.y;L({id:E.id,x:Ne,y:Ae})}},children:c.jsxs("g",{className:"node-animator",style:ee?{animationDelay:`${ae*.06}s`}:{},children:[c.jsxs("g",{className:"node-content",children:[c.jsx("circle",{r:"48",fill:"#1c1917"}),c.jsx("circle",{r:"46",fill:"#050505",stroke:me?"#10b981":"#292524",strokeWidth:me?"4":"1.5"}),c.jsx("clipPath",{id:`clip-${E.id}`,children:c.jsx("circle",{r:"45"})}),c.jsx("foreignObject",{x:"-45",y:"-45",width:"90",height:"90",clipPath:`url(#clip-${E.id})`,children:c.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center overflow-hidden",children:c.jsx("img",{src:E.imageUrl,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${E.miniImageX??50}% ${E.miniImageY??50}%`,transformOrigin:`${E.miniImageX??50}% ${E.miniImageY??50}%`,transform:`scale(${E.miniImageScale??1})`},className:"opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500"})})})]}),c.jsx("text",{y:"70",textAnchor:"middle",className:"fill-stone-500 text-[12px] font-bold uppercase tracking-[0.15em] group-hover:fill-stone-100 transition-colors drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)] font-serif",children:E.name})]})},E.id)})]})]}),ie&&c.jsx("div",{className:"absolute inset-0 bg-[#030303]/40 flex items-center justify-center backdrop-blur-[1px] pointer-events-none",children:c.jsx("div",{className:"text-[10px] uppercase tracking-[0.4em] font-black text-emerald-500/50 animate-pulse",children:" ..."})})]}),p==="table"&&c.jsx("div",{className:"w-full h-full overflow-y-auto custom-scrollbar p-6 md:p-10",children:v?c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[c.jsx("span",{className:"text-emerald-500 bg-emerald-900/10 px-2 py-1 rounded text-xs font-bold",children:"OUT"}),c.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",Nt==null?void 0:Nt.name,"?"]}),c.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:ye.length})]}),c.jsx("div",{className:"space-y-3",children:ye.length===0?c.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"       ..."}):ye.map((E,ae)=>{var me,Ce,Ne,Ae,Ee,We;return c.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-emerald-900/30 transition-all group",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:(me=E.targetChar)==null?void 0:me.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((Ce=E.targetChar)==null?void 0:Ce.miniImageX)??50}% ${((Ne=E.targetChar)==null?void 0:Ne.miniImageY)??50}%`,transform:`scale(${((Ae=E.targetChar)==null?void 0:Ae.miniImageScale)??1})`,transformOrigin:`${((Ee=E.targetChar)==null?void 0:Ee.miniImageX)??50}% ${((We=E.targetChar)==null?void 0:We.miniImageY)??50}%`},alt:""})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:E.name}),c.jsx("button",{onClick:()=>h(E.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-emerald-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),c.jsx("p",{className:"text-stone-500 text-xs mt-1 font-medium",children:E.role})]}),c.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:E.color||"#10b981"}})]},ae)})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[c.jsx("span",{className:"text-blue-500 bg-blue-900/10 px-2 py-1 rounded text-xs font-bold",children:"IN"}),c.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",Nt==null?void 0:Nt.name,"?"]}),c.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:Oe.length})]}),c.jsx("div",{className:"space-y-3",children:Oe.length===0?c.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"    ..."}):Oe.map((E,ae)=>{var me,Ce,Ne,Ae,Ee,We,rt;return c.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-blue-900/30 transition-all group",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:c.jsx("img",{src:(me=E.sourceChar)==null?void 0:me.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((Ce=E.sourceChar)==null?void 0:Ce.miniImageX)??50}% ${((Ne=E.sourceChar)==null?void 0:Ne.miniImageY)??50}%`,transform:`scale(${((Ae=E.sourceChar)==null?void 0:Ae.miniImageScale)??1})`,transformOrigin:`${((Ee=E.sourceChar)==null?void 0:Ee.miniImageX)??50}% ${((We=E.sourceChar)==null?void 0:We.miniImageY)??50}%`},alt:""})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:(rt=E.sourceChar)==null?void 0:rt.name}),c.jsx("button",{onClick:()=>h(E.sourceChar.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-blue-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-stone-600 text-[10px] uppercase tracking-wider",children:"  :"}),c.jsx("p",{className:"text-stone-400 text-xs font-medium",children:E.role})]})]}),c.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:E.color||"#10b981"}})]},ae)})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-stone-600 space-y-4",children:[c.jsx("svg",{className:"w-16 h-16 opacity-30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),c.jsx("p",{className:"text-sm italic font-serif opacity-70",children:"    ,    "})]})}),q&&p==="graph"&&c.jsx("div",{className:"absolute z-[100] animate-in zoom-in-95 fade-in duration-300",style:{left:q.x+40,top:q.y-40},onClick:E=>E.stopPropagation(),children:c.jsxs("div",{className:"bg-[#0f0f0f]/95 border border-stone-800 rounded-xl overflow-hidden shadow-2xl min-w-[200px] backdrop-blur-md",children:[c.jsx("button",{onClick:()=>h(q.id),className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-stone-200 hover:bg-emerald-900/40 border-b border-stone-900",children:" "}),c.jsx("button",{onClick:()=>{Te(q.id),L(null),z(!0)},className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-emerald-400 hover:bg-emerald-900/40",children:" "})]})})]})]})},lx=({realms:s,worlds:t,characters:r,availableTags:o,availableHiddenTags:a,onUpdateRealms:d,onUpdateWorlds:h,isAdmin:p})=>{var ae,me,Ce,Ne,Ae,Ee,We,rt;const[g,v]=B.useState(null),[k,y]=B.useState(null),[x,I]=B.useState(!1),[D,H]=B.useState(!1),[Z,le]=B.useState(!1),[re,je]=B.useState(null),[ue,Te]=B.useState(!1),[q,L]=B.useState(""),[R,ke]=B.useState(!1),[ie,z]=B.useState({}),[ee,be]=B.useState({type:""}),[$e,tt]=B.useState(""),[Ye,Fe]=B.useState([]),V=s.find(A=>A.id===g),X=t.find(A=>A.id===k),w=t.filter(A=>A.realmId===g),O=A=>{var se,ve;for(const G of t){if((se=G.characterIds)!=null&&se.includes(A))return G.name;if(G.subLocations){for(const $ of G.subLocations)if((ve=$.characterIds)!=null&&ve.includes(A))return`${G.name} / ${$.name}`}}return null},te=A=>{z(A||{}),I(!0)},M=()=>{if(!ie.name)return;let A;if(ie.id)A=s.map(se=>se.id===ie.id?{...se,...ie}:se);else{const se={id:Date.now().toString(),name:ie.name,imageUrl:ie.imageUrl||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=1080&auto=format&fit=crop"};A=[...s,se]}d(A),I(!1),z({})},P=A=>{window.confirm("  ?  ,   .")&&(d(s.filter(se=>se.id!==A)),g===A&&v(null))},Q=A=>{be(A||{type:"",realmId:g}),H(!0)},pe=()=>{if(!ee.name||!g)return;let A;if(ee.id)A=t.map(se=>se.id===ee.id?{...se,...ee}:se);else{const se={id:Date.now().toString(),realmId:g,name:ee.name,type:ee.type||"",description:ee.description||"",imageUrl:ee.imageUrl||"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=800&auto=format&fit=crop",characterIds:[],subLocations:[]};A=[...t,se]}h(A),H(!1),be({type:""})},Se=A=>{window.confirm("  ?")&&(h(t.filter(se=>se.id!==A)),k===A&&y(null))},T=()=>{if(!X||!q.trim())return;const A={id:Date.now().toString(),name:q.trim(),characterIds:[]},se=t.map(ve=>ve.id===X.id?{...ve,subLocations:[...ve.subLocations||[],A]}:ve);h(se),L(""),Te(!1)},J=A=>{if(!X||!window.confirm("  ?        ."))return;const se=t.map(ve=>ve.id===X.id?{...ve,subLocations:(ve.subLocations||[]).filter(G=>G.id!==A)}:ve);h(se)},ye=A=>{if(!X)return;let se={...X};if(re){const G=se.subLocations?[...se.subLocations]:[],$=G.findIndex(fe=>fe.id===re);if($>-1){const fe=G[$].characterIds||[],Ie=fe.includes(A)?fe.filter(De=>De!==A):[...fe,A];G[$]={...G[$],characterIds:Ie},se.subLocations=G}}else{const G=se.characterIds||[],$=G.includes(A)?G.filter(fe=>fe!==A):[...G,A];se.characterIds=$}const ve=t.map(G=>G.id===X.id?se:G);h(ve)},Oe=A=>{Fe(se=>se.includes(A)?se.filter(ve=>ve!==A):[...se,A])},Nt=(A=null)=>{je(A),tt(""),Fe([]),le(!0)},hn=async A=>{var ve;const se=(ve=A.target.files)==null?void 0:ve[0];if(se){ke(!0);try{const G=await Fo(se);z($=>({...$,imageUrl:G}))}finally{ke(!1)}}},E=async A=>{var ve;const se=(ve=A.target.files)==null?void 0:ve[0];if(se){ke(!0);try{const G=await Fo(se);be($=>({...$,imageUrl:G}))}finally{ke(!1)}}};if(k&&X){const A=re?((me=(ae=X.subLocations)==null?void 0:ae.find($=>$.id===re))==null?void 0:me.characterIds)||[]:X.characterIds||[],se=r.filter($=>!A.includes($.id)),ve=se.filter($=>{const fe=$.name.toLowerCase().includes($e.toLowerCase());if(Ye.length===0)return fe;const Ie=[...$.tags||[],...$.hiddenTags||[]];return fe&&Ye.every(De=>Ie.includes(De))}),G=($,fe)=>{const Ie=$||[],De=r.filter(Ve=>Ie.includes(Ve.id));return De.length===0?c.jsx("p",{className:"text-stone-600 italic text-sm",children:"  ..."}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:De.map(Ve=>c.jsxs("div",{className:"bg-stone-900/30 border border-stone-800 rounded-xl p-3 flex items-center gap-3 group relative",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-black border border-stone-700 overflow-hidden shrink-0",children:c.jsx("img",{src:Ve.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${Ve.miniImageX??50}% ${Ve.miniImageY??50}%`,transform:`scale(${Ve.miniImageScale??1})`,transformOrigin:`${Ve.miniImageX??50}% ${Ve.miniImageY??50}%`}})}),c.jsx("span",{className:"text-stone-300 font-bold text-sm truncate",children:Ve.name}),p&&c.jsx("button",{onClick:()=>{je(fe),setTimeout(()=>ye(Ve.id),0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-stone-600 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all p-2",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Ve.id))})};return c.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500 pb-20",children:[c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("button",{onClick:()=>y(null),className:"self-start flex items-center gap-2 text-stone-500 hover:text-emerald-500 transition-colors group",children:[c.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest",children:["  ",V==null?void 0:V.name]})]}),c.jsxs("div",{className:"relative h-[300px] md:h-[400px] rounded-3xl overflow-hidden border border-stone-900 group shadow-2xl",children:[c.jsx("img",{src:X.imageUrl,className:"w-full h-full object-cover",alt:X.name}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent opacity-90"}),c.jsx("div",{className:"absolute bottom-0 left-0 p-8 md:p-12 w-full",children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"inline-block px-3 py-1 bg-emerald-900/40 border border-emerald-500/30 rounded-lg text-emerald-400 text-[10px] font-bold uppercase tracking-widest mb-3 backdrop-blur-md",children:X.type}),c.jsx("h1",{className:"text-4xl md:text-6xl font-serif font-medium text-stone-100 drop-shadow-xl",children:X.name})]}),p&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>Q(X),className:"bg-white/10 hover:bg-white/20 backdrop-blur-md text-stone-200 px-5 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all border border-white/10",children:""}),c.jsx("button",{onClick:()=>Se(X.id),className:"bg-red-900/20 hover:bg-red-900/40 backdrop-blur-md text-red-400 px-5 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all border border-red-900/30",children:""})]})]})})]}),c.jsx("div",{className:"max-w-4xl",children:c.jsx("p",{className:"text-lg md:text-xl font-serif text-stone-300 leading-relaxed whitespace-pre-wrap",children:X.description})}),c.jsx("div",{className:"h-px bg-stone-900 w-full my-4"}),c.jsxs("div",{className:"space-y-10",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-stone-800/50 pb-2",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-200 italic",children:" "}),p&&c.jsx("button",{onClick:()=>Nt(null),className:"text-emerald-500 hover:text-emerald-400 text-[10px] uppercase font-bold tracking-widest transition-colors flex items-center gap-2",children:"+ "})]}),G(X.characterIds||[],null)]}),(Ce=X.subLocations)==null?void 0:Ce.map($=>c.jsxs("div",{className:"space-y-4 pt-4 animate-in fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-stone-800/50 pb-2",children:[c.jsxs("div",{className:"flex items-baseline gap-3",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-300 italic",children:$.name}),p&&c.jsx("button",{onClick:()=>J($.id),className:"text-stone-700 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&c.jsx("button",{onClick:()=>Nt($.id),className:"text-emerald-500 hover:text-emerald-400 text-[10px] uppercase font-bold tracking-widest transition-colors flex items-center gap-2",children:"+ "})]}),G($.characterIds||[],$.id)]},$.id)),p&&c.jsx("div",{className:"pt-4",children:ue?c.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-2",children:[c.jsx("input",{autoFocus:!0,placeholder:" ...",className:"bg-stone-900 border border-stone-800 rounded-lg px-3 py-2 text-sm text-stone-200 outline-none focus:border-emerald-900 w-64",value:q,onChange:$=>L($.target.value),onKeyDown:$=>$.key==="Enter"&&T()}),c.jsx("button",{onClick:T,className:"text-emerald-500 hover:text-emerald-400 font-bold p-2 bg-stone-900 rounded-lg",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("button",{onClick:()=>Te(!1),className:"text-stone-600 hover:text-stone-400 font-bold p-2",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):c.jsxs("button",{onClick:()=>Te(!0),className:"flex items-center gap-2 text-stone-600 hover:text-emerald-500 transition-colors group",children:[c.jsx("div",{className:"w-8 h-8 rounded-full border border-stone-800 group-hover:border-emerald-500/50 flex items-center justify-center transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),c.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:" "})]})})]})]}),Z&&c.jsx("div",{className:"fixed inset-0 z-[120] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>le(!1),children:c.jsxs("div",{className:"bg-[#0f0f0f] border border-stone-800 w-full max-w-lg rounded-2xl shadow-2xl flex flex-col max-h-[85vh]",onClick:$=>$.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b border-stone-900 shrink-0 space-y-4 bg-[#0f0f0f] rounded-t-2xl z-10",children:[c.jsxs("h3",{className:"text-xl font-serif text-stone-100 shrink-0",children:[" : ",re?(Ae=(Ne=X.subLocations)==null?void 0:Ne.find($=>$.id===re))==null?void 0:Ae.name:" "]}),c.jsx("input",{type:"text",placeholder:"  ...",value:$e,onChange:$=>tt($.target.value),className:"w-full bg-stone-900 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",autoFocus:!0}),(o.length>0||a.length>0)&&c.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto custom-scrollbar",children:[o.map($=>{const fe=Ye.includes($);return c.jsx("button",{onClick:()=>Oe($),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${fe?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:$},$)}),a.map($=>{const fe=Ye.includes($);return c.jsx("button",{onClick:()=>Oe($),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${fe?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-amber-500"}`,children:$},$)})]})]}),c.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-grow p-4 space-y-1",children:ve.length===0?c.jsx("div",{className:"text-center py-8 text-stone-600 italic text-sm",children:se.length===0?"      .":"  ."}):ve.map($=>{const fe=O($.id),Ie=!!fe;return c.jsxs("button",{onClick:()=>!Ie&&ye($.id),disabled:Ie,className:`w-full flex items-center gap-3 p-2 rounded-lg transition-colors group text-left ${Ie?"opacity-50 cursor-not-allowed bg-stone-900/20":"hover:bg-stone-900"}`,children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-black border border-stone-800 overflow-hidden shrink-0",children:c.jsx("img",{src:$.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${$.miniImageX??50}% ${$.miniImageY??50}%`,transform:`scale(${$.miniImageScale??1})`,transformOrigin:`${$.miniImageX??50}% ${$.miniImageY??50}%`}})}),c.jsxs("div",{className:"min-w-0 flex-grow",children:[c.jsx("span",{className:`text-stone-300 text-sm font-bold block truncate ${!Ie&&"group-hover:text-emerald-400"}`,children:$.name}),Ie?c.jsxs("span",{className:"text-[10px] text-red-500/70 font-bold uppercase tracking-wider block truncate",children:[": ",fe]}):c.jsx(c.Fragment,{children:Ye.length>0&&c.jsx("span",{className:"text-[8px] text-stone-600 block truncate",children:Ye.filter(De=>($.tags||[]).includes(De)||($.hiddenTags||[]).includes(De)).join(", ")})})]}),!Ie&&c.jsx("span",{className:"ml-auto text-emerald-500 opacity-0 group-hover:opacity-100",children:"+"})]},$.id)})}),c.jsx("div",{className:"p-4 border-t border-stone-900 shrink-0",children:c.jsx("button",{onClick:()=>le(!1),className:"w-full py-3 bg-stone-900 hover:bg-stone-800 text-stone-400 rounded-xl text-[10px] uppercase font-bold tracking-widest",children:""})})]})})]})}return g?c.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("button",{onClick:()=>v(null),className:"self-start flex items-center gap-2 text-stone-500 hover:text-emerald-500 transition-colors group",children:[c.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"  "})]}),c.jsxs("div",{className:"flex justify-between items-end border-b border-stone-800 pb-8",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-2xl overflow-hidden border border-stone-800 bg-black shadow-lg",children:c.jsx("img",{src:V==null?void 0:V.imageUrl,className:"w-full h-full object-cover",alt:""})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-medium text-stone-100",children:V==null?void 0:V.name}),c.jsxs("p",{className:"text-stone-500 uppercase tracking-widest text-[10px] mt-2",children:[": ",w.length]})]})]}),p&&c.jsxs("div",{className:"flex gap-2 flex-col md:flex-row",children:[c.jsx("button",{onClick:()=>te(V),className:"bg-stone-900/50 border border-stone-800 text-stone-400 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-stone-900 transition-all mb-1",children:". "}),c.jsx("button",{onClick:()=>Q(),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all mb-1",children:"+ "})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[w.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center text-stone-700 italic",children:"     .   ."}),w.map(A=>{var se,ve,G,$;return c.jsxs("div",{onClick:()=>y(A.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl overflow-hidden group hover:border-emerald-900/30 transition-all flex flex-col cursor-pointer active:scale-95 shadow-lg",children:[c.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[c.jsx("img",{src:A.imageUrl,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700",alt:""}),c.jsx("div",{className:"absolute top-4 left-4 bg-black/80 px-3 py-1 rounded text-[9px] uppercase tracking-widest font-bold text-emerald-500 border border-emerald-900/50 backdrop-blur-sm",children:A.type}),(((se=A.characterIds)==null?void 0:se.length)||0)+(((ve=A.subLocations)==null?void 0:ve.reduce((fe,Ie)=>{var De;return fe+(((De=Ie.characterIds)==null?void 0:De.length)||0)},0))||0)>0&&c.jsx("div",{className:"absolute bottom-4 right-4 bg-black/60 backdrop-blur-md px-2 py-1 rounded flex items-center gap-2",children:c.jsxs("span",{className:"text-[9px] text-stone-300 font-bold uppercase tracking-widest",children:[(((G=A.characterIds)==null?void 0:G.length)||0)+((($=A.subLocations)==null?void 0:$.reduce((fe,Ie)=>{var De;return fe+(((De=Ie.characterIds)==null?void 0:De.length)||0)},0))||0)," ."]})})]}),c.jsxs("div",{className:"p-6 space-y-3 flex-grow flex flex-col",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-100 group-hover:text-emerald-200 transition-colors",children:A.name}),c.jsx("p",{className:"text-stone-500 text-sm leading-relaxed line-clamp-3 mb-2",children:A.description}),p&&c.jsxs("div",{className:"mt-auto pt-4 border-t border-stone-900/50 flex justify-between",children:[c.jsx("button",{onClick:fe=>{fe.stopPropagation(),Q(A)},className:"text-[9px] font-bold uppercase tracking-widest text-stone-600 hover:text-white",children:"."}),c.jsx("button",{onClick:fe=>{fe.stopPropagation(),Se(A.id)},className:"text-[9px] font-bold uppercase tracking-widest text-stone-600 hover:text-red-500",children:""})]})]})]},A.id)})]}),D&&c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-2xl p-6 md:p-8 space-y-6 max-h-[90vh] flex flex-col overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100 shrink-0",children:ee.id?"":" "}),c.jsxs("div",{className:"space-y-4 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsx("input",{className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:ee.name||"",onChange:A=>be({...ee,name:A.target.value}),placeholder:" ..."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsxs("select",{className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:ee.type,onChange:A=>be({...ee,type:A.target.value}),children:[c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:""})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsx("textarea",{placeholder:"  ...",className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 h-32 outline-none resize-none focus:border-emerald-900",value:ee.description||"",onChange:A=>be({...ee,description:A.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-3 rounded-lg border border-stone-800 flex items-center justify-center gap-2 transition-colors ${R?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:E,className:"hidden",disabled:R,accept:"image/*"}),c.jsx("span",{className:"text-[10px] text-stone-400 font-bold uppercase",children:R?"...":""})]}),c.jsx("input",{className:"flex-[1.5] bg-stone-900 border border-stone-800 p-3 rounded-lg text-xs text-stone-400 outline-none",placeholder:"...",value:(Ee=ee.imageUrl)!=null&&Ee.startsWith("data:")?"":ee.imageUrl||"",onChange:A=>be({...ee,imageUrl:A.target.value})})]}),ee.imageUrl&&c.jsx("img",{src:ee.imageUrl,className:"h-20 w-full object-cover rounded mt-2 opacity-50"})]})]}),c.jsxs("div",{className:"flex gap-4 shrink-0 pt-2 border-t border-stone-900 mt-2",children:[c.jsx("button",{onClick:()=>H(!1),className:"flex-1 py-3 text-[10px] font-bold uppercase text-stone-500 hover:text-stone-300",children:""}),c.jsx("button",{onClick:pe,disabled:R||!ee.name,className:"flex-1 py-3 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-lg font-bold text-[10px] uppercase disabled:opacity-50 hover:bg-emerald-900/50 transition-colors",children:""})]})]})}),x&&c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-3xl p-8 space-y-6 shadow-2xl animate-in zoom-in-95 duration-300",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100",children:" "}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsx("input",{className:"w-full bg-stone-900 border border-stone-800 p-4 rounded-xl text-stone-200 outline-none focus:border-emerald-900",value:ie.name||"",onChange:A=>z({...ie,name:A.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-4 rounded-xl border border-stone-800 flex items-center justify-center gap-2 ${R?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:hn,className:"hidden",disabled:R,accept:"image/*"}),c.jsx("span",{className:"text-xs text-stone-400 font-bold uppercase",children:R?"...":""})]}),c.jsx("input",{className:"flex-[2] bg-stone-900 border border-stone-800 p-4 rounded-xl text-xs text-stone-400 outline-none",placeholder:"...",value:(We=ie.imageUrl)!=null&&We.startsWith("data:")?"":ie.imageUrl||"",onChange:A=>z({...ie,imageUrl:A.target.value})})]})]})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-4 text-[10px] uppercase font-bold text-stone-500 hover:text-stone-300",children:""}),c.jsx("button",{onClick:M,disabled:!ie.name||R,className:"flex-1 py-4 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-xl font-bold text-[10px] uppercase hover:bg-emerald-900/50 transition-all disabled:opacity-50",children:""})]})]})})]}):c.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 pb-20",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("div",{className:"space-y-2",children:c.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""})}),p&&c.jsx("button",{onClick:()=>te(),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all",children:"  "})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.length===0&&c.jsx("div",{className:"col-span-full py-20 text-center",children:c.jsx("p",{className:"text-stone-700 italic font-serif text-xl",children:" .   ."})}),s.map(A=>c.jsxs("div",{onClick:()=>v(A.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl overflow-hidden group cursor-pointer relative shadow-lg hover:shadow-emerald-900/10 hover:border-emerald-900/40 transition-all active:scale-95",children:[c.jsxs("div",{className:"aspect-[16/9] relative",children:[c.jsx("img",{src:A.imageUrl,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700",alt:A.name}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"}),c.jsx("h3",{className:"absolute bottom-6 left-6 text-3xl font-serif text-stone-100 z-10 font-bold group-hover:text-emerald-100 transition-colors drop-shadow-md",children:A.name})]}),p&&c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:se=>{se.stopPropagation(),te(A)},className:"bg-black/50 hover:bg-white text-white hover:text-black p-2 rounded-full backdrop-blur-sm transition-all",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),c.jsx("button",{onClick:se=>{se.stopPropagation(),P(A.id)},className:"bg-black/50 hover:bg-red-900/80 text-white p-2 rounded-full backdrop-blur-sm transition-all",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},A.id))]}),x&&c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-3xl p-8 space-y-6 shadow-2xl animate-in zoom-in-95 duration-300",children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100",children:ie.id?" ":" "}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsx("input",{autoFocus:!0,className:"w-full bg-stone-900 border border-stone-800 p-4 rounded-xl text-stone-200 outline-none focus:border-emerald-900 transition-colors",value:ie.name||"",onChange:A=>z({...ie,name:A.target.value}),placeholder:":  "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-4 rounded-xl border border-stone-800 flex items-center justify-center gap-2 transition-colors ${R?"opacity-50":""}`,children:[c.jsx("input",{type:"file",onChange:hn,className:"hidden",disabled:R,accept:"image/*"}),c.jsx("span",{className:"text-xs text-stone-400 font-bold uppercase",children:R?"...":""})]}),c.jsx("input",{className:"flex-[2] bg-stone-900 border border-stone-800 p-4 rounded-xl text-xs text-stone-400 outline-none",placeholder:"...",value:(rt=ie.imageUrl)!=null&&rt.startsWith("data:")?"":ie.imageUrl||"",onChange:A=>z({...ie,imageUrl:A.target.value})})]})]})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-4 text-[10px] uppercase font-bold text-stone-500 hover:text-stone-300",children:""}),c.jsx("button",{onClick:M,disabled:!ie.name||R,className:"flex-1 py-4 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-xl font-bold text-[10px] uppercase hover:bg-emerald-900/50 transition-all disabled:opacity-50",children:""})]})]})})]})},ax=({notes:s,characters:t,onUpdate:r,isAdmin:o})=>{var L,R,ke,ie;const[a,d]=B.useState(!1),[h,p]=B.useState(null),[g,v]=B.useState("form"),[k,y]=B.useState(new Set),[x,I]=B.useState({}),[D,H]=B.useState(""),Z=z=>{y(ee=>{const be=new Set(ee);return be.has(z)?be.delete(z):be.add(z),be})},le=z=>{z?(p(z.id),I({...z})):(p(null),I({title:"",content:""})),v("form"),H(""),d(!0)},re=()=>{d(!1),p(null),I({})},je=()=>{if(!(!x.title||!x.content)){if(h){const z=s.map(ee=>ee.id===h?{...ee,...x}:ee);r(z)}else{const z={id:Date.now().toString(),title:x.title||"",content:x.content||"",date:new Date().toLocaleDateString("ru-RU"),authorId:x.authorId,targetId:x.targetId};r([z,...s])}re()}},ue=()=>{if(h&&window.confirm("     ?")){const z=s.filter(ee=>ee.id!==h);r(z),re()}},Te=z=>t.find(ee=>ee&&ee.id===z),q=B.useMemo(()=>t.filter(z=>z.name.toLowerCase().includes(D.toLowerCase())).sort((z,ee)=>z.name.localeCompare(ee.name)),[t,D]);return c.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 max-w-4xl mx-auto pb-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-stone-900/50 pb-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100 italic",children:""}),c.jsx("p",{className:"text-stone-500 uppercase tracking-[0.3em] text-[9px] font-black",children:"   "})]}),o&&c.jsxs("button",{onClick:()=>le(),className:"group relative bg-white hover:bg-emerald-50 text-black px-8 py-4 rounded-2xl text-[10px] uppercase tracking-[0.2em] font-black transition-all shadow-xl hover:shadow-emerald-500/10 flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," "]})]}),c.jsx("div",{className:"space-y-6",children:s.length===0?c.jsxs("div",{className:"py-32 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-stone-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-stone-800/50",children:c.jsx("svg",{className:"w-8 h-8 text-stone-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsx("p",{className:"text-stone-700 italic font-serif text-lg",children:" ,   .    ."})]}):s.map(z=>{const ee=Te(z.authorId),be=Te(z.targetId),$e=k.has(z.id);return c.jsxs("article",{onClick:()=>Z(z.id),className:`relative group bg-[#0a0a0a] border rounded-3xl p-6 md:p-8 transition-all shadow-2xl cursor-pointer overflow-hidden ${$e?"border-emerald-900/40 bg-stone-950/80":"border-stone-900/60 hover:border-emerald-900/30"}`,children:[c.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 rounded-full blur-[100px] -translate-y-32 translate-x-32 pointer-events-none transition-opacity duration-700 ${$e?"opacity-100":"opacity-0 group-hover:opacity-50"}`}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[c.jsx("div",{className:"flex items-center gap-3",children:ee?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-10 h-10 rounded-full border border-stone-800 overflow-hidden bg-black shrink-0",children:c.jsx("img",{src:ee.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${ee.miniImageX??50}% ${ee.miniImageY??50}%`,transform:`scale(${ee.miniImageScale??1})`}})}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-stone-200",children:ee.name})]}):c.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-stone-700 bg-stone-900/50 px-3 py-1.5 rounded-lg",children:" "})}),c.jsx("div",{className:"h-px w-6 bg-stone-900"}),c.jsx("div",{className:"flex items-center gap-3",children:be?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-emerald-500/60",children:":"}),c.jsx("div",{className:"w-10 h-10 rounded-full border border-emerald-900/20 overflow-hidden bg-black shrink-0",children:c.jsx("img",{src:be.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${be.miniImageX??50}% ${be.miniImageY??50}%`,transform:`scale(${be.miniImageScale??1})`}})}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-emerald-400",children:be.name})]}):c.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-stone-700",children:""})}),c.jsx("div",{className:"ml-auto text-[9px] font-black text-stone-800 uppercase tracking-[0.2em]",children:z.date})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:`font-serif font-bold transition-colors drop-shadow-md italic break-words ${$e?"text-3xl md:text-4xl text-emerald-100 mb-6":"text-xl md:text-2xl text-stone-300 group-hover:text-emerald-200"}`,children:z.title}),!$e&&c.jsx("p",{className:"text-[10px] uppercase tracking-[0.2em] font-black text-stone-700 group-hover:text-stone-500 transition-colors pt-2",children:",  "})]}),$e&&c.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-500",children:[c.jsx("div",{className:"w-full h-px bg-gradient-to-r from-emerald-900/50 to-transparent my-6"}),c.jsx("p",{className:"text-stone-300 leading-relaxed font-serif text-xl md:text-2xl whitespace-pre-wrap break-words",children:z.content}),c.jsxs("div",{className:"mt-10 pt-6 border-t border-stone-900/50 flex justify-between items-center",children:[c.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-emerald-900 hover:text-emerald-600 transition-colors",onClick:tt=>{tt.stopPropagation(),Z(z.id)},children:""}),o&&c.jsxs("button",{onClick:tt=>{tt.stopPropagation(),le(z)},className:"flex items-center gap-2 bg-stone-900/50 hover:bg-stone-800 text-stone-400 px-4 py-2 rounded-lg text-[9px] uppercase font-black tracking-widest transition-all",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),""]})]})]})]})]},z.id)})}),a&&c.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 md:p-6 animate-in fade-in duration-300",children:[c.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-[20px]",onClick:re}),c.jsxs("div",{className:"relative bg-[#070707] border border-stone-800/80 w-full max-w-2xl rounded-[2.5rem] overflow-hidden shadow-[0_0_100px_rgba(16,185,129,0.1)] flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-500",children:[c.jsxs("div",{className:"p-8 md:p-10 border-b border-stone-900/50 flex justify-between items-center bg-stone-900/20 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-serif text-stone-100 font-bold italic",children:g==="form"?h?" ":" ":g==="select-author"?" ":" "}),c.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-emerald-500/60 mt-2",children:g==="form"?"   ":"   "})]}),c.jsx("button",{onClick:g==="form"?re:()=>v("form"),className:"text-stone-700 hover:text-white transition-all p-3 hover:bg-white/5 rounded-full",children:c.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:g==="form"?c.jsxs("div",{className:"p-8 md:p-12 space-y-10",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("button",{onClick:()=>v("select-author"),className:`group relative p-5 rounded-3xl border transition-all text-left flex items-center gap-5 ${x.authorId?"bg-emerald-950/10 border-emerald-900/30":"bg-stone-900/20 border-stone-800/50 hover:border-emerald-900/30"}`,children:[c.jsx("div",{className:`w-16 h-16 rounded-full border-2 overflow-hidden bg-black shrink-0 transition-transform group-hover:scale-105 ${x.authorId?"border-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.3)]":"border-stone-800"}`,children:x.authorId?c.jsx("img",{src:(L=Te(x.authorId))==null?void 0:L.imageUrl,className:"w-full h-full object-cover",alt:""}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-stone-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[9px] uppercase tracking-widest font-black text-stone-600 mb-1",children:":"}),c.jsx("p",{className:`text-sm font-bold truncate ${x.authorId?"text-stone-100":"text-stone-700 italic"}`,children:x.authorId?(R=Te(x.authorId))==null?void 0:R.name:" "})]}),x.authorId&&c.jsx("div",{onClick:z=>{z.stopPropagation(),I({...x,authorId:void 0})},className:"absolute -top-2 -right-2 bg-stone-900 p-1.5 rounded-full border border-stone-800 text-stone-600 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{d:"M6 18L18 6M6 6l12 12",strokeWidth:2})})})]}),c.jsxs("button",{onClick:()=>v("select-target"),className:`group relative p-5 rounded-3xl border transition-all text-left flex items-center gap-5 ${x.targetId?"bg-amber-950/10 border-amber-900/30":"bg-stone-900/20 border-stone-800/50 hover:border-amber-900/30"}`,children:[c.jsx("div",{className:`w-16 h-16 rounded-full border-2 overflow-hidden bg-black shrink-0 transition-transform group-hover:scale-105 ${x.targetId?"border-amber-500 shadow-[0_0_15px_rgba(245,158,11,0.3)]":"border-stone-800"}`,children:x.targetId?c.jsx("img",{src:(ke=Te(x.targetId))==null?void 0:ke.imageUrl,className:"w-full h-full object-cover",alt:""}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-stone-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[9px] uppercase tracking-widest font-black text-stone-600 mb-1",children:":"}),c.jsx("p",{className:`text-sm font-bold truncate ${x.targetId?"text-stone-100":"text-stone-700 italic"}`,children:x.targetId?(ie=Te(x.targetId))==null?void 0:ie.name:""})]}),x.targetId&&c.jsx("div",{onClick:z=>{z.stopPropagation(),I({...x,targetId:void 0})},className:"absolute -top-2 -right-2 bg-stone-900 p-1.5 rounded-full border border-stone-800 text-stone-600 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{d:"M6 18L18 6M6 6l12 12",strokeWidth:2})})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.4em] font-black text-stone-600 ml-1",children:""}),c.jsx("input",{placeholder:"  ...",className:"w-full bg-[#030303] border border-stone-900 rounded-2xl px-6 py-5 text-stone-100 outline-none focus:border-emerald-500/40 transition-all font-serif italic text-xl shadow-inner focus:shadow-emerald-500/5",value:x.title||"",onChange:z=>I({...x,title:z.target.value})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-[10px] uppercase tracking-[0.4em] font-black text-stone-600 ml-1",children:" "}),c.jsx("textarea",{placeholder:"  ...",className:"w-full bg-[#030303] border border-stone-900 rounded-[2.5rem] px-8 py-8 text-stone-300 min-h-[300px] outline-none focus:border-emerald-500/40 transition-all resize-none leading-relaxed shadow-inner custom-scrollbar text-lg font-serif",value:x.content||"",onChange:z=>I({...x,content:z.target.value})})]})]}):c.jsxs("div",{className:"p-8 md:p-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[c.jsx("div",{className:"mb-8",children:c.jsx("input",{type:"text",placeholder:"    ...",value:D,onChange:z=>H(z.target.value),className:"w-full bg-stone-900/50 border border-stone-800 rounded-2xl px-6 py-4 text-sm text-stone-200 outline-none focus:border-emerald-500/50 transition-colors shadow-inner",autoFocus:!0})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:q.map(z=>c.jsxs("button",{onClick:()=>{I({...x,[g==="select-author"?"authorId":"targetId"]:z.id}),v("form")},className:"flex items-center gap-4 p-4 rounded-2xl hover:bg-emerald-950/10 border border-stone-900 hover:border-emerald-900/30 transition-all group text-left",children:[c.jsx("div",{className:"w-12 h-12 rounded-full border border-stone-800 group-hover:border-emerald-500/50 bg-black overflow-hidden shrink-0 transition-colors",children:c.jsx("img",{src:z.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${z.miniImageX??50}% ${z.miniImageY??50}%`,transform:`scale(${z.miniImageScale??1})`}})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("span",{className:"text-stone-300 font-bold text-sm block truncate group-hover:text-emerald-300 transition-colors",children:z.name}),c.jsx("span",{className:"text-[9px] uppercase tracking-widest text-stone-600 block truncate",children:""})]})]},z.id))}),q.length===0&&c.jsx("p",{className:"text-center py-20 text-stone-700 italic",children:"  ..."})]})}),g==="form"&&c.jsxs("div",{className:"p-8 md:p-10 border-t border-stone-900/50 bg-stone-900/20 flex flex-wrap gap-4 justify-between items-center shrink-0",children:[h?c.jsx("button",{onClick:ue,className:"px-8 py-5 bg-red-950/10 hover:bg-red-900/20 border border-red-900/30 text-red-500/70 hover:text-red-500 rounded-2xl text-[10px] uppercase tracking-widest font-black transition-all",children:" "}):c.jsx("div",{className:"hidden md:block"}),c.jsxs("div",{className:"flex gap-4 md:gap-6 w-full md:w-auto",children:[c.jsx("button",{onClick:re,className:"flex-1 md:flex-none px-8 py-5 text-[10px] uppercase tracking-widest font-black text-stone-500 hover:text-stone-300 transition-colors",children:""}),c.jsx("button",{onClick:je,disabled:!x.title||!x.content,className:"flex-1 md:flex-none px-10 py-5 bg-white hover:bg-emerald-50 text-black rounded-2xl text-[10px] uppercase tracking-widest font-black transition-all shadow-xl disabled:opacity-30 disabled:cursor-not-allowed",children:h?"":""})]})]})]})]})]})},cx=({sessions:s,characters:t,onUpdate:r,isAdmin:o})=>{const[a,d]=B.useState(null),[h,p]=B.useState(null),[g,v]=B.useState(""),[k,y]=B.useState(!1),[x,I]=B.useState(""),[D,H]=B.useState(""),Z=B.useRef(null),le=s.find(q=>q.id===a);B.useEffect(()=>{Z.current&&Z.current.scrollIntoView({behavior:"smooth"})},[le==null?void 0:le.posts.length,a]);const re=()=>{if(!x.trim())return;const q={id:Date.now().toString(),name:x,description:D,posts:[]};r([...s,q]),y(!1),I(""),H("")},je=q=>{window.confirm("     ?")&&(r(s.filter(L=>L.id!==q)),a===q&&d(null))},ue=q=>{if(!g.trim()||!h||!a)return;const L={id:Date.now().toString(),characterId:h,content:g,timestamp:Date.now(),type:"speech"},R=s.map(ke=>ke.id===a?{...ke,posts:[...ke.posts,L]}:ke);r(R),v("")},Te=q=>new Date(q).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return a?c.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col animate-in fade-in duration-300",children:[c.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-stone-900 shrink-0",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-stone-900 rounded-full text-stone-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:le==null?void 0:le.name}),c.jsx("p",{className:"text-[10px] uppercase tracking-widest text-stone-500",children:le==null?void 0:le.description})]})]})}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar py-6 space-y-8 pr-2",children:[(le==null?void 0:le.posts.length)===0?c.jsx("div",{className:"text-center text-stone-700 italic text-sm mt-10",children:"...   ,   ."}):le==null?void 0:le.posts.map(q=>{const L=t.find(R=>R.id===q.characterId);return L?c.jsxs("div",{className:"flex gap-4 md:gap-6 group animate-in slide-in-from-bottom-2 duration-500",children:[c.jsx("div",{className:"shrink-0 flex flex-col items-center gap-2 mt-1",children:c.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full border border-stone-800 overflow-hidden bg-black shadow-lg",children:c.jsx("img",{src:L.imageUrl,alt:L.name,style:{objectFit:"cover",objectPosition:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transformOrigin:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transform:`scale(${L.miniImageScale??1})`},className:"w-full h-full"})})}),c.jsxs("div",{className:"flex-grow max-w-4xl",children:[c.jsxs("div",{className:"flex items-baseline gap-3 mb-1",children:[c.jsx("span",{className:"text-stone-300 font-bold text-sm tracking-wide",children:L.name}),c.jsx("span",{className:"text-[9px] text-stone-700 font-mono",children:Te(q.timestamp)})]}),c.jsx("div",{className:"text-stone-400 leading-relaxed font-serif whitespace-pre-wrap text-[15px] md:text-[16px]",children:q.content})]})]},q.id):null}),c.jsx("div",{ref:Z})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-stone-900 shrink-0 bg-[#050505] z-10",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-3",children:t.map(q=>{const L=h===q.id;return c.jsxs("button",{onClick:()=>p(q.id),className:`flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all shrink-0 border relative ${L?"bg-stone-900/80 border-stone-800 text-stone-100":"bg-transparent border-transparent text-stone-500 hover:text-stone-400"}`,children:[c.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-black shrink-0",children:c.jsx("img",{src:q.imageUrl,style:{objectFit:"cover",objectPosition:`${q.miniImageX??50}% ${q.miniImageY??50}%`,transformOrigin:`${q.miniImageX??50}% ${q.miniImageY??50}%`,transform:`scale(${q.miniImageScale??1})`},className:"w-full h-full",alt:""})}),c.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wider",children:q.name}),L&&c.jsx("div",{className:"ml-1 w-2.5 h-2.5 rounded-sm bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)] animate-in zoom-in-50 duration-300"})]},q.id)})}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{value:g,onChange:q=>v(q.target.value),onKeyDown:q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),ue())},placeholder:h?" -...":"  ...",disabled:!h,className:"w-full bg-[#0f0f0f] border border-stone-800 rounded-xl p-4 pr-14 text-stone-300 outline-none focus:border-emerald-900/50 transition-colors resize-none h-24 custom-scrollbar font-serif"}),c.jsx("button",{onClick:()=>ue(),disabled:!g.trim()||!h,className:"absolute right-3 bottom-3 p-2 bg-stone-800 text-stone-400 rounded-lg hover:bg-emerald-600 hover:text-white disabled:opacity-30 disabled:hover:bg-stone-800 disabled:hover:text-stone-400 transition-all",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})]}):c.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""}),c.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-[10px]",children:"   "})]}),c.jsx("button",{onClick:()=>y(!0),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all",children:"+  "})]}),k&&c.jsxs("div",{className:"bg-[#0f0f0f]/50 border border-stone-800 p-6 rounded-2xl space-y-4 animate-in slide-in-from-top-4",children:[c.jsx("input",{autoFocus:!0,placeholder:"   ...",className:"w-full bg-stone-900/50 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:x,onChange:q=>I(q.target.value)}),c.jsx("input",{placeholder:" ...",className:"w-full bg-stone-900/50 border border-stone-800 p-3 rounded-lg text-stone-400 outline-none focus:border-emerald-900 text-sm",value:D,onChange:q=>H(q.target.value)}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-[10px] uppercase font-bold text-stone-500",children:""}),c.jsx("button",{onClick:re,className:"px-6 py-2 bg-emerald-700 hover:bg-emerald-600 text-white rounded-lg text-[10px] uppercase font-bold transition-colors",children:""})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.length===0&&!k&&c.jsx("div",{className:"col-span-full text-center py-20 opacity-50 italic font-serif",children:"   .   ."}),s.map(q=>c.jsxs("div",{onClick:()=>d(q.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl p-6 cursor-pointer hover:border-emerald-900/50 hover:bg-stone-900/30 transition-all group flex flex-col h-[200px]",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h3",{className:"text-xl font-serif text-stone-200 group-hover:text-emerald-400 transition-colors",children:q.name}),c.jsxs("span",{className:"text-[10px] bg-stone-900 text-stone-500 px-2 py-1 rounded-md font-mono",children:[q.posts.length," "]})]}),c.jsx("p",{className:"text-sm text-stone-500 mt-2 line-clamp-2",children:q.description}),c.jsxs("div",{className:"mt-auto pt-4 border-t border-stone-900/50 flex justify-between items-center",children:[c.jsx("span",{className:"text-[9px] uppercase tracking-widest text-stone-600 font-bold group-hover:text-stone-400",children:"  "}),o&&c.jsx("button",{onClick:L=>{L.stopPropagation(),je(q.id)},className:"text-stone-800 hover:text-red-500 p-1 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},q.id))]})]})},ux=({onConnect:s,onDisconnect:t,onClose:r,isConnected:o})=>c.jsx("div",{className:"fixed inset-0 z-[120] bg-black/95 backdrop-blur-md flex items-center justify-center p-6",onClick:r,children:c.jsxs("div",{className:"bg-[#0a0a0a] border border-emerald-900/50 w-full max-w-lg rounded-3xl p-8 space-y-8 shadow-[0_0_80px_rgba(16,185,129,0.05)]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-serif text-emerald-500 italic",children:" "}),c.jsx("p",{className:"text-stone-500 text-[10px] uppercase tracking-widest mt-2",children:"  "})]}),c.jsx("button",{onClick:r,className:"text-stone-600 hover:text-stone-300 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o?c.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"p-6 rounded-2xl border bg-emerald-950/20 border-emerald-500/30",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse bg-emerald-500"}),c.jsx("span",{className:"text-sm font-bold uppercase tracking-widest text-emerald-400",children:" "})]}),c.jsx("div",{className:"space-y-2",children:c.jsx("p",{className:"text-[10px] text-stone-600 mt-2 leading-relaxed",children:"     .  ,     ,    ."})})]}),c.jsx("button",{onClick:t,className:"w-full py-4 rounded-xl border border-red-900/30 text-red-500/70 hover:bg-red-950/20 hover:text-red-500 hover:border-red-900/60 transition-all text-[10px] uppercase font-bold tracking-[0.2em]",children:" "})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-stone-900/30 border border-stone-800 rounded-2xl p-6 text-center space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-stone-900 rounded-full flex items-center justify-center mx-auto text-stone-600",children:c.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),c.jsx("p",{className:"text-stone-400 text-sm leading-relaxed",children:"  ,           ."})]}),c.jsx("button",{onClick:s,className:"w-full py-5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 hover:border-emerald-500/50 text-emerald-500 rounded-xl text-[11px] uppercase font-bold tracking-[0.25em] transition-all shadow-lg shadow-emerald-900/10",children:""}),c.jsx("p",{className:"text-[9px] text-stone-600 text-center border-t border-stone-900 pt-4",children:":          ."})]})]})}),vh=["","","","","","",""],yh=["","NPC","","",""],oc=[{id:"1",name:" ",age:34,height:"182 ",imageUrl:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=800&auto=format&fit=crop",tags:["","",""],hiddenTags:[""],connections:[{id:"2",name:"  ",role:""}],additionalInfo:"      ,     . ,         ,         .     ,    ."},{id:"2",name:"  ",age:21,height:"168 ",imageUrl:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=800&auto=format&fit=crop",tags:["",""],hiddenTags:["",""],connections:[{id:"1",name:" ",role:"  "}],additionalInfo:"   ,          .         .    ,        ."},{id:"3",name:"",age:"124 ",height:"195 ",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=800&auto=format&fit=crop",tags:["",""],hiddenTags:["NPC"],connections:[{id:"1",name:" ",role:" "}],additionalInfo:"  ,       .         .      ."}],dx=()=>{};var _h={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(s,t){if(!s)throw us(t)},us=function(s){return new Error("Firebase Database ("+vp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=function(s){const t=[];let r=0;for(let o=0;o<s.length;o++){let a=s.charCodeAt(o);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++o)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},fx=function(s){const t=[];let r=0,o=0;for(;r<s.length;){const a=s[r++];if(a<128)t[o++]=String.fromCharCode(a);else if(a>191&&a<224){const d=s[r++];t[o++]=String.fromCharCode((a&31)<<6|d&63)}else if(a>239&&a<365){const d=s[r++],h=s[r++],p=s[r++],g=((a&7)<<18|(d&63)<<12|(h&63)<<6|p&63)-65536;t[o++]=String.fromCharCode(55296+(g>>10)),t[o++]=String.fromCharCode(56320+(g&1023))}else{const d=s[r++],h=s[r++];t[o++]=String.fromCharCode((a&15)<<12|(d&63)<<6|h&63)}}return t.join("")},Fc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<s.length;a+=3){const d=s[a],h=a+1<s.length,p=h?s[a+1]:0,g=a+2<s.length,v=g?s[a+2]:0,k=d>>2,y=(d&3)<<4|p>>4;let x=(p&15)<<2|v>>6,I=v&63;g||(I=64,h||(x=64)),o.push(r[k],r[y],r[x],r[I])}return o.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(yp(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):fx(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<s.length;){const d=r[s.charAt(a++)],p=a<s.length?r[s.charAt(a)]:0;++a;const v=a<s.length?r[s.charAt(a)]:64;++a;const y=a<s.length?r[s.charAt(a)]:64;if(++a,d==null||p==null||v==null||y==null)throw new hx;const x=d<<2|p>>4;if(o.push(x),v!==64){const I=p<<4&240|v>>2;if(o.push(I),y!==64){const D=v<<6&192|y;o.push(D)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class hx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _p=function(s){const t=yp(s);return Fc.encodeByteArray(t,!0)},zo=function(s){return _p(s).replace(/\./g,"")},vc=function(s){try{return Fc.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(s){return wp(void 0,s)}function wp(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!mx(r)||(s[r]=wp(s[r],t[r]));return s}function mx(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=()=>gx().__FIREBASE_DEFAULTS__,vx=()=>{if(typeof process>"u"||typeof _h>"u")return;const s=_h.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},yx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&vc(s[1]);return t&&JSON.parse(t)},bp=()=>{try{return dx()||xx()||vx()||yx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},_x=s=>{var t,r;return(r=(t=bp())==null?void 0:t.emulatorHosts)==null?void 0:r[s]},wx=s=>{const t=_x(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),o]:[t.substring(0,r),o]},Np=()=>{var s;return(s=bp())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bx(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},o=t||"demo-project",a=s.iat||0,d=s.sub||s.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...s};return[zo(JSON.stringify(r)),zo(JSON.stringify(h)),""].join(".")}const ri={};function kx(){const s={prod:[],emulator:[]};for(const t of Object.keys(ri))ri[t]?s.emulator.push(t):s.prod.push(t);return s}function Cx(s){let t=document.getElementById(s),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),r=!0),{created:r,element:t}}let wh=!1;function Sx(s,t){if(typeof window>"u"||typeof document>"u"||!zc(window.location.host)||ri[s]===t||ri[s]||wh)return;ri[s]=t;function r(x){return`__firebase__banner__${x}`}const o="__firebase__banner",d=kx().prod.length>0;function h(){const x=document.getElementById(o);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,I){x.setAttribute("width","24"),x.setAttribute("id",I),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{wh=!0,h()},x}function k(x,I){x.setAttribute("id",I),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=Cx(o),I=r("text"),D=document.getElementById(I)||document.createElement("span"),H=r("learnmore"),Z=document.getElementById(H)||document.createElement("a"),le=r("preprendIcon"),re=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const je=x.element;p(je),k(Z,H);const ue=v();g(re,le),je.append(re,D,Z,ue),document.body.appendChild(je)}d?(D.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ex())}function jx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ix(){return vp.NODE_ADMIN===!0}function Tx(){try{return typeof indexedDB=="object"}catch{return!1}}function Rx(){return new Promise((s,t)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(o),s(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var d;t(((d=a.error)==null?void 0:d.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="FirebaseError";class vi extends Error{constructor(t,r,o){super(r),this.code=t,this.customData=o,this.name=Px,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cp.prototype.create)}}class Cp{constructor(t,r,o){this.service=t,this.serviceName=r,this.errors=o}create(t,...r){const o=r[0]||{},a=`${this.service}/${t}`,d=this.errors[t],h=d?Lx(d,o):"Error",p=`${this.serviceName}: ${h} (${a}).`;return new vi(a,p,o)}}function Lx(s,t){return s.replace(Mx,(r,o)=>{const a=t[o];return a!=null?String(a):`<${o}?>`})}const Mx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(s){return JSON.parse(s)}function yt(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=function(s){let t={},r={},o={},a="";try{const d=s.split(".");t=ci(vc(d[0])||""),r=ci(vc(d[1])||""),a=d[2],o=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:o,signature:a}},Dx=function(s){const t=Sp(s),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},Ox=function(s){const t=Sp(s).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function os(s,t){if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}function bh(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function $o(s,t,r){const o={};for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=t.call(r,s[a],a,s));return o}function Uo(s,t){if(s===t)return!0;const r=Object.keys(s),o=Object.keys(t);for(const a of r){if(!o.includes(a))return!1;const d=s[a],h=t[a];if(Nh(d)&&Nh(h)){if(!Uo(d,h))return!1}else if(d!==h)return!1}for(const a of o)if(!r.includes(a))return!1;return!0}function Nh(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(s){const t=[];for(const[r,o]of Object.entries(s))Array.isArray(o)?o.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const o=this.W_;if(typeof t=="string")for(let y=0;y<16;y++)o[y]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let y=0;y<16;y++)o[y]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let y=16;y<80;y++){const x=o[y-3]^o[y-8]^o[y-14]^o[y-16];o[y]=(x<<1|x>>>31)&4294967295}let a=this.chain_[0],d=this.chain_[1],h=this.chain_[2],p=this.chain_[3],g=this.chain_[4],v,k;for(let y=0;y<80;y++){y<40?y<20?(v=p^d&(h^p),k=1518500249):(v=d^h^p,k=1859775393):y<60?(v=d&h|p&(d|h),k=2400959708):(v=d^h^p,k=3395469782);const x=(a<<5|a>>>27)+v+g+k+o[y]&4294967295;g=p,p=h,h=(d<<30|d>>>2)&4294967295,d=a,a=x}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+d&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const o=r-this.blockSize;let a=0;const d=this.buf_;let h=this.inbuf_;for(;a<r;){if(h===0)for(;a<=o;)this.compress_(t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<r;)if(d[h]=t.charCodeAt(a),++h,++a,h===this.blockSize){this.compress_(d),h=0;break}}else for(;a<r;)if(d[h]=t[a],++h,++a,h===this.blockSize){this.compress_(d),h=0;break}}this.inbuf_=h,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=r&255,r/=256;this.compress_(this.buf_);let o=0;for(let a=0;a<5;a++)for(let d=24;d>=0;d-=8)t[o]=this.chain_[a]>>d&255,++o;return t}}function $c(s,t){return`${s} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=function(s){const t=[];let r=0;for(let o=0;o<s.length;o++){let a=s.charCodeAt(o);if(a>=55296&&a<=56319){const d=a-55296;o++,K(o<s.length,"Surrogate pair missing trail surrogate.");const h=s.charCodeAt(o)-56320;a=65536+(d<<10)+h}a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):a<65536?(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},sl=function(s){let t=0;for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(s){return s&&s._delegate?s._delegate:s}class ui{constructor(t,r,o){this.name=t,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const o=new rl;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Bx(t))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const d=this.getOrInitializeService({instanceIdentifier:a});o.resolve(d)}catch{}}}}clearInstance(t=wr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=wr){return this.instances.has(t)}getOptions(t=wr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:r});for(const[d,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);o===p&&h.resolve(a)}return a}onInit(t,r){const o=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(o)??new Set;a.add(t),this.onInitCallbacks.set(o,a);const d=this.instances.get(o);return d&&t(d,o),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const o=this.onInitCallbacks.get(r);if(o)for(const a of o)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Ux(t),options:r}),this.instances.set(t,o),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=wr){return this.component?this.component.multipleInstances?t:wr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ux(s){return s===wr?void 0:s}function Bx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new $x(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const Hx={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},Vx=qe.INFO,Yx={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Qx=(s,t,...r)=>{if(t<s.logLevel)return;const o=new Date().toISOString(),a=Yx[t];if(a)console[a](`[${o}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ep{constructor(t){this.name=t,this._logLevel=Vx,this._logHandler=Qx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Hx[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...t),this._logHandler(this,qe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...t),this._logHandler(this,qe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...t),this._logHandler(this,qe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...t),this._logHandler(this,qe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...t),this._logHandler(this,qe.ERROR,...t)}}const Gx=(s,t)=>t.some(r=>s instanceof r);let kh,Ch;function Kx(){return kh||(kh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qx(){return Ch||(Ch=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jp=new WeakMap,yc=new WeakMap,Ip=new WeakMap,lc=new WeakMap,Uc=new WeakMap;function Xx(s){const t=new Promise((r,o)=>{const a=()=>{s.removeEventListener("success",d),s.removeEventListener("error",h)},d=()=>{r(Zn(s.result)),a()},h=()=>{o(s.error),a()};s.addEventListener("success",d),s.addEventListener("error",h)});return t.then(r=>{r instanceof IDBCursor&&jp.set(r,s)}).catch(()=>{}),Uc.set(t,s),t}function Jx(s){if(yc.has(s))return;const t=new Promise((r,o)=>{const a=()=>{s.removeEventListener("complete",d),s.removeEventListener("error",h),s.removeEventListener("abort",h)},d=()=>{r(),a()},h=()=>{o(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",d),s.addEventListener("error",h),s.addEventListener("abort",h)});yc.set(s,t)}let _c={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return yc.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Ip.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Zn(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Zx(s){_c=s(_c)}function ev(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const o=s.call(ac(this),t,...r);return Ip.set(o,t.sort?t.sort():[t]),Zn(o)}:qx().includes(s)?function(...t){return s.apply(ac(this),t),Zn(jp.get(this))}:function(...t){return Zn(s.apply(ac(this),t))}}function tv(s){return typeof s=="function"?ev(s):(s instanceof IDBTransaction&&Jx(s),Gx(s,Kx())?new Proxy(s,_c):s)}function Zn(s){if(s instanceof IDBRequest)return Xx(s);if(lc.has(s))return lc.get(s);const t=tv(s);return t!==s&&(lc.set(s,t),Uc.set(t,s)),t}const ac=s=>Uc.get(s);function nv(s,t,{blocked:r,upgrade:o,blocking:a,terminated:d}={}){const h=indexedDB.open(s,t),p=Zn(h);return o&&h.addEventListener("upgradeneeded",g=>{o(Zn(h.result),g.oldVersion,g.newVersion,Zn(h.transaction),g)}),r&&h.addEventListener("blocked",g=>r(g.oldVersion,g.newVersion,g)),p.then(g=>{d&&g.addEventListener("close",()=>d()),a&&g.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const rv=["get","getKey","getAll","getAllKeys","count"],sv=["put","add","delete","clear"],cc=new Map;function Sh(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(cc.get(t))return cc.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,a=sv.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(a||rv.includes(r)))return;const d=async function(h,...p){const g=this.transaction(h,a?"readwrite":"readonly");let v=g.store;return o&&(v=v.index(p.shift())),(await Promise.all([v[r](...p),a&&g.done]))[0]};return cc.set(t,d),d}Zx(s=>({...s,get:(t,r,o)=>Sh(t,r)||s.get(t,r,o),has:(t,r)=>!!Sh(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ov(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function ov(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wc="@firebase/app",Eh="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Ep("@firebase/app"),lv="@firebase/app-compat",av="@firebase/analytics-compat",cv="@firebase/analytics",uv="@firebase/app-check-compat",dv="@firebase/app-check",fv="@firebase/auth",hv="@firebase/auth-compat",pv="@firebase/database",mv="@firebase/data-connect",gv="@firebase/database-compat",xv="@firebase/functions",vv="@firebase/functions-compat",yv="@firebase/installations",_v="@firebase/installations-compat",wv="@firebase/messaging",bv="@firebase/messaging-compat",Nv="@firebase/performance",kv="@firebase/performance-compat",Cv="@firebase/remote-config",Sv="@firebase/remote-config-compat",Ev="@firebase/storage",jv="@firebase/storage-compat",Iv="@firebase/firestore",Tv="@firebase/ai",Rv="@firebase/firestore-compat",Pv="firebase",Lv="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="[DEFAULT]",Mv={[wc]:"fire-core",[lv]:"fire-core-compat",[cv]:"fire-analytics",[av]:"fire-analytics-compat",[dv]:"fire-app-check",[uv]:"fire-app-check-compat",[fv]:"fire-auth",[hv]:"fire-auth-compat",[pv]:"fire-rtdb",[mv]:"fire-data-connect",[gv]:"fire-rtdb-compat",[xv]:"fire-fn",[vv]:"fire-fn-compat",[yv]:"fire-iid",[_v]:"fire-iid-compat",[wv]:"fire-fcm",[bv]:"fire-fcm-compat",[Nv]:"fire-perf",[kv]:"fire-perf-compat",[Cv]:"fire-rc",[Sv]:"fire-rc-compat",[Ev]:"fire-gcs",[jv]:"fire-gcs-compat",[Iv]:"fire-fst",[Rv]:"fire-fst-compat",[Tv]:"fire-vertex","fire-js":"fire-js",[Pv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Map,Dv=new Map,Nc=new Map;function jh(s,t){try{s.container.addComponent(t)}catch(r){Tn.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function Wo(s){const t=s.name;if(Nc.has(t))return Tn.debug(`There were multiple attempts to register component ${t}.`),!1;Nc.set(t,s);for(const r of Bo.values())jh(r,s);for(const r of Dv.values())jh(r,s);return!0}function Ov(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function Av(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new Cp("app","Firebase",Fv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t,r,o){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=Lv;function Tp(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const o={name:bc,automaticDataCollectionEnabled:!0,...t},a=o.name;if(typeof a!="string"||!a)throw er.create("bad-app-name",{appName:String(a)});if(r||(r=Np()),!r)throw er.create("no-options");const d=Bo.get(a);if(d){if(Uo(r,d.options)&&Uo(o,d.config))return d;throw er.create("duplicate-app",{appName:a})}const h=new Wx(a);for(const g of Nc.values())h.addComponent(g);const p=new zv(r,o,h);return Bo.set(a,p),p}function Uv(s=bc){const t=Bo.get(s);if(!t&&s===bc&&Np())return Tp();if(!t)throw er.create("no-app",{appName:s});return t}function ns(s,t,r){let o=Mv[s]??s;r&&(o+=`-${r}`);const a=o.match(/\s|\//),d=t.match(/\s|\//);if(a||d){const h=[`Unable to register library "${o}" with version "${t}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&d&&h.push("and"),d&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tn.warn(h.join(" "));return}Wo(new ui(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firebase-heartbeat-database",Wv=1,di="firebase-heartbeat-store";let uc=null;function Rp(){return uc||(uc=nv(Bv,Wv,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(di)}catch(r){console.warn(r)}}}}).catch(s=>{throw er.create("idb-open",{originalErrorMessage:s.message})})),uc}async function Hv(s){try{const r=(await Rp()).transaction(di),o=await r.objectStore(di).get(Pp(s));return await r.done,o}catch(t){if(t instanceof vi)Tn.warn(t.message);else{const r=er.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Tn.warn(r.message)}}}async function Ih(s,t){try{const o=(await Rp()).transaction(di,"readwrite");await o.objectStore(di).put(t,Pp(s)),await o.done}catch(r){if(r instanceof vi)Tn.warn(r.message);else{const o=er.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Tn.warn(o.message)}}}function Pp(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=1024,Yv=30;class Qv{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Kv(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Th();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(h=>h.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:a}),this._heartbeatsCache.heartbeats.length>Yv){const h=qv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Tn.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Th(),{heartbeatsToSend:o,unsentEntries:a}=Gv(this._heartbeatsCache.heartbeats),d=zo(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(r){return Tn.warn(r),""}}}function Th(){return new Date().toISOString().substring(0,10)}function Gv(s,t=Vv){const r=[];let o=s.slice();for(const a of s){const d=r.find(h=>h.agent===a.agent);if(d){if(d.dates.push(a.date),Rh(r)>t){d.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Rh(r)>t){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class Kv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tx()?Rx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Hv(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return Ih(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return Ih(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Rh(s){return zo(JSON.stringify({version:2,heartbeats:s})).length}function qv(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let o=1;o<s.length;o++)s[o].date<r&&(r=s[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(s){Wo(new ui("platform-logger",t=>new iv(t),"PRIVATE")),Wo(new ui("heartbeat",t=>new Qv(t),"PRIVATE")),ns(wc,Eh,s),ns(wc,Eh,"esm2020"),ns("fire-js","")}Xv("");var Jv="firebase",Zv="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(Jv,Zv,"app");var Ph={};const Lh="@firebase/database",Mh="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp="";function ey(s){Lp=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),yt(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:ci(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return Ln(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const t=window[s];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ty(t)}}catch{}return new ny},Nr=Mp("localStorage"),ry=Mp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Ep("@firebase/database"),sy=(function(){let s=1;return function(){return s++}})(),Dp=function(s){const t=zx(s),r=new Fx;r.update(t);const o=r.digest();return Fc.encodeByteArray(o)},_i=function(...s){let t="";for(let r=0;r<s.length;r++){const o=s[r];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?t+=_i.apply(null,o):typeof o=="object"?t+=yt(o):t+=o,t+=" "}return t};let si=null,Dh=!0;const iy=function(s,t){K(!0,"Can't turn on custom loggers persistently."),rs.logLevel=qe.VERBOSE,si=rs.log.bind(rs)},jt=function(...s){if(Dh===!0&&(Dh=!1,si===null&&ry.get("logging_enabled")===!0&&iy()),si){const t=_i.apply(null,s);si(t)}},wi=function(s){return function(...t){jt(s,...t)}},kc=function(...s){const t="FIREBASE INTERNAL ERROR: "+_i(...s);rs.error(t)},Rn=function(...s){const t=`FIREBASE FATAL ERROR: ${_i(...s)}`;throw rs.error(t),new Error(t)},Ut=function(...s){const t="FIREBASE WARNING: "+_i(...s);rs.warn(t)},oy=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ut("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Op=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},ly=function(s){if(document.readyState==="complete")s();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},ls="[MIN_NAME]",Cr="[MAX_NAME]",ds=function(s,t){if(s===t)return 0;if(s===ls||t===Cr)return-1;if(t===ls||s===Cr)return 1;{const r=Oh(s),o=Oh(t);return r!==null?o!==null?r-o===0?s.length-t.length:r-o:-1:o!==null?1:s<t?-1:1}},ay=function(s,t){return s===t?0:s<t?-1:1},Xs=function(s,t){if(t&&s in t)return t[s];throw new Error("Missing required key ("+s+") in object: "+yt(t))},Bc=function(s){if(typeof s!="object"||s===null)return yt(s);const t=[];for(const o in s)t.push(o);t.sort();let r="{";for(let o=0;o<t.length;o++)o!==0&&(r+=","),r+=yt(t[o]),r+=":",r+=Bc(s[t[o]]);return r+="}",r},Ap=function(s,t){const r=s.length;if(r<=t)return[s];const o=[];for(let a=0;a<r;a+=t)a+t>r?o.push(s.substring(a,r)):o.push(s.substring(a,a+t));return o};function Bt(s,t){for(const r in s)s.hasOwnProperty(r)&&t(r,s[r])}const Fp=function(s){K(!Op(s),"Invalid JSON number");const t=11,r=52,o=(1<<t-1)-1;let a,d,h,p,g;s===0?(d=0,h=0,a=1/s===-1/0?1:0):(a=s<0,s=Math.abs(s),s>=Math.pow(2,1-o)?(p=Math.min(Math.floor(Math.log(s)/Math.LN2),o),d=p+o,h=Math.round(s*Math.pow(2,r-p)-Math.pow(2,r))):(d=0,h=Math.round(s/Math.pow(2,1-o-r))));const v=[];for(g=r;g;g-=1)v.push(h%2?1:0),h=Math.floor(h/2);for(g=t;g;g-=1)v.push(d%2?1:0),d=Math.floor(d/2);v.push(a?1:0),v.reverse();const k=v.join("");let y="";for(g=0;g<64;g+=8){let x=parseInt(k.substr(g,8),2).toString(16);x.length===1&&(x="0"+x),y=y+x}return y.toLowerCase()},cy=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},uy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dy(s,t){let r="Unknown Error";s==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?r="Client doesn't have permission to access the desired data.":s==="unavailable"&&(r="The service is unavailable");const o=new Error(s+" at "+t._path.toString()+": "+r);return o.code=s.toUpperCase(),o}const fy=new RegExp("^-?(0*)\\d{1,10}$"),hy=-2147483648,py=2147483647,Oh=function(s){if(fy.test(s)){const t=Number(s);if(t>=hy&&t<=py)return t}return null},fs=function(s){try{s()}catch(t){setTimeout(()=>{const r=t.stack||"";throw Ut("Exception was thrown by user callback.",r),t},Math.floor(0))}},my=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ii=function(s,t){const r=setTimeout(s,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,r){this.appCheckProvider=r,this.appName=t.name,Av(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((r,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)==null||r.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){Ut(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t,r,o){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(a=>this.auth_=a)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ut(t)}}class Ao{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Ao.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="5",zp="v",$p="s",Up="r",Bp="f",Wp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Hp="ls",Vp="p",Cc="ac",Yp="websocket",Qp="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t,r,o,a,d=!1,h="",p=!1,g=!1,v=null){this.secure=r,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=d,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=g,this.emulatorOptions=v,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Nr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Nr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function vy(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function Kp(s,t,r){K(typeof t=="string","typeof type must == string"),K(typeof r=="object","typeof params must == object");let o;if(t===Yp)o=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(t===Qp)o=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);vy(s)&&(r.ns=s.namespace);const a=[];return Bt(r,(d,h)=>{a.push(d+"="+h)}),o+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.counters_={}}incrementCounter(t,r=1){Ln(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return px(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc={},fc={};function Hc(s){const t=s.toString();return dc[t]||(dc[t]=new yy),dc[t]}function _y(s,t){const r=s.toString();return fc[r]||(fc[r]=t()),fc[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<o.length;++a)o[a]&&fs(()=>{this.onMessage_(o[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="start",by="close",Ny="pLPCommand",ky="pRTLPCB",qp="id",Xp="pw",Jp="ser",Cy="cb",Sy="seg",Ey="ts",jy="d",Iy="dframe",Zp=1870,em=30,Ty=Zp-em,Ry=25e3,Py=3e4;class ts{constructor(t,r,o,a,d,h,p){this.connId=t,this.repoInfo=r,this.applicationId=o,this.appCheckToken=a,this.authToken=d,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wi(t),this.stats_=Hc(r),this.urlFn=g=>(this.appCheckToken&&(g[Cc]=this.appCheckToken),Kp(r,Qp,g))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new wy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Py)),ly(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vc((...d)=>{const[h,p,g,v,k]=d;if(this.incrementIncomingBytes_(d),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===Ah)this.id=p,this.password=g;else if(h===by)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...d)=>{const[h,p]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(h,p)},()=>{this.onClosed_()},this.urlFn);const o={};o[Ah]="t",o[Jp]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[Cy]=this.scriptTagHolder.uniqueCallbackIdentifier),o[zp]=Wc,this.transportSessionId&&(o[$p]=this.transportSessionId),this.lastSessionId&&(o[Hp]=this.lastSessionId),this.applicationId&&(o[Vp]=this.applicationId),this.appCheckToken&&(o[Cc]=this.appCheckToken),typeof location<"u"&&location.hostname&&Wp.test(location.hostname)&&(o[Up]=Bp);const a=this.urlFn(o);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ts.forceAllow_=!0}static forceDisallow(){ts.forceDisallow_=!0}static isAvailable(){return ts.forceAllow_?!0:!ts.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cy()&&!uy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=yt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=_p(r),a=Ap(o,Ty);for(let d=0;d<a.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[d]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const o={};o[Iy]="t",o[qp]=t,o[Xp]=r,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=yt(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class Vc{constructor(t,r,o,a){this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sy(),window[Ny+this.uniqueCallbackIdentifier]=t,window[ky+this.uniqueCallbackIdentifier]=r,this.myIFrame=Vc.createIFrame_();let d="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(d='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(p){jt("frame writing exception"),p.stack&&jt(p.stack),jt(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||jt("No IE domain setting required")}catch{const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[qp]=this.myID,t[Xp]=this.myPW,t[Jp]=this.currentSerial;let r=this.urlFn(t),o="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+em+o.length<=Zp;){const h=this.pendingSegs.shift();o=o+"&"+Sy+a+"="+h.seg+"&"+Ey+a+"="+h.ts+"&"+jy+a+"="+h.d,a++}return r=r+o,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,o){this.pendingSegs.push({seg:t,ts:r,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const o=()=>{this.outstandingRequests.delete(r),this.newRequest_()},a=setTimeout(o,Math.floor(Ry)),d=()=>{clearTimeout(a),o()};this.addTag(t,d)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const a=o.readyState;(!a||a==="loaded"||a==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=()=>{jt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=16384,My=45e3;let Ho=null;typeof MozWebSocket<"u"?Ho=MozWebSocket:typeof WebSocket<"u"&&(Ho=WebSocket);class cn{constructor(t,r,o,a,d,h,p){this.connId=t,this.applicationId=o,this.appCheckToken=a,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wi(this.connId),this.stats_=Hc(r),this.connURL=cn.connectionURL_(r,h,p,a,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,a,d){const h={};return h[zp]=Wc,typeof location<"u"&&location.hostname&&Wp.test(location.hostname)&&(h[Up]=Bp),r&&(h[$p]=r),o&&(h[Hp]=o),a&&(h[Cc]=a),d&&(h[Vp]=d),Kp(t,Yp,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nr.set("previous_websocket_failure",!0);try{let o;Ix(),this.mySock=new Ho(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){cn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(r);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&Ho!==null&&!cn.forceDisallow_}static previouslyFailed(){return Nr.isInMemoryStorage||Nr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Nr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=ci(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(K(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);o!==null&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=yt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Ap(r,Ly);o.length>1&&this.sendString_(String(o.length));for(let a=0;a<o.length;a++)this.sendString_(o[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(My))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}cn.responsesRequiredToBeHealthy=2;cn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{static get ALL_TRANSPORTS(){return[ts,cn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=cn&&cn.isAvailable();let o=r&&!cn.previouslyFailed();if(t.webSocketOnly&&(r||Ut("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[cn];else{const a=this.transports_=[];for(const d of fi.ALL_TRANSPORTS)d&&d.isAvailable()&&a.push(d);fi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=6e4,Oy=5e3,Ay=10*1024,Fy=100*1024,hc="t",Fh="d",zy="s",zh="r",$y="e",$h="o",Uh="a",Bh="n",Wh="p",Uy="h";class By{constructor(t,r,o,a,d,h,p,g,v,k){this.id=t,this.repoInfo_=r,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=d,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=k,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wi("c:"+this.id+":"),this.transportManager_=new fi(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,o)},Math.floor(0));const a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=ii(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Fy?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ay?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(hc in t){const r=t[hc];r===Uh?this.upgradeIfSecondaryHealthy_():r===zh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===$h&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=Xs("t",t),o=Xs("d",t);if(r==="c")this.onSecondaryControl_(o);else if(r==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Wh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Uh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Bh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=Xs("t",t),o=Xs("d",t);r==="c"?this.onControl_(o):r==="d"&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=Xs(hc,t);if(Fh in t){const o=t[Fh];if(r===Uy){const a={...o};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(r===Bh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===zy?this.onConnectionShutdown_(o):r===zh?this.onReset_(o):r===$y?kc("Server Error: "+o):r===$h?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kc("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,o=t.v,a=t.h;this.sessionId=t.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),Wc!==o&&Ut("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),ii(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Dy))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ii(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Oy))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Wh,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{put(t,r,o,a){}merge(t,r,o,a){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,o){}onDisconnectMerge(t,r,o){}onDisconnectCancel(t,r){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t){this.allowedEvents_=t,this.listeners_={},K(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let a=0;a<o.length;a++)o[a].callback.apply(o[a].context,r)}}on(t,r,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:o});const a=this.getInitialEvent(t);a&&r.apply(o,a)}off(t,r,o){this.validateEventType_(t);const a=this.listeners_[t]||[];for(let d=0;d<a.length;d++)if(a[d].callback===r&&(!o||o===a[d].context)){a.splice(d,1);return}}validateEventType_(t){K(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends nm{static getInstance(){return new Vo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!kp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return K(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=32,Vh=768;class Qe{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let o=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}}function Be(){return new Qe("")}function Re(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function nr(s){return s.pieces_.length-s.pieceNum_}function Xe(s){let t=s.pieceNum_;return t<s.pieces_.length&&t++,new Qe(s.pieces_,t)}function rm(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function Wy(s){let t="";for(let r=s.pieceNum_;r<s.pieces_.length;r++)s.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(s.pieces_[r])));return t||"/"}function sm(s,t=0){return s.pieces_.slice(s.pieceNum_+t)}function im(s){if(s.pieceNum_>=s.pieces_.length)return null;const t=[];for(let r=s.pieceNum_;r<s.pieces_.length-1;r++)t.push(s.pieces_[r]);return new Qe(t,0)}function ht(s,t){const r=[];for(let o=s.pieceNum_;o<s.pieces_.length;o++)r.push(s.pieces_[o]);if(t instanceof Qe)for(let o=t.pieceNum_;o<t.pieces_.length;o++)r.push(t.pieces_[o]);else{const o=t.split("/");for(let a=0;a<o.length;a++)o[a].length>0&&r.push(o[a])}return new Qe(r,0)}function Me(s){return s.pieceNum_>=s.pieces_.length}function zt(s,t){const r=Re(s),o=Re(t);if(r===null)return t;if(r===o)return zt(Xe(s),Xe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+s+")")}function Yc(s,t){if(nr(s)!==nr(t))return!1;for(let r=s.pieceNum_,o=t.pieceNum_;r<=s.pieces_.length;r++,o++)if(s.pieces_[r]!==t.pieces_[o])return!1;return!0}function un(s,t){let r=s.pieceNum_,o=t.pieceNum_;if(nr(s)>nr(t))return!1;for(;r<s.pieces_.length;){if(s.pieces_[r]!==t.pieces_[o])return!1;++r,++o}return!0}class Hy{constructor(t,r){this.errorPrefix_=r,this.parts_=sm(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=sl(this.parts_[o]);om(this)}}function Vy(s,t){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=sl(t),om(s)}function Yy(s){const t=s.parts_.pop();s.byteLength_-=sl(t),s.parts_.length>0&&(s.byteLength_-=1)}function om(s){if(s.byteLength_>Vh)throw new Error(s.errorPrefix_+"has a key path longer than "+Vh+" bytes ("+s.byteLength_+").");if(s.parts_.length>Hh)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hh+") or object contains a cycle "+br(s))}function br(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends nm{static getInstance(){return new Qc}constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(t){return K(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=1e3,Qy=300*1e3,Yh=30*1e3,Gy=1.3,Ky=3e4,qy="server_kill",Qh=3;class In extends tm{constructor(t,r,o,a,d,h,p,g){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=a,this.onServerInfoUpdate_=d,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=g,this.id=In.nextPersistentConnectionId_++,this.log_=wi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Js,this.maxReconnectDelay_=Qy,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qc.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Vo.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const a=++this.requestNumber_,d={r:a,a:t,b:r};this.log_(yt(d)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[a]=o)}get(t){this.initConnection_();const r=new rl,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;h.s==="ok"?r.resolve(p):r.reject(p)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(d),r.promise}listen(t,r,o,a){this.initConnection_();const d=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+d),this.listens.has(h)||this.listens.set(h,new Map),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(h).has(d),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:o};this.listens.get(h).set(d,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+o+" for "+a);const d={p:o},h="q";t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest(h,d,p=>{const g=p.d,v=p.s;In.warnOnListenWarnings_(g,r),(this.listens.get(o)&&this.listens.get(o).get(a))===t&&(this.log_("listen response",p),v!=="ok"&&this.removeListen_(o,a),t.onComplete&&t.onComplete(v,g))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Ln(t,"w")){const o=os(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Ut(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Ox(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Yh)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=Dx(t)?"auth":"gauth",o={cred:t};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(r,o,a=>{const d=a.s,h=a.d||"error";this.authToken_===t&&(d==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+a),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,a)&&this.connected_&&this.sendUnlisten_(o,a,t._queryObject,r)}sendUnlisten_(t,r,o,a){this.log_("Unlisten on "+t+" for "+r);const d={p:t},h="n";a&&(d.q=o,d.t=a),this.sendRequest(h,d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,a){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,o,a){this.putInternal("p",t,r,o,a)}merge(t,r,o,a){this.putInternal("m",t,r,o,a)}putInternal(t,r,o,a,d){this.initConnection_();const h={p:r,d:o};d!==void 0&&(h.h=d),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{if(o.s!=="ok"){const d=o.d;this.log_("reportStats","Error sending stats: "+d)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+yt(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):kc("Unrecognized action received from server: "+yt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Js,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Js,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ky&&(this.reconnectDelay_=Js),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Gy)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+In.nextConnectionId_++,d=this.lastSessionId;let h=!1,p=null;const g=function(){p?p.close():(h=!0,o())},v=function(y){K(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(y)};this.realtime_={close:g,sendRequest:v};const k=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,x]=await Promise.all([this.authTokenProvider_.getToken(k),this.appCheckTokenProvider_.getToken(k)]);h?jt("getToken() completed but was canceled"):(jt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=x&&x.token,p=new By(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,o,I=>{Ut(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(qy)},d))}catch(y){this.log_("Failed to get token: "+y),h||(this.repoInfo_.nodeAdmin&&Ut(y),g())}}}interrupt(t){jt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){jt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],bh(this.interruptReasons_)&&(this.reconnectDelay_=Js,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;r?o=r.map(d=>Bc(d)).join("$"):o="default";const a=this.removeListen_(t,o);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const o=new Qe(t).toString();let a;if(this.listens.has(o)){const d=this.listens.get(o);a=d.get(r),d.delete(r),d.size===0&&this.listens.delete(o)}else a=void 0;return a}onAuthRevoked_(t,r){jt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Qh&&(this.reconnectDelay_=Yh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){jt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Qh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+Lp.replace(/\./g,"-")]=1,kp()?t["framework.cordova"]=1:jx()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Vo.getInstance().currentlyOnline();return bh(this.interruptReasons_)&&t}}In.nextPersistentConnectionId_=0;In.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new Pe(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const o=new Pe(ls,t),a=new Pe(ls,r);return this.compare(o,a)!==0}minPost(){return Pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do;class lm extends il{static get __EMPTY_NODE(){return Do}static set __EMPTY_NODE(t){Do=t}compare(t,r){return ds(t.name,r.name)}isDefinedOn(t){throw us("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return Pe.MIN}maxPost(){return new Pe(Cr,Do)}makePost(t,r){return K(typeof t=="string","KeyIndex indexValue must always be a string."),new Pe(t,Do)}toString(){return".key"}}const ss=new lm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,r,o,a,d=null){this.isReverse_=a,this.resultGenerator_=d,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=r?o(t.key,r):1,a&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class vt{constructor(t,r,o,a,d){this.key=t,this.value=r,this.color=o??vt.RED,this.left=a??$t.EMPTY_NODE,this.right=d??$t.EMPTY_NODE}copy(t,r,o,a,d){return new vt(t??this.key,r??this.value,o??this.color,a??this.left,d??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let a=this;const d=o(t,a.key);return d<0?a=a.copy(null,null,null,a.left.insert(t,r,o),null):d===0?a=a.copy(null,r,null,null,null):a=a.copy(null,null,null,null,a.right.insert(t,r,o)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return $t.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,a;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),r(t,o.key)===0){if(o.right.isEmpty())return $t.EMPTY_NODE;a=o.right.min_(),o=o.copy(a.key,a.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}vt.RED=!0;vt.BLACK=!1;class Xy{copy(t,r,o,a,d){return this}insert(t,r,o){return new vt(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class $t{constructor(t,r=$t.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new $t(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,vt.BLACK,null,null))}remove(t){return new $t(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,vt.BLACK,null,null))}get(t){let r,o=this.root_;for(;!o.isEmpty();){if(r=this.comparator_(t,o.key),r===0)return o.value;r<0?o=o.left:r>0&&(o=o.right)}return null}getPredecessorKey(t){let r,o=this.root_,a=null;for(;!o.isEmpty();)if(r=this.comparator_(t,o.key),r===0){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else r<0?o=o.left:r>0&&(a=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Oo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new Oo(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new Oo(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new Oo(this.root_,null,this.comparator_,!0,t)}}$t.EMPTY_NODE=new Xy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(s,t){return ds(s.name,t.name)}function Gc(s,t){return ds(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc;function Zy(s){Sc=s}const am=function(s){return typeof s=="number"?"number:"+Fp(s):"string:"+s},cm=function(s){if(s.isLeafNode()){const t=s.val();K(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ln(t,".sv"),"Priority must be a string or number.")}else K(s===Sc||s.isEmpty(),"priority of unexpected type.");K(s===Sc||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh;class xt{static set __childrenNodeConstructor(t){Gh=t}static get __childrenNodeConstructor(){return Gh}constructor(t,r=xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),cm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new xt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Me(t)?this:Re(t)===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Re(t);return o===null?r:r.isEmpty()&&o!==".priority"?this:(K(o!==".priority"||nr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+am(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=Fp(this.value_):t+=this.value_,this.lazyHash_=Dp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===xt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof xt.__childrenNodeConstructor?-1:(K(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,a=xt.VALUE_TYPE_ORDER.indexOf(r),d=xt.VALUE_TYPE_ORDER.indexOf(o);return K(a>=0,"Unknown leaf type: "+r),K(d>=0,"Unknown leaf type: "+o),a===d?o==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um,dm;function e_(s){um=s}function t_(s){dm=s}class n_ extends il{compare(t,r){const o=t.node.getPriority(),a=r.node.getPriority(),d=o.compareTo(a);return d===0?ds(t.name,r.name):d}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return Pe.MIN}maxPost(){return new Pe(Cr,new xt("[PRIORITY-POST]",dm))}makePost(t,r){const o=um(t);return new Pe(r,new xt("[PRIORITY-POST]",o))}toString(){return".priority"}}const lt=new n_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=Math.log(2);class s_{constructor(t){const r=d=>parseInt(Math.log(d)/r_,10),o=d=>parseInt(Array(d+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const a=o(this.count);this.bits_=t+1&a}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Yo=function(s,t,r,o){s.sort(t);const a=function(g,v){const k=v-g;let y,x;if(k===0)return null;if(k===1)return y=s[g],x=r?r(y):y,new vt(x,y.node,vt.BLACK,null,null);{const I=parseInt(k/2,10)+g,D=a(g,I),H=a(I+1,v);return y=s[I],x=r?r(y):y,new vt(x,y.node,vt.BLACK,D,H)}},d=function(g){let v=null,k=null,y=s.length;const x=function(D,H){const Z=y-D,le=y;y-=D;const re=a(Z+1,le),je=s[Z],ue=r?r(je):je;I(new vt(ue,je.node,H,null,re))},I=function(D){v?(v.left=D,v=D):(k=D,v=D)};for(let D=0;D<g.count;++D){const H=g.nextBitIsOne(),Z=Math.pow(2,g.count-(D+1));H?x(Z,vt.BLACK):(x(Z,vt.BLACK),x(Z,vt.RED))}return k},h=new s_(s.length),p=d(h);return new $t(o||t,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc;const es={};class jn{static get Default(){return K(es&&lt,"ChildrenNode.ts has not been loaded"),pc=pc||new jn({".priority":es},{".priority":lt}),pc}constructor(t,r){this.indexes_=t,this.indexSet_=r}get(t){const r=os(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof $t?r:null}hasIndex(t){return Ln(this.indexSet_,t.toString())}addIndex(t,r){K(t!==ss,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let a=!1;const d=r.getIterator(Pe.Wrap);let h=d.getNext();for(;h;)a=a||t.isDefinedOn(h.node),o.push(h),h=d.getNext();let p;a?p=Yo(o,t.getCompare()):p=es;const g=t.toString(),v={...this.indexSet_};v[g]=t;const k={...this.indexes_};return k[g]=p,new jn(k,v)}addToIndexes(t,r){const o=$o(this.indexes_,(a,d)=>{const h=os(this.indexSet_,d);if(K(h,"Missing index implementation for "+d),a===es)if(h.isDefinedOn(t.node)){const p=[],g=r.getIterator(Pe.Wrap);let v=g.getNext();for(;v;)v.name!==t.name&&p.push(v),v=g.getNext();return p.push(t),Yo(p,h.getCompare())}else return es;else{const p=r.get(t.name);let g=a;return p&&(g=g.remove(new Pe(t.name,p))),g.insert(t,t.node)}});return new jn(o,this.indexSet_)}removeFromIndexes(t,r){const o=$o(this.indexes_,a=>{if(a===es)return a;{const d=r.get(t.name);return d?a.remove(new Pe(t.name,d)):a}});return new jn(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs;class _e{static get EMPTY_NODE(){return Zs||(Zs=new _e(new $t(Gc),null,jn.Default))}constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&cm(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zs}updatePriority(t){return this.children_.isEmpty()?this:new _e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?Zs:r}}getChild(t){const r=Re(t);return r===null?this:this.getImmediateChild(r).getChild(Xe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(K(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const o=new Pe(t,r);let a,d;r.isEmpty()?(a=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(a=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const h=a.isEmpty()?Zs:this.priorityNode_;return new _e(a,h,d)}}updateChild(t,r){const o=Re(t);if(o===null)return r;{K(Re(t)!==".priority"||nr(t)===1,".priority must be the last token in a path");const a=this.getImmediateChild(o).updateChild(Xe(t),r);return this.updateImmediateChild(o,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,a=0,d=!0;if(this.forEachChild(lt,(h,p)=>{r[h]=p.val(t),o++,d&&_e.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):d=!1}),!t&&d&&a<2*o){const h=[];for(const p in r)h[p]=r[p];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+am(this.getPriority().val())+":"),this.forEachChild(lt,(r,o)=>{const a=o.hash();a!==""&&(t+=":"+r+":"+a)}),this.lazyHash_=t===""?"":Dp(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const a=this.resolveIndex_(o);if(a){const d=a.getPredecessorKey(new Pe(t,r));return d?d.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Pe(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Pe(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Pe.Wrap);let d=a.peek();for(;d!=null&&r.compare(d,t)<0;)a.getNext(),d=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Pe.Wrap);let d=a.peek();for(;d!=null&&r.compare(d,t)>0;)a.getNext(),d=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bi?-1:0}withIndex(t){if(t===ss||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new _e(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ss||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const o=this.getIterator(lt),a=r.getIterator(lt);let d=o.getNext(),h=a.getNext();for(;d&&h;){if(d.name!==h.name||!d.node.equals(h.node))return!1;d=o.getNext(),h=a.getNext()}return d===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===ss?null:this.indexMap_.get(t.toString())}}_e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class i_ extends _e{constructor(){super(new $t(Gc),_e.EMPTY_NODE,jn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return _e.EMPTY_NODE}isEmpty(){return!1}}const bi=new i_;Object.defineProperties(Pe,{MIN:{value:new Pe(ls,_e.EMPTY_NODE)},MAX:{value:new Pe(Cr,bi)}});lm.__EMPTY_NODE=_e.EMPTY_NODE;xt.__childrenNodeConstructor=_e;Zy(bi);t_(bi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=!0;function bt(s,t=null){if(s===null)return _e.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(t=s[".priority"]),K(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const r=s;return new xt(r,bt(t))}if(!(s instanceof Array)&&o_){const r=[];let o=!1;if(Bt(s,(h,p)=>{if(h.substring(0,1)!=="."){const g=bt(p);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),r.push(new Pe(h,g)))}}),r.length===0)return _e.EMPTY_NODE;const d=Yo(r,Jy,h=>h.name,Gc);if(o){const h=Yo(r,lt.getCompare());return new _e(d,bt(t),new jn({".priority":h},{".priority":lt}))}else return new _e(d,bt(t),jn.Default)}else{let r=_e.EMPTY_NODE;return Bt(s,(o,a)=>{if(Ln(s,o)&&o.substring(0,1)!=="."){const d=bt(a);(d.isLeafNode()||!d.isEmpty())&&(r=r.updateImmediateChild(o,d))}}),r.updatePriority(bt(t))}}e_(bt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends il{constructor(t){super(),this.indexPath_=t,K(!Me(t)&&Re(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const o=this.extractChild(t.node),a=this.extractChild(r.node),d=o.compareTo(a);return d===0?ds(t.name,r.name):d}makePost(t,r){const o=bt(t),a=_e.EMPTY_NODE.updateChild(this.indexPath_,o);return new Pe(r,a)}maxPost(){const t=_e.EMPTY_NODE.updateChild(this.indexPath_,bi);return new Pe(Cr,t)}toString(){return sm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends il{compare(t,r){const o=t.node.compareTo(r.node);return o===0?ds(t.name,r.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return Pe.MIN}maxPost(){return Pe.MAX}makePost(t,r){const o=bt(t);return new Pe(r,o)}toString(){return".value"}}const c_=new a_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(s){return{type:"value",snapshotNode:s}}function as(s,t){return{type:"child_added",snapshotNode:t,childName:s}}function hi(s,t){return{type:"child_removed",snapshotNode:t,childName:s}}function pi(s,t,r){return{type:"child_changed",snapshotNode:t,childName:s,oldSnap:r}}function u_(s,t){return{type:"child_moved",snapshotNode:t,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this.index_=t}updateChild(t,r,o,a,d,h){K(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(r);return p.getChild(a).equals(o.getChild(a))&&p.isEmpty()===o.isEmpty()||(h!=null&&(o.isEmpty()?t.hasChild(r)?h.trackChildChange(hi(r,p)):K(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?h.trackChildChange(as(r,o)):h.trackChildChange(pi(r,o,p))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(r,o).withIndex(this.index_)}updateFullNode(t,r,o){return o!=null&&(t.isLeafNode()||t.forEachChild(lt,(a,d)=>{r.hasChild(a)||o.trackChildChange(hi(a,d))}),r.isLeafNode()||r.forEachChild(lt,(a,d)=>{if(t.hasChild(a)){const h=t.getImmediateChild(a);h.equals(d)||o.trackChildChange(pi(a,d,h))}else o.trackChildChange(as(a,d))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?_e.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this.indexedFilter_=new Kc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=mi.getStartPost_(t),this.endPost_=mi.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,o=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&o}updateChild(t,r,o,a,d,h){return this.matches(new Pe(r,o))||(o=_e.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,o,a,d,h)}updateFullNode(t,r,o){r.isLeafNode()&&(r=_e.EMPTY_NODE);let a=r.withIndex(this.index_);a=a.updatePriority(_e.EMPTY_NODE);const d=this;return r.forEachChild(lt,(h,p)=>{d.matches(new Pe(h,p))||(a=a.updateImmediateChild(h,_e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=r=>{const o=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new mi(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,o,a,d,h){return this.rangedFilter_.matches(new Pe(r,o))||(o=_e.EMPTY_NODE),t.getImmediateChild(r).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,o,a,d,h):this.fullLimitUpdateChild_(t,r,o,d,h)}updateFullNode(t,r,o){let a;if(r.isLeafNode()||r.isEmpty())a=_e.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){a=_e.EMPTY_NODE.withIndex(this.index_);let d;this.reverse_?d=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;d.hasNext()&&h<this.limit_;){const p=d.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))a=a.updateImmediateChild(p.name,p.node),h++;else break;else continue}}else{a=r.withIndex(this.index_),a=a.updatePriority(_e.EMPTY_NODE);let d;this.reverse_?d=a.getReverseIterator(this.index_):d=a.getIterator(this.index_);let h=0;for(;d.hasNext();){const p=d.getNext();h<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?h++:a=a.updateImmediateChild(p.name,_e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,o,a,d){let h;if(this.reverse_){const y=this.index_.getCompare();h=(x,I)=>y(I,x)}else h=this.index_.getCompare();const p=t;K(p.numChildren()===this.limit_,"");const g=new Pe(r,o),v=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),k=this.rangedFilter_.matches(g);if(p.hasChild(r)){const y=p.getImmediateChild(r);let x=a.getChildAfterChild(this.index_,v,this.reverse_);for(;x!=null&&(x.name===r||p.hasChild(x.name));)x=a.getChildAfterChild(this.index_,x,this.reverse_);const I=x==null?1:h(x,g);if(k&&!o.isEmpty()&&I>=0)return d!=null&&d.trackChildChange(pi(r,o,y)),p.updateImmediateChild(r,o);{d!=null&&d.trackChildChange(hi(r,y));const H=p.updateImmediateChild(r,_e.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(d!=null&&d.trackChildChange(as(x.name,x.node)),H.updateImmediateChild(x.name,x.node)):H}}else return o.isEmpty()?t:k&&h(v,g)>=0?(d!=null&&(d.trackChildChange(hi(v.name,v.node)),d.trackChildChange(as(r,o))),p.updateImmediateChild(r,o).updateImmediateChild(v.name,_e.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ls}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===lt}copy(){const t=new qc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function f_(s){return s.loadsAllData()?new Kc(s.getIndex()):s.hasLimit()?new d_(s):new mi(s)}function Kh(s){const t={};if(s.isDefault())return t;let r;if(s.index_===lt?r="$priority":s.index_===c_?r="$value":s.index_===ss?r="$key":(K(s.index_ instanceof l_,"Unrecognized index type!"),r=s.index_.toString()),t.orderBy=yt(r),s.startSet_){const o=s.startAfterSet_?"startAfter":"startAt";t[o]=yt(s.indexStartValue_),s.startNameSet_&&(t[o]+=","+yt(s.indexStartName_))}if(s.endSet_){const o=s.endBeforeSet_?"endBefore":"endAt";t[o]=yt(s.indexEndValue_),s.endNameSet_&&(t[o]+=","+yt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?t.limitToFirst=s.limit_:t.limitToLast=s.limit_),t}function qh(s){const t={};if(s.startSet_&&(t.sp=s.indexStartValue_,s.startNameSet_&&(t.sn=s.indexStartName_),t.sin=!s.startAfterSet_),s.endSet_&&(t.ep=s.indexEndValue_,s.endNameSet_&&(t.en=s.indexEndName_),t.ein=!s.endBeforeSet_),s.limitSet_){t.l=s.limit_;let r=s.viewFrom_;r===""&&(s.isViewFromLeft()?r="l":r="r"),t.vf=r}return s.index_!==lt&&(t.i=s.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends tm{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(K(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,r,o,a){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.log_=wi("p:rest:"),this.listens_={}}listen(t,r,o,a){const d=t._path.toString();this.log_("Listen called for "+d+" "+t._queryIdentifier);const h=Qo.getListenId_(t,o),p={};this.listens_[h]=p;const g=Kh(t._queryParams);this.restRequest_(d+".json",g,(v,k)=>{let y=k;if(v===404&&(y=null,v=null),v===null&&this.onDataUpdate_(d,y,!1,o),os(this.listens_,h)===p){let x;v?v===401?x="permission_denied":x="rest_error:"+v:x="ok",a(x,null)}})}unlisten(t,r){const o=Qo.getListenId_(t,r);delete this.listens_[o]}get(t){const r=Kh(t._queryParams),o=t._path.toString(),a=new rl;return this.restRequest_(o+".json",r,(d,h)=>{let p=h;d===404&&(p=null,d=null),d===null?(this.onDataUpdate_(o,p,!1,null),a.resolve(p)):a.reject(new Error(p))}),a.promise}refreshAuthToken(t){}restRequest_(t,r={},o){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,d])=>{a&&a.accessToken&&(r.auth=a.accessToken),d&&d.token&&(r.ac=d.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ax(r);this.log_("Sending REST request for "+h);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(o&&p.readyState===4){this.log_("REST Response for "+h+" received. status:",p.status,"response:",p.responseText);let g=null;if(p.status>=200&&p.status<300){try{g=ci(p.responseText)}catch{Ut("Failed to parse JSON response for "+h+": "+p.responseText)}o(null,g)}else p.status!==401&&p.status!==404&&Ut("Got unsuccessful REST response for "+h+" Status: "+p.status),o(p.status);o=null}},p.open("GET",h,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(){return{value:null,children:new Map}}function hm(s,t,r){if(Me(t))s.value=r,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(t,r);else{const o=Re(t);s.children.has(o)||s.children.set(o,Go());const a=s.children.get(o);t=Xe(t),hm(a,t,r)}}function Ec(s,t,r){s.value!==null?r(t,s.value):p_(s,(o,a)=>{const d=new Qe(t.toString()+"/"+o);Ec(a,d,r)})}function p_(s,t){s.children.forEach((r,o)=>{t(o,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r={...t};return this.last_&&Bt(this.last_,(o,a)=>{r[o]=r[o]-a}),this.last_=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=10*1e3,g_=30*1e3,x_=300*1e3;class v_{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new m_(t);const o=Xh+(g_-Xh)*Math.random();ii(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),r={};let o=!1;Bt(t,(a,d)=>{d>0&&Ln(this.statsToReport_,a)&&(r[a]=d,o=!0)}),o&&this.server_.reportStats(r),ii(this.reportStats_.bind(this),Math.floor(Math.random()*2*x_))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(dn||(dn={}));function pm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Xc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jc(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,r,o){this.path=t,this.affectedTree=r,this.revert=o,this.type=dn.ACK_USER_WRITE,this.source=pm()}operationForChild(t){if(Me(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Qe(t));return new Ko(Be(),r,this.revert)}}else return K(Re(this.path)===t,"operationForChild called for unrelated child."),new Ko(Xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t,r){this.source=t,this.path=r,this.type=dn.LISTEN_COMPLETE}operationForChild(t){return Me(this.path)?new gi(this.source,Be()):new gi(this.source,Xe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,r,o){this.source=t,this.path=r,this.snap=o,this.type=dn.OVERWRITE}operationForChild(t){return Me(this.path)?new Sr(this.source,Be(),this.snap.getImmediateChild(t)):new Sr(this.source,Xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,r,o){this.source=t,this.path=r,this.children=o,this.type=dn.MERGE}operationForChild(t){if(Me(this.path)){const r=this.children.subtree(new Qe(t));return r.isEmpty()?null:r.value?new Sr(this.source,Be(),r.value):new xi(this.source,Be(),r)}else return K(Re(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new xi(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,r,o){this.node_=t,this.fullyInitialized_=r,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Me(t))return this.isFullyInitialized()&&!this.filtered_;const r=Re(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function __(s,t,r,o){const a=[],d=[];return t.forEach(h=>{h.type==="child_changed"&&s.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&d.push(u_(h.childName,h.snapshotNode))}),ei(s,a,"child_removed",t,o,r),ei(s,a,"child_added",t,o,r),ei(s,a,"child_moved",d,o,r),ei(s,a,"child_changed",t,o,r),ei(s,a,"value",t,o,r),a}function ei(s,t,r,o,a,d){const h=o.filter(p=>p.type===r);h.sort((p,g)=>b_(s,p,g)),h.forEach(p=>{const g=w_(s,p,d);a.forEach(v=>{v.respondsTo(p.type)&&t.push(v.createEvent(g,s.query_))})})}function w_(s,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,s.index_)),t}function b_(s,t,r){if(t.childName==null||r.childName==null)throw us("Should only compare child_ events.");const o=new Pe(t.childName,t.snapshotNode),a=new Pe(r.childName,r.snapshotNode);return s.index_.compare(o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(s,t){return{eventCache:s,serverCache:t}}function oi(s,t,r,o){return ol(new Er(t,r,o),s.serverCache)}function mm(s,t,r,o){return ol(s.eventCache,new Er(t,r,o))}function jc(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function jr(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc;const N_=()=>(mc||(mc=new $t(ay)),mc);class et{static fromObject(t){let r=new et(null);return Bt(t,(o,a)=>{r=r.set(new Qe(o),a)}),r}constructor(t,r=N_()){this.value=t,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:Be(),value:this.value};if(Me(t))return null;{const o=Re(t),a=this.children.get(o);if(a!==null){const d=a.findRootMostMatchingPathAndValue(Xe(t),r);return d!=null?{path:ht(new Qe(o),d.path),value:d.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Me(t))return this;{const r=Re(t),o=this.children.get(r);return o!==null?o.subtree(Xe(t)):new et(null)}}set(t,r){if(Me(t))return new et(r,this.children);{const o=Re(t),d=(this.children.get(o)||new et(null)).set(Xe(t),r),h=this.children.insert(o,d);return new et(this.value,h)}}remove(t){if(Me(t))return this.children.isEmpty()?new et(null):new et(null,this.children);{const r=Re(t),o=this.children.get(r);if(o){const a=o.remove(Xe(t));let d;return a.isEmpty()?d=this.children.remove(r):d=this.children.insert(r,a),this.value===null&&d.isEmpty()?new et(null):new et(this.value,d)}else return this}}get(t){if(Me(t))return this.value;{const r=Re(t),o=this.children.get(r);return o?o.get(Xe(t)):null}}setTree(t,r){if(Me(t))return r;{const o=Re(t),d=(this.children.get(o)||new et(null)).setTree(Xe(t),r);let h;return d.isEmpty()?h=this.children.remove(o):h=this.children.insert(o,d),new et(this.value,h)}}fold(t){return this.fold_(Be(),t)}fold_(t,r){const o={};return this.children.inorderTraversal((a,d)=>{o[a]=d.fold_(ht(t,a),r)}),r(t,this.value,o)}findOnPath(t,r){return this.findOnPath_(t,Be(),r)}findOnPath_(t,r,o){const a=this.value?o(r,this.value):!1;if(a)return a;if(Me(t))return null;{const d=Re(t),h=this.children.get(d);return h?h.findOnPath_(Xe(t),ht(r,d),o):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,Be(),r)}foreachOnPath_(t,r,o){if(Me(t))return this;{this.value&&o(r,this.value);const a=Re(t),d=this.children.get(a);return d?d.foreachOnPath_(Xe(t),ht(r,a),o):new et(null)}}foreach(t){this.foreach_(Be(),t)}foreach_(t,r){this.children.inorderTraversal((o,a)=>{a.foreach_(ht(t,o),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,o)=>{o.value&&t(r,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.writeTree_=t}static empty(){return new fn(new et(null))}}function li(s,t,r){if(Me(t))return new fn(new et(r));{const o=s.writeTree_.findRootMostValueAndPath(t);if(o!=null){const a=o.path;let d=o.value;const h=zt(a,t);return d=d.updateChild(h,r),new fn(s.writeTree_.set(a,d))}else{const a=new et(r),d=s.writeTree_.setTree(t,a);return new fn(d)}}}function Jh(s,t,r){let o=s;return Bt(r,(a,d)=>{o=li(o,ht(t,a),d)}),o}function Zh(s,t){if(Me(t))return fn.empty();{const r=s.writeTree_.setTree(t,new et(null));return new fn(r)}}function Ic(s,t){return Ir(s,t)!=null}function Ir(s,t){const r=s.writeTree_.findRootMostValueAndPath(t);return r!=null?s.writeTree_.get(r.path).getChild(zt(r.path,t)):null}function ep(s){const t=[],r=s.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(lt,(o,a)=>{t.push(new Pe(o,a))}):s.writeTree_.children.inorderTraversal((o,a)=>{a.value!=null&&t.push(new Pe(o,a.value))}),t}function tr(s,t){if(Me(t))return s;{const r=Ir(s,t);return r!=null?new fn(new et(r)):new fn(s.writeTree_.subtree(t))}}function Tc(s){return s.writeTree_.isEmpty()}function cs(s,t){return gm(Be(),s.writeTree_,t)}function gm(s,t,r){if(t.value!=null)return r.updateChild(s,t.value);{let o=null;return t.children.inorderTraversal((a,d)=>{a===".priority"?(K(d.value!==null,"Priority writes must always be leaf nodes"),o=d.value):r=gm(ht(s,a),d,r)}),!r.getChild(s).isEmpty()&&o!==null&&(r=r.updateChild(ht(s,".priority"),o)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(s,t){return _m(t,s)}function k_(s,t,r,o,a){K(o>s.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),s.allWrites.push({path:t,snap:r,writeId:o,visible:a}),a&&(s.visibleWrites=li(s.visibleWrites,t,r)),s.lastWriteId=o}function C_(s,t){for(let r=0;r<s.allWrites.length;r++){const o=s.allWrites[r];if(o.writeId===t)return o}return null}function S_(s,t){const r=s.allWrites.findIndex(p=>p.writeId===t);K(r>=0,"removeWrite called with nonexistent writeId.");const o=s.allWrites[r];s.allWrites.splice(r,1);let a=o.visible,d=!1,h=s.allWrites.length-1;for(;a&&h>=0;){const p=s.allWrites[h];p.visible&&(h>=r&&E_(p,o.path)?a=!1:un(o.path,p.path)&&(d=!0)),h--}if(a){if(d)return j_(s),!0;if(o.snap)s.visibleWrites=Zh(s.visibleWrites,o.path);else{const p=o.children;Bt(p,g=>{s.visibleWrites=Zh(s.visibleWrites,ht(o.path,g))})}return!0}else return!1}function E_(s,t){if(s.snap)return un(s.path,t);for(const r in s.children)if(s.children.hasOwnProperty(r)&&un(ht(s.path,r),t))return!0;return!1}function j_(s){s.visibleWrites=xm(s.allWrites,I_,Be()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function I_(s){return s.visible}function xm(s,t,r){let o=fn.empty();for(let a=0;a<s.length;++a){const d=s[a];if(t(d)){const h=d.path;let p;if(d.snap)un(r,h)?(p=zt(r,h),o=li(o,p,d.snap)):un(h,r)&&(p=zt(h,r),o=li(o,Be(),d.snap.getChild(p)));else if(d.children){if(un(r,h))p=zt(r,h),o=Jh(o,p,d.children);else if(un(h,r))if(p=zt(h,r),Me(p))o=Jh(o,Be(),d.children);else{const g=os(d.children,Re(p));if(g){const v=g.getChild(Xe(p));o=li(o,Be(),v)}}}else throw us("WriteRecord should have .snap or .children")}}return o}function vm(s,t,r,o,a){if(!o&&!a){const d=Ir(s.visibleWrites,t);if(d!=null)return d;{const h=tr(s.visibleWrites,t);if(Tc(h))return r;if(r==null&&!Ic(h,Be()))return null;{const p=r||_e.EMPTY_NODE;return cs(h,p)}}}else{const d=tr(s.visibleWrites,t);if(!a&&Tc(d))return r;if(!a&&r==null&&!Ic(d,Be()))return null;{const h=function(v){return(v.visible||a)&&(!o||!~o.indexOf(v.writeId))&&(un(v.path,t)||un(t,v.path))},p=xm(s.allWrites,h,t),g=r||_e.EMPTY_NODE;return cs(p,g)}}}function T_(s,t,r){let o=_e.EMPTY_NODE;const a=Ir(s.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(lt,(d,h)=>{o=o.updateImmediateChild(d,h)}),o;if(r){const d=tr(s.visibleWrites,t);return r.forEachChild(lt,(h,p)=>{const g=cs(tr(d,new Qe(h)),p);o=o.updateImmediateChild(h,g)}),ep(d).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}else{const d=tr(s.visibleWrites,t);return ep(d).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}}function R_(s,t,r,o,a){K(o||a,"Either existingEventSnap or existingServerSnap must exist");const d=ht(t,r);if(Ic(s.visibleWrites,d))return null;{const h=tr(s.visibleWrites,d);return Tc(h)?a.getChild(r):cs(h,a.getChild(r))}}function P_(s,t,r,o){const a=ht(t,r),d=Ir(s.visibleWrites,a);if(d!=null)return d;if(o.isCompleteForChild(r)){const h=tr(s.visibleWrites,a);return cs(h,o.getNode().getImmediateChild(r))}else return null}function L_(s,t){return Ir(s.visibleWrites,t)}function M_(s,t,r,o,a,d,h){let p;const g=tr(s.visibleWrites,t),v=Ir(g,Be());if(v!=null)p=v;else if(r!=null)p=cs(g,r);else return[];if(p=p.withIndex(h),!p.isEmpty()&&!p.isLeafNode()){const k=[],y=h.getCompare(),x=d?p.getReverseIteratorFrom(o,h):p.getIteratorFrom(o,h);let I=x.getNext();for(;I&&k.length<a;)y(I,o)!==0&&k.push(I),I=x.getNext();return k}else return[]}function D_(){return{visibleWrites:fn.empty(),allWrites:[],lastWriteId:-1}}function qo(s,t,r,o){return vm(s.writeTree,s.treePath,t,r,o)}function eu(s,t){return T_(s.writeTree,s.treePath,t)}function tp(s,t,r,o){return R_(s.writeTree,s.treePath,t,r,o)}function Xo(s,t){return L_(s.writeTree,ht(s.treePath,t))}function O_(s,t,r,o,a,d){return M_(s.writeTree,s.treePath,t,r,o,a,d)}function tu(s,t,r){return P_(s.writeTree,s.treePath,t,r)}function ym(s,t){return _m(ht(s.treePath,t),s.writeTree)}function _m(s,t){return{treePath:s,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,o=t.childName;K(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),K(o!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(o);if(a){const d=a.type;if(r==="child_added"&&d==="child_removed")this.changeMap.set(o,pi(o,t.snapshotNode,a.snapshotNode));else if(r==="child_removed"&&d==="child_added")this.changeMap.delete(o);else if(r==="child_removed"&&d==="child_changed")this.changeMap.set(o,hi(o,a.oldSnap));else if(r==="child_changed"&&d==="child_added")this.changeMap.set(o,as(o,t.snapshotNode));else if(r==="child_changed"&&d==="child_changed")this.changeMap.set(o,pi(o,t.snapshotNode,a.oldSnap));else throw us("Illegal combination of changes: "+t+" occurred after "+a)}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{getCompleteChild(t){return null}getChildAfterChild(t,r,o){return null}}const wm=new F_;class nu{constructor(t,r,o=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=o}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const o=this.optCompleteServerCache_!=null?new Er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tu(this.writes_,t,o)}}getChildAfterChild(t,r,o){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:jr(this.viewCache_),d=O_(this.writes_,a,r,1,o,t);return d.length===0?null:d[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(s){return{filter:s}}function $_(s,t){K(t.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),K(t.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function U_(s,t,r,o,a){const d=new A_;let h,p;if(r.type===dn.OVERWRITE){const v=r;v.source.fromUser?h=Rc(s,t,v.path,v.snap,o,a,d):(K(v.source.fromServer,"Unknown source."),p=v.source.tagged||t.serverCache.isFiltered()&&!Me(v.path),h=Jo(s,t,v.path,v.snap,o,a,p,d))}else if(r.type===dn.MERGE){const v=r;v.source.fromUser?h=W_(s,t,v.path,v.children,o,a,d):(K(v.source.fromServer,"Unknown source."),p=v.source.tagged||t.serverCache.isFiltered(),h=Pc(s,t,v.path,v.children,o,a,p,d))}else if(r.type===dn.ACK_USER_WRITE){const v=r;v.revert?h=Y_(s,t,v.path,o,a,d):h=H_(s,t,v.path,v.affectedTree,o,a,d)}else if(r.type===dn.LISTEN_COMPLETE)h=V_(s,t,r.path,o,d);else throw us("Unknown operation type: "+r.type);const g=d.getChanges();return B_(t,h,g),{viewCache:h,changes:g}}function B_(s,t,r){const o=t.eventCache;if(o.isFullyInitialized()){const a=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=jc(s);(r.length>0||!s.eventCache.isFullyInitialized()||a&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&r.push(fm(jc(t)))}}function bm(s,t,r,o,a,d){const h=t.eventCache;if(Xo(o,r)!=null)return t;{let p,g;if(Me(r))if(K(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const v=jr(t),k=v instanceof _e?v:_e.EMPTY_NODE,y=eu(o,k);p=s.filter.updateFullNode(t.eventCache.getNode(),y,d)}else{const v=qo(o,jr(t));p=s.filter.updateFullNode(t.eventCache.getNode(),v,d)}else{const v=Re(r);if(v===".priority"){K(nr(r)===1,"Can't have a priority with additional path components");const k=h.getNode();g=t.serverCache.getNode();const y=tp(o,r,k,g);y!=null?p=s.filter.updatePriority(k,y):p=h.getNode()}else{const k=Xe(r);let y;if(h.isCompleteForChild(v)){g=t.serverCache.getNode();const x=tp(o,r,h.getNode(),g);x!=null?y=h.getNode().getImmediateChild(v).updateChild(k,x):y=h.getNode().getImmediateChild(v)}else y=tu(o,v,t.serverCache);y!=null?p=s.filter.updateChild(h.getNode(),v,y,k,a,d):p=h.getNode()}}return oi(t,p,h.isFullyInitialized()||Me(r),s.filter.filtersNodes())}}function Jo(s,t,r,o,a,d,h,p){const g=t.serverCache;let v;const k=h?s.filter:s.filter.getIndexedFilter();if(Me(r))v=k.updateFullNode(g.getNode(),o,null);else if(k.filtersNodes()&&!g.isFiltered()){const I=g.getNode().updateChild(r,o);v=k.updateFullNode(g.getNode(),I,null)}else{const I=Re(r);if(!g.isCompleteForPath(r)&&nr(r)>1)return t;const D=Xe(r),Z=g.getNode().getImmediateChild(I).updateChild(D,o);I===".priority"?v=k.updatePriority(g.getNode(),Z):v=k.updateChild(g.getNode(),I,Z,D,wm,null)}const y=mm(t,v,g.isFullyInitialized()||Me(r),k.filtersNodes()),x=new nu(a,y,d);return bm(s,y,r,a,x,p)}function Rc(s,t,r,o,a,d,h){const p=t.eventCache;let g,v;const k=new nu(a,t,d);if(Me(r))v=s.filter.updateFullNode(t.eventCache.getNode(),o,h),g=oi(t,v,!0,s.filter.filtersNodes());else{const y=Re(r);if(y===".priority")v=s.filter.updatePriority(t.eventCache.getNode(),o),g=oi(t,v,p.isFullyInitialized(),p.isFiltered());else{const x=Xe(r),I=p.getNode().getImmediateChild(y);let D;if(Me(x))D=o;else{const H=k.getCompleteChild(y);H!=null?rm(x)===".priority"&&H.getChild(im(x)).isEmpty()?D=H:D=H.updateChild(x,o):D=_e.EMPTY_NODE}if(I.equals(D))g=t;else{const H=s.filter.updateChild(p.getNode(),y,D,x,k,h);g=oi(t,H,p.isFullyInitialized(),s.filter.filtersNodes())}}}return g}function np(s,t){return s.eventCache.isCompleteForChild(t)}function W_(s,t,r,o,a,d,h){let p=t;return o.foreach((g,v)=>{const k=ht(r,g);np(t,Re(k))&&(p=Rc(s,p,k,v,a,d,h))}),o.foreach((g,v)=>{const k=ht(r,g);np(t,Re(k))||(p=Rc(s,p,k,v,a,d,h))}),p}function rp(s,t,r){return r.foreach((o,a)=>{t=t.updateChild(o,a)}),t}function Pc(s,t,r,o,a,d,h,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,v;Me(r)?v=o:v=new et(null).setTree(r,o);const k=t.serverCache.getNode();return v.children.inorderTraversal((y,x)=>{if(k.hasChild(y)){const I=t.serverCache.getNode().getImmediateChild(y),D=rp(s,I,x);g=Jo(s,g,new Qe(y),D,a,d,h,p)}}),v.children.inorderTraversal((y,x)=>{const I=!t.serverCache.isCompleteForChild(y)&&x.value===null;if(!k.hasChild(y)&&!I){const D=t.serverCache.getNode().getImmediateChild(y),H=rp(s,D,x);g=Jo(s,g,new Qe(y),H,a,d,h,p)}}),g}function H_(s,t,r,o,a,d,h){if(Xo(a,r)!=null)return t;const p=t.serverCache.isFiltered(),g=t.serverCache;if(o.value!=null){if(Me(r)&&g.isFullyInitialized()||g.isCompleteForPath(r))return Jo(s,t,r,g.getNode().getChild(r),a,d,p,h);if(Me(r)){let v=new et(null);return g.getNode().forEachChild(ss,(k,y)=>{v=v.set(new Qe(k),y)}),Pc(s,t,r,v,a,d,p,h)}else return t}else{let v=new et(null);return o.foreach((k,y)=>{const x=ht(r,k);g.isCompleteForPath(x)&&(v=v.set(k,g.getNode().getChild(x)))}),Pc(s,t,r,v,a,d,p,h)}}function V_(s,t,r,o,a){const d=t.serverCache,h=mm(t,d.getNode(),d.isFullyInitialized()||Me(r),d.isFiltered());return bm(s,h,r,o,wm,a)}function Y_(s,t,r,o,a,d){let h;if(Xo(o,r)!=null)return t;{const p=new nu(o,t,a),g=t.eventCache.getNode();let v;if(Me(r)||Re(r)===".priority"){let k;if(t.serverCache.isFullyInitialized())k=qo(o,jr(t));else{const y=t.serverCache.getNode();K(y instanceof _e,"serverChildren would be complete if leaf node"),k=eu(o,y)}k=k,v=s.filter.updateFullNode(g,k,d)}else{const k=Re(r);let y=tu(o,k,t.serverCache);y==null&&t.serverCache.isCompleteForChild(k)&&(y=g.getImmediateChild(k)),y!=null?v=s.filter.updateChild(g,k,y,Xe(r),p,d):t.eventCache.getNode().hasChild(k)?v=s.filter.updateChild(g,k,_e.EMPTY_NODE,Xe(r),p,d):v=g,v.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=qo(o,jr(t)),h.isLeafNode()&&(v=s.filter.updateFullNode(v,h,d)))}return h=t.serverCache.isFullyInitialized()||Xo(o,Be())!=null,oi(t,v,h,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,a=new Kc(o.getIndex()),d=f_(o);this.processor_=z_(d);const h=r.serverCache,p=r.eventCache,g=a.updateFullNode(_e.EMPTY_NODE,h.getNode(),null),v=d.updateFullNode(_e.EMPTY_NODE,p.getNode(),null),k=new Er(g,h.isFullyInitialized(),a.filtersNodes()),y=new Er(v,p.isFullyInitialized(),d.filtersNodes());this.viewCache_=ol(y,k),this.eventGenerator_=new y_(this.query_)}get query(){return this.query_}}function G_(s){return s.viewCache_.serverCache.getNode()}function K_(s,t){const r=jr(s.viewCache_);return r&&(s.query._queryParams.loadsAllData()||!Me(t)&&!r.getImmediateChild(Re(t)).isEmpty())?r.getChild(t):null}function sp(s){return s.eventRegistrations_.length===0}function q_(s,t){s.eventRegistrations_.push(t)}function ip(s,t,r){const o=[];if(r){K(t==null,"A cancel should cancel all event registrations.");const a=s.query._path;s.eventRegistrations_.forEach(d=>{const h=d.createCancelEvent(r,a);h&&o.push(h)})}if(t){let a=[];for(let d=0;d<s.eventRegistrations_.length;++d){const h=s.eventRegistrations_[d];if(!h.matches(t))a.push(h);else if(t.hasAnyCallback()){a=a.concat(s.eventRegistrations_.slice(d+1));break}}s.eventRegistrations_=a}else s.eventRegistrations_=[];return o}function op(s,t,r,o){t.type===dn.MERGE&&t.source.queryId!==null&&(K(jr(s.viewCache_),"We should always have a full cache before handling merges"),K(jc(s.viewCache_),"Missing event cache, even though we have a server cache"));const a=s.viewCache_,d=U_(s.processor_,a,t,r,o);return $_(s.processor_,d.viewCache),K(d.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=d.viewCache,Nm(s,d.changes,d.viewCache.eventCache.getNode(),null)}function X_(s,t){const r=s.viewCache_.eventCache,o=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(lt,(d,h)=>{o.push(as(d,h))}),r.isFullyInitialized()&&o.push(fm(r.getNode())),Nm(s,o,r.getNode(),t)}function Nm(s,t,r,o){const a=o?[o]:s.eventRegistrations_;return __(s.eventGenerator_,t,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo;class J_{constructor(){this.views=new Map}}function Z_(s){K(!Zo,"__referenceConstructor has already been defined"),Zo=s}function e1(){return K(Zo,"Reference.ts has not been loaded"),Zo}function t1(s){return s.views.size===0}function ru(s,t,r,o){const a=t.source.queryId;if(a!==null){const d=s.views.get(a);return K(d!=null,"SyncTree gave us an op for an invalid query."),op(d,t,r,o)}else{let d=[];for(const h of s.views.values())d=d.concat(op(h,t,r,o));return d}}function n1(s,t,r,o,a){const d=t._queryIdentifier,h=s.views.get(d);if(!h){let p=qo(r,a?o:null),g=!1;p?g=!0:o instanceof _e?(p=eu(r,o),g=!1):(p=_e.EMPTY_NODE,g=!1);const v=ol(new Er(p,g,!1),new Er(o,a,!1));return new Q_(t,v)}return h}function r1(s,t,r,o,a,d){const h=n1(s,t,o,a,d);return s.views.has(t._queryIdentifier)||s.views.set(t._queryIdentifier,h),q_(h,r),X_(h,r)}function s1(s,t,r,o){const a=t._queryIdentifier,d=[];let h=[];const p=rr(s);if(a==="default")for(const[g,v]of s.views.entries())h=h.concat(ip(v,r,o)),sp(v)&&(s.views.delete(g),v.query._queryParams.loadsAllData()||d.push(v.query));else{const g=s.views.get(a);g&&(h=h.concat(ip(g,r,o)),sp(g)&&(s.views.delete(a),g.query._queryParams.loadsAllData()||d.push(g.query)))}return p&&!rr(s)&&d.push(new(e1())(t._repo,t._path)),{removed:d,events:h}}function km(s){const t=[];for(const r of s.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function is(s,t){let r=null;for(const o of s.views.values())r=r||K_(o,t);return r}function Cm(s,t){if(t._queryParams.loadsAllData())return ll(s);{const o=t._queryIdentifier;return s.views.get(o)}}function Sm(s,t){return Cm(s,t)!=null}function rr(s){return ll(s)!=null}function ll(s){for(const t of s.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el;function i1(s){K(!el,"__referenceConstructor has already been defined"),el=s}function o1(){return K(el,"Reference.ts has not been loaded"),el}let l1=1;class lp{constructor(t){this.listenProvider_=t,this.syncPointTree_=new et(null),this.pendingWriteTree_=D_(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Em(s,t,r,o,a){return k_(s.pendingWriteTree_,t,r,o,a),a?Ni(s,new Sr(pm(),t,r)):[]}function kr(s,t,r=!1){const o=C_(s.pendingWriteTree_,t);if(S_(s.pendingWriteTree_,t)){let d=new et(null);return o.snap!=null?d=d.set(Be(),!0):Bt(o.children,h=>{d=d.set(new Qe(h),!0)}),Ni(s,new Ko(o.path,d,r))}else return[]}function al(s,t,r){return Ni(s,new Sr(Xc(),t,r))}function a1(s,t,r){const o=et.fromObject(r);return Ni(s,new xi(Xc(),t,o))}function c1(s,t){return Ni(s,new gi(Xc(),t))}function u1(s,t,r){const o=iu(s,r);if(o){const a=ou(o),d=a.path,h=a.queryId,p=zt(d,t),g=new gi(Jc(h),p);return lu(s,d,g)}else return[]}function Lc(s,t,r,o,a=!1){const d=t._path,h=s.syncPointTree_.get(d);let p=[];if(h&&(t._queryIdentifier==="default"||Sm(h,t))){const g=s1(h,t,r,o);t1(h)&&(s.syncPointTree_=s.syncPointTree_.remove(d));const v=g.removed;if(p=g.events,!a){const k=v.findIndex(x=>x._queryParams.loadsAllData())!==-1,y=s.syncPointTree_.findOnPath(d,(x,I)=>rr(I));if(k&&!y){const x=s.syncPointTree_.subtree(d);if(!x.isEmpty()){const I=h1(x);for(let D=0;D<I.length;++D){const H=I[D],Z=H.query,le=Tm(s,H);s.listenProvider_.startListening(ai(Z),tl(s,Z),le.hashFn,le.onComplete)}}}!y&&v.length>0&&!o&&(k?s.listenProvider_.stopListening(ai(t),null):v.forEach(x=>{const I=s.queryToTagMap.get(cl(x));s.listenProvider_.stopListening(ai(x),I)}))}p1(s,v)}return p}function d1(s,t,r,o){const a=iu(s,o);if(a!=null){const d=ou(a),h=d.path,p=d.queryId,g=zt(h,t),v=new Sr(Jc(p),g,r);return lu(s,h,v)}else return[]}function f1(s,t,r,o){const a=iu(s,o);if(a){const d=ou(a),h=d.path,p=d.queryId,g=zt(h,t),v=et.fromObject(r),k=new xi(Jc(p),g,v);return lu(s,h,k)}else return[]}function ap(s,t,r,o=!1){const a=t._path;let d=null,h=!1;s.syncPointTree_.foreachOnPath(a,(x,I)=>{const D=zt(x,a);d=d||is(I,D),h=h||rr(I)});let p=s.syncPointTree_.get(a);p?(h=h||rr(p),d=d||is(p,Be())):(p=new J_,s.syncPointTree_=s.syncPointTree_.set(a,p));let g;d!=null?g=!0:(g=!1,d=_e.EMPTY_NODE,s.syncPointTree_.subtree(a).foreachChild((I,D)=>{const H=is(D,Be());H&&(d=d.updateImmediateChild(I,H))}));const v=Sm(p,t);if(!v&&!t._queryParams.loadsAllData()){const x=cl(t);K(!s.queryToTagMap.has(x),"View does not exist, but we have a tag");const I=m1();s.queryToTagMap.set(x,I),s.tagToQueryMap.set(I,x)}const k=Zc(s.pendingWriteTree_,a);let y=r1(p,t,r,k,d,g);if(!v&&!h&&!o){const x=Cm(p,t);y=y.concat(g1(s,t,x))}return y}function su(s,t,r){const a=s.pendingWriteTree_,d=s.syncPointTree_.findOnPath(t,(h,p)=>{const g=zt(h,t),v=is(p,g);if(v)return v});return vm(a,t,d,r,!0)}function Ni(s,t){return jm(t,s.syncPointTree_,null,Zc(s.pendingWriteTree_,Be()))}function jm(s,t,r,o){if(Me(s.path))return Im(s,t,r,o);{const a=t.get(Be());r==null&&a!=null&&(r=is(a,Be()));let d=[];const h=Re(s.path),p=s.operationForChild(h),g=t.children.get(h);if(g&&p){const v=r?r.getImmediateChild(h):null,k=ym(o,h);d=d.concat(jm(p,g,v,k))}return a&&(d=d.concat(ru(a,s,o,r))),d}}function Im(s,t,r,o){const a=t.get(Be());r==null&&a!=null&&(r=is(a,Be()));let d=[];return t.children.inorderTraversal((h,p)=>{const g=r?r.getImmediateChild(h):null,v=ym(o,h),k=s.operationForChild(h);k&&(d=d.concat(Im(k,p,g,v)))}),a&&(d=d.concat(ru(a,s,o,r))),d}function Tm(s,t){const r=t.query,o=tl(s,r);return{hashFn:()=>(G_(t)||_e.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return o?u1(s,r._path,o):c1(s,r._path);{const d=dy(a,r);return Lc(s,r,null,d)}}}}function tl(s,t){const r=cl(t);return s.queryToTagMap.get(r)}function cl(s){return s._path.toString()+"$"+s._queryIdentifier}function iu(s,t){return s.tagToQueryMap.get(t)}function ou(s){const t=s.indexOf("$");return K(t!==-1&&t<s.length-1,"Bad queryKey."),{queryId:s.substr(t+1),path:new Qe(s.substr(0,t))}}function lu(s,t,r){const o=s.syncPointTree_.get(t);K(o,"Missing sync point for query tag that we're tracking");const a=Zc(s.pendingWriteTree_,t);return ru(o,r,a,null)}function h1(s){return s.fold((t,r,o)=>{if(r&&rr(r))return[ll(r)];{let a=[];return r&&(a=km(r)),Bt(o,(d,h)=>{a=a.concat(h)}),a}})}function ai(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(o1())(s._repo,s._path):s}function p1(s,t){for(let r=0;r<t.length;++r){const o=t[r];if(!o._queryParams.loadsAllData()){const a=cl(o),d=s.queryToTagMap.get(a);s.queryToTagMap.delete(a),s.tagToQueryMap.delete(d)}}}function m1(){return l1++}function g1(s,t,r){const o=t._path,a=tl(s,t),d=Tm(s,r),h=s.listenProvider_.startListening(ai(t),a,d.hashFn,d.onComplete),p=s.syncPointTree_.subtree(o);if(a)K(!rr(p.value),"If we're adding a query, it shouldn't be shadowed");else{const g=p.fold((v,k,y)=>{if(!Me(v)&&k&&rr(k))return[ll(k).query];{let x=[];return k&&(x=x.concat(km(k).map(I=>I.query))),Bt(y,(I,D)=>{x=x.concat(D)}),x}});for(let v=0;v<g.length;++v){const k=g[v];s.listenProvider_.stopListening(ai(k),tl(s,k))}}return h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new au(r)}node(){return this.node_}}class cu{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=ht(this.path_,t);return new cu(this.syncTree_,r)}node(){return su(this.syncTree_,this.path_)}}const x1=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},cp=function(s,t,r){if(!s||typeof s!="object")return s;if(K(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return v1(s[".sv"],t,r);if(typeof s[".sv"]=="object")return y1(s[".sv"],t);K(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},v1=function(s,t,r){switch(s){case"timestamp":return r.timestamp;default:K(!1,"Unexpected server value: "+s)}},y1=function(s,t,r){s.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const o=s.increment;typeof o!="number"&&K(!1,"Unexpected increment value: "+o);const a=t.node();if(K(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;const h=a.getValue();return typeof h!="number"?o:h+o},_1=function(s,t,r,o){return uu(t,new cu(r,s),o)},Rm=function(s,t,r){return uu(s,new au(t),r)};function uu(s,t,r){const o=s.getPriority().val(),a=cp(o,t.getImmediateChild(".priority"),r);let d;if(s.isLeafNode()){const h=s,p=cp(h.getValue(),t,r);return p!==h.getValue()||a!==h.getPriority().val()?new xt(p,bt(a)):s}else{const h=s;return d=h,a!==h.getPriority().val()&&(d=d.updatePriority(new xt(a))),h.forEachChild(lt,(p,g)=>{const v=uu(g,t.getImmediateChild(p),r);v!==g&&(d=d.updateImmediateChild(p,v))}),d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t="",r=null,o={children:{},childCount:0}){this.name=t,this.parent=r,this.node=o}}function fu(s,t){let r=t instanceof Qe?t:new Qe(t),o=s,a=Re(r);for(;a!==null;){const d=os(o.node.children,a)||{children:{},childCount:0};o=new du(a,o,d),r=Xe(r),a=Re(r)}return o}function hs(s){return s.node.value}function Pm(s,t){s.node.value=t,Mc(s)}function Lm(s){return s.node.childCount>0}function w1(s){return hs(s)===void 0&&!Lm(s)}function ul(s,t){Bt(s.node.children,(r,o)=>{t(new du(r,s,o))})}function Mm(s,t,r,o){r&&t(s),ul(s,a=>{Mm(a,t,!0)})}function b1(s,t,r){let o=s.parent;for(;o!==null;){if(t(o))return!0;o=o.parent}return!1}function ki(s){return new Qe(s.parent===null?s.name:ki(s.parent)+"/"+s.name)}function Mc(s){s.parent!==null&&N1(s.parent,s.name,s)}function N1(s,t,r){const o=w1(r),a=Ln(s.node.children,t);o&&a?(delete s.node.children[t],s.node.childCount--,Mc(s)):!o&&!a&&(s.node.children[t]=r.node,s.node.childCount++,Mc(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=/[\[\].#$\/\u0000-\u001F\u007F]/,C1=/[\[\].#$\u0000-\u001F\u007F]/,gc=10*1024*1024,Dm=function(s){return typeof s=="string"&&s.length!==0&&!k1.test(s)},Om=function(s){return typeof s=="string"&&s.length!==0&&!C1.test(s)},S1=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Om(s)},E1=function(s,t,r,o){hu($c(s,"value"),t,r)},hu=function(s,t,r){const o=r instanceof Qe?new Hy(r,s):r;if(t===void 0)throw new Error(s+"contains undefined "+br(o));if(typeof t=="function")throw new Error(s+"contains a function "+br(o)+" with contents = "+t.toString());if(Op(t))throw new Error(s+"contains "+t.toString()+" "+br(o));if(typeof t=="string"&&t.length>gc/3&&sl(t)>gc)throw new Error(s+"contains a string greater than "+gc+" utf8 bytes "+br(o)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let a=!1,d=!1;if(Bt(t,(h,p)=>{if(h===".value")a=!0;else if(h!==".priority"&&h!==".sv"&&(d=!0,!Dm(h)))throw new Error(s+" contains an invalid key ("+h+") "+br(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Vy(o,h),hu(s,p,o),Yy(o)}),a&&d)throw new Error(s+' contains ".value" child '+br(o)+" in addition to actual children.")}},Am=function(s,t,r,o){if(!Om(r))throw new Error($c(s,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},j1=function(s,t,r,o){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Am(s,t,r)},Fm=function(s,t){if(Re(t)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},I1=function(s,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Dm(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!S1(r))throw new Error($c(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function pu(s,t){let r=null;for(let o=0;o<t.length;o++){const a=t[o],d=a.getPath();r!==null&&!Yc(d,r.path)&&(s.eventLists_.push(r),r=null),r===null&&(r={events:[],path:d}),r.events.push(a)}r&&s.eventLists_.push(r)}function zm(s,t,r){pu(s,r),$m(s,o=>Yc(o,t))}function Pn(s,t,r){pu(s,r),$m(s,o=>un(o,t)||un(t,o))}function $m(s,t){s.recursionDepth_++;let r=!0;for(let o=0;o<s.eventLists_.length;o++){const a=s.eventLists_[o];if(a){const d=a.path;t(d)?(R1(s.eventLists_[o]),s.eventLists_[o]=null):r=!1}}r&&(s.eventLists_=[]),s.recursionDepth_--}function R1(s){for(let t=0;t<s.events.length;t++){const r=s.events[t];if(r!==null){s.events[t]=null;const o=r.getEventRunner();si&&jt("event: "+r.toString()),fs(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="repo_interrupt",L1=25;class M1{constructor(t,r,o,a){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Go(),this.transactionQueueTree_=new du,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function D1(s,t,r){if(s.stats_=Hc(s.repoInfo_),s.forceRestClient_||my())s.server_=new Qo(s.repoInfo_,(o,a,d,h)=>{up(s,o,a,d,h)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>dp(s,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yt(r)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}s.persistentConnection_=new In(s.repoInfo_,t,(o,a,d,h)=>{up(s,o,a,d,h)},o=>{dp(s,o)},o=>{A1(s,o)},s.authTokenProvider_,s.appCheckProvider_,r),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(o=>{s.server_.refreshAuthToken(o)}),s.appCheckProvider_.addTokenChangeListener(o=>{s.server_.refreshAppCheckToken(o.token)}),s.statsReporter_=_y(s.repoInfo_,()=>new v_(s.stats_,s.server_)),s.infoData_=new h_,s.infoSyncTree_=new lp({startListening:(o,a,d,h)=>{let p=[];const g=s.infoData_.getNode(o._path);return g.isEmpty()||(p=al(s.infoSyncTree_,o._path,g),setTimeout(()=>{h("ok")},0)),p},stopListening:()=>{}}),gu(s,"connected",!1),s.serverSyncTree_=new lp({startListening:(o,a,d,h)=>(s.server_.listen(o,d,a,(p,g)=>{const v=h(p,g);Pn(s.eventQueue_,o._path,v)}),[]),stopListening:(o,a)=>{s.server_.unlisten(o,a)}})}function O1(s){const r=s.infoData_.getNode(new Qe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function mu(s){return x1({timestamp:O1(s)})}function up(s,t,r,o,a){s.dataUpdateCount++;const d=new Qe(t);r=s.interceptServerDataCallback_?s.interceptServerDataCallback_(t,r):r;let h=[];if(a)if(o){const g=$o(r,v=>bt(v));h=f1(s.serverSyncTree_,d,g,a)}else{const g=bt(r);h=d1(s.serverSyncTree_,d,g,a)}else if(o){const g=$o(r,v=>bt(v));h=a1(s.serverSyncTree_,d,g)}else{const g=bt(r);h=al(s.serverSyncTree_,d,g)}let p=d;h.length>0&&(p=dl(s,d)),Pn(s.eventQueue_,p,h)}function dp(s,t){gu(s,"connected",t),t===!1&&z1(s)}function A1(s,t){Bt(t,(r,o)=>{gu(s,r,o)})}function gu(s,t,r){const o=new Qe("/.info/"+t),a=bt(r);s.infoData_.updateSnapshot(o,a);const d=al(s.infoSyncTree_,o,a);Pn(s.eventQueue_,o,d)}function Um(s){return s.nextWriteId_++}function F1(s,t,r,o,a){xu(s,"set",{path:t.toString(),value:r,priority:o});const d=mu(s),h=bt(r,o),p=su(s.serverSyncTree_,t),g=Rm(h,p,d),v=Um(s),k=Em(s.serverSyncTree_,t,g,v,!0);pu(s.eventQueue_,k),s.server_.put(t.toString(),h.val(!0),(x,I)=>{const D=x==="ok";D||Ut("set at "+t+" failed: "+x);const H=kr(s.serverSyncTree_,v,!D);Pn(s.eventQueue_,t,H),B1(s,a,x,I)});const y=Ym(s,t);dl(s,y),Pn(s.eventQueue_,y,[])}function z1(s){xu(s,"onDisconnectEvents");const t=mu(s),r=Go();Ec(s.onDisconnect_,Be(),(a,d)=>{const h=_1(a,d,s.serverSyncTree_,t);hm(r,a,h)});let o=[];Ec(r,Be(),(a,d)=>{o=o.concat(al(s.serverSyncTree_,a,d));const h=Ym(s,a);dl(s,h)}),s.onDisconnect_=Go(),Pn(s.eventQueue_,Be(),o)}function $1(s,t,r){let o;Re(t._path)===".info"?o=ap(s.infoSyncTree_,t,r):o=ap(s.serverSyncTree_,t,r),zm(s.eventQueue_,t._path,o)}function fp(s,t,r){let o;Re(t._path)===".info"?o=Lc(s.infoSyncTree_,t,r):o=Lc(s.serverSyncTree_,t,r),zm(s.eventQueue_,t._path,o)}function U1(s){s.persistentConnection_&&s.persistentConnection_.interrupt(P1)}function xu(s,...t){let r="";s.persistentConnection_&&(r=s.persistentConnection_.id+":"),jt(r,...t)}function B1(s,t,r,o){t&&fs(()=>{if(r==="ok")t(null);else{const a=(r||"error").toUpperCase();let d=a;o&&(d+=": "+o);const h=new Error(d);h.code=a,t(h)}})}function Bm(s,t,r){return su(s.serverSyncTree_,t,r)||_e.EMPTY_NODE}function vu(s,t=s.transactionQueueTree_){if(t||fl(s,t),hs(t)){const r=Hm(s,t);K(r.length>0,"Sending zero length transaction queue"),r.every(a=>a.status===0)&&W1(s,ki(t),r)}else Lm(t)&&ul(t,r=>{vu(s,r)})}function W1(s,t,r){const o=r.map(v=>v.currentWriteId),a=Bm(s,t,o);let d=a;const h=a.hash();for(let v=0;v<r.length;v++){const k=r[v];K(k.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),k.status=1,k.retryCount++;const y=zt(t,k.path);d=d.updateChild(y,k.currentOutputSnapshotRaw)}const p=d.val(!0),g=t;s.server_.put(g.toString(),p,v=>{xu(s,"transaction put response",{path:g.toString(),status:v});let k=[];if(v==="ok"){const y=[];for(let x=0;x<r.length;x++)r[x].status=2,k=k.concat(kr(s.serverSyncTree_,r[x].currentWriteId)),r[x].onComplete&&y.push(()=>r[x].onComplete(null,!0,r[x].currentOutputSnapshotResolved)),r[x].unwatcher();fl(s,fu(s.transactionQueueTree_,t)),vu(s,s.transactionQueueTree_),Pn(s.eventQueue_,t,k);for(let x=0;x<y.length;x++)fs(y[x])}else{if(v==="datastale")for(let y=0;y<r.length;y++)r[y].status===3?r[y].status=4:r[y].status=0;else{Ut("transaction at "+g.toString()+" failed: "+v);for(let y=0;y<r.length;y++)r[y].status=4,r[y].abortReason=v}dl(s,t)}},h)}function dl(s,t){const r=Wm(s,t),o=ki(r),a=Hm(s,r);return H1(s,a,o),o}function H1(s,t,r){if(t.length===0)return;const o=[];let a=[];const h=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const g=t[p],v=zt(r,g.path);let k=!1,y;if(K(v!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)k=!0,y=g.abortReason,a=a.concat(kr(s.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=L1)k=!0,y="maxretry",a=a.concat(kr(s.serverSyncTree_,g.currentWriteId,!0));else{const x=Bm(s,g.path,h);g.currentInputSnapshot=x;const I=t[p].update(x.val());if(I!==void 0){hu("transaction failed: Data returned ",I,g.path);let D=bt(I);typeof I=="object"&&I!=null&&Ln(I,".priority")||(D=D.updatePriority(x.getPriority()));const Z=g.currentWriteId,le=mu(s),re=Rm(D,x,le);g.currentOutputSnapshotRaw=D,g.currentOutputSnapshotResolved=re,g.currentWriteId=Um(s),h.splice(h.indexOf(Z),1),a=a.concat(Em(s.serverSyncTree_,g.path,re,g.currentWriteId,g.applyLocally)),a=a.concat(kr(s.serverSyncTree_,Z,!0))}else k=!0,y="nodata",a=a.concat(kr(s.serverSyncTree_,g.currentWriteId,!0))}Pn(s.eventQueue_,r,a),a=[],k&&(t[p].status=2,(function(x){setTimeout(x,Math.floor(0))})(t[p].unwatcher),t[p].onComplete&&(y==="nodata"?o.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):o.push(()=>t[p].onComplete(new Error(y),!1,null))))}fl(s,s.transactionQueueTree_);for(let p=0;p<o.length;p++)fs(o[p]);vu(s,s.transactionQueueTree_)}function Wm(s,t){let r,o=s.transactionQueueTree_;for(r=Re(t);r!==null&&hs(o)===void 0;)o=fu(o,r),t=Xe(t),r=Re(t);return o}function Hm(s,t){const r=[];return Vm(s,t,r),r.sort((o,a)=>o.order-a.order),r}function Vm(s,t,r){const o=hs(t);if(o)for(let a=0;a<o.length;a++)r.push(o[a]);ul(t,a=>{Vm(s,a,r)})}function fl(s,t){const r=hs(t);if(r){let o=0;for(let a=0;a<r.length;a++)r[a].status!==2&&(r[o]=r[a],o++);r.length=o,Pm(t,r.length>0?r:void 0)}ul(t,o=>{fl(s,o)})}function Ym(s,t){const r=ki(Wm(s,t)),o=fu(s.transactionQueueTree_,t);return b1(o,a=>{xc(s,a)}),xc(s,o),Mm(o,a=>{xc(s,a)}),r}function xc(s,t){const r=hs(t);if(r){const o=[];let a=[],d=-1;for(let h=0;h<r.length;h++)r[h].status===3||(r[h].status===1?(K(d===h-1,"All SENT items should be at beginning of queue."),d=h,r[h].status=3,r[h].abortReason="set"):(K(r[h].status===0,"Unexpected transaction status in abort"),r[h].unwatcher(),a=a.concat(kr(s.serverSyncTree_,r[h].currentWriteId,!0)),r[h].onComplete&&o.push(r[h].onComplete.bind(null,new Error("set"),!1,null))));d===-1?Pm(t,void 0):r.length=d+1,Pn(s.eventQueue_,ki(t),a);for(let h=0;h<o.length;h++)fs(o[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(s){let t="";const r=s.split("/");for(let o=0;o<r.length;o++)if(r[o].length>0){let a=r[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}t+="/"+a}return t}function Y1(s){const t={};s.charAt(0)==="?"&&(s=s.substring(1));for(const r of s.split("&")){if(r.length===0)continue;const o=r.split("=");o.length===2?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Ut(`Invalid query segment '${r}' in query '${s}'`)}return t}const hp=function(s,t){const r=Q1(s),o=r.namespace;r.domain==="firebase.com"&&Rn(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&r.domain!=="localhost"&&Rn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||oy();const a=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new Gp(r.host,r.secure,o,a,t,"",o!==r.subdomain),path:new Qe(r.pathString)}},Q1=function(s){let t="",r="",o="",a="",d="",h=!0,p="https",g=443;if(typeof s=="string"){let v=s.indexOf("//");v>=0&&(p=s.substring(0,v-1),s=s.substring(v+2));let k=s.indexOf("/");k===-1&&(k=s.length);let y=s.indexOf("?");y===-1&&(y=s.length),t=s.substring(0,Math.min(k,y)),k<y&&(a=V1(s.substring(k,y)));const x=Y1(s.substring(Math.min(s.length,y)));v=t.indexOf(":"),v>=0?(h=p==="https"||p==="wss",g=parseInt(t.substring(v+1),10)):v=t.length;const I=t.slice(0,v);if(I.toLowerCase()==="localhost")r="localhost";else if(I.split(".").length<=2)r=I;else{const D=t.indexOf(".");o=t.substring(0,D).toLowerCase(),r=t.substring(D+1),d=o}"ns"in x&&(d=x.ns)}return{host:t,port:g,domain:r,subdomain:o,secure:h,scheme:p,pathString:a,namespace:d}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,r,o,a){this.eventType=t,this.eventRegistration=r,this.snapshot=o,this.prevName=a}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+yt(this.snapshot.exportVal())}}class K1{constructor(t,r,o){this.eventRegistration=t,this.error=r,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t,r,o,a){this._repo=t,this._path=r,this._queryParams=o,this._orderByCalled=a}get key(){return Me(this._path)?null:rm(this._path)}get ref(){return new sr(this._repo,this._path)}get _queryIdentifier(){const t=qh(this._queryParams),r=Bc(t);return r==="{}"?"default":r}get _queryObject(){return qh(this._queryParams)}isEqual(t){if(t=yi(t),!(t instanceof yu))return!1;const r=this._repo===t._repo,o=Yc(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return r&&o&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+Wy(this._path)}}class sr extends yu{constructor(t,r){super(t,r,new qc,!1)}get parent(){const t=im(this._path);return t===null?null:new sr(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class nl{constructor(t,r,o){this._node=t,this.ref=r,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new Qe(t),o=Dc(this.ref,t);return new nl(this._node.getChild(r),o,lt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,a)=>t(new nl(a,Dc(this.ref,o),lt)))}hasChild(t){const r=new Qe(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Gt(s,t){return s=yi(s),s._checkNotDeleted("ref"),t!==void 0?Dc(s._root,t):s._root}function Dc(s,t){return s=yi(s),Re(s._path)===null?j1("child","path",t):Am("child","path",t),new sr(s._repo,ht(s._path,t))}function Ci(s){return Fm("remove",s._path),ir(s,null)}function ir(s,t){s=yi(s),Fm("set",s._path),E1("set",t,s._path);const r=new rl;return F1(s._repo,s._path,t,null,r.wrapCallback(()=>{})),r.promise}class _u{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const o=r._queryParams.getIndex();return new G1("value",this,new nl(t.snapshotNode,new sr(r._repo,r._path),o))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new K1(this,t,r):null}matches(t){return t instanceof _u?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function X1(s,t,r,o,a){let d;if(typeof o=="object"&&(d=void 0,a=o),typeof o=="function"&&(d=o),a&&a.onlyOnce){const g=r,v=(k,y)=>{fp(s._repo,s,p),g(k,y)};v.userCallback=r.userCallback,v.context=r.context,r=v}const h=new q1(r,d||void 0),p=new _u(h);return $1(s._repo,s,p),()=>fp(s._repo,s,p)}function J1(s,t,r,o){return X1(s,"value",t,r,o)}Z_(sr);i1(sr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="FIREBASE_DATABASE_EMULATOR_HOST",Oc={};let ew=!1;function tw(s,t,r,o){const a=t.lastIndexOf(":"),d=t.substring(0,a),h=zc(d);s.repoInfo_=new Gp(t,h,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,r),o&&(s.authTokenProvider_=o)}function nw(s,t,r,o,a){let d=o||s.options.databaseURL;d===void 0&&(s.options.projectId||Rn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jt("Using default host for project ",s.options.projectId),d=`${s.options.projectId}-default-rtdb.firebaseio.com`);let h=hp(d,a),p=h.repoInfo,g;typeof process<"u"&&Ph&&(g=Ph[Z1]),g?(d=`http://${g}?ns=${p.namespace}`,h=hp(d,a),p=h.repoInfo):h.repoInfo.secure;const v=new xy(s.name,s.options,t);I1("Invalid Firebase Database URL",h),Me(h.path)||Rn("Database URL must point to the root of a Firebase Database (not including a child path).");const k=sw(p,s,v,new gy(s,r));return new iw(k,s)}function rw(s,t){const r=Oc[t];(!r||r[s.key]!==s)&&Rn(`Database ${t}(${s.repoInfo_}) has already been deleted.`),U1(s),delete r[s.key]}function sw(s,t,r,o){let a=Oc[t.name];a||(a={},Oc[t.name]=a);let d=a[s.toURLString()];return d&&Rn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new M1(s,ew,r,o),a[s.toURLString()]=d,d}class iw{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(D1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sr(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(rw(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Rn("Cannot call "+t+" on a deleted database.")}}function ow(s=Uv(),t){const r=Ov(s,"database").getImmediate({identifier:t});if(!r._instanceStarted){const o=wx("database");o&&lw(r,...o)}return r}function lw(s,t,r,o={}){s=yi(s),s._checkNotDeleted("useEmulator");const a=`${t}:${r}`,d=s._repoInternal;if(s._instanceStarted){if(a===s._repoInternal.repoInfo_.host&&Uo(o,d.repoInfo_.emulatorOptions))return;Rn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(d.repoInfo_.nodeAdmin)o.mockUserToken&&Rn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new Ao(Ao.OWNER);else if(o.mockUserToken){const p=typeof o.mockUserToken=="string"?o.mockUserToken:Nx(o.mockUserToken,s.app.options.projectId);h=new Ao(p)}zc(t)&&(bx(t),Sx("Database",!0)),tw(d,a,o,h)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(s){ey($v),Wo(new ui("database",(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),d=t.getProvider("app-check-internal");return nw(o,a,d,r)},"PUBLIC").setMultipleInstances(!0)),ns(Lh,Mh,s),ns(Lh,Mh,"esm2020")}In.prototype.simpleListen=function(s,t){this.sendRequest("q",{p:s},t)};In.prototype.echo=function(s,t){this.sendRequest("echo",{d:s},t)};aw();const cw={apiKey:"AIzaSyCIA80U-Nb235O5SG_2d1TzdylvYQrzNUc",authDomain:"razlom-db061.firebaseapp.com",projectId:"razlom-db061",storageBucket:"razlom-db061.firebasestorage.app",messagingSenderId:"343432819418",appId:"1:343432819418:web:73f0fedc8a5e5a32912be3",measurementId:"G-EPLQFH5LMJ",databaseURL:"https://razlom-db061-default-rtdb.firebaseio.com"};let pp,Ge;try{pp=Tp(cw),Ge=ow(pp),console.log("Firebase initialized successfully (RTDB only)")}catch(s){console.error("Firebase init error:",s)}const ti=s=>{if(!s)return[];const t=Array.isArray(s)?s:Object.values(s),r=new Map;return t.forEach(o=>{o&&typeof o=="object"&&o.id&&r.set(o.id,o)}),Array.from(r.values())},ni=s=>(s||[]).reduce((t,r)=>(r&&r.id&&(t[r.id]=r),t),{}),uw=(s,t)=>{if(!Ge)return console.warn("Database not initialized, cannot subscribe"),()=>{};const r=Gt(Ge,`rooms/${s}`);return J1(r,a=>{const d=a.val();d?t({characters:ti(d.characters),realms:ti(d.realms),worlds:ti(d.worlds),notes:ti(d.notes),availableTags:d.availableTags||[],availableHiddenTags:d.availableHiddenTags||[],rpSessions:ti(d.rpSessions)}):console.log("Firebase returned null data")},a=>{console.error("Firebase read error:",a)})},dw=async(s,t)=>{if(!Ge)return;const r=Gt(Ge,`rooms/${s}`),o={...t,characters:ni(t.characters),realms:ni(t.realms),worlds:ni(t.worlds),notes:ni(t.notes),rpSessions:ni(t.rpSessions)};try{await ir(r,o)}catch(a){console.error("Firebase write error:",a)}},fw=async(s,t)=>{if(!Ge||!t.id)return;const r=Gt(Ge,`rooms/${s}/characters/${t.id}`);try{await ir(r,t)}catch(o){console.error("Error saving character:",o)}},hw=async(s,t)=>{if(!Ge)return;const r=Gt(Ge,`rooms/${s}/characters/${t}`);try{await Ci(r)}catch(o){console.error("Error deleting character:",o)}},pw=async(s,t)=>{if(!Ge||!t.id)return;const r=Gt(Ge,`rooms/${s}/realms/${t.id}`);try{await ir(r,t)}catch(o){console.error(o)}},mw=async(s,t)=>{if(!Ge)return;const r=Gt(Ge,`rooms/${s}/realms/${t}`);try{await Ci(r)}catch(o){console.error(o)}},gw=async(s,t)=>{if(!Ge||!t.id)return;const r=Gt(Ge,`rooms/${s}/worlds/${t.id}`);try{await ir(r,t)}catch(o){console.error(o)}},xw=async(s,t)=>{if(!Ge)return;const r=Gt(Ge,`rooms/${s}/worlds/${t}`);try{await Ci(r)}catch(o){console.error(o)}},vw=async(s,t)=>{if(!Ge||!t.id)return;const r=Gt(Ge,`rooms/${s}/notes/${t.id}`);try{await ir(r,t)}catch(o){console.error(o)}},yw=async(s,t)=>{if(!Ge)return;const r=Gt(Ge,`rooms/${s}/notes/${t}`);try{await Ci(r)}catch(o){console.error(o)}},_w=async(s,t)=>{if(!Ge||!t.id)return;const r=Gt(Ge,`rooms/${s}/rpSessions/${t.id}`);try{await ir(r,t)}catch(o){console.error(o)}},ww=async(s,t)=>{if(!Ge)return;const r=Gt(Ge,`rooms/${s}/rpSessions/${t}`);try{await Ci(r)}catch(o){console.error(o)}},mp=async(s,t,r=!1)=>{if(!Ge)return;const a=Gt(Ge,`rooms/${s}/${r?"availableHiddenTags":"availableTags"}`);try{await ir(a,t)}catch(d){console.error("Error saving tags:",d)}},gp="rp_haven_master_data_v3",At="global_chronicles_main",Ft=(s,t=[])=>Array.isArray(s)?s:t,bw=()=>{const[s,t]=B.useState("characters"),[r,o]=B.useState(null),[a,d]=B.useState(""),[h,p]=B.useState({}),[g,v]=B.useState(!1),[k,y]=B.useState(!1),[x,I]=B.useState(null),[D,H]=B.useState(!1),[Z,le]=B.useState(!1),[re,je]=B.useState(!0),[ue,Te]=B.useState(!1),[q,L]=B.useState(oc),[R,ke]=B.useState(()=>{const M=localStorage.getItem(gp);if(M)try{const P=JSON.parse(M);return{characters:Ft(P.characters,oc),realms:Ft(P.realms),worlds:Ft(P.worlds),notes:Ft(P.notes),availableTags:Ft(P.availableTags,vh),availableHiddenTags:Ft(P.availableHiddenTags,yh),rpSessions:Ft(P.rpSessions)}}catch(P){console.error("Failed to parse storage",P)}return{characters:oc,realms:[],worlds:[],notes:[],availableTags:vh,availableHiddenTags:yh,rpSessions:[]}});B.useEffect(()=>{L(R.characters)},[R.characters]),B.useEffect(()=>{if(re){const M=uw(At,P=>{P&&ke(Q=>({...Q,...P}))});return()=>M()}},[re]);const ie=()=>{const M=R.characters.filter(P=>{const Q=P.name.toLowerCase().includes(a.toLowerCase()),pe=Object.entries(h).every(([Se,T])=>{const J=(P.tags||[]).includes(Se)||(P.hiddenTags||[]).includes(Se);return T==="include"?J:T==="exclude"?!J:!0});return Q&&pe});Te(!0),setTimeout(()=>{L(M),requestAnimationFrame(()=>{Te(!1)})},600)};B.useEffect(()=>{ie()},[a,h,R.characters]);const z=M=>{ke(M),H(!0),setTimeout(()=>H(!1),2e3);try{const P=JSON.parse(JSON.stringify(M));P.characters.forEach(Q=>{Q.imageUrl&&Q.imageUrl.startsWith("data:")&&(Q.imageUrl="")}),P.worlds.forEach(Q=>{Q.imageUrl&&Q.imageUrl.startsWith("data:")&&(Q.imageUrl="")}),P.realms.forEach(Q=>{Q.imageUrl&&Q.imageUrl.startsWith("data:")&&(Q.imageUrl="")}),localStorage.setItem(gp,JSON.stringify(P))}catch(P){console.warn("Local storage quota exceeded.",P)}},ee=M=>{const P=R.characters.some(Q=>Q.id===M.id)?R.characters.map(Q=>Q.id===M.id?M:Q):[...R.characters,M];z({...R,characters:P}),y(!1),I(null),re&&fw(At,M)},be=M=>{if(window.confirm("    ?")){const P=R.characters.filter(Q=>Q.id!==M);z({...R,characters:P}),r===M&&o(null),re&&hw(At,M)}},$e=M=>{re&&(M.forEach(P=>{const Q=R.notes.find(pe=>pe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&vw(At,P)}),R.notes.forEach(P=>{M.find(Q=>Q.id===P.id)||yw(At,P.id)})),z({...R,notes:M})},tt=M=>{re&&(M.forEach(P=>{const Q=R.realms.find(pe=>pe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&pw(At,P)}),R.realms.forEach(P=>{M.find(Q=>Q.id===P.id)||mw(At,P.id)})),z({...R,realms:M})},Ye=M=>{re&&(M.forEach(P=>{const Q=R.worlds.find(pe=>pe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&gw(At,P)}),R.worlds.forEach(P=>{M.find(Q=>Q.id===P.id)||xw(At,P.id)})),z({...R,worlds:M})},Fe=M=>{re&&(M.forEach(P=>{const Q=R.rpSessions.find(pe=>pe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&_w(At,P)}),R.rpSessions.forEach(P=>{M.find(Q=>Q.id===P.id)||ww(At,P.id)})),z({...R,rpSessions:M})},V=M=>{z({...R,availableTags:M}),re&&mp(At,M,!1)},X=M=>{z({...R,availableHiddenTags:M}),re&&mp(At,M,!0)},w=M=>{p(P=>{const Q=P[M]||"none";let pe="none";Q==="none"?pe="include":Q==="include"?pe="exclude":pe="none";const Se={...P};return pe==="none"?delete Se[M]:Se[M]=pe,Se})},O=()=>{d(""),p({})},te=Object.keys(h).length;return c.jsxs(Zg,{activeTab:s,setActiveTab:M=>{t(M),o(null),p({})},isAdmin:g,onToggleAdmin:()=>v(!g),onOpenSync:()=>le(!0),isSyncActive:re,onDownloadDB:()=>{const M=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),P=URL.createObjectURL(M),Q=document.createElement("a");Q.href=P,Q.download=`rp-vault-${new Date().toISOString().slice(0,10)}.json`,Q.click()},onUploadDB:M=>{const P=JSON.parse(M);if(window.confirm("  ?")){const Q={characters:Ft(P.characters),realms:Ft(P.realms),worlds:Ft(P.worlds),notes:Ft(P.notes),availableTags:Ft(P.availableTags),availableHiddenTags:Ft(P.availableHiddenTags),rpSessions:Ft(P.rpSessions)};z(Q),re&&dw(At,Q)}},children:[c.jsx("div",{className:`fixed top-20 md:top-6 right-6 z-[90] transition-all duration-500 pointer-events-none ${D?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:c.jsx("div",{className:"bg-emerald-950/80 border border-emerald-500/30 backdrop-blur-2xl px-5 py-2.5 rounded-2xl flex items-center gap-3 shadow-2xl",children:c.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] font-black text-emerald-400",children:""})})}),Z&&c.jsx(ux,{isConnected:re,onConnect:()=>je(!0),onDisconnect:()=>je(!1),onClose:()=>le(!1)}),c.jsxs("div",{className:"animate-tab-switch",children:[s==="characters"&&c.jsx("div",{className:"space-y-8",children:r?c.jsx(tx,{character:R.characters.find(M=>M.id===r),isAdmin:g,allCharacters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,worlds:R.worlds,notes:R.notes,onBack:()=>o(null),onSave:ee,onSelectCharacter:o}):c.jsxs("div",{className:"animate-reveal-list space-y-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6",children:[c.jsx("input",{type:"text",placeholder:"  ...",value:a,onChange:M=>d(M.target.value),className:"w-full bg-transparent border-b border-stone-900 text-3xl outline-none font-serif italic py-4"}),g&&c.jsx("button",{onClick:()=>{I(null),y(!0)},className:"bg-white text-black px-8 py-3.5 rounded-full text-[10px] uppercase font-black transition-all shadow-xl",children:" "})]}),(R.availableTags.length>0||R.availableHiddenTags.length>0)&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-4 bg-[#0f0f0f]/30 border border-stone-900/50 rounded-2xl",children:[c.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2",children:":"}),R.availableTags.map(M=>{const P=h[M]||"none";return c.jsxs("button",{onClick:()=>w(M),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${P==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":P==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[P==="include"&&c.jsx("span",{className:"text-emerald-500 font-black",children:"+"}),P==="exclude"&&c.jsx("span",{className:"text-red-500 font-black",children:""}),M]},M)}),R.availableHiddenTags.map(M=>{const P=h[M]||"none";return c.jsxs("button",{onClick:()=>w(M),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${P==="include"?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":P==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-amber-500 hover:border-amber-900/30"}`,children:[P==="include"&&c.jsx("span",{className:"text-amber-500 font-black",children:"+"}),P==="exclude"&&c.jsx("span",{className:"text-red-500 font-black",children:""}),M]},M)}),(te>0||a)&&c.jsx("button",{onClick:O,className:"ml-auto text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:" "})]}),c.jsxs("div",{className:"flex flex-wrap -mx-5 relative min-h-[400px]",children:[q.map((M,P)=>c.jsx(ex,{character:M,isVisible:!ue,staggerIndex:P,onClick:o},M.id)),q.length===0&&!ue&&c.jsx("div",{className:"w-full py-20 text-center text-stone-700 italic font-serif animate-in fade-in duration-700",children:"       ..."})]})]})}),s==="connections"&&c.jsx(ox,{characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,filterStates:h,onToggleTag:w,onClearFilters:()=>p({}),onSelectCharacter:M=>{o(M),t("characters")}}),s==="roleplay"&&c.jsx(cx,{sessions:R.rpSessions,characters:R.characters,onUpdate:Fe,isAdmin:g}),s==="worlds"&&c.jsx(lx,{realms:R.realms,worlds:R.worlds,characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onUpdateRealms:tt,onUpdateWorlds:Ye,isAdmin:g}),s==="notes"&&c.jsx(ax,{notes:R.notes,characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onUpdate:$e,isAdmin:g}),s==="admin"&&g&&c.jsx(rx,{characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onDelete:be,onEdit:M=>{I(M),y(!0)},onAdd:()=>{I(null),y(!0)},onUpdateTags:V,onUpdateHiddenTags:X,onDownloadDB:()=>{},onUploadDB:()=>{}})]}),k&&c.jsx(nx,{initialData:x,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onSave:ee,onClose:()=>y(!1)})]})},Qm=document.getElementById("root");if(!Qm)throw new Error("Could not find root element to mount to");const Nw=Jg.createRoot(Qm);Nw.render(c.jsx(Vg.StrictMode,{children:c.jsx(bw,{})}));
