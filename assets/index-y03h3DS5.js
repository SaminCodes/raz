(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();function yp(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var rc={exports:{}},Js={},sc={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af;function Yg(){if(af)return Ae;af=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.iterator;function y(b){return b===null||typeof b!="object"?null:(b=v&&b[v]||b["@@iterator"],typeof b=="function"?b:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,B={};function Z(b,A,te){this.props=b,this.context=A,this.refs=B,this.updater=te||E}Z.prototype.isReactComponent={},Z.prototype.setState=function(b,A){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,A,"setState")},Z.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function ce(){}ce.prototype=Z.prototype;function ee(b,A,te){this.props=b,this.context=A,this.refs=B,this.updater=te||E}var ye=ee.prototype=new ce;ye.constructor=ee,O(ye,Z.prototype),ye.isPureReactComponent=!0;var oe=Array.isArray,We=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function R(b,A,te){var M,P={},Q=null,xe=null;if(A!=null)for(M in A.ref!==void 0&&(xe=A.ref),A.key!==void 0&&(Q=""+A.key),A)We.call(A,M)&&!L.hasOwnProperty(M)&&(P[M]=A[M]);var Ce=arguments.length-2;if(Ce===1)P.children=te;else if(1<Ce){for(var Te=Array(Ce),Xe=0;Xe<Ce;Xe++)Te[Xe]=arguments[Xe+2];P.children=Te}if(b&&b.defaultProps)for(M in Ce=b.defaultProps,Ce)P[M]===void 0&&(P[M]=Ce[M]);return{$$typeof:s,type:b,key:Q,ref:xe,props:P,_owner:K.current}}function me(b,A){return{$$typeof:s,type:b.type,key:A,ref:b.ref,props:b.props,_owner:b._owner}}function le(b){return typeof b=="object"&&b!==null&&b.$$typeof===s}function ke(b){var A={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(te){return A[te]})}var fe=/\/+/g;function D(b,A){return typeof b=="object"&&b!==null&&b.key!=null?ke(""+b.key):A.toString(36)}function je(b,A,te,M,P){var Q=typeof b;(Q==="undefined"||Q==="boolean")&&(b=null);var xe=!1;if(b===null)xe=!0;else switch(Q){case"string":case"number":xe=!0;break;case"object":switch(b.$$typeof){case s:case t:xe=!0}}if(xe)return xe=b,P=P(xe),b=M===""?"."+D(xe,0):M,oe(P)?(te="",b!=null&&(te=b.replace(fe,"$&/")+"/"),je(P,A,te,"",function(Xe){return Xe})):P!=null&&(le(P)&&(P=me(P,te+(!P.key||xe&&xe.key===P.key?"":(""+P.key).replace(fe,"$&/")+"/")+b)),A.push(P)),1;if(xe=0,M=M===""?".":M+":",oe(b))for(var Ce=0;Ce<b.length;Ce++){Q=b[Ce];var Te=M+D(Q,Ce);xe+=je(Q,A,te,Te,P)}else if(Te=y(b),typeof Te=="function")for(b=Te.call(b),Ce=0;!(Q=b.next()).done;)Q=Q.value,Te=M+D(Q,Ce++),xe+=je(Q,A,te,Te,P);else if(Q==="object")throw A=String(b),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return xe}function Le(b,A,te){if(b==null)return b;var M=[],P=0;return je(b,M,"","",function(Q){return A.call(te,Q,P++)}),M}function Me(b){if(b._status===-1){var A=b._result;A=A(),A.then(function(te){(b._status===0||b._status===-1)&&(b._status=1,b._result=te)},function(te){(b._status===0||b._status===-1)&&(b._status=2,b._result=te)}),b._status===-1&&(b._status=0,b._result=A)}if(b._status===1)return b._result.default;throw b._result}var Ie={current:null},V={transition:null},q={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};return Ae.Children={map:Le,forEach:function(b,A,te){Le(b,function(){A.apply(this,arguments)},te)},count:function(b){var A=0;return Le(b,function(){A++}),A},toArray:function(b){return Le(b,function(A){return A})||[]},only:function(b){if(!le(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ae.Component=Z,Ae.Fragment=r,Ae.Profiler=c,Ae.PureComponent=ee,Ae.StrictMode=o,Ae.Suspense=g,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ae.cloneElement=function(b,A,te){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var M=O({},b.props),P=b.key,Q=b.ref,xe=b._owner;if(A!=null){if(A.ref!==void 0&&(Q=A.ref,xe=K.current),A.key!==void 0&&(P=""+A.key),b.type&&b.type.defaultProps)var Ce=b.type.defaultProps;for(Te in A)We.call(A,Te)&&!L.hasOwnProperty(Te)&&(M[Te]=A[Te]===void 0&&Ce!==void 0?Ce[Te]:A[Te])}var Te=arguments.length-2;if(Te===1)M.children=te;else if(1<Te){Ce=Array(Te);for(var Xe=0;Xe<Te;Xe++)Ce[Xe]=arguments[Xe+2];M.children=Ce}return{$$typeof:s,type:b.type,key:P,ref:Q,props:M,_owner:xe}},Ae.createContext=function(b){return b={$$typeof:f,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:d,_context:b},b.Consumer=b},Ae.createElement=R,Ae.createFactory=function(b){var A=R.bind(null,b);return A.type=b,A},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(b){return{$$typeof:p,render:b}},Ae.isValidElement=le,Ae.lazy=function(b){return{$$typeof:w,_payload:{_status:-1,_result:b},_init:Me}},Ae.memo=function(b,A){return{$$typeof:x,type:b,compare:A===void 0?null:A}},Ae.startTransition=function(b){var A=V.transition;V.transition={};try{b()}finally{V.transition=A}},Ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ae.useCallback=function(b,A){return Ie.current.useCallback(b,A)},Ae.useContext=function(b){return Ie.current.useContext(b)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(b){return Ie.current.useDeferredValue(b)},Ae.useEffect=function(b,A){return Ie.current.useEffect(b,A)},Ae.useId=function(){return Ie.current.useId()},Ae.useImperativeHandle=function(b,A,te){return Ie.current.useImperativeHandle(b,A,te)},Ae.useInsertionEffect=function(b,A){return Ie.current.useInsertionEffect(b,A)},Ae.useLayoutEffect=function(b,A){return Ie.current.useLayoutEffect(b,A)},Ae.useMemo=function(b,A){return Ie.current.useMemo(b,A)},Ae.useReducer=function(b,A,te){return Ie.current.useReducer(b,A,te)},Ae.useRef=function(b){return Ie.current.useRef(b)},Ae.useState=function(b){return Ie.current.useState(b)},Ae.useSyncExternalStore=function(b,A,te){return Ie.current.useSyncExternalStore(b,A,te)},Ae.useTransition=function(){return Ie.current.useTransition()},Ae.version="18.2.0",Ae}var cf;function zc(){return cf||(cf=1,sc.exports=Yg()),sc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf;function Qg(){if(uf)return Js;uf=1;var s=zc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,x){var w,v={},y=null,E=null;x!==void 0&&(y=""+x),g.key!==void 0&&(y=""+g.key),g.ref!==void 0&&(E=g.ref);for(w in g)o.call(g,w)&&!d.hasOwnProperty(w)&&(v[w]=g[w]);if(p&&p.defaultProps)for(w in g=p.defaultProps,g)v[w]===void 0&&(v[w]=g[w]);return{$$typeof:t,type:p,key:y,ref:E,props:v,_owner:c.current}}return Js.Fragment=r,Js.jsx=f,Js.jsxs=f,Js}var df;function Gg(){return df||(df=1,rc.exports=Qg()),rc.exports}var a=Gg(),F=zc();const _p=yp(F);var Oo={},ic={exports:{}},zt={},oc={exports:{}},lc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf;function Xg(){return hf||(hf=1,(function(s){function t(V,q){var b=V.length;V.push(q);e:for(;0<b;){var A=b-1>>>1,te=V[A];if(0<c(te,q))V[A]=q,V[b]=te,b=A;else break e}}function r(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var q=V[0],b=V.pop();if(b!==q){V[0]=b;e:for(var A=0,te=V.length,M=te>>>1;A<M;){var P=2*(A+1)-1,Q=V[P],xe=P+1,Ce=V[xe];if(0>c(Q,b))xe<te&&0>c(Ce,Q)?(V[A]=Ce,V[xe]=b,A=xe):(V[A]=Q,V[P]=b,A=P);else if(xe<te&&0>c(Ce,b))V[A]=Ce,V[xe]=b,A=xe;else break e}}return q}function c(V,q){var b=V.sortIndex-q.sortIndex;return b!==0?b:V.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var g=[],x=[],w=1,v=null,y=3,E=!1,O=!1,B=!1,Z=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ye(V){for(var q=r(x);q!==null;){if(q.callback===null)o(x);else if(q.startTime<=V)o(x),q.sortIndex=q.expirationTime,t(g,q);else break;q=r(x)}}function oe(V){if(B=!1,ye(V),!O)if(r(g)!==null)O=!0,Me(We);else{var q=r(x);q!==null&&Ie(oe,q.startTime-V)}}function We(V,q){O=!1,B&&(B=!1,ce(R),R=-1),E=!0;var b=y;try{for(ye(q),v=r(g);v!==null&&(!(v.expirationTime>q)||V&&!ke());){var A=v.callback;if(typeof A=="function"){v.callback=null,y=v.priorityLevel;var te=A(v.expirationTime<=q);q=s.unstable_now(),typeof te=="function"?v.callback=te:v===r(g)&&o(g),ye(q)}else o(g);v=r(g)}if(v!==null)var M=!0;else{var P=r(x);P!==null&&Ie(oe,P.startTime-q),M=!1}return M}finally{v=null,y=b,E=!1}}var K=!1,L=null,R=-1,me=5,le=-1;function ke(){return!(s.unstable_now()-le<me)}function fe(){if(L!==null){var V=s.unstable_now();le=V;var q=!0;try{q=L(!0,V)}finally{q?D():(K=!1,L=null)}}else K=!1}var D;if(typeof ee=="function")D=function(){ee(fe)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Le=je.port2;je.port1.onmessage=fe,D=function(){Le.postMessage(null)}}else D=function(){Z(fe,0)};function Me(V){L=V,K||(K=!0,D())}function Ie(V,q){R=Z(function(){V(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(V){V.callback=null},s.unstable_continueExecution=function(){O||E||(O=!0,Me(We))},s.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<V?Math.floor(1e3/V):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return r(g)},s.unstable_next=function(V){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var b=y;y=q;try{return V()}finally{y=b}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var b=y;y=V;try{return q()}finally{y=b}},s.unstable_scheduleCallback=function(V,q,b){var A=s.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?A+b:A):b=A,V){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=b+te,V={id:w++,callback:q,priorityLevel:V,startTime:b,expirationTime:te,sortIndex:-1},b>A?(V.sortIndex=b,t(x,V),r(g)===null&&V===r(x)&&(B?(ce(R),R=-1):B=!0,Ie(oe,b-A))):(V.sortIndex=te,t(g,V),O||E||(O=!0,Me(We))),V},s.unstable_shouldYield=ke,s.unstable_wrapCallback=function(V){var q=y;return function(){var b=y;y=q;try{return V.apply(this,arguments)}finally{y=b}}}})(lc)),lc}var ff;function qg(){return ff||(ff=1,oc.exports=Xg()),oc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf;function Kg(){if(pf)return zt;pf=1;var s=zc(),t=qg();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function d(e,n){f(e,n),f(e+"Capture",n)}function f(e,n){for(c[e]=n,e=0;e<n.length;e++)o.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},v={};function y(e){return g.call(v,e)?!0:g.call(w,e)?!1:x.test(e)?v[e]=!0:(w[e]=!0,!1)}function E(e,n,i,l){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function O(e,n,i,l){if(n===null||typeof n>"u"||E(e,n,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function B(e,n,i,l,u,h,m){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=n,this.sanitizeURL=h,this.removeEmptyString=m}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Z[e]=new B(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Z[n]=new B(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Z[e]=new B(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Z[e]=new B(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Z[e]=new B(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Z[e]=new B(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Z[e]=new B(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Z[e]=new B(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Z[e]=new B(e,5,!1,e.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function ee(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(ce,ee);Z[n]=new B(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(ce,ee);Z[n]=new B(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(ce,ee);Z[n]=new B(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Z[e]=new B(e,1,!1,e.toLowerCase(),null,!1,!1)}),Z.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Z[e]=new B(e,1,!1,e.toLowerCase(),null,!0,!0)});function ye(e,n,i,l){var u=Z.hasOwnProperty(n)?Z[n]:null;(u!==null?u.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(O(n,i,u,l)&&(i=null),l||u===null?y(n)&&(i===null?e.removeAttribute(n):e.setAttribute(n,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(n=u.attributeName,l=u.attributeNamespace,i===null?e.removeAttribute(n):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,l?e.setAttributeNS(l,n,i):e.setAttribute(n,i))))}var oe=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,We=Symbol.for("react.element"),K=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),ke=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),V=Symbol.iterator;function q(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var b=Object.assign,A;function te(e){if(A===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);A=n&&n[1]||""}return`
`+A+e}var M=!1;function P(e,n){if(!e||M)return"";M=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(I){var l=I}Reflect.construct(e,[],n)}else{try{n.call()}catch(I){l=I}e.call(n.prototype)}else{try{throw Error()}catch(I){l=I}e()}}catch(I){if(I&&l&&typeof I.stack=="string"){for(var u=I.stack.split(`
`),h=l.stack.split(`
`),m=u.length-1,_=h.length-1;1<=m&&0<=_&&u[m]!==h[_];)_--;for(;1<=m&&0<=_;m--,_--)if(u[m]!==h[_]){if(m!==1||_!==1)do if(m--,_--,0>_||u[m]!==h[_]){var N=`
`+u[m].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=m&&0<=_);break}}}finally{M=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?te(e):""}function Q(e){switch(e.tag){case 5:return te(e.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return e=P(e.type,!1),e;case 11:return e=P(e.type.render,!1),e;case 1:return e=P(e.type,!0),e;default:return""}}function xe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case K:return"Portal";case me:return"Profiler";case R:return"StrictMode";case D:return"Suspense";case je:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ke:return(e.displayName||"Context")+".Consumer";case le:return(e._context.displayName||"Context")+".Provider";case fe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Le:return n=e.displayName||null,n!==null?n:xe(e.type)||"Memo";case Me:n=e._payload,e=e._init;try{return xe(e(n))}catch{}}return null}function Ce(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(n);case 8:return n===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Te(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xe(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function et(e){var n=Xe(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,h=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(m){l=""+m,h.call(this,m)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(m){l=""+m},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function T(e){e._valueTracker||(e._valueTracker=et(e))}function J(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=Xe(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function he(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function C(e,n){var i=n.checked;return b({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function ne(e,n){var i=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;i=Te(n.value!=null?n.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function ge(e,n){n=n.checked,n!=null&&ye(e,"checked",n,!1)}function Ee(e,n){ge(e,n);var i=Te(n.value),l=n.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?$e(e,n.type,i):n.hasOwnProperty("defaultValue")&&$e(e,n.type,Te(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Se(e,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,i||n===e.value||(e.value=n),e.defaultValue=n}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function $e(e,n,i){(n!=="number"||he(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Pe=Array.isArray;function Qe(e,n,i,l){if(e=e.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=n.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Te(i),n=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function it(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return b({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function z(e,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(r(92));if(Pe(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}n==null&&(n=""),i=n}e._wrapperState={initialValue:Te(i)}}function se(e,n){var i=Te(n.value),l=Te(n.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),n.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function ve(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function G(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?G(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pe,Re=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,l,u){MSApp.execUnsafeLocalFunction(function(){return e(n,i,l,u)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(pe=pe||document.createElement("div"),pe.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Be(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nn=["Webkit","ms","Moz","O"];Object.keys(Ue).forEach(function(e){nn.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ue[n]=Ue[e]})});function Vt(e,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Ue.hasOwnProperty(e)&&Ue[e]?(""+n).trim():n+"px"}function lr(e,n){e=e.style;for(var i in n)if(n.hasOwnProperty(i)){var l=i.indexOf("--")===0,u=Vt(i,n[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,u):e[i]=u}}var ar=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ml(e,n){if(n){if(ar[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function gl(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xl=null;function vl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yl=null,Rr=null,Pr=null;function Nu(e){if(e=As(e)){if(typeof yl!="function")throw Error(r(280));var n=e.stateNode;n&&(n=qi(n),yl(e.stateNode,e.type,n))}}function ku(e){Rr?Pr?Pr.push(e):Pr=[e]:Rr=e}function Cu(){if(Rr){var e=Rr,n=Pr;if(Pr=Rr=null,Nu(e),n)for(e=0;e<n.length;e++)Nu(n[e])}}function Su(e,n){return e(n)}function ju(){}var _l=!1;function Eu(e,n,i){if(_l)return e(n,i);_l=!0;try{return Su(e,n,i)}finally{_l=!1,(Rr!==null||Pr!==null)&&(ju(),Cu())}}function gs(e,n){var i=e.stateNode;if(i===null)return null;var l=qi(i);if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var wl=!1;if(p)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){wl=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{wl=!1}function Jm(e,n,i,l,u,h,m,_,N){var I=Array.prototype.slice.call(arguments,3);try{n.apply(i,I)}catch(W){this.onError(W)}}var vs=!1,Ei=null,Ii=!1,bl=null,Zm={onError:function(e){vs=!0,Ei=e}};function e0(e,n,i,l,u,h,m,_,N){vs=!1,Ei=null,Jm.apply(Zm,arguments)}function t0(e,n,i,l,u,h,m,_,N){if(e0.apply(this,arguments),vs){if(vs){var I=Ei;vs=!1,Ei=null}else throw Error(r(198));Ii||(Ii=!0,bl=I)}}function cr(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function Iu(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Tu(e){if(cr(e)!==e)throw Error(r(188))}function n0(e){var n=e.alternate;if(!n){if(n=cr(e),n===null)throw Error(r(188));return n!==e?null:e}for(var i=e,l=n;;){var u=i.return;if(u===null)break;var h=u.alternate;if(h===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===i)return Tu(u),e;if(h===l)return Tu(u),n;h=h.sibling}throw Error(r(188))}if(i.return!==l.return)i=u,l=h;else{for(var m=!1,_=u.child;_;){if(_===i){m=!0,i=u,l=h;break}if(_===l){m=!0,l=u,i=h;break}_=_.sibling}if(!m){for(_=h.child;_;){if(_===i){m=!0,i=h,l=u;break}if(_===l){m=!0,l=h,i=u;break}_=_.sibling}if(!m)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:n}function Ru(e){return e=n0(e),e!==null?Pu(e):null}function Pu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Pu(e);if(n!==null)return n;e=e.sibling}return null}var Lu=t.unstable_scheduleCallback,Mu=t.unstable_cancelCallback,r0=t.unstable_shouldYield,s0=t.unstable_requestPaint,ut=t.unstable_now,i0=t.unstable_getCurrentPriorityLevel,Nl=t.unstable_ImmediatePriority,Du=t.unstable_UserBlockingPriority,Ti=t.unstable_NormalPriority,o0=t.unstable_LowPriority,Ou=t.unstable_IdlePriority,Ri=null,mn=null;function l0(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Ri,e,void 0,(e.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:u0,a0=Math.log,c0=Math.LN2;function u0(e){return e>>>=0,e===0?32:31-(a0(e)/c0|0)|0}var Pi=64,Li=4194304;function ys(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mi(e,n){var i=e.pendingLanes;if(i===0)return 0;var l=0,u=e.suspendedLanes,h=e.pingedLanes,m=i&268435455;if(m!==0){var _=m&~u;_!==0?l=ys(_):(h&=m,h!==0&&(l=ys(h)))}else m=i&~u,m!==0?l=ys(m):h!==0&&(l=ys(h));if(l===0)return 0;if(n!==0&&n!==l&&(n&u)===0&&(u=l&-l,h=n&-n,u>=h||u===16&&(h&4194240)!==0))return n;if((l&4)!==0&&(l|=i&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)i=31-rn(n),u=1<<i,l|=e[i],n&=~u;return l}function d0(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h0(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-rn(h),_=1<<m,N=u[m];N===-1?((_&i)===0||(_&l)!==0)&&(u[m]=d0(_,n)):N<=n&&(e.expiredLanes|=_),h&=~_}}function kl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Au(){var e=Pi;return Pi<<=1,(Pi&4194240)===0&&(Pi=64),e}function Cl(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function _s(e,n,i){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-rn(n),e[n]=i}function f0(e,n){var i=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-rn(i),h=1<<u;n[u]=0,l[u]=-1,e[u]=-1,i&=~h}}function Sl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-rn(i),u=1<<l;u&n|e[l]&n&&(e[l]|=n),i&=~u}}var Ge=0;function Fu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var zu,jl,$u,Uu,Wu,El=!1,Di=[],Dn=null,On=null,An=null,ws=new Map,bs=new Map,Fn=[],p0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bu(e,n){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":ws.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(n.pointerId)}}function Ns(e,n,i,l,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:h,targetContainers:[u]},n!==null&&(n=As(n),n!==null&&jl(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function m0(e,n,i,l,u){switch(n){case"focusin":return Dn=Ns(Dn,e,n,i,l,u),!0;case"dragenter":return On=Ns(On,e,n,i,l,u),!0;case"mouseover":return An=Ns(An,e,n,i,l,u),!0;case"pointerover":var h=u.pointerId;return ws.set(h,Ns(ws.get(h)||null,e,n,i,l,u)),!0;case"gotpointercapture":return h=u.pointerId,bs.set(h,Ns(bs.get(h)||null,e,n,i,l,u)),!0}return!1}function Hu(e){var n=ur(e.target);if(n!==null){var i=cr(n);if(i!==null){if(n=i.tag,n===13){if(n=Iu(i),n!==null){e.blockedOn=n,Wu(e.priority,function(){$u(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oi(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Tl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);xl=l,i.target.dispatchEvent(l),xl=null}else return n=As(i),n!==null&&jl(n),e.blockedOn=i,!1;n.shift()}return!0}function Vu(e,n,i){Oi(e)&&i.delete(n)}function g0(){El=!1,Dn!==null&&Oi(Dn)&&(Dn=null),On!==null&&Oi(On)&&(On=null),An!==null&&Oi(An)&&(An=null),ws.forEach(Vu),bs.forEach(Vu)}function ks(e,n){e.blockedOn===n&&(e.blockedOn=null,El||(El=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,g0)))}function Cs(e){function n(u){return ks(u,e)}if(0<Di.length){ks(Di[0],e);for(var i=1;i<Di.length;i++){var l=Di[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Dn!==null&&ks(Dn,e),On!==null&&ks(On,e),An!==null&&ks(An,e),ws.forEach(n),bs.forEach(n),i=0;i<Fn.length;i++)l=Fn[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<Fn.length&&(i=Fn[0],i.blockedOn===null);)Hu(i),i.blockedOn===null&&Fn.shift()}var Lr=oe.ReactCurrentBatchConfig,Ai=!0;function x0(e,n,i,l){var u=Ge,h=Lr.transition;Lr.transition=null;try{Ge=1,Il(e,n,i,l)}finally{Ge=u,Lr.transition=h}}function v0(e,n,i,l){var u=Ge,h=Lr.transition;Lr.transition=null;try{Ge=4,Il(e,n,i,l)}finally{Ge=u,Lr.transition=h}}function Il(e,n,i,l){if(Ai){var u=Tl(e,n,i,l);if(u===null)Ql(e,n,l,Fi,i),Bu(e,l);else if(m0(u,e,n,i,l))l.stopPropagation();else if(Bu(e,l),n&4&&-1<p0.indexOf(e)){for(;u!==null;){var h=As(u);if(h!==null&&zu(h),h=Tl(e,n,i,l),h===null&&Ql(e,n,l,Fi,i),h===u)break;u=h}u!==null&&l.stopPropagation()}else Ql(e,n,l,null,i)}}var Fi=null;function Tl(e,n,i,l){if(Fi=null,e=vl(l),e=ur(e),e!==null)if(n=cr(e),n===null)e=null;else if(i=n.tag,i===13){if(e=Iu(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Fi=e,null}function Yu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i0()){case Nl:return 1;case Du:return 4;case Ti:case o0:return 16;case Ou:return 536870912;default:return 16}default:return 16}}var zn=null,Rl=null,zi=null;function Qu(){if(zi)return zi;var e,n=Rl,i=n.length,l,u="value"in zn?zn.value:zn.textContent,h=u.length;for(e=0;e<i&&n[e]===u[e];e++);var m=i-e;for(l=1;l<=m&&n[i-l]===u[h-l];l++);return zi=u.slice(e,1<l?1-l:void 0)}function $i(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ui(){return!0}function Gu(){return!1}function Yt(e){function n(i,l,u,h,m){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ui:Gu,this.isPropagationStopped=Gu,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),n}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=Yt(Mr),Ss=b({},Mr,{view:0,detail:0}),y0=Yt(Ss),Ll,Ml,js,Wi=b({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==js&&(js&&e.type==="mousemove"?(Ll=e.screenX-js.screenX,Ml=e.screenY-js.screenY):Ml=Ll=0,js=e),Ll)},movementY:function(e){return"movementY"in e?e.movementY:Ml}}),Xu=Yt(Wi),_0=b({},Wi,{dataTransfer:0}),w0=Yt(_0),b0=b({},Ss,{relatedTarget:0}),Dl=Yt(b0),N0=b({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),k0=Yt(N0),C0=b({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S0=Yt(C0),j0=b({},Mr,{data:0}),qu=Yt(j0),E0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=T0[e])?!!n[e]:!1}function Ol(){return R0}var P0=b({},Ss,{key:function(e){if(e.key){var n=E0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=$i(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?I0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(e){return e.type==="keypress"?$i(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$i(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),L0=Yt(P0),M0=b({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ku=Yt(M0),D0=b({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),O0=Yt(D0),A0=b({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),F0=Yt(A0),z0=b({},Wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$0=Yt(z0),U0=[9,13,27,32],Al=p&&"CompositionEvent"in window,Es=null;p&&"documentMode"in document&&(Es=document.documentMode);var W0=p&&"TextEvent"in window&&!Es,Ju=p&&(!Al||Es&&8<Es&&11>=Es),Zu=" ",ed=!1;function td(e,n){switch(e){case"keyup":return U0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function B0(e,n){switch(e){case"compositionend":return nd(n);case"keypress":return n.which!==32?null:(ed=!0,Zu);case"textInput":return e=n.data,e===Zu&&ed?null:e;default:return null}}function H0(e,n){if(Dr)return e==="compositionend"||!Al&&td(e,n)?(e=Qu(),zi=Rl=zn=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ju&&n.locale!=="ko"?null:n.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!V0[e.type]:n==="textarea"}function sd(e,n,i,l){ku(l),n=Qi(n,"onChange"),0<n.length&&(i=new Pl("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var Is=null,Ts=null;function Y0(e){bd(e,0)}function Bi(e){var n=$r(e);if(J(n))return e}function Q0(e,n){if(e==="change")return n}var id=!1;if(p){var Fl;if(p){var zl="oninput"in document;if(!zl){var od=document.createElement("div");od.setAttribute("oninput","return;"),zl=typeof od.oninput=="function"}Fl=zl}else Fl=!1;id=Fl&&(!document.documentMode||9<document.documentMode)}function ld(){Is&&(Is.detachEvent("onpropertychange",ad),Ts=Is=null)}function ad(e){if(e.propertyName==="value"&&Bi(Ts)){var n=[];sd(n,Ts,e,vl(e)),Eu(Y0,n)}}function G0(e,n,i){e==="focusin"?(ld(),Is=n,Ts=i,Is.attachEvent("onpropertychange",ad)):e==="focusout"&&ld()}function X0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bi(Ts)}function q0(e,n){if(e==="click")return Bi(n)}function K0(e,n){if(e==="input"||e==="change")return Bi(n)}function J0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var sn=typeof Object.is=="function"?Object.is:J0;function Rs(e,n){if(sn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!g.call(n,u)||!sn(e[u],n[u]))return!1}return!0}function cd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ud(e,n){var i=cd(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=cd(i)}}function dd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?dd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function hd(){for(var e=window,n=he();n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=he(e.document)}return n}function $l(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Z0(e){var n=hd(),i=e.focusedElem,l=e.selectionRange;if(n!==i&&i&&i.ownerDocument&&dd(i.ownerDocument.documentElement,i)){if(l!==null&&$l(i)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(e,i.value.length);else if(e=(n=i.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,h=Math.min(l.start,u);l=l.end===void 0?h:Math.min(l.end,u),!e.extend&&h>l&&(u=l,l=h,h=u),u=ud(i,h);var m=ud(i,l);u&&m&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(n=n.createRange(),n.setStart(u.node,u.offset),e.removeAllRanges(),h>l?(e.addRange(n),e.extend(m.node,m.offset)):(n.setEnd(m.node,m.offset),e.addRange(n)))}}for(n=[],e=i;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)e=n[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eg=p&&"documentMode"in document&&11>=document.documentMode,Or=null,Ul=null,Ps=null,Wl=!1;function fd(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Wl||Or==null||Or!==he(l)||(l=Or,"selectionStart"in l&&$l(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ps&&Rs(Ps,l)||(Ps=l,l=Qi(Ul,"onSelect"),0<l.length&&(n=new Pl("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=Or)))}function Hi(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Ar={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},Bl={},pd={};p&&(pd=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function Vi(e){if(Bl[e])return Bl[e];if(!Ar[e])return e;var n=Ar[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in pd)return Bl[e]=n[i];return e}var md=Vi("animationend"),gd=Vi("animationiteration"),xd=Vi("animationstart"),vd=Vi("transitionend"),yd=new Map,_d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,n){yd.set(e,n),d(n,[e])}for(var Hl=0;Hl<_d.length;Hl++){var Vl=_d[Hl],tg=Vl.toLowerCase(),ng=Vl[0].toUpperCase()+Vl.slice(1);$n(tg,"on"+ng)}$n(md,"onAnimationEnd"),$n(gd,"onAnimationIteration"),$n(xd,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(vd,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function wd(e,n,i){var l=e.type||"unknown-event";e.currentTarget=i,t0(l,n,void 0,e),e.currentTarget=null}function bd(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],u=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var m=l.length-1;0<=m;m--){var _=l[m],N=_.instance,I=_.currentTarget;if(_=_.listener,N!==h&&u.isPropagationStopped())break e;wd(u,_,I),h=N}else for(m=0;m<l.length;m++){if(_=l[m],N=_.instance,I=_.currentTarget,_=_.listener,N!==h&&u.isPropagationStopped())break e;wd(u,_,I),h=N}}}if(Ii)throw e=bl,Ii=!1,bl=null,e}function tt(e,n){var i=n[Zl];i===void 0&&(i=n[Zl]=new Set);var l=e+"__bubble";i.has(l)||(Nd(n,e,2,!1),i.add(l))}function Yl(e,n,i){var l=0;n&&(l|=4),Nd(i,e,l,n)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function Ms(e){if(!e[Yi]){e[Yi]=!0,o.forEach(function(i){i!=="selectionchange"&&(rg.has(i)||Yl(i,!1,e),Yl(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Yi]||(n[Yi]=!0,Yl("selectionchange",!1,n))}}function Nd(e,n,i,l){switch(Yu(n)){case 1:var u=x0;break;case 4:u=v0;break;default:u=Il}i=u.bind(null,n,i,e),u=void 0,!wl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,i,{capture:!0,passive:u}):e.addEventListener(n,i,!0):u!==void 0?e.addEventListener(n,i,{passive:u}):e.addEventListener(n,i,!1)}function Ql(e,n,i,l,u){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var _=l.stateNode.containerInfo;if(_===u||_.nodeType===8&&_.parentNode===u)break;if(m===4)for(m=l.return;m!==null;){var N=m.tag;if((N===3||N===4)&&(N=m.stateNode.containerInfo,N===u||N.nodeType===8&&N.parentNode===u))return;m=m.return}for(;_!==null;){if(m=ur(_),m===null)return;if(N=m.tag,N===5||N===6){l=h=m;continue e}_=_.parentNode}}l=l.return}Eu(function(){var I=h,W=vl(i),H=[];e:{var $=yd.get(e);if($!==void 0){var re=Pl,ae=e;switch(e){case"keypress":if($i(i)===0)break e;case"keydown":case"keyup":re=L0;break;case"focusin":ae="focus",re=Dl;break;case"focusout":ae="blur",re=Dl;break;case"beforeblur":case"afterblur":re=Dl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=w0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=O0;break;case md:case gd:case xd:re=k0;break;case vd:re=F0;break;case"scroll":re=y0;break;case"wheel":re=$0;break;case"copy":case"cut":case"paste":re=S0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ku}var ue=(n&4)!==0,dt=!ue&&e==="scroll",S=ue?$!==null?$+"Capture":null:$;ue=[];for(var k=I,j;k!==null;){j=k;var Y=j.stateNode;if(j.tag===5&&Y!==null&&(j=Y,S!==null&&(Y=gs(k,S),Y!=null&&ue.push(Ds(k,Y,j)))),dt)break;k=k.return}0<ue.length&&($=new re($,ae,null,i,W),H.push({event:$,listeners:ue}))}}if((n&7)===0){e:{if($=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",$&&i!==xl&&(ae=i.relatedTarget||i.fromElement)&&(ur(ae)||ae[wn]))break e;if((re||$)&&($=W.window===W?W:($=W.ownerDocument)?$.defaultView||$.parentWindow:window,re?(ae=i.relatedTarget||i.toElement,re=I,ae=ae?ur(ae):null,ae!==null&&(dt=cr(ae),ae!==dt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=I),re!==ae)){if(ue=Xu,Y="onMouseLeave",S="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ue=Ku,Y="onPointerLeave",S="onPointerEnter",k="pointer"),dt=re==null?$:$r(re),j=ae==null?$:$r(ae),$=new ue(Y,k+"leave",re,i,W),$.target=dt,$.relatedTarget=j,Y=null,ur(W)===I&&(ue=new ue(S,k+"enter",ae,i,W),ue.target=j,ue.relatedTarget=dt,Y=ue),dt=Y,re&&ae)t:{for(ue=re,S=ae,k=0,j=ue;j;j=Fr(j))k++;for(j=0,Y=S;Y;Y=Fr(Y))j++;for(;0<k-j;)ue=Fr(ue),k--;for(;0<j-k;)S=Fr(S),j--;for(;k--;){if(ue===S||S!==null&&ue===S.alternate)break t;ue=Fr(ue),S=Fr(S)}ue=null}else ue=null;re!==null&&kd(H,$,re,ue,!1),ae!==null&&dt!==null&&kd(H,dt,ae,ue,!0)}}e:{if($=I?$r(I):window,re=$.nodeName&&$.nodeName.toLowerCase(),re==="select"||re==="input"&&$.type==="file")var de=Q0;else if(rd($))if(id)de=K0;else{de=X0;var _e=G0}else(re=$.nodeName)&&re.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(de=q0);if(de&&(de=de(e,I))){sd(H,de,i,W);break e}_e&&_e(e,$,I),e==="focusout"&&(_e=$._wrapperState)&&_e.controlled&&$.type==="number"&&$e($,"number",$.value)}switch(_e=I?$r(I):window,e){case"focusin":(rd(_e)||_e.contentEditable==="true")&&(Or=_e,Ul=I,Ps=null);break;case"focusout":Ps=Ul=Or=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,fd(H,i,W);break;case"selectionchange":if(eg)break;case"keydown":case"keyup":fd(H,i,W)}var we;if(Al)e:{switch(e){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Dr?td(e,i)&&(Ne="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ne="onCompositionStart");Ne&&(Ju&&i.locale!=="ko"&&(Dr||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Dr&&(we=Qu()):(zn=W,Rl="value"in zn?zn.value:zn.textContent,Dr=!0)),_e=Qi(I,Ne),0<_e.length&&(Ne=new qu(Ne,e,null,i,W),H.push({event:Ne,listeners:_e}),we?Ne.data=we:(we=nd(i),we!==null&&(Ne.data=we)))),(we=W0?B0(e,i):H0(e,i))&&(I=Qi(I,"onBeforeInput"),0<I.length&&(W=new qu("onBeforeInput","beforeinput",null,i,W),H.push({event:W,listeners:I}),W.data=we))}bd(H,n)})}function Ds(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Qi(e,n){for(var i=n+"Capture",l=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=gs(e,i),h!=null&&l.unshift(Ds(e,h,u)),h=gs(e,n),h!=null&&l.push(Ds(e,h,u))),e=e.return}return l}function Fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kd(e,n,i,l,u){for(var h=n._reactName,m=[];i!==null&&i!==l;){var _=i,N=_.alternate,I=_.stateNode;if(N!==null&&N===l)break;_.tag===5&&I!==null&&(_=I,u?(N=gs(i,h),N!=null&&m.unshift(Ds(i,N,_))):u||(N=gs(i,h),N!=null&&m.push(Ds(i,N,_)))),i=i.return}m.length!==0&&e.push({event:n,listeners:m})}var sg=/\r\n?/g,ig=/\u0000|\uFFFD/g;function Cd(e){return(typeof e=="string"?e:""+e).replace(sg,`
`).replace(ig,"")}function Gi(e,n,i){if(n=Cd(n),Cd(e)!==n&&i)throw Error(r(425))}function Xi(){}var Gl=null,Xl=null;function ql(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,og=typeof clearTimeout=="function"?clearTimeout:void 0,Sd=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof Sd<"u"?function(e){return Sd.resolve(null).then(e).catch(ag)}:Kl;function ag(e){setTimeout(function(){throw e})}function Jl(e,n){var i=n,l=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(l===0){e.removeChild(u),Cs(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=u}while(i);Cs(n)}function Un(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function jd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}var zr=Math.random().toString(36).slice(2),gn="__reactFiber$"+zr,Os="__reactProps$"+zr,wn="__reactContainer$"+zr,Zl="__reactEvents$"+zr,cg="__reactListeners$"+zr,ug="__reactHandles$"+zr;function ur(e){var n=e[gn];if(n)return n;for(var i=e.parentNode;i;){if(n=i[wn]||i[gn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=jd(e);e!==null;){if(i=e[gn])return i;e=jd(e)}return n}e=i,i=e.parentNode}return null}function As(e){return e=e[gn]||e[wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $r(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function qi(e){return e[Os]||null}var ea=[],Ur=-1;function Wn(e){return{current:e}}function nt(e){0>Ur||(e.current=ea[Ur],ea[Ur]=null,Ur--)}function Ke(e,n){Ur++,ea[Ur]=e.current,e.current=n}var Bn={},jt=Wn(Bn),Mt=Wn(!1),dr=Bn;function Wr(e,n){var i=e.type.contextTypes;if(!i)return Bn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in i)u[h]=n[h];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),u}function Dt(e){return e=e.childContextTypes,e!=null}function Ki(){nt(Mt),nt(jt)}function Ed(e,n,i){if(jt.current!==Bn)throw Error(r(168));Ke(jt,n),Ke(Mt,i)}function Id(e,n,i){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var u in l)if(!(u in n))throw Error(r(108,Ce(e)||"Unknown",u));return b({},i,l)}function Ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bn,dr=jt.current,Ke(jt,e),Ke(Mt,Mt.current),!0}function Td(e,n,i){var l=e.stateNode;if(!l)throw Error(r(169));i?(e=Id(e,n,dr),l.__reactInternalMemoizedMergedChildContext=e,nt(Mt),nt(jt),Ke(jt,e)):nt(Mt),Ke(Mt,i)}var bn=null,Zi=!1,ta=!1;function Rd(e){bn===null?bn=[e]:bn.push(e)}function dg(e){Zi=!0,Rd(e)}function Hn(){if(!ta&&bn!==null){ta=!0;var e=0,n=Ge;try{var i=bn;for(Ge=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}bn=null,Zi=!1}catch(u){throw bn!==null&&(bn=bn.slice(e+1)),Lu(Nl,Hn),u}finally{Ge=n,ta=!1}}return null}var Br=[],Hr=0,eo=null,to=0,qt=[],Kt=0,hr=null,Nn=1,kn="";function fr(e,n){Br[Hr++]=to,Br[Hr++]=eo,eo=e,to=n}function Pd(e,n,i){qt[Kt++]=Nn,qt[Kt++]=kn,qt[Kt++]=hr,hr=e;var l=Nn;e=kn;var u=32-rn(l)-1;l&=~(1<<u),i+=1;var h=32-rn(n)+u;if(30<h){var m=u-u%5;h=(l&(1<<m)-1).toString(32),l>>=m,u-=m,Nn=1<<32-rn(n)+u|i<<u|l,kn=h+e}else Nn=1<<h|i<<u|l,kn=e}function na(e){e.return!==null&&(fr(e,1),Pd(e,1,0))}function ra(e){for(;e===eo;)eo=Br[--Hr],Br[Hr]=null,to=Br[--Hr],Br[Hr]=null;for(;e===hr;)hr=qt[--Kt],qt[Kt]=null,kn=qt[--Kt],qt[Kt]=null,Nn=qt[--Kt],qt[Kt]=null}var Qt=null,Gt=null,st=!1,on=null;function Ld(e,n){var i=tn(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=e,n=e.deletions,n===null?(e.deletions=[i],e.flags|=16):n.push(i)}function Md(e,n){switch(e.tag){case 5:var i=e.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Qt=e,Gt=Un(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Qt=e,Gt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=hr!==null?{id:Nn,overflow:kn}:null,e.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=tn(18,null,null,0),i.stateNode=n,i.return=e,e.child=i,Qt=e,Gt=null,!0):!1;default:return!1}}function sa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ia(e){if(st){var n=Gt;if(n){var i=n;if(!Md(e,n)){if(sa(e))throw Error(r(418));n=Un(i.nextSibling);var l=Qt;n&&Md(e,n)?Ld(l,i):(e.flags=e.flags&-4097|2,st=!1,Qt=e)}}else{if(sa(e))throw Error(r(418));e.flags=e.flags&-4097|2,st=!1,Qt=e}}}function Dd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function no(e){if(e!==Qt)return!1;if(!st)return Dd(e),st=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ql(e.type,e.memoizedProps)),n&&(n=Gt)){if(sa(e))throw Od(),Error(r(418));for(;n;)Ld(e,n),n=Un(n.nextSibling)}if(Dd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(n===0){Gt=Un(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}e=e.nextSibling}Gt=null}}else Gt=Qt?Un(e.stateNode.nextSibling):null;return!0}function Od(){for(var e=Gt;e;)e=Un(e.nextSibling)}function Vr(){Gt=Qt=null,st=!1}function oa(e){on===null?on=[e]:on.push(e)}var hg=oe.ReactCurrentBatchConfig;function ln(e,n){if(e&&e.defaultProps){n=b({},n),e=e.defaultProps;for(var i in e)n[i]===void 0&&(n[i]=e[i]);return n}return n}var ro=Wn(null),so=null,Yr=null,la=null;function aa(){la=Yr=so=null}function ca(e){var n=ro.current;nt(ro),e._currentValue=n}function ua(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function Qr(e,n){so=e,la=Yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Ot=!0),e.firstContext=null)}function Jt(e){var n=e._currentValue;if(la!==e)if(e={context:e,memoizedValue:n,next:null},Yr===null){if(so===null)throw Error(r(308));Yr=e,so.dependencies={lanes:0,firstContext:e}}else Yr=Yr.next=e;return n}var pr=null;function da(e){pr===null?pr=[e]:pr.push(e)}function Ad(e,n,i,l){var u=n.interleaved;return u===null?(i.next=i,da(n)):(i.next=u.next,u.next=i),n.interleaved=i,Cn(e,l)}function Cn(e,n){e.lanes|=n;var i=e.alternate;for(i!==null&&(i.lanes|=n),i=e,e=e.return;e!==null;)e.childLanes|=n,i=e.alternate,i!==null&&(i.childLanes|=n),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Vn=!1;function ha(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Yn(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,Cn(e,i)}return u=l.interleaved,u===null?(n.next=n,da(l)):(n.next=u.next,u.next=n),l.interleaved=n,Cn(e,i)}function io(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Sl(e,i)}}function zd(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};h===null?u=h=m:h=h.next=m,i=i.next}while(i!==null);h===null?u=h=n:h=h.next=n}else u=h=n;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}function oo(e,n,i,l){var u=e.updateQueue;Vn=!1;var h=u.firstBaseUpdate,m=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var N=_,I=N.next;N.next=null,m===null?h=I:m.next=I,m=N;var W=e.alternate;W!==null&&(W=W.updateQueue,_=W.lastBaseUpdate,_!==m&&(_===null?W.firstBaseUpdate=I:_.next=I,W.lastBaseUpdate=N))}if(h!==null){var H=u.baseState;m=0,W=I=N=null,_=h;do{var $=_.lane,re=_.eventTime;if((l&$)===$){W!==null&&(W=W.next={eventTime:re,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var ae=e,ue=_;switch($=n,re=i,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){H=ae.call(re,H,$);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,$=typeof ae=="function"?ae.call(re,H,$):ae,$==null)break e;H=b({},H,$);break e;case 2:Vn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,$=u.effects,$===null?u.effects=[_]:$.push(_))}else re={eventTime:re,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},W===null?(I=W=re,N=H):W=W.next=re,m|=$;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;$=_,_=$.next,$.next=null,u.lastBaseUpdate=$,u.shared.pending=null}}while(!0);if(W===null&&(N=H),u.baseState=N,u.firstBaseUpdate=I,u.lastBaseUpdate=W,n=u.shared.interleaved,n!==null){u=n;do m|=u.lane,u=u.next;while(u!==n)}else h===null&&(u.shared.lanes=0);xr|=m,e.lanes=m,e.memoizedState=H}}function $d(e,n,i){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],u=l.callback;if(u!==null){if(l.callback=null,l=i,typeof u!="function")throw Error(r(191,u));u.call(l)}}}var Ud=new s.Component().refs;function fa(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:b({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var lo={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,n,i){e=e._reactInternals;var l=Lt(),u=qn(e),h=Sn(l,u);h.payload=n,i!=null&&(h.callback=i),n=Yn(e,h,u),n!==null&&(un(n,e,u,l),io(n,e,u))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=Lt(),u=qn(e),h=Sn(l,u);h.tag=1,h.payload=n,i!=null&&(h.callback=i),n=Yn(e,h,u),n!==null&&(un(n,e,u,l),io(n,e,u))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Lt(),l=qn(e),u=Sn(i,l);u.tag=2,n!=null&&(u.callback=n),n=Yn(e,u,l),n!==null&&(un(n,e,l,i),io(n,e,l))}};function Wd(e,n,i,l,u,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,m):n.prototype&&n.prototype.isPureReactComponent?!Rs(i,l)||!Rs(u,h):!0}function Bd(e,n,i){var l=!1,u=Bn,h=n.contextType;return typeof h=="object"&&h!==null?h=Jt(h):(u=Dt(n)?dr:jt.current,l=n.contextTypes,h=(l=l!=null)?Wr(e,u):Bn),n=new n(i,h),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=lo,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),n}function Hd(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&lo.enqueueReplaceState(n,n.state,null)}function pa(e,n,i,l){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs=Ud,ha(e);var h=n.contextType;typeof h=="object"&&h!==null?u.context=Jt(h):(h=Dt(n)?dr:jt.current,u.context=Wr(e,h)),u.state=e.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(fa(e,n,h,i),u.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(n=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),n!==u.state&&lo.enqueueReplaceState(u,u.state,null),oo(e,i,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Fs(e,n,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var l=i.stateNode}if(!l)throw Error(r(147,e));var u=l,h=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===h?n.ref:(n=function(m){var _=u.refs;_===Ud&&(_=u.refs={}),m===null?delete _[h]:_[h]=m},n._stringRef=h,n)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function ao(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Vd(e){var n=e._init;return n(e._payload)}function Yd(e){function n(S,k){if(e){var j=S.deletions;j===null?(S.deletions=[k],S.flags|=16):j.push(k)}}function i(S,k){if(!e)return null;for(;k!==null;)n(S,k),k=k.sibling;return null}function l(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function u(S,k){return S=Jn(S,k),S.index=0,S.sibling=null,S}function h(S,k,j){return S.index=j,e?(j=S.alternate,j!==null?(j=j.index,j<k?(S.flags|=2,k):j):(S.flags|=2,k)):(S.flags|=1048576,k)}function m(S){return e&&S.alternate===null&&(S.flags|=2),S}function _(S,k,j,Y){return k===null||k.tag!==6?(k=Ka(j,S.mode,Y),k.return=S,k):(k=u(k,j),k.return=S,k)}function N(S,k,j,Y){var de=j.type;return de===L?W(S,k,j.props.children,Y,j.key):k!==null&&(k.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Me&&Vd(de)===k.type)?(Y=u(k,j.props),Y.ref=Fs(S,k,j),Y.return=S,Y):(Y=Eo(j.type,j.key,j.props,null,S.mode,Y),Y.ref=Fs(S,k,j),Y.return=S,Y)}function I(S,k,j,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==j.containerInfo||k.stateNode.implementation!==j.implementation?(k=Ja(j,S.mode,Y),k.return=S,k):(k=u(k,j.children||[]),k.return=S,k)}function W(S,k,j,Y,de){return k===null||k.tag!==7?(k=wr(j,S.mode,Y,de),k.return=S,k):(k=u(k,j),k.return=S,k)}function H(S,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ka(""+k,S.mode,j),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case We:return j=Eo(k.type,k.key,k.props,null,S.mode,j),j.ref=Fs(S,null,k),j.return=S,j;case K:return k=Ja(k,S.mode,j),k.return=S,k;case Me:var Y=k._init;return H(S,Y(k._payload),j)}if(Pe(k)||q(k))return k=wr(k,S.mode,j,null),k.return=S,k;ao(S,k)}return null}function $(S,k,j,Y){var de=k!==null?k.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return de!==null?null:_(S,k,""+j,Y);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case We:return j.key===de?N(S,k,j,Y):null;case K:return j.key===de?I(S,k,j,Y):null;case Me:return de=j._init,$(S,k,de(j._payload),Y)}if(Pe(j)||q(j))return de!==null?null:W(S,k,j,Y,null);ao(S,j)}return null}function re(S,k,j,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return S=S.get(j)||null,_(k,S,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case We:return S=S.get(Y.key===null?j:Y.key)||null,N(k,S,Y,de);case K:return S=S.get(Y.key===null?j:Y.key)||null,I(k,S,Y,de);case Me:var _e=Y._init;return re(S,k,j,_e(Y._payload),de)}if(Pe(Y)||q(Y))return S=S.get(j)||null,W(k,S,Y,de,null);ao(k,Y)}return null}function ae(S,k,j,Y){for(var de=null,_e=null,we=k,Ne=k=0,yt=null;we!==null&&Ne<j.length;Ne++){we.index>Ne?(yt=we,we=null):yt=we.sibling;var Ve=$(S,we,j[Ne],Y);if(Ve===null){we===null&&(we=yt);break}e&&we&&Ve.alternate===null&&n(S,we),k=h(Ve,k,Ne),_e===null?de=Ve:_e.sibling=Ve,_e=Ve,we=yt}if(Ne===j.length)return i(S,we),st&&fr(S,Ne),de;if(we===null){for(;Ne<j.length;Ne++)we=H(S,j[Ne],Y),we!==null&&(k=h(we,k,Ne),_e===null?de=we:_e.sibling=we,_e=we);return st&&fr(S,Ne),de}for(we=l(S,we);Ne<j.length;Ne++)yt=re(we,S,Ne,j[Ne],Y),yt!==null&&(e&&yt.alternate!==null&&we.delete(yt.key===null?Ne:yt.key),k=h(yt,k,Ne),_e===null?de=yt:_e.sibling=yt,_e=yt);return e&&we.forEach(function(Zn){return n(S,Zn)}),st&&fr(S,Ne),de}function ue(S,k,j,Y){var de=q(j);if(typeof de!="function")throw Error(r(150));if(j=de.call(j),j==null)throw Error(r(151));for(var _e=de=null,we=k,Ne=k=0,yt=null,Ve=j.next();we!==null&&!Ve.done;Ne++,Ve=j.next()){we.index>Ne?(yt=we,we=null):yt=we.sibling;var Zn=$(S,we,Ve.value,Y);if(Zn===null){we===null&&(we=yt);break}e&&we&&Zn.alternate===null&&n(S,we),k=h(Zn,k,Ne),_e===null?de=Zn:_e.sibling=Zn,_e=Zn,we=yt}if(Ve.done)return i(S,we),st&&fr(S,Ne),de;if(we===null){for(;!Ve.done;Ne++,Ve=j.next())Ve=H(S,Ve.value,Y),Ve!==null&&(k=h(Ve,k,Ne),_e===null?de=Ve:_e.sibling=Ve,_e=Ve);return st&&fr(S,Ne),de}for(we=l(S,we);!Ve.done;Ne++,Ve=j.next())Ve=re(we,S,Ne,Ve.value,Y),Ve!==null&&(e&&Ve.alternate!==null&&we.delete(Ve.key===null?Ne:Ve.key),k=h(Ve,k,Ne),_e===null?de=Ve:_e.sibling=Ve,_e=Ve);return e&&we.forEach(function(Vg){return n(S,Vg)}),st&&fr(S,Ne),de}function dt(S,k,j,Y){if(typeof j=="object"&&j!==null&&j.type===L&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case We:e:{for(var de=j.key,_e=k;_e!==null;){if(_e.key===de){if(de=j.type,de===L){if(_e.tag===7){i(S,_e.sibling),k=u(_e,j.props.children),k.return=S,S=k;break e}}else if(_e.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Me&&Vd(de)===_e.type){i(S,_e.sibling),k=u(_e,j.props),k.ref=Fs(S,_e,j),k.return=S,S=k;break e}i(S,_e);break}else n(S,_e);_e=_e.sibling}j.type===L?(k=wr(j.props.children,S.mode,Y,j.key),k.return=S,S=k):(Y=Eo(j.type,j.key,j.props,null,S.mode,Y),Y.ref=Fs(S,k,j),Y.return=S,S=Y)}return m(S);case K:e:{for(_e=j.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===j.containerInfo&&k.stateNode.implementation===j.implementation){i(S,k.sibling),k=u(k,j.children||[]),k.return=S,S=k;break e}else{i(S,k);break}else n(S,k);k=k.sibling}k=Ja(j,S.mode,Y),k.return=S,S=k}return m(S);case Me:return _e=j._init,dt(S,k,_e(j._payload),Y)}if(Pe(j))return ae(S,k,j,Y);if(q(j))return ue(S,k,j,Y);ao(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,k!==null&&k.tag===6?(i(S,k.sibling),k=u(k,j),k.return=S,S=k):(i(S,k),k=Ka(j,S.mode,Y),k.return=S,S=k),m(S)):i(S,k)}return dt}var Gr=Yd(!0),Qd=Yd(!1),zs={},xn=Wn(zs),$s=Wn(zs),Us=Wn(zs);function mr(e){if(e===zs)throw Error(r(174));return e}function ma(e,n){switch(Ke(Us,n),Ke($s,e),Ke(xn,zs),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:U(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=U(n,e)}nt(xn),Ke(xn,n)}function Xr(){nt(xn),nt($s),nt(Us)}function Gd(e){mr(Us.current);var n=mr(xn.current),i=U(n,e.type);n!==i&&(Ke($s,e),Ke(xn,i))}function ga(e){$s.current===e&&(nt(xn),nt($s))}var ot=Wn(0);function co(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var xa=[];function va(){for(var e=0;e<xa.length;e++)xa[e]._workInProgressVersionPrimary=null;xa.length=0}var uo=oe.ReactCurrentDispatcher,ya=oe.ReactCurrentBatchConfig,gr=0,lt=null,pt=null,xt=null,ho=!1,Ws=!1,Bs=0,fg=0;function Et(){throw Error(r(321))}function _a(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!sn(e[i],n[i]))return!1;return!0}function wa(e,n,i,l,u,h){if(gr=h,lt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,uo.current=e===null||e.memoizedState===null?xg:vg,e=i(l,u),Ws){h=0;do{if(Ws=!1,Bs=0,25<=h)throw Error(r(301));h+=1,xt=pt=null,n.updateQueue=null,uo.current=yg,e=i(l,u)}while(Ws)}if(uo.current=mo,n=pt!==null&&pt.next!==null,gr=0,xt=pt=lt=null,ho=!1,n)throw Error(r(300));return e}function ba(){var e=Bs!==0;return Bs=0,e}function vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?lt.memoizedState=xt=e:xt=xt.next=e,xt}function Zt(){if(pt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var n=xt===null?lt.memoizedState:xt.next;if(n!==null)xt=n,pt=e;else{if(e===null)throw Error(r(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},xt===null?lt.memoizedState=xt=e:xt=xt.next=e}return xt}function Hs(e,n){return typeof n=="function"?n(e):n}function Na(e){var n=Zt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=pt,u=l.baseQueue,h=i.pending;if(h!==null){if(u!==null){var m=u.next;u.next=h.next,h.next=m}l.baseQueue=u=h,i.pending=null}if(u!==null){h=u.next,l=l.baseState;var _=m=null,N=null,I=h;do{var W=I.lane;if((gr&W)===W)N!==null&&(N=N.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),l=I.hasEagerState?I.eagerState:e(l,I.action);else{var H={lane:W,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};N===null?(_=N=H,m=l):N=N.next=H,lt.lanes|=W,xr|=W}I=I.next}while(I!==null&&I!==h);N===null?m=l:N.next=_,sn(l,n.memoizedState)||(Ot=!0),n.memoizedState=l,n.baseState=m,n.baseQueue=N,i.lastRenderedState=l}if(e=i.interleaved,e!==null){u=e;do h=u.lane,lt.lanes|=h,xr|=h,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function ka(e){var n=Zt(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=i.dispatch,u=i.pending,h=n.memoizedState;if(u!==null){i.pending=null;var m=u=u.next;do h=e(h,m.action),m=m.next;while(m!==u);sn(h,n.memoizedState)||(Ot=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),i.lastRenderedState=h}return[h,l]}function Xd(){}function qd(e,n){var i=lt,l=Zt(),u=n(),h=!sn(l.memoizedState,u);if(h&&(l.memoizedState=u,Ot=!0),l=l.queue,Ca(Zd.bind(null,i,l,e),[e]),l.getSnapshot!==n||h||xt!==null&&xt.memoizedState.tag&1){if(i.flags|=2048,Vs(9,Jd.bind(null,i,l,u,n),void 0,null),vt===null)throw Error(r(349));(gr&30)!==0||Kd(i,n,u)}return u}function Kd(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=lt.updateQueue,n===null?(n={lastEffect:null,stores:null},lt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Jd(e,n,i,l){n.value=i,n.getSnapshot=l,eh(n)&&th(e)}function Zd(e,n,i){return i(function(){eh(n)&&th(e)})}function eh(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!sn(e,i)}catch{return!0}}function th(e){var n=Cn(e,1);n!==null&&un(n,e,1,-1)}function nh(e){var n=vn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},n.queue=e,e=e.dispatch=gg.bind(null,lt,e),[n.memoizedState,e]}function Vs(e,n,i,l){return e={tag:e,create:n,destroy:i,deps:l,next:null},n=lt.updateQueue,n===null?(n={lastEffect:null,stores:null},lt.updateQueue=n,n.lastEffect=e.next=e):(i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e)),e}function rh(){return Zt().memoizedState}function fo(e,n,i,l){var u=vn();lt.flags|=e,u.memoizedState=Vs(1|n,i,void 0,l===void 0?null:l)}function po(e,n,i,l){var u=Zt();l=l===void 0?null:l;var h=void 0;if(pt!==null){var m=pt.memoizedState;if(h=m.destroy,l!==null&&_a(l,m.deps)){u.memoizedState=Vs(n,i,h,l);return}}lt.flags|=e,u.memoizedState=Vs(1|n,i,h,l)}function sh(e,n){return fo(8390656,8,e,n)}function Ca(e,n){return po(2048,8,e,n)}function ih(e,n){return po(4,2,e,n)}function oh(e,n){return po(4,4,e,n)}function lh(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ah(e,n,i){return i=i!=null?i.concat([e]):null,po(4,4,lh.bind(null,n,e),i)}function Sa(){}function ch(e,n){var i=Zt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&_a(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function uh(e,n){var i=Zt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&_a(n,l[1])?l[0]:(e=e(),i.memoizedState=[e,n],e)}function dh(e,n,i){return(gr&21)===0?(e.baseState&&(e.baseState=!1,Ot=!0),e.memoizedState=i):(sn(i,n)||(i=Au(),lt.lanes|=i,xr|=i,e.baseState=!0),n)}function pg(e,n){var i=Ge;Ge=i!==0&&4>i?i:4,e(!0);var l=ya.transition;ya.transition={};try{e(!1),n()}finally{Ge=i,ya.transition=l}}function hh(){return Zt().memoizedState}function mg(e,n,i){var l=qn(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},fh(e))ph(n,i);else if(i=Ad(e,n,i,l),i!==null){var u=Lt();un(i,e,l,u),mh(i,n,l)}}function gg(e,n,i){var l=qn(e),u={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(fh(e))ph(n,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var m=n.lastRenderedState,_=h(m,i);if(u.hasEagerState=!0,u.eagerState=_,sn(_,m)){var N=n.interleaved;N===null?(u.next=u,da(n)):(u.next=N.next,N.next=u),n.interleaved=u;return}}catch{}finally{}i=Ad(e,n,u,l),i!==null&&(u=Lt(),un(i,e,l,u),mh(i,n,l))}}function fh(e){var n=e.alternate;return e===lt||n!==null&&n===lt}function ph(e,n){Ws=ho=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function mh(e,n,i){if((i&4194240)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Sl(e,i)}}var mo={readContext:Jt,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},xg={readContext:Jt,useCallback:function(e,n){return vn().memoizedState=[e,n===void 0?null:n],e},useContext:Jt,useEffect:sh,useImperativeHandle:function(e,n,i){return i=i!=null?i.concat([e]):null,fo(4194308,4,lh.bind(null,n,e),i)},useLayoutEffect:function(e,n){return fo(4194308,4,e,n)},useInsertionEffect:function(e,n){return fo(4,2,e,n)},useMemo:function(e,n){var i=vn();return n=n===void 0?null:n,e=e(),i.memoizedState=[e,n],e},useReducer:function(e,n,i){var l=vn();return n=i!==void 0?i(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=mg.bind(null,lt,e),[l.memoizedState,e]},useRef:function(e){var n=vn();return e={current:e},n.memoizedState=e},useState:nh,useDebugValue:Sa,useDeferredValue:function(e){return vn().memoizedState=e},useTransition:function(){var e=nh(!1),n=e[0];return e=pg.bind(null,e[1]),vn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,i){var l=lt,u=vn();if(st){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),vt===null)throw Error(r(349));(gr&30)!==0||Kd(l,n,i)}u.memoizedState=i;var h={value:i,getSnapshot:n};return u.queue=h,sh(Zd.bind(null,l,h,e),[e]),l.flags|=2048,Vs(9,Jd.bind(null,l,h,i,n),void 0,null),i},useId:function(){var e=vn(),n=vt.identifierPrefix;if(st){var i=kn,l=Nn;i=(l&~(1<<32-rn(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=Bs++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=fg++,n=":"+n+"r"+i.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},vg={readContext:Jt,useCallback:ch,useContext:Jt,useEffect:Ca,useImperativeHandle:ah,useInsertionEffect:ih,useLayoutEffect:oh,useMemo:uh,useReducer:Na,useRef:rh,useState:function(){return Na(Hs)},useDebugValue:Sa,useDeferredValue:function(e){var n=Zt();return dh(n,pt.memoizedState,e)},useTransition:function(){var e=Na(Hs)[0],n=Zt().memoizedState;return[e,n]},useMutableSource:Xd,useSyncExternalStore:qd,useId:hh,unstable_isNewReconciler:!1},yg={readContext:Jt,useCallback:ch,useContext:Jt,useEffect:Ca,useImperativeHandle:ah,useInsertionEffect:ih,useLayoutEffect:oh,useMemo:uh,useReducer:ka,useRef:rh,useState:function(){return ka(Hs)},useDebugValue:Sa,useDeferredValue:function(e){var n=Zt();return pt===null?n.memoizedState=e:dh(n,pt.memoizedState,e)},useTransition:function(){var e=ka(Hs)[0],n=Zt().memoizedState;return[e,n]},useMutableSource:Xd,useSyncExternalStore:qd,useId:hh,unstable_isNewReconciler:!1};function qr(e,n){try{var i="",l=n;do i+=Q(l),l=l.return;while(l);var u=i}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:n,stack:u,digest:null}}function ja(e,n,i){return{value:e,source:null,stack:i??null,digest:n??null}}function Ea(e,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var _g=typeof WeakMap=="function"?WeakMap:Map;function gh(e,n,i){i=Sn(-1,i),i.tag=3,i.payload={element:null};var l=n.value;return i.callback=function(){bo||(bo=!0,Ba=l),Ea(e,n)},i}function xh(e,n,i){i=Sn(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;i.payload=function(){return l(u)},i.callback=function(){Ea(e,n)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(i.callback=function(){Ea(e,n),typeof l!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})}),i}function vh(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new _g;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(i)||(u.add(i),e=Mg.bind(null,e,n,i),n.then(e,e))}function yh(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function _h(e,n,i,l,u){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=Sn(-1,1),n.tag=2,Yn(i,n,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var wg=oe.ReactCurrentOwner,Ot=!1;function Pt(e,n,i,l){n.child=e===null?Qd(n,null,i,l):Gr(n,e.child,i,l)}function wh(e,n,i,l,u){i=i.render;var h=n.ref;return Qr(n,u),l=wa(e,n,i,l,h,u),i=ba(),e!==null&&!Ot?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,jn(e,n,u)):(st&&i&&na(n),n.flags|=1,Pt(e,n,l,u),n.child)}function bh(e,n,i,l,u){if(e===null){var h=i.type;return typeof h=="function"&&!qa(h)&&h.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=h,Nh(e,n,h,l,u)):(e=Eo(i.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,(e.lanes&u)===0){var m=h.memoizedProps;if(i=i.compare,i=i!==null?i:Rs,i(m,l)&&e.ref===n.ref)return jn(e,n,u)}return n.flags|=1,e=Jn(h,l),e.ref=n.ref,e.return=n,n.child=e}function Nh(e,n,i,l,u){if(e!==null){var h=e.memoizedProps;if(Rs(h,l)&&e.ref===n.ref)if(Ot=!1,n.pendingProps=l=h,(e.lanes&u)!==0)(e.flags&131072)!==0&&(Ot=!0);else return n.lanes=e.lanes,jn(e,n,u)}return Ia(e,n,i,l,u)}function kh(e,n,i){var l=n.pendingProps,u=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Jr,Xt),Xt|=i;else{if((i&1073741824)===0)return e=h!==null?h.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ke(Jr,Xt),Xt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=h!==null?h.baseLanes:i,Ke(Jr,Xt),Xt|=l}else h!==null?(l=h.baseLanes|i,n.memoizedState=null):l=i,Ke(Jr,Xt),Xt|=l;return Pt(e,n,u,i),n.child}function Ch(e,n){var i=n.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Ia(e,n,i,l,u){var h=Dt(i)?dr:jt.current;return h=Wr(n,h),Qr(n,u),i=wa(e,n,i,l,h,u),l=ba(),e!==null&&!Ot?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,jn(e,n,u)):(st&&l&&na(n),n.flags|=1,Pt(e,n,i,u),n.child)}function Sh(e,n,i,l,u){if(Dt(i)){var h=!0;Ji(n)}else h=!1;if(Qr(n,u),n.stateNode===null)xo(e,n),Bd(n,i,l),pa(n,i,l,u),l=!0;else if(e===null){var m=n.stateNode,_=n.memoizedProps;m.props=_;var N=m.context,I=i.contextType;typeof I=="object"&&I!==null?I=Jt(I):(I=Dt(i)?dr:jt.current,I=Wr(n,I));var W=i.getDerivedStateFromProps,H=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function";H||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==l||N!==I)&&Hd(n,m,l,I),Vn=!1;var $=n.memoizedState;m.state=$,oo(n,l,m,u),N=n.memoizedState,_!==l||$!==N||Mt.current||Vn?(typeof W=="function"&&(fa(n,i,W,l),N=n.memoizedState),(_=Vn||Wd(n,i,_,l,$,N,I))?(H||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=N),m.props=l,m.state=N,m.context=I,l=_):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Fd(e,n),_=n.memoizedProps,I=n.type===n.elementType?_:ln(n.type,_),m.props=I,H=n.pendingProps,$=m.context,N=i.contextType,typeof N=="object"&&N!==null?N=Jt(N):(N=Dt(i)?dr:jt.current,N=Wr(n,N));var re=i.getDerivedStateFromProps;(W=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==H||$!==N)&&Hd(n,m,l,N),Vn=!1,$=n.memoizedState,m.state=$,oo(n,l,m,u);var ae=n.memoizedState;_!==H||$!==ae||Mt.current||Vn?(typeof re=="function"&&(fa(n,i,re,l),ae=n.memoizedState),(I=Vn||Wd(n,i,I,l,$,ae,N)||!1)?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ae,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ae,N)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ae),m.props=l,m.state=ae,m.context=N,l=I):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),l=!1)}return Ta(e,n,i,l,h,u)}function Ta(e,n,i,l,u,h){Ch(e,n);var m=(n.flags&128)!==0;if(!l&&!m)return u&&Td(n,i,!1),jn(e,n,h);l=n.stateNode,wg.current=n;var _=m&&typeof i.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&m?(n.child=Gr(n,e.child,null,h),n.child=Gr(n,null,_,h)):Pt(e,n,_,h),n.memoizedState=l.state,u&&Td(n,i,!0),n.child}function jh(e){var n=e.stateNode;n.pendingContext?Ed(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Ed(e,n.context,!1),ma(e,n.containerInfo)}function Eh(e,n,i,l,u){return Vr(),oa(u),n.flags|=256,Pt(e,n,i,l),n.child}var Ra={dehydrated:null,treeContext:null,retryLane:0};function Pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ih(e,n,i){var l=n.pendingProps,u=ot.current,h=!1,m=(n.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(u&2)!==0),_?(h=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ke(ot,u&1),e===null)return ia(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(m=l.children,e=l.fallback,h?(l=n.mode,h=n.child,m={mode:"hidden",children:m},(l&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=Io(m,l,0,null),e=wr(e,l,i,null),h.return=n,e.return=n,h.sibling=e,n.child=h,n.child.memoizedState=Pa(i),n.memoizedState=Ra,e):La(n,m));if(u=e.memoizedState,u!==null&&(_=u.dehydrated,_!==null))return bg(e,n,m,l,_,u,i);if(h){h=l.fallback,m=n.mode,u=e.child,_=u.sibling;var N={mode:"hidden",children:l.children};return(m&1)===0&&n.child!==u?(l=n.child,l.childLanes=0,l.pendingProps=N,n.deletions=null):(l=Jn(u,N),l.subtreeFlags=u.subtreeFlags&14680064),_!==null?h=Jn(_,h):(h=wr(h,m,i,null),h.flags|=2),h.return=n,l.return=n,l.sibling=h,n.child=l,l=h,h=n.child,m=e.child.memoizedState,m=m===null?Pa(i):{baseLanes:m.baseLanes|i,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~i,n.memoizedState=Ra,l}return h=e.child,e=h.sibling,l=Jn(h,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=i),l.return=n,l.sibling=null,e!==null&&(i=n.deletions,i===null?(n.deletions=[e],n.flags|=16):i.push(e)),n.child=l,n.memoizedState=null,l}function La(e,n){return n=Io({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function go(e,n,i,l){return l!==null&&oa(l),Gr(n,e.child,null,i),e=La(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function bg(e,n,i,l,u,h,m){if(i)return n.flags&256?(n.flags&=-257,l=ja(Error(r(422))),go(e,n,m,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(h=l.fallback,u=n.mode,l=Io({mode:"visible",children:l.children},u,0,null),h=wr(h,u,m,null),h.flags|=2,l.return=n,h.return=n,l.sibling=h,n.child=l,(n.mode&1)!==0&&Gr(n,e.child,null,m),n.child.memoizedState=Pa(m),n.memoizedState=Ra,h);if((n.mode&1)===0)return go(e,n,m,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var _=l.dgst;return l=_,h=Error(r(419)),l=ja(h,l,void 0),go(e,n,m,l)}if(_=(m&e.childLanes)!==0,Ot||_){if(l=vt,l!==null){switch(m&-m){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|m))!==0?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,Cn(e,u),un(l,e,u,-1))}return Xa(),l=ja(Error(r(421))),go(e,n,m,l)}return u.data==="$?"?(n.flags|=128,n.child=e.child,n=Dg.bind(null,e),u._reactRetry=n,null):(e=h.treeContext,Gt=Un(u.nextSibling),Qt=n,st=!0,on=null,e!==null&&(qt[Kt++]=Nn,qt[Kt++]=kn,qt[Kt++]=hr,Nn=e.id,kn=e.overflow,hr=n),n=La(n,l.children),n.flags|=4096,n)}function Th(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),ua(e.return,n,i)}function Ma(e,n,i,l,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=i,h.tailMode=u)}function Rh(e,n,i){var l=n.pendingProps,u=l.revealOrder,h=l.tail;if(Pt(e,n,l.children,i),l=ot.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Th(e,i,n);else if(e.tag===19)Th(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ke(ot,l),(n.mode&1)===0)n.memoizedState=null;else switch(u){case"forwards":for(i=n.child,u=null;i!==null;)e=i.alternate,e!==null&&co(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),Ma(n,!1,u,i,h);break;case"backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&co(e)===null){n.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}Ma(n,!0,i,null,h);break;case"together":Ma(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function xo(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function jn(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),xr|=n.lanes,(i&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,i=Jn(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Jn(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Ng(e,n,i){switch(n.tag){case 3:jh(n),Vr();break;case 5:Gd(n);break;case 1:Dt(n.type)&&Ji(n);break;case 4:ma(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,u=n.memoizedProps.value;Ke(ro,l._currentValue),l._currentValue=u;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(Ke(ot,ot.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?Ih(e,n,i):(Ke(ot,ot.current&1),e=jn(e,n,i),e!==null?e.sibling:null);Ke(ot,ot.current&1);break;case 19:if(l=(i&n.childLanes)!==0,(e.flags&128)!==0){if(l)return Rh(e,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ke(ot,ot.current),l)break;return null;case 22:case 23:return n.lanes=0,kh(e,n,i)}return jn(e,n,i)}var Ph,Da,Lh,Mh;Ph=function(e,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Da=function(){},Lh=function(e,n,i,l){var u=e.memoizedProps;if(u!==l){e=n.stateNode,mr(xn.current);var h=null;switch(i){case"input":u=C(e,u),l=C(e,l),h=[];break;case"select":u=b({},u,{value:void 0}),l=b({},l,{value:void 0}),h=[];break;case"textarea":u=it(e,u),l=it(e,l),h=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Xi)}ml(i,l);var m;i=null;for(I in u)if(!l.hasOwnProperty(I)&&u.hasOwnProperty(I)&&u[I]!=null)if(I==="style"){var _=u[I];for(m in _)_.hasOwnProperty(m)&&(i||(i={}),i[m]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(c.hasOwnProperty(I)?h||(h=[]):(h=h||[]).push(I,null));for(I in l){var N=l[I];if(_=u!=null?u[I]:void 0,l.hasOwnProperty(I)&&N!==_&&(N!=null||_!=null))if(I==="style")if(_){for(m in _)!_.hasOwnProperty(m)||N&&N.hasOwnProperty(m)||(i||(i={}),i[m]="");for(m in N)N.hasOwnProperty(m)&&_[m]!==N[m]&&(i||(i={}),i[m]=N[m])}else i||(h||(h=[]),h.push(I,i)),i=N;else I==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,_=_?_.__html:void 0,N!=null&&_!==N&&(h=h||[]).push(I,N)):I==="children"?typeof N!="string"&&typeof N!="number"||(h=h||[]).push(I,""+N):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(c.hasOwnProperty(I)?(N!=null&&I==="onScroll"&&tt("scroll",e),h||_===N||(h=[])):(h=h||[]).push(I,N))}i&&(h=h||[]).push("style",i);var I=h;(n.updateQueue=I)&&(n.flags|=4)}},Mh=function(e,n,i,l){i!==l&&(n.flags|=4)};function Ys(e,n){if(!st)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function It(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function kg(e,n,i){var l=n.pendingProps;switch(ra(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(n),null;case 1:return Dt(n.type)&&Ki(),It(n),null;case 3:return l=n.stateNode,Xr(),nt(Mt),nt(jt),va(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(no(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,on!==null&&(Ya(on),on=null))),Da(e,n),It(n),null;case 5:ga(n);var u=mr(Us.current);if(i=n.type,e!==null&&n.stateNode!=null)Lh(e,n,i,l,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(r(166));return It(n),null}if(e=mr(xn.current),no(n)){l=n.stateNode,i=n.type;var h=n.memoizedProps;switch(l[gn]=n,l[Os]=h,e=(n.mode&1)!==0,i){case"dialog":tt("cancel",l),tt("close",l);break;case"iframe":case"object":case"embed":tt("load",l);break;case"video":case"audio":for(u=0;u<Ls.length;u++)tt(Ls[u],l);break;case"source":tt("error",l);break;case"img":case"image":case"link":tt("error",l),tt("load",l);break;case"details":tt("toggle",l);break;case"input":ne(l,h),tt("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!h.multiple},tt("invalid",l);break;case"textarea":z(l,h),tt("invalid",l)}ml(i,h),u=null;for(var m in h)if(h.hasOwnProperty(m)){var _=h[m];m==="children"?typeof _=="string"?l.textContent!==_&&(h.suppressHydrationWarning!==!0&&Gi(l.textContent,_,e),u=["children",_]):typeof _=="number"&&l.textContent!==""+_&&(h.suppressHydrationWarning!==!0&&Gi(l.textContent,_,e),u=["children",""+_]):c.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&tt("scroll",l)}switch(i){case"input":T(l),Se(l,h,!0);break;case"textarea":T(l),ve(l);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(l.onclick=Xi)}l=u,n.updateQueue=l,l!==null&&(n.flags|=4)}else{m=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=G(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=m.createElement(i,{is:l.is}):(e=m.createElement(i),i==="select"&&(m=e,l.multiple?m.multiple=!0:l.size&&(m.size=l.size))):e=m.createElementNS(e,i),e[gn]=n,e[Os]=l,Ph(e,n,!1,!1),n.stateNode=e;e:{switch(m=gl(i,l),i){case"dialog":tt("cancel",e),tt("close",e),u=l;break;case"iframe":case"object":case"embed":tt("load",e),u=l;break;case"video":case"audio":for(u=0;u<Ls.length;u++)tt(Ls[u],e);u=l;break;case"source":tt("error",e),u=l;break;case"img":case"image":case"link":tt("error",e),tt("load",e),u=l;break;case"details":tt("toggle",e),u=l;break;case"input":ne(e,l),u=C(e,l),tt("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=b({},l,{value:void 0}),tt("invalid",e);break;case"textarea":z(e,l),u=it(e,l),tt("invalid",e);break;default:u=l}ml(i,u),_=u;for(h in _)if(_.hasOwnProperty(h)){var N=_[h];h==="style"?lr(e,N):h==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Re(e,N)):h==="children"?typeof N=="string"?(i!=="textarea"||N!=="")&&Be(e,N):typeof N=="number"&&Be(e,""+N):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(c.hasOwnProperty(h)?N!=null&&h==="onScroll"&&tt("scroll",e):N!=null&&ye(e,h,N,m))}switch(i){case"input":T(e),Se(e,l,!1);break;case"textarea":T(e),ve(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Te(l.value));break;case"select":e.multiple=!!l.multiple,h=l.value,h!=null?Qe(e,!!l.multiple,h,!1):l.defaultValue!=null&&Qe(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Xi)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return It(n),null;case 6:if(e&&n.stateNode!=null)Mh(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(i=mr(Us.current),mr(xn.current),no(n)){if(l=n.stateNode,i=n.memoizedProps,l[gn]=n,(h=l.nodeValue!==i)&&(e=Qt,e!==null))switch(e.tag){case 3:Gi(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gi(l.nodeValue,i,(e.mode&1)!==0)}h&&(n.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[gn]=n,n.stateNode=l}return It(n),null;case 13:if(nt(ot),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&Gt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Od(),Vr(),n.flags|=98560,h=!1;else if(h=no(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[gn]=n}else Vr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;It(n),h=!1}else on!==null&&(Ya(on),on=null),h=!0;if(!h)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(ot.current&1)!==0?mt===0&&(mt=3):Xa())),n.updateQueue!==null&&(n.flags|=4),It(n),null);case 4:return Xr(),Da(e,n),e===null&&Ms(n.stateNode.containerInfo),It(n),null;case 10:return ca(n.type._context),It(n),null;case 17:return Dt(n.type)&&Ki(),It(n),null;case 19:if(nt(ot),h=n.memoizedState,h===null)return It(n),null;if(l=(n.flags&128)!==0,m=h.rendering,m===null)if(l)Ys(h,!1);else{if(mt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=co(e),m!==null){for(n.flags|=128,Ys(h,!1),l=m.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=i,i=n.child;i!==null;)h=i,e=l,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ke(ot,ot.current&1|2),n.child}e=e.sibling}h.tail!==null&&ut()>Zr&&(n.flags|=128,l=!0,Ys(h,!1),n.lanes=4194304)}else{if(!l)if(e=co(m),e!==null){if(n.flags|=128,l=!0,i=e.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),Ys(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!st)return It(n),null}else 2*ut()-h.renderingStartTime>Zr&&i!==1073741824&&(n.flags|=128,l=!0,Ys(h,!1),n.lanes=4194304);h.isBackwards?(m.sibling=n.child,n.child=m):(i=h.last,i!==null?i.sibling=m:n.child=m,h.last=m)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=ut(),n.sibling=null,i=ot.current,Ke(ot,l?i&1|2:i&1),n):(It(n),null);case 22:case 23:return Ga(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(Xt&1073741824)!==0&&(It(n),n.subtreeFlags&6&&(n.flags|=8192)):It(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function Cg(e,n){switch(ra(n),n.tag){case 1:return Dt(n.type)&&Ki(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Xr(),nt(Mt),nt(jt),va(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return ga(n),null;case 13:if(nt(ot),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Vr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return nt(ot),null;case 4:return Xr(),null;case 10:return ca(n.type._context),null;case 22:case 23:return Ga(),null;case 24:return null;default:return null}}var vo=!1,Tt=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Kr(e,n){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){at(e,n,l)}else i.current=null}function Oa(e,n,i){try{i()}catch(l){at(e,n,l)}}var Dh=!1;function jg(e,n){if(Gl=Ai,e=hd(),$l(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var m=0,_=-1,N=-1,I=0,W=0,H=e,$=null;t:for(;;){for(var re;H!==i||u!==0&&H.nodeType!==3||(_=m+u),H!==h||l!==0&&H.nodeType!==3||(N=m+l),H.nodeType===3&&(m+=H.nodeValue.length),(re=H.firstChild)!==null;)$=H,H=re;for(;;){if(H===e)break t;if($===i&&++I===u&&(_=m),$===h&&++W===l&&(N=m),(re=H.nextSibling)!==null)break;H=$,$=H.parentNode}H=re}i=_===-1||N===-1?null:{start:_,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(Xl={focusedElem:e,selectionRange:i},Ai=!1,ie=n;ie!==null;)if(n=ie,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ie=e;else for(;ie!==null;){n=ie;try{var ae=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,dt=ae.memoizedState,S=n.stateNode,k=S.getSnapshotBeforeUpdate(n.elementType===n.type?ue:ln(n.type,ue),dt);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var j=n.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Y){at(n,n.return,Y)}if(e=n.sibling,e!==null){e.return=n.return,ie=e;break}ie=n.return}return ae=Dh,Dh=!1,ae}function Qs(e,n,i){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&Oa(n,i,h)}u=u.next}while(u!==l)}}function yo(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==n)}}function Aa(e){var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof n=="function"?n(e):n.current=e}}function Oh(e){var n=e.alternate;n!==null&&(e.alternate=null,Oh(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[gn],delete n[Os],delete n[Zl],delete n[cg],delete n[ug])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ah(e){return e.tag===5||e.tag===3||e.tag===4}function Fh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fa(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(e,n):i.insertBefore(e,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(e,i)):(n=i,n.appendChild(e)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Xi));else if(l!==4&&(e=e.child,e!==null))for(Fa(e,n,i),e=e.sibling;e!==null;)Fa(e,n,i),e=e.sibling}function za(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(za(e,n,i),e=e.sibling;e!==null;)za(e,n,i),e=e.sibling}var kt=null,an=!1;function Qn(e,n,i){for(i=i.child;i!==null;)zh(e,n,i),i=i.sibling}function zh(e,n,i){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Ri,i)}catch{}switch(i.tag){case 5:Tt||Kr(i,n);case 6:var l=kt,u=an;kt=null,Qn(e,n,i),kt=l,an=u,kt!==null&&(an?(e=kt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):kt.removeChild(i.stateNode));break;case 18:kt!==null&&(an?(e=kt,i=i.stateNode,e.nodeType===8?Jl(e.parentNode,i):e.nodeType===1&&Jl(e,i),Cs(e)):Jl(kt,i.stateNode));break;case 4:l=kt,u=an,kt=i.stateNode.containerInfo,an=!0,Qn(e,n,i),kt=l,an=u;break;case 0:case 11:case 14:case 15:if(!Tt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var h=u,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&Oa(i,n,m),u=u.next}while(u!==l)}Qn(e,n,i);break;case 1:if(!Tt&&(Kr(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(_){at(i,n,_)}Qn(e,n,i);break;case 21:Qn(e,n,i);break;case 22:i.mode&1?(Tt=(l=Tt)||i.memoizedState!==null,Qn(e,n,i),Tt=l):Qn(e,n,i);break;default:Qn(e,n,i)}}function $h(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Sg),n.forEach(function(l){var u=Og.bind(null,e,l);i.has(l)||(i.add(l),l.then(u,u))})}}function cn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];try{var h=e,m=n,_=m;e:for(;_!==null;){switch(_.tag){case 5:kt=_.stateNode,an=!1;break e;case 3:kt=_.stateNode.containerInfo,an=!0;break e;case 4:kt=_.stateNode.containerInfo,an=!0;break e}_=_.return}if(kt===null)throw Error(r(160));zh(h,m,u),kt=null,an=!1;var N=u.alternate;N!==null&&(N.return=null),u.return=null}catch(I){at(u,n,I)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Uh(n,e),n=n.sibling}function Uh(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cn(n,e),yn(e),l&4){try{Qs(3,e,e.return),yo(3,e)}catch(ue){at(e,e.return,ue)}try{Qs(5,e,e.return)}catch(ue){at(e,e.return,ue)}}break;case 1:cn(n,e),yn(e),l&512&&i!==null&&Kr(i,i.return);break;case 5:if(cn(n,e),yn(e),l&512&&i!==null&&Kr(i,i.return),e.flags&32){var u=e.stateNode;try{Be(u,"")}catch(ue){at(e,e.return,ue)}}if(l&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,m=i!==null?i.memoizedProps:h,_=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{_==="input"&&h.type==="radio"&&h.name!=null&&ge(u,h),gl(_,m);var I=gl(_,h);for(m=0;m<N.length;m+=2){var W=N[m],H=N[m+1];W==="style"?lr(u,H):W==="dangerouslySetInnerHTML"?Re(u,H):W==="children"?Be(u,H):ye(u,W,H,I)}switch(_){case"input":Ee(u,h);break;case"textarea":se(u,h);break;case"select":var $=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var re=h.value;re!=null?Qe(u,!!h.multiple,re,!1):$!==!!h.multiple&&(h.defaultValue!=null?Qe(u,!!h.multiple,h.defaultValue,!0):Qe(u,!!h.multiple,h.multiple?[]:"",!1))}u[Os]=h}catch(ue){at(e,e.return,ue)}}break;case 6:if(cn(n,e),yn(e),l&4){if(e.stateNode===null)throw Error(r(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(ue){at(e,e.return,ue)}}break;case 3:if(cn(n,e),yn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Cs(n.containerInfo)}catch(ue){at(e,e.return,ue)}break;case 4:cn(n,e),yn(e);break;case 13:cn(n,e),yn(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(Wa=ut())),l&4&&$h(e);break;case 22:if(W=i!==null&&i.memoizedState!==null,e.mode&1?(Tt=(I=Tt)||W,cn(n,e),Tt=I):cn(n,e),yn(e),l&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!W&&(e.mode&1)!==0)for(ie=e,W=e.child;W!==null;){for(H=ie=W;ie!==null;){switch($=ie,re=$.child,$.tag){case 0:case 11:case 14:case 15:Qs(4,$,$.return);break;case 1:Kr($,$.return);var ae=$.stateNode;if(typeof ae.componentWillUnmount=="function"){l=$,i=$.return;try{n=l,ae.props=n.memoizedProps,ae.state=n.memoizedState,ae.componentWillUnmount()}catch(ue){at(l,i,ue)}}break;case 5:Kr($,$.return);break;case 22:if($.memoizedState!==null){Hh(H);continue}}re!==null?(re.return=$,ie=re):Hh(H)}W=W.sibling}e:for(W=null,H=e;;){if(H.tag===5){if(W===null){W=H;try{u=H.stateNode,I?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(_=H.stateNode,N=H.memoizedProps.style,m=N!=null&&N.hasOwnProperty("display")?N.display:null,_.style.display=Vt("display",m))}catch(ue){at(e,e.return,ue)}}}else if(H.tag===6){if(W===null)try{H.stateNode.nodeValue=I?"":H.memoizedProps}catch(ue){at(e,e.return,ue)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;W===H&&(W=null),H=H.return}W===H&&(W=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:cn(n,e),yn(e),l&4&&$h(e);break;case 21:break;default:cn(n,e),yn(e)}}function yn(e){var n=e.flags;if(n&2){try{e:{for(var i=e.return;i!==null;){if(Ah(i)){var l=i;break e}i=i.return}throw Error(r(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(Be(u,""),l.flags&=-33);var h=Fh(e);za(e,h,u);break;case 3:case 4:var m=l.stateNode.containerInfo,_=Fh(e);Fa(e,_,m);break;default:throw Error(r(161))}}catch(N){at(e,e.return,N)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Eg(e,n,i){ie=e,Wh(e)}function Wh(e,n,i){for(var l=(e.mode&1)!==0;ie!==null;){var u=ie,h=u.child;if(u.tag===22&&l){var m=u.memoizedState!==null||vo;if(!m){var _=u.alternate,N=_!==null&&_.memoizedState!==null||Tt;_=vo;var I=Tt;if(vo=m,(Tt=N)&&!I)for(ie=u;ie!==null;)m=ie,N=m.child,m.tag===22&&m.memoizedState!==null?Vh(u):N!==null?(N.return=m,ie=N):Vh(u);for(;h!==null;)ie=h,Wh(h),h=h.sibling;ie=u,vo=_,Tt=I}Bh(e)}else(u.subtreeFlags&8772)!==0&&h!==null?(h.return=u,ie=h):Bh(e)}}function Bh(e){for(;ie!==null;){var n=ie;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Tt||yo(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Tt)if(i===null)l.componentDidMount();else{var u=n.elementType===n.type?i.memoizedProps:ln(n.type,i.memoizedProps);l.componentDidUpdate(u,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var h=n.updateQueue;h!==null&&$d(n,h,l);break;case 3:var m=n.updateQueue;if(m!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}$d(n,m,i)}break;case 5:var _=n.stateNode;if(i===null&&n.flags&4){i=_;var N=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&i.focus();break;case"img":N.src&&(i.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var I=n.alternate;if(I!==null){var W=I.memoizedState;if(W!==null){var H=W.dehydrated;H!==null&&Cs(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Tt||n.flags&512&&Aa(n)}catch($){at(n,n.return,$)}}if(n===e){ie=null;break}if(i=n.sibling,i!==null){i.return=n.return,ie=i;break}ie=n.return}}function Hh(e){for(;ie!==null;){var n=ie;if(n===e){ie=null;break}var i=n.sibling;if(i!==null){i.return=n.return,ie=i;break}ie=n.return}}function Vh(e){for(;ie!==null;){var n=ie;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{yo(4,n)}catch(N){at(n,i,N)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var u=n.return;try{l.componentDidMount()}catch(N){at(n,u,N)}}var h=n.return;try{Aa(n)}catch(N){at(n,h,N)}break;case 5:var m=n.return;try{Aa(n)}catch(N){at(n,m,N)}}}catch(N){at(n,n.return,N)}if(n===e){ie=null;break}var _=n.sibling;if(_!==null){_.return=n.return,ie=_;break}ie=n.return}}var Ig=Math.ceil,_o=oe.ReactCurrentDispatcher,$a=oe.ReactCurrentOwner,en=oe.ReactCurrentBatchConfig,He=0,vt=null,ht=null,Ct=0,Xt=0,Jr=Wn(0),mt=0,Gs=null,xr=0,wo=0,Ua=0,Xs=null,At=null,Wa=0,Zr=1/0,En=null,bo=!1,Ba=null,Gn=null,No=!1,Xn=null,ko=0,qs=0,Ha=null,Co=-1,So=0;function Lt(){return(He&6)!==0?ut():Co!==-1?Co:Co=ut()}function qn(e){return(e.mode&1)===0?1:(He&2)!==0&&Ct!==0?Ct&-Ct:hg.transition!==null?(So===0&&(So=Au()),So):(e=Ge,e!==0||(e=window.event,e=e===void 0?16:Yu(e.type)),e)}function un(e,n,i,l){if(50<qs)throw qs=0,Ha=null,Error(r(185));_s(e,i,l),((He&2)===0||e!==vt)&&(e===vt&&((He&2)===0&&(wo|=i),mt===4&&Kn(e,Ct)),Ft(e,l),i===1&&He===0&&(n.mode&1)===0&&(Zr=ut()+500,Zi&&Hn()))}function Ft(e,n){var i=e.callbackNode;h0(e,n);var l=Mi(e,e===vt?Ct:0);if(l===0)i!==null&&Mu(i),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(i!=null&&Mu(i),n===1)e.tag===0?dg(Qh.bind(null,e)):Rd(Qh.bind(null,e)),lg(function(){(He&6)===0&&Hn()}),i=null;else{switch(Fu(l)){case 1:i=Nl;break;case 4:i=Du;break;case 16:i=Ti;break;case 536870912:i=Ou;break;default:i=Ti}i=tf(i,Yh.bind(null,e))}e.callbackPriority=n,e.callbackNode=i}}function Yh(e,n){if(Co=-1,So=0,(He&6)!==0)throw Error(r(327));var i=e.callbackNode;if(es()&&e.callbackNode!==i)return null;var l=Mi(e,e===vt?Ct:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||n)n=jo(e,l);else{n=l;var u=He;He|=2;var h=Xh();(vt!==e||Ct!==n)&&(En=null,Zr=ut()+500,yr(e,n));do try{Pg();break}catch(_){Gh(e,_)}while(!0);aa(),_o.current=h,He=u,ht!==null?n=0:(vt=null,Ct=0,n=mt)}if(n!==0){if(n===2&&(u=kl(e),u!==0&&(l=u,n=Va(e,u))),n===1)throw i=Gs,yr(e,0),Kn(e,l),Ft(e,ut()),i;if(n===6)Kn(e,l);else{if(u=e.current.alternate,(l&30)===0&&!Tg(u)&&(n=jo(e,l),n===2&&(h=kl(e),h!==0&&(l=h,n=Va(e,h))),n===1))throw i=Gs,yr(e,0),Kn(e,l),Ft(e,ut()),i;switch(e.finishedWork=u,e.finishedLanes=l,n){case 0:case 1:throw Error(r(345));case 2:_r(e,At,En);break;case 3:if(Kn(e,l),(l&130023424)===l&&(n=Wa+500-ut(),10<n)){if(Mi(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){Lt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Kl(_r.bind(null,e,At,En),n);break}_r(e,At,En);break;case 4:if(Kn(e,l),(l&4194240)===l)break;for(n=e.eventTimes,u=-1;0<l;){var m=31-rn(l);h=1<<m,m=n[m],m>u&&(u=m),l&=~h}if(l=u,l=ut()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Ig(l/1960))-l,10<l){e.timeoutHandle=Kl(_r.bind(null,e,At,En),l);break}_r(e,At,En);break;case 5:_r(e,At,En);break;default:throw Error(r(329))}}}return Ft(e,ut()),e.callbackNode===i?Yh.bind(null,e):null}function Va(e,n){var i=Xs;return e.current.memoizedState.isDehydrated&&(yr(e,n).flags|=256),e=jo(e,n),e!==2&&(n=At,At=i,n!==null&&Ya(n)),e}function Ya(e){At===null?At=e:At.push.apply(At,e)}function Tg(e){for(var n=e;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var u=i[l],h=u.getSnapshot;u=u.value;try{if(!sn(h(),u))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Kn(e,n){for(n&=~Ua,n&=~wo,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var i=31-rn(n),l=1<<i;e[i]=-1,n&=~l}}function Qh(e){if((He&6)!==0)throw Error(r(327));es();var n=Mi(e,0);if((n&1)===0)return Ft(e,ut()),null;var i=jo(e,n);if(e.tag!==0&&i===2){var l=kl(e);l!==0&&(n=l,i=Va(e,l))}if(i===1)throw i=Gs,yr(e,0),Kn(e,n),Ft(e,ut()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,_r(e,At,En),Ft(e,ut()),null}function Qa(e,n){var i=He;He|=1;try{return e(n)}finally{He=i,He===0&&(Zr=ut()+500,Zi&&Hn())}}function vr(e){Xn!==null&&Xn.tag===0&&(He&6)===0&&es();var n=He;He|=1;var i=en.transition,l=Ge;try{if(en.transition=null,Ge=1,e)return e()}finally{Ge=l,en.transition=i,He=n,(He&6)===0&&Hn()}}function Ga(){Xt=Jr.current,nt(Jr)}function yr(e,n){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,og(i)),ht!==null)for(i=ht.return;i!==null;){var l=i;switch(ra(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Ki();break;case 3:Xr(),nt(Mt),nt(jt),va();break;case 5:ga(l);break;case 4:Xr();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:ca(l.type._context);break;case 22:case 23:Ga()}i=i.return}if(vt=e,ht=e=Jn(e.current,null),Ct=Xt=n,mt=0,Gs=null,Ua=wo=xr=0,At=Xs=null,pr!==null){for(n=0;n<pr.length;n++)if(i=pr[n],l=i.interleaved,l!==null){i.interleaved=null;var u=l.next,h=i.pending;if(h!==null){var m=h.next;h.next=u,l.next=m}i.pending=l}pr=null}return e}function Gh(e,n){do{var i=ht;try{if(aa(),uo.current=mo,ho){for(var l=lt.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ho=!1}if(gr=0,xt=pt=lt=null,Ws=!1,Bs=0,$a.current=null,i===null||i.return===null){mt=1,Gs=n,ht=null;break}e:{var h=e,m=i.return,_=i,N=n;if(n=Ct,_.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var I=N,W=_,H=W.tag;if((W.mode&1)===0&&(H===0||H===11||H===15)){var $=W.alternate;$?(W.updateQueue=$.updateQueue,W.memoizedState=$.memoizedState,W.lanes=$.lanes):(W.updateQueue=null,W.memoizedState=null)}var re=yh(m);if(re!==null){re.flags&=-257,_h(re,m,_,h,n),re.mode&1&&vh(h,I,n),n=re,N=I;var ae=n.updateQueue;if(ae===null){var ue=new Set;ue.add(N),n.updateQueue=ue}else ae.add(N);break e}else{if((n&1)===0){vh(h,I,n),Xa();break e}N=Error(r(426))}}else if(st&&_.mode&1){var dt=yh(m);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),_h(dt,m,_,h,n),oa(qr(N,_));break e}}h=N=qr(N,_),mt!==4&&(mt=2),Xs===null?Xs=[h]:Xs.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,n&=-n,h.lanes|=n;var S=gh(h,N,n);zd(h,S);break e;case 1:_=N;var k=h.type,j=h.stateNode;if((h.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Gn===null||!Gn.has(j)))){h.flags|=65536,n&=-n,h.lanes|=n;var Y=xh(h,_,n);zd(h,Y);break e}}h=h.return}while(h!==null)}Kh(i)}catch(de){n=de,ht===i&&i!==null&&(ht=i=i.return);continue}break}while(!0)}function Xh(){var e=_o.current;return _o.current=mo,e===null?mo:e}function Xa(){(mt===0||mt===3||mt===2)&&(mt=4),vt===null||(xr&268435455)===0&&(wo&268435455)===0||Kn(vt,Ct)}function jo(e,n){var i=He;He|=2;var l=Xh();(vt!==e||Ct!==n)&&(En=null,yr(e,n));do try{Rg();break}catch(u){Gh(e,u)}while(!0);if(aa(),He=i,_o.current=l,ht!==null)throw Error(r(261));return vt=null,Ct=0,mt}function Rg(){for(;ht!==null;)qh(ht)}function Pg(){for(;ht!==null&&!r0();)qh(ht)}function qh(e){var n=ef(e.alternate,e,Xt);e.memoizedProps=e.pendingProps,n===null?Kh(e):ht=n,$a.current=null}function Kh(e){var n=e;do{var i=n.alternate;if(e=n.return,(n.flags&32768)===0){if(i=kg(i,n,Xt),i!==null){ht=i;return}}else{if(i=Cg(i,n),i!==null){i.flags&=32767,ht=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,ht=null;return}}if(n=n.sibling,n!==null){ht=n;return}ht=n=e}while(n!==null);mt===0&&(mt=5)}function _r(e,n,i){var l=Ge,u=en.transition;try{en.transition=null,Ge=1,Lg(e,n,i,l)}finally{en.transition=u,Ge=l}return null}function Lg(e,n,i,l){do es();while(Xn!==null);if((He&6)!==0)throw Error(r(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var h=i.lanes|i.childLanes;if(f0(e,h),e===vt&&(ht=vt=null,Ct=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||No||(No=!0,tf(Ti,function(){return es(),null})),h=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||h){h=en.transition,en.transition=null;var m=Ge;Ge=1;var _=He;He|=4,$a.current=null,jg(e,i),Uh(i,e),Z0(Xl),Ai=!!Gl,Xl=Gl=null,e.current=i,Eg(i),s0(),He=_,Ge=m,en.transition=h}else e.current=i;if(No&&(No=!1,Xn=e,ko=u),h=e.pendingLanes,h===0&&(Gn=null),l0(i.stateNode),Ft(e,ut()),n!==null)for(l=e.onRecoverableError,i=0;i<n.length;i++)u=n[i],l(u.value,{componentStack:u.stack,digest:u.digest});if(bo)throw bo=!1,e=Ba,Ba=null,e;return(ko&1)!==0&&e.tag!==0&&es(),h=e.pendingLanes,(h&1)!==0?e===Ha?qs++:(qs=0,Ha=e):qs=0,Hn(),null}function es(){if(Xn!==null){var e=Fu(ko),n=en.transition,i=Ge;try{if(en.transition=null,Ge=16>e?16:e,Xn===null)var l=!1;else{if(e=Xn,Xn=null,ko=0,(He&6)!==0)throw Error(r(331));var u=He;for(He|=4,ie=e.current;ie!==null;){var h=ie,m=h.child;if((ie.flags&16)!==0){var _=h.deletions;if(_!==null){for(var N=0;N<_.length;N++){var I=_[N];for(ie=I;ie!==null;){var W=ie;switch(W.tag){case 0:case 11:case 15:Qs(8,W,h)}var H=W.child;if(H!==null)H.return=W,ie=H;else for(;ie!==null;){W=ie;var $=W.sibling,re=W.return;if(Oh(W),W===I){ie=null;break}if($!==null){$.return=re,ie=$;break}ie=re}}}var ae=h.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var dt=ue.sibling;ue.sibling=null,ue=dt}while(ue!==null)}}ie=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,ie=m;else e:for(;ie!==null;){if(h=ie,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Qs(9,h,h.return)}var S=h.sibling;if(S!==null){S.return=h.return,ie=S;break e}ie=h.return}}var k=e.current;for(ie=k;ie!==null;){m=ie;var j=m.child;if((m.subtreeFlags&2064)!==0&&j!==null)j.return=m,ie=j;else e:for(m=k;ie!==null;){if(_=ie,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:yo(9,_)}}catch(de){at(_,_.return,de)}if(_===m){ie=null;break e}var Y=_.sibling;if(Y!==null){Y.return=_.return,ie=Y;break e}ie=_.return}}if(He=u,Hn(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Ri,e)}catch{}l=!0}return l}finally{Ge=i,en.transition=n}}return!1}function Jh(e,n,i){n=qr(i,n),n=gh(e,n,1),e=Yn(e,n,1),n=Lt(),e!==null&&(_s(e,1,n),Ft(e,n))}function at(e,n,i){if(e.tag===3)Jh(e,e,i);else for(;n!==null;){if(n.tag===3){Jh(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gn===null||!Gn.has(l))){e=qr(i,e),e=xh(n,e,1),n=Yn(n,e,1),e=Lt(),n!==null&&(_s(n,1,e),Ft(n,e));break}}n=n.return}}function Mg(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),n=Lt(),e.pingedLanes|=e.suspendedLanes&i,vt===e&&(Ct&i)===i&&(mt===4||mt===3&&(Ct&130023424)===Ct&&500>ut()-Wa?yr(e,0):Ua|=i),Ft(e,n)}function Zh(e,n){n===0&&((e.mode&1)===0?n=1:(n=Li,Li<<=1,(Li&130023424)===0&&(Li=4194304)));var i=Lt();e=Cn(e,n),e!==null&&(_s(e,n,i),Ft(e,i))}function Dg(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Zh(e,i)}function Og(e,n){var i=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(r(314))}l!==null&&l.delete(n),Zh(e,i)}var ef;ef=function(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps||Mt.current)Ot=!0;else{if((e.lanes&i)===0&&(n.flags&128)===0)return Ot=!1,Ng(e,n,i);Ot=(e.flags&131072)!==0}else Ot=!1,st&&(n.flags&1048576)!==0&&Pd(n,to,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;xo(e,n),e=n.pendingProps;var u=Wr(n,jt.current);Qr(n,i),u=wa(null,n,l,e,u,i);var h=ba();return n.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Dt(l)?(h=!0,Ji(n)):h=!1,n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ha(n),u.updater=lo,n.stateNode=u,u._reactInternals=n,pa(n,l,e,i),n=Ta(null,n,l,!0,h,i)):(n.tag=0,st&&h&&na(n),Pt(null,n,u,i),n=n.child),n;case 16:l=n.elementType;e:{switch(xo(e,n),e=n.pendingProps,u=l._init,l=u(l._payload),n.type=l,u=n.tag=Fg(l),e=ln(l,e),u){case 0:n=Ia(null,n,l,e,i);break e;case 1:n=Sh(null,n,l,e,i);break e;case 11:n=wh(null,n,l,e,i);break e;case 14:n=bh(null,n,l,ln(l.type,e),i);break e}throw Error(r(306,l,""))}return n;case 0:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:ln(l,u),Ia(e,n,l,u,i);case 1:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:ln(l,u),Sh(e,n,l,u,i);case 3:e:{if(jh(n),e===null)throw Error(r(387));l=n.pendingProps,h=n.memoizedState,u=h.element,Fd(e,n),oo(n,l,null,i);var m=n.memoizedState;if(l=m.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){u=qr(Error(r(423)),n),n=Eh(e,n,l,i,u);break e}else if(l!==u){u=qr(Error(r(424)),n),n=Eh(e,n,l,i,u);break e}else for(Gt=Un(n.stateNode.containerInfo.firstChild),Qt=n,st=!0,on=null,i=Qd(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Vr(),l===u){n=jn(e,n,i);break e}Pt(e,n,l,i)}n=n.child}return n;case 5:return Gd(n),e===null&&ia(n),l=n.type,u=n.pendingProps,h=e!==null?e.memoizedProps:null,m=u.children,ql(l,u)?m=null:h!==null&&ql(l,h)&&(n.flags|=32),Ch(e,n),Pt(e,n,m,i),n.child;case 6:return e===null&&ia(n),null;case 13:return Ih(e,n,i);case 4:return ma(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Gr(n,null,l,i):Pt(e,n,l,i),n.child;case 11:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:ln(l,u),wh(e,n,l,u,i);case 7:return Pt(e,n,n.pendingProps,i),n.child;case 8:return Pt(e,n,n.pendingProps.children,i),n.child;case 12:return Pt(e,n,n.pendingProps.children,i),n.child;case 10:e:{if(l=n.type._context,u=n.pendingProps,h=n.memoizedProps,m=u.value,Ke(ro,l._currentValue),l._currentValue=m,h!==null)if(sn(h.value,m)){if(h.children===u.children&&!Mt.current){n=jn(e,n,i);break e}}else for(h=n.child,h!==null&&(h.return=n);h!==null;){var _=h.dependencies;if(_!==null){m=h.child;for(var N=_.firstContext;N!==null;){if(N.context===l){if(h.tag===1){N=Sn(-1,i&-i),N.tag=2;var I=h.updateQueue;if(I!==null){I=I.shared;var W=I.pending;W===null?N.next=N:(N.next=W.next,W.next=N),I.pending=N}}h.lanes|=i,N=h.alternate,N!==null&&(N.lanes|=i),ua(h.return,i,n),_.lanes|=i;break}N=N.next}}else if(h.tag===10)m=h.type===n.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(r(341));m.lanes|=i,_=m.alternate,_!==null&&(_.lanes|=i),ua(m,i,n),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===n){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}Pt(e,n,u.children,i),n=n.child}return n;case 9:return u=n.type,l=n.pendingProps.children,Qr(n,i),u=Jt(u),l=l(u),n.flags|=1,Pt(e,n,l,i),n.child;case 14:return l=n.type,u=ln(l,n.pendingProps),u=ln(l.type,u),bh(e,n,l,u,i);case 15:return Nh(e,n,n.type,n.pendingProps,i);case 17:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:ln(l,u),xo(e,n),n.tag=1,Dt(l)?(e=!0,Ji(n)):e=!1,Qr(n,i),Bd(n,l,u),pa(n,l,u,i),Ta(null,n,l,!0,e,i);case 19:return Rh(e,n,i);case 22:return kh(e,n,i)}throw Error(r(156,n.tag))};function tf(e,n){return Lu(e,n)}function Ag(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(e,n,i,l){return new Ag(e,n,i,l)}function qa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fg(e){if(typeof e=="function")return qa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fe)return 11;if(e===Le)return 14}return 2}function Jn(e,n){var i=e.alternate;return i===null?(i=tn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Eo(e,n,i,l,u,h){var m=2;if(l=e,typeof e=="function")qa(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case L:return wr(i.children,u,h,n);case R:m=8,u|=8;break;case me:return e=tn(12,i,n,u|2),e.elementType=me,e.lanes=h,e;case D:return e=tn(13,i,n,u),e.elementType=D,e.lanes=h,e;case je:return e=tn(19,i,n,u),e.elementType=je,e.lanes=h,e;case Ie:return Io(i,u,h,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case le:m=10;break e;case ke:m=9;break e;case fe:m=11;break e;case Le:m=14;break e;case Me:m=16,l=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=tn(m,i,n,u),n.elementType=e,n.type=l,n.lanes=h,n}function wr(e,n,i,l){return e=tn(7,e,l,n),e.lanes=i,e}function Io(e,n,i,l){return e=tn(22,e,l,n),e.elementType=Ie,e.lanes=i,e.stateNode={isHidden:!1},e}function Ka(e,n,i){return e=tn(6,e,null,n),e.lanes=i,e}function Ja(e,n,i){return n=tn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function zg(e,n,i,l,u){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cl(0),this.expirationTimes=Cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cl(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Za(e,n,i,l,u,h,m,_,N){return e=new zg(e,n,i,_,N),n===1?(n=1,h===!0&&(n|=8)):n=0,h=tn(3,null,null,n),e.current=h,h.stateNode=e,h.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ha(h),e}function $g(e,n,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:l==null?null:""+l,children:e,containerInfo:n,implementation:i}}function nf(e){if(!e)return Bn;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Dt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(Dt(i))return Id(e,i,n)}return n}function rf(e,n,i,l,u,h,m,_,N){return e=Za(i,l,!0,e,u,h,m,_,N),e.context=nf(null),i=e.current,l=Lt(),u=qn(i),h=Sn(l,u),h.callback=n??null,Yn(i,h,u),e.current.lanes=u,_s(e,u,l),Ft(e,l),e}function To(e,n,i,l){var u=n.current,h=Lt(),m=qn(u);return i=nf(i),n.context===null?n.context=i:n.pendingContext=i,n=Sn(h,m),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=Yn(u,n,m),e!==null&&(un(e,u,m,h),io(e,u,m)),m}function Ro(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function ec(e,n){sf(e,n),(e=e.alternate)&&sf(e,n)}function Ug(){return null}var of=typeof reportError=="function"?reportError:function(e){console.error(e)};function tc(e){this._internalRoot=e}Po.prototype.render=tc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));To(e,n,null,null)},Po.prototype.unmount=tc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;vr(function(){To(null,e,null,null)}),n[wn]=null}};function Po(e){this._internalRoot=e}Po.prototype.unstable_scheduleHydration=function(e){if(e){var n=Uu();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Fn.length&&n!==0&&n<Fn[i].priority;i++);Fn.splice(i,0,e),i===0&&Hu(e)}};function nc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lf(){}function Wg(e,n,i,l,u){if(u){if(typeof l=="function"){var h=l;l=function(){var I=Ro(m);h.call(I)}}var m=rf(n,l,e,0,null,!1,!1,"",lf);return e._reactRootContainer=m,e[wn]=m.current,Ms(e.nodeType===8?e.parentNode:e),vr(),m}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var _=l;l=function(){var I=Ro(N);_.call(I)}}var N=Za(e,0,!1,null,null,!1,!1,"",lf);return e._reactRootContainer=N,e[wn]=N.current,Ms(e.nodeType===8?e.parentNode:e),vr(function(){To(n,N,i,l)}),N}function Mo(e,n,i,l,u){var h=i._reactRootContainer;if(h){var m=h;if(typeof u=="function"){var _=u;u=function(){var N=Ro(m);_.call(N)}}To(n,m,e,u)}else m=Wg(i,n,e,u,l);return Ro(m)}zu=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var i=ys(n.pendingLanes);i!==0&&(Sl(n,i|1),Ft(n,ut()),(He&6)===0&&(Zr=ut()+500,Hn()))}break;case 13:vr(function(){var l=Cn(e,1);if(l!==null){var u=Lt();un(l,e,1,u)}}),ec(e,1)}},jl=function(e){if(e.tag===13){var n=Cn(e,134217728);if(n!==null){var i=Lt();un(n,e,134217728,i)}ec(e,134217728)}},$u=function(e){if(e.tag===13){var n=qn(e),i=Cn(e,n);if(i!==null){var l=Lt();un(i,e,n,l)}ec(e,n)}},Uu=function(){return Ge},Wu=function(e,n){var i=Ge;try{return Ge=e,n()}finally{Ge=i}},yl=function(e,n,i){switch(n){case"input":if(Ee(e,i),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var u=qi(l);if(!u)throw Error(r(90));J(l),Ee(l,u)}}}break;case"textarea":se(e,i);break;case"select":n=i.value,n!=null&&Qe(e,!!i.multiple,n,!1)}},Su=Qa,ju=vr;var Bg={usingClientEntryPoint:!1,Events:[As,$r,qi,ku,Cu,Qa]},Ks={findFiberByHostInstance:ur,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Hg={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ru(e),e===null?null:e.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||Ug,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Do=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Do.isDisabled&&Do.supportsFiber)try{Ri=Do.inject(Hg),mn=Do}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bg,zt.createPortal=function(e,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nc(n))throw Error(r(200));return $g(e,n,null,i)},zt.createRoot=function(e,n){if(!nc(e))throw Error(r(299));var i=!1,l="",u=of;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),n=Za(e,1,!1,null,null,i,!1,l,u),e[wn]=n.current,Ms(e.nodeType===8?e.parentNode:e),new tc(n)},zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Ru(n),e=e===null?null:e.stateNode,e},zt.flushSync=function(e){return vr(e)},zt.hydrate=function(e,n,i){if(!Lo(n))throw Error(r(200));return Mo(null,e,n,!0,i)},zt.hydrateRoot=function(e,n,i){if(!nc(e))throw Error(r(405));var l=i!=null&&i.hydratedSources||null,u=!1,h="",m=of;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),n=rf(n,null,e,1,i??null,u,!1,h,m),e[wn]=n.current,Ms(e),l)for(e=0;e<l.length;e++)i=l[e],u=i._getVersion,u=u(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,u]:n.mutableSourceEagerHydrationData.push(i,u);return new Po(n)},zt.render=function(e,n,i){if(!Lo(n))throw Error(r(200));return Mo(null,e,n,!1,i)},zt.unmountComponentAtNode=function(e){if(!Lo(e))throw Error(r(40));return e._reactRootContainer?(vr(function(){Mo(null,null,e,!1,function(){e._reactRootContainer=null,e[wn]=null})}),!0):!1},zt.unstable_batchedUpdates=Qa,zt.unstable_renderSubtreeIntoContainer=function(e,n,i,l){if(!Lo(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Mo(e,n,i,!1,l)},zt.version="18.2.0-next-9e3b772b8-20220608",zt}var mf;function Jg(){if(mf)return ic.exports;mf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),ic.exports=Kg(),ic.exports}var gf;function Zg(){if(gf)return Oo;gf=1;var s=Jg();return Oo.createRoot=s.createRoot,Oo.hydrateRoot=s.hydrateRoot,Oo}var ex=Zg();const tx=yp(ex),nx=({children:s,activeTab:t,setActiveTab:r,isAdmin:o,onToggleAdmin:c,onDownloadDB:d,onUploadDB:f,onOpenSync:p,isSyncActive:g})=>{const x=F.useRef(null),w=[{id:"characters",label:"",icon:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})},{id:"connections",label:"",icon:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})},{id:"worlds",label:"",icon:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})},{id:"notes",label:"",icon:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})},{id:"admin",label:"",adminOnly:!0,icon:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})}],v=E=>{var Z;const O=(Z=E.target.files)==null?void 0:Z[0];if(!O)return;const B=new FileReader;B.onload=ce=>{var ye;const ee=(ye=ce.target)==null?void 0:ye.result;typeof ee=="string"&&f(ee)},B.readAsText(O),x.current&&(x.current.value="")},y=()=>t==="notes"?"max-w-[1920px] w-full px-4 md:px-8":"max-w-6xl w-full px-4 py-8 md:px-12 md:py-12";return a.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#050505] text-stone-300",children:[a.jsxs("div",{className:"md:hidden flex items-center justify-between px-6 py-5 border-b border-stone-900 bg-[#050505]/95 backdrop-blur sticky top-0 z-40",children:[a.jsx("h1",{className:"text-lg font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""}),a.jsx("button",{onClick:c,className:`p-2 rounded-lg transition-all border ${o?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500":"bg-stone-900/50 border-stone-800 text-stone-500"}`,children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),a.jsxs("aside",{className:"hidden md:flex w-64 border-r border-stone-900 flex-col fixed h-screen bg-[#050505] z-50",children:[a.jsx("div",{className:"p-8",children:a.jsx("h1",{className:"text-xl font-serif font-bold tracking-[0.2em] text-stone-400 uppercase",children:""})}),a.jsx("nav",{className:"flex-grow px-4 space-y-2",children:w.filter(E=>!E.adminOnly||o).map(E=>a.jsxs("button",{onClick:()=>r(E.id),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-all flex items-center gap-3 ${t===E.id?"bg-stone-900 text-stone-100 border-l-2 border-emerald-500 rounded-l-none":"hover:bg-stone-900/50 text-stone-500 hover:text-stone-300"} ${E.adminOnly?"text-emerald-500/70":""}`,children:[a.jsx("svg",{className:"w-5 h-5 opacity-70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.icon}),E.label]},E.id))}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("button",{onClick:p,className:`w-full py-2 px-3 rounded-lg border text-[9px] uppercase tracking-widest font-bold flex items-center justify-center gap-2 transition-all ${g?"bg-emerald-900/10 border-emerald-500/30 text-emerald-500 hover:bg-emerald-900/20":"bg-stone-900/30 border-stone-800 text-stone-600 hover:bg-stone-900/60 hover:text-stone-400"}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${g?"bg-emerald-500 animate-pulse":"bg-stone-600"}`}),g?"":""]}),a.jsx("button",{onClick:c,className:`w-full py-3 text-[10px] uppercase tracking-widest font-bold rounded-md transition-all border ${o?"bg-emerald-950/20 border-emerald-900/50 text-emerald-500 shadow-lg shadow-emerald-900/10":"bg-stone-900/50 hover:bg-stone-900 border-stone-800 text-stone-400"}`,children:o?" ()":"  "})]})]}),a.jsx("nav",{className:"md:hidden fixed bottom-0 w-full bg-[#050505]/95 backdrop-blur-xl border-t border-stone-900 z-50 px-2 pb-safe-area",children:a.jsxs("div",{className:"flex justify-around items-center",children:[w.filter(E=>!E.adminOnly||o).map(E=>a.jsxs("button",{onClick:()=>r(E.id),className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${t===E.id?"text-emerald-500":"text-stone-600"}`,children:[a.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.icon}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:E.label})]},E.id)),a.jsxs("button",{onClick:p,className:`flex flex-col items-center justify-center py-3 px-2 w-full transition-all ${g?"text-emerald-500":"text-stone-700"}`,children:[a.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:""})]})]})}),a.jsxs("main",{className:"flex-grow md:ml-64 min-h-screen relative pb-24 md:pb-0",children:[a.jsx("div",{className:`${y()} mx-auto transition-all duration-300 py-8 md:py-12`,children:s}),a.jsxs("div",{className:"fixed bottom-24 md:bottom-8 right-4 md:right-8 flex gap-3 z-40 scale-90 md:scale-100 origin-bottom-right",children:[a.jsx("input",{type:"file",ref:x,onChange:v,accept:".json",className:"hidden"}),a.jsx("button",{onClick:()=>{var E;return(E=x.current)==null?void 0:E.click()},className:"px-4 py-2 md:px-5 md:py-2.5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-emerald-500 transition-all backdrop-blur-sm shadow-lg shadow-emerald-900/10",children:" "}),a.jsx("button",{onClick:d,className:"px-4 py-2 md:px-5 md:py-2.5 bg-stone-900/80 hover:bg-stone-800 border border-stone-700 rounded-full text-[9px] md:text-[10px] uppercase tracking-widest font-bold text-stone-300 transition-all backdrop-blur-sm",children:" "})]})]})]})},rx=({character:s,isVisible:t=!0,staggerIndex:r=0,onClick:o})=>{const c=F.useRef(null),[d,f]=F.useState({x:0,y:0}),[p,g]=F.useState({x:50,y:50,opacity:0}),[x,w]=F.useState(!1),[v,y]=F.useState(!1),E=F.useMemo(()=>Array.from({length:8}).map((L,R)=>({id:R,left:`${Math.random()*100}%`,delay:`${Math.random()*.6}s`,duration:`${1+Math.random()}s`,size:`${1.5+Math.random()*2}px`})),[]),O=L=>{if(!c.current||!t)return;const R=c.current.getBoundingClientRect(),me=R.left+R.width/2,le=R.top+R.height/2,ke=-(L.clientY-le)/(R.height/2)*12,fe=(L.clientX-me)/(R.width/2)*12,D=(L.clientX-R.left)/R.width*100,je=(L.clientY-R.top)/R.height*100;f({x:ke,y:fe}),g({x:D,y:je,opacity:.5})},B=()=>t&&w(!0),Z=()=>{f({x:0,y:0}),g(L=>({...L,opacity:0})),w(!1),y(!1)},ce={objectFit:"cover",objectPosition:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transformOrigin:`${s.miniImageX??50}% ${s.miniImageY??50}%`,transform:`scale(${s.miniImageScale??1})`},ee=s.name.length,ye=ee>20?"text-sm":ee>15?"text-base":"text-xl",oe=x?`${-d.y*2.5}px ${d.x*2.5}px 50px -10px rgba(16, 185, 129, 0.3)`:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",We=t?`${Math.min(r*45,900)}ms`:"0ms",K=v?.96:x?1.04:1;return a.jsx("div",{className:`relative mb-10 px-5 w-full sm:w-1/2 lg:w-1/4 perspective-2000 preserve-3d transition-opacity duration-500 ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,style:{animation:t?"reveal-3d-fire 1.1s cubic-bezier(0.22, 1, 0.36, 1) both":"disappear-3d-fire 0.6s cubic-bezier(0.22, 1, 0.36, 1) both",animationDelay:t?We:"0ms"},children:a.jsxs("div",{className:"h-full relative preserve-3d pointer-events-none",children:[t&&E.map(L=>a.jsx("div",{className:"absolute bottom-4 bg-emerald-400 rounded-full blur-[0.5px] z-0 pointer-events-none",style:{left:L.left,width:L.size,height:L.size,animation:`ember-float ${L.duration} ease-out both`,animationDelay:`calc(${We} + ${L.delay})`,boxShadow:"0 0 6px #10b981"}},L.id)),a.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-[60px] rounded-full transition-opacity duration-700 pointer-events-none -z-10",style:{opacity:x?.45:0,transform:`translate3d(${-d.y*4}px, ${d.x*4}px, -50px) scale(${x?1.1:1})`}}),a.jsxs("div",{ref:c,onMouseMove:O,onMouseEnter:B,onMouseLeave:Z,onMouseDown:()=>t&&y(!0),onMouseUp:()=>y(!1),onClick:()=>t&&o(s.id),style:{transform:`rotateX(${d.x}deg) rotateY(${d.y}deg) scale(${K})`,boxShadow:oe,transition:x&&!v?"transform 0.1s ease-out, box-shadow 0.1s ease-out":"transform 0.7s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.7s ease"},className:"relative bg-[#0f0f0f]/80 border border-stone-900 rounded-2xl p-6 flex flex-col items-center group cursor-pointer h-full min-h-[320px] preserve-3d overflow-hidden backdrop-blur-sm pointer-events-auto z-10",children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none z-20 transition-opacity duration-300",style:{background:`radial-gradient(circle at ${p.x}% ${p.y}%, rgba(255,255,255,0.12) 0%, transparent 60%)`,opacity:p.opacity}}),a.jsx("div",{className:`absolute inset-0 border border-emerald-500/20 rounded-2xl transition-opacity duration-500 pointer-events-none ${x?"opacity-100":"opacity-0"}`}),a.jsx("div",{className:"relative mt-2 shrink-0 translate-z-30 pointer-events-none",children:a.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-2 border-stone-800 group-hover:border-emerald-500/50 transition-all duration-500 bg-black shadow-2xl",children:a.jsx("img",{src:s.imageUrl,alt:s.name,style:ce,className:"w-full h-full opacity-80 group-hover:opacity-100 transition-all duration-700 group-hover:scale-110"})})}),a.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center w-full px-2 shrink-0 translate-z-20 pointer-events-none",children:[a.jsx("h3",{className:`font-serif font-medium text-stone-100 group-hover:text-emerald-100 transition-colors text-center leading-tight line-clamp-1 ${ye}`,children:s.name}),a.jsxs("div",{className:"flex items-center gap-1.5 mt-3",children:[s.age&&a.jsxs("div",{className:"bg-stone-900/60 border border-stone-800 px-2.5 py-1 rounded-lg flex items-baseline gap-1 shadow-inner",children:[a.jsx("span",{className:"text-[11px] font-bold text-stone-300 tracking-tight",children:s.age.toString().replace(/[^0-9]/g,"")||s.age}),a.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-emerald-600/80",children:""})]}),s.height&&a.jsxs("div",{className:"bg-stone-900/60 border border-stone-800 px-2.5 py-1 rounded-lg flex items-baseline gap-1 shadow-inner",children:[a.jsx("span",{className:"text-[11px] font-bold text-stone-300 tracking-tight",children:s.height.toString().replace(/[^0-9]/g,"")||s.height}),a.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-emerald-600/80",children:""})]})]})]}),a.jsx("div",{className:"mt-5 flex flex-wrap gap-1.5 justify-center content-start min-h-[28px] w-full px-1 translate-z-10 pointer-events-none",children:s.tags&&s.tags.length>0?a.jsx(a.Fragment,{children:s.tags.slice(0,3).map(L=>a.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[8px] uppercase tracking-wider font-black rounded-md whitespace-nowrap",children:L},L))}):a.jsx("div",{className:"h-4"})}),a.jsx("div",{className:"mt-auto pt-6 border-t border-stone-900/50 w-full flex justify-center shrink-0 translate-z-10 pointer-events-none",children:a.jsx("span",{className:"text-[8px] uppercase tracking-[0.3em] font-black text-stone-700 group-hover:text-emerald-500 transition-colors",children:" "})})]})]})})},sx=_p.memo(rx,(s,t)=>s.character.id===t.character.id&&JSON.stringify(s.character)===JSON.stringify(t.character)&&s.isVisible===t.isVisible&&s.staggerIndex===t.staggerIndex),xf=({imageUrl:s,scale:t,x:r,y:o,isCircular:c=!1,onUpdate:d})=>{const f=F.useRef(null),[p,g]=F.useState(!1),[x,w]=F.useState({x:0,y:0}),v=y=>{g(!0),w({x:y.clientX,y:y.clientY})};return F.useEffect(()=>{const y=O=>{if(!p||!f.current)return;const B=O.clientX-x.x,Z=O.clientY-x.y,ce=.2,ee=r-B*ce/t,ye=o-Z*ce/t;d({x:ee,y:ye}),w({x:O.clientX,y:O.clientY})},E=()=>g(!1);return p&&(window.addEventListener("mousemove",y),window.addEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",E)}},[p,x,r,o,t,d]),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{ref:f,className:`relative overflow-hidden bg-black border border-stone-800 cursor-move group select-none shadow-2xl transition-all duration-500 hover:border-emerald-500/40 ${c?"w-48 h-48 rounded-full mx-auto":"aspect-[4/5] rounded-3xl w-full"}`,onMouseDown:v,children:[a.jsx("img",{src:s,alt:"",draggable:!1,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${r}% ${o}%`,transformOrigin:`${r}% ${o}%`,transform:`scale(${t})`},className:"pointer-events-none transition-opacity duration-300 opacity-90 group-hover:opacity-100"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/5 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity flex items-center justify-center",children:a.jsx("div",{className:"bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-emerald-500/20",children:a.jsx("span",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-[0.25em]",children:" "})})})]}),a.jsxs("div",{className:"bg-stone-900/60 p-4 rounded-2xl border border-stone-800/50 space-y-3 shadow-inner",children:[a.jsxs("div",{className:"flex justify-between items-center px-1",children:[a.jsx("span",{className:"text-[10px] font-black text-stone-500 uppercase tracking-widest",children:""}),a.jsxs("span",{className:"text-[10px] font-mono text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded",children:[t.toFixed(2),"x"]})]}),a.jsx("input",{type:"range",min:"1",max:"5",step:"0.01",value:t,onChange:y=>d({scale:parseFloat(y.target.value)}),className:"w-full h-1.5 bg-stone-800 rounded-full appearance-none cursor-pointer accent-emerald-500"}),a.jsx("p",{className:"text-[8px] text-stone-700 text-center uppercase tracking-tighter",children:"      "})]})]})},$o=(s,t=800,r=.6)=>new Promise((o,c)=>{const d=new FileReader;d.readAsDataURL(s),d.onload=f=>{var g;const p=new Image;p.src=(g=f.target)==null?void 0:g.result,p.onload=()=>{const x=document.createElement("canvas");let w=p.width,v=p.height;w>t&&(v=v*t/w,w=t),x.width=w,x.height=v;const y=x.getContext("2d");if(y){y.drawImage(p,0,0,w,v);const E=x.toDataURL("image/jpeg",r);o(E)}else c(new Error("Canvas context not available"))},p.onerror=x=>c(x)},d.onerror=f=>c(f)}),_n=s=>{if(!s)return null;const t=/(\*\*.*?\*\*|__.*?__|~~.*?~~|\|\|.*?\|\||\[c=#[0-9a-fA-F]{3,6}\].*?\[\/c\]|\[link=.*?\].*?\[\/link\]|\[tip=.*?\].*?\[\/tip\])/g;return s.split(t).map((o,c)=>{if(o.startsWith("**")&&o.endsWith("**")&&o.length>4)return a.jsx("strong",{className:"text-stone-100 font-bold",children:_n(o.slice(2,-2))},c);if(o.startsWith("__")&&o.endsWith("__")&&o.length>4)return a.jsx("em",{className:"text-stone-300 italic font-light",children:_n(o.slice(2,-2))},c);if(o.startsWith("~~")&&o.endsWith("~~")&&o.length>4)return a.jsx("span",{className:"line-through opacity-60 decoration-stone-500",children:_n(o.slice(2,-2))},c);if(o.startsWith("||")&&o.endsWith("||")&&o.length>4)return a.jsxs("span",{className:"group relative cursor-help rounded bg-stone-800 px-1 py-0.5 mx-0.5 align-middle select-none transition-all hover:bg-stone-700",children:[a.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-stone-200",children:_n(o.slice(2,-2))}),a.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[9px] uppercase font-black tracking-widest text-stone-500 group-hover:opacity-0 pointer-events-none transition-opacity",children:""})]},c);if(o.startsWith("[c=")&&o.endsWith("[/c]")){const d=o.match(/\[c=(#[0-9a-fA-F]{3,6})\](.*?)\[\/c\]/);if(d)return a.jsx("span",{style:{color:d[1]},className:"font-medium drop-shadow-sm",children:_n(d[2])},c)}if(o.startsWith("[link=")&&o.endsWith("[/link]")){const d=o.match(/\[link=(.*?)\](.*?)\[\/link\]/);if(d)return a.jsx("a",{href:d[1],target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:text-emerald-300 hover:underline decoration-emerald-500/50 underline-offset-2 transition-colors cursor-pointer",onClick:f=>f.stopPropagation(),children:_n(d[2])},c)}if(o.startsWith("[tip=")&&o.endsWith("[/tip]")){const d=o.match(/\[tip=(.*?)\](.*?)\[\/tip\]/);if(d)return a.jsxs("span",{className:"relative group cursor-help border-b border-dotted border-stone-500 hover:border-emerald-500 transition-colors",children:[_n(d[2]),a.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max max-w-[200px] p-2 bg-[#1a1a1a] border border-stone-700 rounded-lg text-xs text-stone-300 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50 shadow-xl text-center whitespace-normal leading-tight",children:[d[1],a.jsx("span",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-stone-700"})]})]},c)}return o})},wp=s=>s?s.split(`
`).map((r,o)=>{const c=r.trim();return c?c==="---"?a.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-stone-700 to-transparent my-6 opacity-50"},o):c.startsWith("# ")?a.jsx("h3",{className:"text-xl md:text-2xl font-serif text-emerald-100 border-b border-stone-800/60 pb-2 mb-3 mt-6 first:mt-0 italic",children:_n(c.slice(2))},o):c.startsWith("> ")?a.jsx("blockquote",{className:"border-l-2 border-emerald-500/40 bg-stone-900/20 pl-4 py-2 my-2 rounded-r-lg italic text-stone-400",children:_n(c.slice(2))},o):a.jsx("div",{className:"min-h-[1.5em] text-stone-300 leading-relaxed font-serif text-base md:text-lg break-words",children:_n(r)},o):a.jsx("div",{className:"h-4"},o)}):null,ix=({notes:s,characters:t,onUpdate:r,isAdmin:o})=>{var ke,fe;const[c,d]=F.useState("list"),[f,p]=F.useState(null),[g,x]=F.useState(new Set),[w,v]=F.useState({}),[y,E]=F.useState(""),[O,B]=F.useState(!1),[Z,ce]=F.useState("#10b981"),ee=F.useRef(null);F.useEffect(()=>{c!=="list"&&window.scrollTo({top:0,behavior:"smooth"})},[c]);const ye=(D,je)=>{if(!ee.current)return;const Le=ee.current.selectionStart,Me=ee.current.selectionEnd,Ie=w.content||"",V=Ie.substring(0,Le),q=Ie.substring(Le,Me),b=Ie.substring(Me),A=V+D+q+je+b;v({...w,content:A}),setTimeout(()=>{if(ee.current){ee.current.focus();const te=q.length>0?Le+D.length+q.length+je.length:Le+D.length;ee.current.setSelectionRange(te,te)}},0)};F.useEffect(()=>{ee.current&&c==="editor"&&(ee.current.style.height="auto",ee.current.style.height=`${ee.current.scrollHeight}px`)},[w.content,c]);const oe=D=>{x(je=>{const Le=new Set(je);return Le.has(D)?Le.delete(D):Le.add(D),Le})},We=D=>{D?(p(D.id),v({...D})):(p(null),v({title:"",content:""})),d("editor"),E(""),B(!1)},K=()=>{d("list"),p(null),v({})},L=()=>{if(!(!w.title||!w.content)){if(f){const D=s.map(je=>je.id===f?{...je,...w}:je);r(D)}else{const D={id:Date.now().toString(),title:w.title||"",content:w.content||"",date:new Date().toLocaleDateString("ru-RU"),authorId:w.authorId,targetId:w.targetId};r([D,...s])}K()}},R=()=>{if(f&&window.confirm("     ?")){const D=s.filter(je=>je.id!==f);r(D),K()}},me=D=>t.find(je=>je&&je.id===D),le=F.useMemo(()=>t.filter(D=>D.name.toLowerCase().includes(y.toLowerCase())).sort((D,je)=>D.name.localeCompare(je.name)),[t,y]);return c==="list"?a.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500 w-full mx-auto pb-20",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-stone-900/50 pb-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100 italic",children:""}),a.jsx("p",{className:"text-stone-500 uppercase tracking-[0.3em] text-[9px] font-black",children:"   "})]}),o&&a.jsxs("button",{onClick:()=>We(),className:"group relative bg-white hover:bg-emerald-50 text-black px-8 py-4 rounded-2xl text-[10px] uppercase tracking-[0.2em] font-black transition-all shadow-xl hover:shadow-emerald-500/10 flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})," "]})]}),a.jsx("div",{className:"space-y-6",children:s.length===0?a.jsxs("div",{className:"py-32 text-center animate-slide-up-fade",style:{animationDelay:"100ms"},children:[a.jsx("div",{className:"w-16 h-16 bg-stone-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-stone-800/50",children:a.jsx("svg",{className:"w-8 h-8 text-stone-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),a.jsx("p",{className:"text-stone-700 italic font-serif text-lg",children:" ,   .    ."})]}):s.map((D,je)=>{const Le=me(D.authorId),Me=me(D.targetId),Ie=g.has(D.id);return a.jsxs("article",{style:{animationDelay:`${je*100}ms`},className:`relative group bg-[#0a0a0a] border rounded-3xl p-6 md:p-8 transition-all duration-500 shadow-2xl overflow-hidden animate-slide-up-fade ${Ie?"border-emerald-900/40 bg-stone-950/80":"border-stone-900/60 hover:border-emerald-900/30"}`,children:[a.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 rounded-full blur-[100px] -translate-y-32 translate-x-32 pointer-events-none transition-opacity duration-700 ${Ie?"opacity-100":"opacity-0 group-hover:opacity-50"}`}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[a.jsx("div",{className:"flex items-center gap-3",children:Le?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-10 h-10 rounded-full border border-stone-800 overflow-hidden bg-black shrink-0",children:a.jsx("img",{src:Le.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${Le.miniImageX??50}% ${Le.miniImageY??50}%`,transformOrigin:`${Le.miniImageX??50}% ${Le.miniImageY??50}%`,transform:`scale(${Le.miniImageScale??1})`}})}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-stone-200",children:Le.name})]}):a.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-stone-700 bg-stone-900/50 px-3 py-1.5 rounded-lg",children:" "})}),a.jsx("div",{className:"h-px w-6 bg-stone-900"}),a.jsx("div",{className:"flex items-center gap-3",children:Me?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-emerald-500/60",children:":"}),a.jsx("div",{className:"w-10 h-10 rounded-full border border-emerald-900/20 overflow-hidden bg-black shrink-0",children:a.jsx("img",{src:Me.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${Me.miniImageX??50}% ${Me.miniImageY??50}%`,transformOrigin:`${Me.miniImageX??50}% ${Me.miniImageY??50}%`,transform:`scale(${Me.miniImageScale??1})`}})}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-emerald-400",children:Me.name})]}):a.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-stone-700",children:""})}),a.jsx("div",{className:"ml-auto text-[9px] font-black text-stone-800 uppercase tracking-[0.2em]",children:D.date})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:`font-serif font-bold transition-all duration-500 drop-shadow-md italic break-words ${Ie?"text-2xl md:text-3xl text-emerald-100 mb-6":"text-xl text-stone-300 group-hover:text-emerald-200"}`,children:D.title}),!Ie&&a.jsxs("button",{onClick:()=>oe(D.id),className:"text-[10px] uppercase tracking-[0.2em] font-black text-stone-600 hover:text-emerald-500 transition-colors pt-4 flex items-center gap-2 outline-none group/btn animate-in fade-in duration-500",children:[a.jsx("span",{children:""}),a.jsx("svg",{className:"w-3 h-3 transition-transform group-hover/btn:translate-y-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a.jsx("div",{className:`grid transition-[grid-template-rows,opacity] duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] ${Ie?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:a.jsxs("div",{className:"overflow-hidden min-h-0",children:[a.jsx("div",{className:"w-full h-px bg-gradient-to-r from-emerald-900/50 to-transparent my-6"}),a.jsx("div",{className:"space-y-2",children:wp(D.content)}),a.jsxs("div",{className:"mt-10 pt-6 border-t border-stone-900/50 flex justify-between items-center",children:[a.jsxs("button",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-emerald-900 hover:text-emerald-600 transition-colors flex items-center gap-2",onClick:()=>oe(D.id),children:[a.jsx("svg",{className:"w-3 h-3 rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),""]}),o&&a.jsxs("button",{onClick:()=>We(D),className:"flex items-center gap-2 bg-stone-900/50 hover:bg-stone-800 text-stone-400 px-4 py-2 rounded-lg text-[9px] uppercase font-black tracking-widest transition-all",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),""]})]})]})})]})]},D.id)})})]}):c==="select-author"||c==="select-target"?a.jsxs("div",{className:"min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-stone-900/50 pb-8 mb-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-serif text-stone-100 italic",children:c==="select-author"?" ":" "}),a.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-emerald-500/60 mt-2",children:"   "})]}),a.jsxs("button",{onClick:()=>d("editor"),className:"flex items-center gap-2 text-stone-500 hover:text-white transition-all text-[10px] uppercase font-bold tracking-widest",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"  "]})]}),a.jsx("div",{className:"mb-8",children:a.jsx("input",{type:"text",placeholder:"    ...",value:y,onChange:D=>E(D.target.value),className:"w-full bg-stone-900/50 border border-stone-800 rounded-2xl px-6 py-4 text-sm text-stone-200 outline-none focus:border-emerald-500/50 transition-colors shadow-inner font-serif",autoFocus:!0})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:()=>{v({...w,[c==="select-author"?"authorId":"targetId"]:void 0}),d("editor")},className:"flex items-center gap-4 p-4 rounded-2xl border border-stone-800 hover:border-red-900/50 hover:bg-red-950/10 transition-all group text-left",children:[a.jsx("div",{className:"w-12 h-12 rounded-full border border-stone-800 group-hover:border-red-500/30 bg-stone-900 flex items-center justify-center shrink-0 transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-stone-600 group-hover:text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("span",{className:"text-stone-400 font-bold text-sm block truncate group-hover:text-red-400 transition-colors",children:" "}),a.jsx("span",{className:"text-[9px] uppercase tracking-widest text-stone-600 block truncate",children:" "})]})]}),le.map(D=>a.jsxs("button",{onClick:()=>{v({...w,[c==="select-author"?"authorId":"targetId"]:D.id}),d("editor")},className:"flex items-center gap-4 p-4 rounded-2xl bg-[#0a0a0a] hover:bg-emerald-950/10 border border-stone-900 hover:border-emerald-900/30 transition-all group text-left",children:[a.jsx("div",{className:"w-12 h-12 rounded-full border border-stone-800 group-hover:border-emerald-500/50 bg-black overflow-hidden shrink-0 transition-colors",children:a.jsx("img",{src:D.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${D.miniImageX??50}% ${D.miniImageY??50}%`,transformOrigin:`${D.miniImageX??50}% ${D.miniImageY??50}%`,transform:`scale(${D.miniImageScale??1})`}})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("span",{className:"text-stone-300 font-bold text-sm block truncate group-hover:text-emerald-300 transition-colors",children:D.name}),a.jsx("span",{className:"text-[9px] uppercase tracking-widest text-stone-600 block truncate",children:""})]})]},D.id))]})]}):a.jsxs("div",{className:"min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-500 flex flex-col pb-20",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 border-b border-stone-900/50 pb-6 mb-8 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:K,className:"group p-3 rounded-full border border-stone-800 hover:bg-stone-900 transition-all text-stone-500 hover:text-white",children:a.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-serif text-stone-100 font-bold italic",children:f?" ":" "}),a.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-emerald-500/60 mt-1",children:"   "})]})]}),a.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[f&&a.jsx("button",{onClick:R,className:"px-6 py-3 bg-red-950/10 hover:bg-red-900/20 border border-red-900/30 text-red-500/70 hover:text-red-500 rounded-xl text-[10px] uppercase tracking-widest font-black transition-all flex-grow md:flex-grow-0",children:""}),a.jsxs("button",{onClick:L,disabled:!w.title||!w.content,className:"px-8 py-3 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 text-emerald-500 rounded-xl text-[10px] uppercase tracking-widest font-black transition-all shadow-lg hover:shadow-emerald-900/10 disabled:opacity-30 disabled:cursor-not-allowed flex-grow md:flex-grow-0 flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]})]})]}),a.jsxs("div",{className:"flex-grow flex flex-col space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 shrink-0",children:[a.jsxs("button",{onClick:()=>d("select-author"),className:`group relative p-4 rounded-3xl border transition-all text-left flex items-center gap-5 ${w.authorId?"bg-emerald-950/10 border-emerald-900/30":"bg-stone-900/20 border-stone-800/50 hover:border-emerald-900/30"}`,children:[a.jsx("div",{className:`w-14 h-14 rounded-full border-2 overflow-hidden bg-black shrink-0 transition-transform group-hover:scale-105 ${w.authorId?"border-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.3)]":"border-stone-800"}`,children:w.authorId?(()=>{const D=me(w.authorId);return D?a.jsx("img",{src:D.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${D.miniImageX??50}% ${D.miniImageY??50}%`,transformOrigin:`${D.miniImageX??50}% ${D.miniImageY??50}%`,transform:`scale(${D.miniImageScale??1})`}}):null})():a.jsx("div",{className:"w-full h-full flex items-center justify-center text-stone-800",children:a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] uppercase tracking-widest font-black text-stone-600 mb-1",children:":"}),a.jsx("p",{className:`text-sm font-bold truncate ${w.authorId?"text-stone-100":"text-stone-700 italic"}`,children:w.authorId?(ke=me(w.authorId))==null?void 0:ke.name:" "})]})]}),a.jsxs("button",{onClick:()=>d("select-target"),className:`group relative p-4 rounded-3xl border transition-all text-left flex items-center gap-5 ${w.targetId?"bg-amber-950/10 border-amber-900/30":"bg-stone-900/20 border-stone-800/50 hover:border-amber-900/30"}`,children:[a.jsx("div",{className:`w-14 h-14 rounded-full border-2 overflow-hidden bg-black shrink-0 transition-transform group-hover:scale-105 ${w.targetId?"border-amber-500 shadow-[0_0_15px_rgba(245,158,11,0.3)]":"border-stone-800"}`,children:w.targetId?(()=>{const D=me(w.targetId);return D?a.jsx("img",{src:D.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${D.miniImageX??50}% ${D.miniImageY??50}%`,transformOrigin:`${D.miniImageX??50}% ${D.miniImageY??50}%`,transform:`scale(${D.miniImageScale??1})`}}):null})():a.jsx("div",{className:"w-full h-full flex items-center justify-center text-stone-800",children:a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] uppercase tracking-widest font-black text-stone-600 mb-1",children:":"}),a.jsx("p",{className:`text-sm font-bold truncate ${w.targetId?"text-stone-100":"text-stone-700 italic"}`,children:w.targetId?(fe=me(w.targetId))==null?void 0:fe.name:""})]})]})]}),a.jsx("div",{className:"space-y-4",children:a.jsx("input",{placeholder:"  ...",className:"w-full bg-transparent border-b-2 border-stone-800 px-2 py-4 text-stone-100 outline-none focus:border-emerald-500/40 transition-all font-serif font-bold italic text-3xl md:text-4xl placeholder-stone-700",value:w.title||"",onChange:D=>v({...w,title:D.target.value})})}),a.jsxs("div",{className:"flex-grow flex flex-col w-full relative group/editor",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 px-1 sticky top-0 bg-[#050505] z-10 py-2 border-b border-stone-900/50",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.4em] font-black text-stone-600",children:" "}),a.jsxs("div",{className:"flex flex-wrap gap-1 bg-stone-900/50 p-1 rounded-lg border border-stone-800",children:[a.jsx("button",{type:"button",onClick:()=>ye("**","**"),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors font-serif font-bold text-lg",title:"",children:"B"}),a.jsx("button",{type:"button",onClick:()=>ye("__","__"),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors font-serif italic text-lg",title:"",children:"I"}),a.jsx("button",{type:"button",onClick:()=>ye("~~","~~"),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors line-through decoration-emerald-500/50",title:"",children:"S"}),a.jsx("div",{className:"w-px h-5 bg-stone-800 self-center mx-1"}),a.jsx("button",{type:"button",onClick:()=>ye("# ",""),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors font-serif font-bold",title:"",children:"H"}),a.jsx("button",{type:"button",onClick:()=>ye("> ",""),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors",title:"",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M14.017 21L14.017 18C14.017 16.896 14.321 16.067 14.929 15.513C15.537 14.959 16.485 14.682 17.773 14.682V14.128C17.773 13.068 17.411 12.152 16.687 11.38C15.963 10.608 14.887 10.222 13.459 10.222V4.99998C15.827 4.99998 17.754 5.75398 19.24 7.26198C20.726 8.76998 21.469 10.871 21.469 13.565V21H14.017ZM2.53699 21L2.53699 18C2.53699 16.896 2.84099 16.067 3.44899 15.513C4.05699 14.959 5.00499 14.682 6.29299 14.682V14.128C6.29299 13.068 5.93099 12.152 5.20699 11.38C4.48299 10.608 3.40699 10.222 1.97899 10.222V4.99998C4.34699 4.99998 6.27399 5.75398 7.75999 7.26198C9.24599 8.76998 9.98899 10.871 9.98899 13.565V21H2.53699Z"})})}),a.jsx("button",{type:"button",onClick:()=>ye("---",""),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors",title:"",children:a.jsx("div",{className:"w-4 h-0.5 bg-current opacity-50"})}),a.jsx("div",{className:"w-px h-5 bg-stone-800 self-center mx-1"}),a.jsx("button",{type:"button",onClick:()=>ye("[link=]","[/link]"),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors",title:"",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),a.jsx("button",{type:"button",onClick:()=>ye("[tip=]","[/tip]"),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors",title:"",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("button",{type:"button",onClick:()=>ye("||","||"),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors",title:"",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",onClick:()=>B(!O),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-stone-800 text-stone-400 hover:text-emerald-400 transition-colors",title:"",children:a.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-gradient-to-br from-red-500 via-yellow-500 to-blue-500 border border-stone-600"})}),O&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 p-3 bg-[#1a1a1a] border border-stone-700 rounded-xl shadow-2xl z-50 flex items-center gap-3 animate-in fade-in zoom-in-95 duration-200 min-w-[140px]",children:[a.jsx("input",{type:"color",className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none p-0",value:Z,onChange:D=>ce(D.target.value)}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[8px] uppercase font-bold text-stone-500 tracking-wider",children:""}),a.jsx("span",{className:"text-[10px] font-mono text-stone-300",children:Z})]}),a.jsx("button",{type:"button",onClick:()=>{ye(`[c=${Z}]`,"[/c]"),B(!1)},className:"ml-auto p-1.5 bg-emerald-500/20 text-emerald-500 hover:bg-emerald-500/30 rounded-lg transition-colors border border-emerald-500/30",title:"",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]})]})]}),a.jsx("textarea",{ref:ee,placeholder:"  ...",className:"w-full bg-[#030303] border border-stone-900 rounded-2xl px-6 py-6 text-stone-300 outline-none focus:border-emerald-500/40 transition-all resize-none leading-relaxed shadow-inner custom-scrollbar text-lg font-serif min-h-[500px] overflow-hidden flex-grow",value:w.content||"",onChange:D=>v({...w,content:D.target.value})}),a.jsxs("div",{className:"flex justify-between items-start mt-2 px-2 pb-10",children:[a.jsx("p",{className:"text-[8px] text-stone-700 italic",children:": # , > , --- "}),a.jsx("p",{className:"text-[8px] text-stone-700 italic",children:"**B**, __I__, ~~S~~, ||Spoiler||, [c=hex]Color[/c], [link=url]Text[/link], [tip=Text]Trig[/tip]"})]})]})]})]})},ox=({character:s,isAdmin:t,allCharacters:r,availableTags:o,availableHiddenTags:c,worlds:d,notes:f=[],onBack:p,onSave:g,onSelectCharacter:x,onDeleteNote:w})=>{var Xe,et;const[v,y]=F.useState(s),[E,O]=F.useState(!1),[B,Z]=F.useState(!1),[ce,ee]=F.useState(!1),[ye,oe]=F.useState(!1),[We,K]=F.useState(new Set),[L,R]=F.useState(""),[me,le]=F.useState([]);F.useEffect(()=>{y(s)},[s]);const ke=F.useMemo(()=>{var T,J;if(!d)return null;for(const he of d){if((T=he.characterIds)!=null&&T.includes(s.id))return he.name;if(he.subLocations){for(const C of he.subLocations)if((J=C.characterIds)!=null&&J.includes(s.id))return`${he.name} / ${C.name}`}}return null},[d,s.id]),fe=F.useMemo(()=>Array.isArray(f)?f.filter(T=>T&&(T.targetId===s.id||T.authorId===s.id)):[],[f,s.id]),D=(T,J)=>{y(he=>({...he,[T]:J}))},je=T=>{y(J=>({...J,imageScale:T.scale??J.imageScale,imageX:T.x??J.imageX,imageY:T.y??J.imageY}))},Le=T=>{y(J=>({...J,miniImageScale:T.scale??J.miniImageScale,miniImageX:T.x??J.miniImageX,miniImageY:T.y??J.miniImageY}))},Me=async T=>{var he;const J=(he=T.target.files)==null?void 0:he[0];if(J){oe(!0);try{const C=await $o(J);D("imageUrl",C)}catch(C){console.error("Error processing image",C),alert("   ")}finally{oe(!1)}}},Ie=(T,J=!1)=>{if(J){const he=v.hiddenTags||[],C=he.includes(T)?he.filter(ne=>ne!==T):[...he,T];D("hiddenTags",C)}else{const he=v.tags||[],C=he.includes(T)?he.filter(ne=>ne!==T):[...he,T];D("tags",C)}},V=()=>{g(v)},q=()=>{y(s)},b=()=>{t&&g(v),p()},A=()=>{ee(!ce),R(""),le([])},te=T=>{const J={id:T.id,name:T.name,role:"",color:"#ef4444"},he=v.connections||[];he.some(C=>C.id===T.id)||D("connections",[...he,J]),ee(!1)},M=T=>{const J=v.connections||[];D("connections",J.filter(he=>he.id!==T))},P=(T,J)=>{const he=v.connections||[];D("connections",he.map(C=>C.id===T?{...C,role:J}:C))},Q=(T,J)=>{const he=v.connections||[];D("connections",he.map(C=>C.id===T?{...C,color:J}:C))},xe=T=>{le(J=>J.includes(T)?J.filter(he=>he!==T):[...J,T])},Ce=T=>{K(J=>{const he=new Set(J);return he.has(T)?he.delete(T):he.add(T),he})},Te=r.filter(T=>{var J;if(!T||T.id===v.id||(J=v.connections)!=null&&J.some(he=>he.id===T.id)||L&&!T.name.toLowerCase().includes(L.toLowerCase()))return!1;if(me.length>0){const he=[...T.tags||[],...T.hiddenTags||[]];return me.every(C=>he.includes(C))}return!0});return a.jsxs("div",{className:"animate-reveal-details space-y-6 md:space-y-8 pb-20",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4 animate-stagger-1",children:[a.jsxs("button",{onClick:b,className:"flex items-center text-stone-500 hover:text-emerald-500 transition-colors group text-sm md:text-base order-1",children:[a.jsx("svg",{className:"w-5 h-5 mr-2 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})," ()"]}),t&&a.jsxs("div",{className:"flex items-center gap-3 order-2 w-full md:w-auto justify-end",children:[a.jsx("button",{onClick:q,className:"px-4 py-2 rounded-lg border border-stone-800 text-stone-500 hover:text-white hover:bg-stone-800 text-[10px] uppercase font-bold tracking-wider transition-all",children:""}),a.jsxs("button",{onClick:V,className:"px-5 py-2 rounded-lg bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 hover:bg-emerald-900/40 text-[10px] uppercase font-bold tracking-wider transition-all flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]})]})]}),a.jsxs("div",{className:"block clearfix",children:[a.jsxs("div",{className:"w-full lg:w-[35%] lg:float-left lg:mr-12 mb-8 space-y-8 animate-stagger-2",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 px-1",children:" "}),t?a.jsxs("div",{className:"space-y-4",children:[a.jsx(xf,{imageUrl:v.imageUrl,scale:v.imageScale??1,x:v.imageX??50,y:v.imageY??50,onUpdate:je}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"w-full bg-[#050505] border border-stone-800 rounded-lg px-3 py-2 text-[10px] text-stone-400 outline-none focus:border-emerald-500",placeholder:v.imageUrl.startsWith("data:")?"   ":"URL ...",value:v.imageUrl.startsWith("data:")?"":v.imageUrl,onChange:T=>D("imageUrl",T.target.value)}),a.jsxs("label",{className:`cursor-pointer bg-stone-900 border border-stone-800 hover:bg-stone-800 rounded-lg px-3 flex items-center justify-center transition-colors ${ye?"opacity-50":""}`,children:[a.jsx("input",{type:"file",onChange:Me,accept:"image/*",className:"hidden",disabled:ye}),a.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})]})]})]}):a.jsx("div",{className:"aspect-[4/5] rounded-2xl overflow-hidden border border-stone-800 shadow-2xl bg-black transition-transform duration-700 hover:scale-[1.02]",children:a.jsx("img",{src:v.imageUrl,alt:v.name,style:{objectFit:"cover",objectPosition:`${v.imageX??50}% ${v.imageY??50}%`,transformOrigin:`${v.imageX??50}% ${v.imageY??50}%`,transform:`scale(${v.imageScale??1})`},className:"w-full h-full"})})]}),t&&a.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-900/50",children:[a.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500/60 px-1",children:"- ()"}),a.jsx(xf,{imageUrl:v.imageUrl,scale:v.miniImageScale??1,x:v.miniImageX??50,y:v.miniImageY??50,isCircular:!0,onUpdate:Le})]}),a.jsxs("div",{className:"space-y-5 p-5 md:p-7 bg-[#0f0f0f]/40 border border-stone-900 rounded-[2rem] md:rounded-[2.5rem] shadow-inner transition-all hover:bg-[#0f0f0f]/50",children:[a.jsx("h4",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-emerald-500/60 px-1 text-center",children:""}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[40px]",children:t?a.jsxs(a.Fragment,{children:[o.map(T=>{var J;return a.jsx("button",{onClick:()=>Ie(T,!1),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border ${(J=v.tags)!=null&&J.includes(T)?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400":"bg-stone-950 border-stone-800/50 text-stone-700 hover:text-stone-400"}`,children:T},T)}),o.length>0&&c.length>0&&a.jsx("div",{className:"w-full h-px bg-stone-900/50 my-1"}),c.map(T=>{var J;return a.jsx("button",{onClick:()=>Ie(T,!0),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border ${(J=v.hiddenTags)!=null&&J.includes(T)?"bg-amber-500/10 border-amber-500/40 text-amber-400":"bg-stone-950 border-stone-800/50 text-stone-700 hover:text-stone-400"}`,children:T},T)})]}):(Xe=v.tags)==null?void 0:Xe.map(T=>a.jsx("span",{className:"px-3 py-1.5 md:px-4 md:py-2 bg-emerald-500/5 border border-emerald-500/10 text-emerald-500/70 text-[9px] md:text-[10px] uppercase tracking-widest font-black rounded-xl",children:T},T))})]})]}),a.jsx("div",{className:"animate-stagger-3",children:a.jsxs("div",{className:"mb-6 md:mb-8",children:[t?a.jsx("div",{className:"space-y-4 mb-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),a.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-3xl md:text-4xl font-serif font-bold text-stone-100 outline-none focus:border-emerald-800 transition-colors py-1",value:v.name,onChange:T=>D("name",T.target.value)})]}),a.jsxs("div",{className:"w-full md:w-32",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),a.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-xl font-light text-stone-500 outline-none focus:border-emerald-800 transition-colors py-2",value:v.age,onChange:T=>D("age",T.target.value)})]}),a.jsxs("div",{className:"w-full md:w-32",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-1",children:""}),a.jsx("input",{className:"w-full bg-transparent border-b border-stone-800 text-xl font-light text-stone-500 outline-none focus:border-emerald-800 transition-colors py-2",value:v.height||"",placeholder:". 180 ",onChange:T=>D("height",T.target.value)})]})]})}):a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-bold text-stone-100 leading-tight",children:v.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[v.age&&a.jsxs("div",{className:"bg-stone-900 border border-stone-800 px-3 py-1 rounded-xl flex items-baseline gap-1.5 shadow-lg",children:[a.jsx("span",{className:"text-stone-100 font-bold text-lg",children:v.age.toString().replace(/[^0-9]/g,"")||v.age}),a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-500/70",children:""})]}),v.height&&a.jsxs("div",{className:"bg-stone-900 border border-stone-800 px-3 py-1 rounded-xl flex items-baseline gap-1.5 shadow-lg",children:[a.jsx("span",{className:"text-stone-100 font-bold text-lg",children:v.height.toString().replace(/[^0-9]/g,"")||v.height}),a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-500/70",children:""})]})]})]}),ke&&a.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/10 border border-emerald-900/30 px-3 py-1.5 rounded-full mt-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500",children:ke})]})]}),a.jsx("div",{className:"h-px bg-stone-900 w-full mb-6 md:mb-8"}),a.jsxs("section",{className:"space-y-4 mb-8",children:[a.jsx("h4",{className:"text-emerald-500 text-sm font-semibold uppercase tracking-wider",children:""}),t?a.jsx("textarea",{className:"w-full bg-stone-900/20 border border-stone-800 rounded-xl p-4 text-stone-200 text-base md:text-lg leading-relaxed font-light outline-none focus:border-emerald-900 transition-colors resize-none break-words",rows:12,value:v.additionalInfo,onChange:T=>D("additionalInfo",T.target.value)}):a.jsx("p",{className:"text-stone-300 text-base md:text-lg leading-relaxed font-light whitespace-pre-wrap break-words",children:v.additionalInfo})]}),fe.length>0&&a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("button",{onClick:()=>Z(!B),className:"w-full flex items-center justify-between bg-[#0f0f0f]/30 border border-stone-900 p-4 md:p-5 rounded-xl transition-all group hover:border-amber-900/30 shadow-md",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-amber-600 font-bold tracking-widest text-xs uppercase",children:"  "}),a.jsxs("span",{className:"text-stone-600 text-sm",children:["(",fe.length,")"]})]}),a.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform duration-300 ${B?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]}),a.jsx("div",{className:`grid transition-[grid-template-rows,opacity] duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] ${B?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("div",{className:"space-y-4 pt-4",children:fe.map(T=>{const J=r.find(ge=>ge.id===T.authorId),he=r.find(ge=>ge.id===T.targetId),C=T.authorId===s.id,ne=We.has(T.id);return a.jsxs("div",{className:"bg-stone-900/20 border border-stone-900/50 rounded-xl p-4 md:p-5 hover:border-emerald-900/30 transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-stone-900/50 pb-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:C?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-stone-600",children:":"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-emerald-500",children:he?he.name:""})]}):a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-[9px] uppercase tracking-widest font-black text-stone-600",children:":"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-300",children:J?J.name:""})]})}),a.jsx("span",{className:"text-[9px] uppercase font-bold text-stone-700",children:T.date})]}),a.jsx("h5",{className:"text-stone-200 font-serif italic text-xl mb-2 break-words",children:T.title}),!ne&&a.jsxs("button",{onClick:()=>Ce(T.id),className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 hover:text-emerald-500 transition-colors pt-2 flex items-center gap-1 outline-none",children:["",a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsx("div",{className:`grid transition-[grid-template-rows,opacity] duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] ${ne?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsxs("div",{className:"pt-2",children:[a.jsx("div",{className:"text-stone-400 text-sm md:text-base leading-relaxed whitespace-pre-wrap font-light break-words",children:wp(T.content)}),a.jsxs("button",{onClick:()=>Ce(T.id),className:"text-[9px] uppercase tracking-[0.2em] font-black text-emerald-900 hover:text-emerald-600 transition-colors flex items-center gap-1 mt-4",children:[a.jsx("svg",{className:"w-3 h-3 rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),""]})]})})})]},T.id)})})})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[t&&a.jsxs("button",{onClick:A,className:`w-full py-4 rounded-xl border transition-all text-[10px] uppercase font-bold tracking-[0.2em] flex items-center justify-center gap-3 ${ce?"bg-emerald-500 border-emerald-400 text-black shadow-[0_0_20px_rgba(16,185,129,0.2)]":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400 hover:bg-emerald-900/30"}`,children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:ce?"M6 18L18 6M6 6l12 12":"M12 4v16m8-8H4"})}),ce?"":" "]}),a.jsxs("button",{onClick:()=>O(!E),className:"w-full flex items-center justify-between bg-[#0f0f0f]/30 border border-stone-900 p-4 md:p-5 rounded-xl transition-all group hover:border-emerald-900/30 shadow-md",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-emerald-500 font-bold tracking-widest text-xs uppercase",children:""}),a.jsxs("span",{className:"text-stone-600 text-sm",children:["(",((et=v.connections)==null?void 0:et.length)||0,")"]})]}),a.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform duration-300 ${E?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]})]}),t&&ce&&a.jsxs("div",{className:"animate-reveal-details bg-[#0a0a0a] border border-emerald-900/30 rounded-2xl p-4 md:p-6 space-y-4 shadow-2xl overflow-hidden relative",children:[a.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:a.jsx("input",{autoFocus:!0,type:"text",placeholder:"   ...",className:"flex-grow bg-stone-950 border border-stone-800 rounded-xl px-4 py-3 text-sm text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",value:L,onChange:T=>R(T.target.value)})}),a.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto custom-scrollbar",children:o.map(T=>a.jsx("button",{onClick:()=>xe(T),className:`px-2 py-1 rounded-lg text-[9px] uppercase font-bold tracking-wider transition-all border ${me.includes(T)?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:T},T))}),a.jsx("div",{className:"flex flex-col gap-2 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:Te.length>0?Te.map(T=>a.jsxs("button",{onClick:()=>te(T),className:"flex items-center gap-4 p-3 bg-stone-900/50 border border-stone-800 rounded-xl hover:bg-emerald-900/20 hover:border-emerald-900/40 transition-all text-left group",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:a.jsx("img",{src:T.imageUrl,style:{objectFit:"cover",objectPosition:`${T.miniImageX??50}% ${T.miniImageY??50}%`,transformOrigin:`${T.miniImageX??50}% ${T.miniImageY??50}%`,transform:`scale(${T.miniImageScale??1})`},className:"w-full h-full",alt:""})}),a.jsxs("div",{className:"min-w-0 flex-grow",children:[a.jsx("span",{className:"text-stone-200 font-bold text-sm block truncate group-hover:text-emerald-400",children:T.name}),a.jsx("span",{className:"text-[10px] text-stone-600 uppercase tracking-widest block truncate",children:"  "})]}),a.jsx("svg",{className:"w-4 h-4 text-emerald-500 opacity-0 group-hover:opacity-100 transition-all",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})]},T.id)):a.jsx("p",{className:"text-stone-700 italic text-xs py-4 text-center",children:"  "})})]}),a.jsx("div",{className:`grid transition-[grid-template-rows,opacity] duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] ${E?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("div",{className:"space-y-3 pt-3",children:a.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-xl overflow-hidden divide-y divide-stone-900/50",children:v.connections&&v.connections.length>0?v.connections.map(T=>{const J=r.find(he=>he&&he.id===T.id);return a.jsxs("div",{className:"p-4 flex flex-row items-center gap-4 group hover:bg-stone-900/20 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[a.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full overflow-hidden border border-stone-800 shrink-0 bg-black",children:a.jsx("img",{src:(J==null?void 0:J.imageUrl)||"",style:{objectFit:"cover",objectPosition:`${(J==null?void 0:J.miniImageX)??50}% ${(J==null?void 0:J.miniImageY)??50}%`,transformOrigin:`${(J==null?void 0:J.miniImageX)??50}% ${(J==null?void 0:J.miniImageY)??50}%`,transform:`scale(${(J==null?void 0:J.miniImageScale)??1})`},className:"w-full h-full",alt:""})}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsx("p",{className:"text-stone-200 font-bold text-sm truncate",children:T.name}),t?a.jsx("input",{className:"bg-transparent border-b border-stone-800 text-xs text-stone-500 outline-none focus:border-emerald-500 py-1 w-full max-w-[150px]",value:T.role,onChange:he=>P(T.id,he.target.value)}):a.jsx("p",{className:"text-stone-600 text-xs mt-1 font-medium truncate",children:T.role})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-5 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[t?a.jsx("input",{type:"color",className:"w-6 h-6 rounded-sm bg-transparent border-none cursor-pointer p-0 appearance-none shadow-lg",value:T.color||"#ef4444",onChange:he=>Q(T.id,he.target.value)}):a.jsx("div",{className:"w-4 h-4 rounded-sm shadow-sm",style:{backgroundColor:T.color||"#ef4444"}}),a.jsx("button",{onClick:()=>x(T.id),className:"text-stone-700 hover:text-stone-100 transition-colors text-[9px] md:text-[10px] uppercase font-bold tracking-[0.2em]",children:""})]}),t&&a.jsx("button",{onClick:()=>M(T.id),className:"text-stone-800 hover:text-red-500 transition-colors p-1",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]},T.id)}):a.jsx("div",{className:"p-10 text-center text-stone-700 italic text-sm",children:"  "})})})})})]})]})})]})]})},lx=({initialData:s,availableTags:t,availableHiddenTags:r,onSave:o,onClose:c})=>{const[d,f]=F.useState({name:"",age:"",height:"",imageUrl:"",additionalInfo:"",imageScale:1,imageX:50,imageY:50,tags:[],hiddenTags:[]}),[p,g]=F.useState(!1);F.useEffect(()=>{var y;s&&f({name:s.name,age:s.age.toString(),height:((y=s.height)==null?void 0:y.toString())||"",imageUrl:s.imageUrl,additionalInfo:s.additionalInfo,imageScale:s.imageScale??1,imageX:s.imageX??50,imageY:s.imageY??50,tags:s.tags||[],hiddenTags:s.hiddenTags||[]})},[s]);const x=(y,E)=>{f(E?O=>({...O,hiddenTags:O.hiddenTags.includes(y)?O.hiddenTags.filter(B=>B!==y):[...O.hiddenTags,y]}):O=>({...O,tags:O.tags.includes(y)?O.tags.filter(B=>B!==y):[...O.tags,y]}))},w=async y=>{var O;const E=(O=y.target.files)==null?void 0:O[0];if(E){g(!0);try{const B=await $o(E);f(Z=>({...Z,imageUrl:B}))}catch(B){console.error("Error processing image",B),alert("   .")}finally{g(!1)}}},v=y=>{y.preventDefault();const E={id:(s==null?void 0:s.id)||Date.now().toString(),name:d.name,age:d.age,height:d.height,imageUrl:d.imageUrl||`https://picsum.photos/seed/${Date.now()}/400/500`,additionalInfo:d.additionalInfo,tags:d.tags,hiddenTags:d.hiddenTags,connections:(s==null?void 0:s.connections)||[],imageScale:d.imageScale,imageX:d.imageX,imageY:d.imageY};o(E)};return a.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/95 backdrop-blur-2xl animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-2xl rounded-[2rem] md:rounded-[3rem] overflow-hidden shadow-[0_0_120px_rgba(0,0,0,1)] border-white/5 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 md:p-10 border-b border-stone-900 flex justify-between items-center bg-gradient-to-b from-stone-900/30 to-transparent shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-stone-100 italic",children:s?" ":" "}),a.jsx("p",{className:"text-stone-600 text-[10px] uppercase tracking-widest mt-1",children:"  "})]}),a.jsx("button",{onClick:c,className:"text-stone-700 hover:text-white transition-all p-2 md:p-3 hover:bg-white/5 rounded-full",children:a.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("form",{onSubmit:v,className:"p-6 md:p-10 space-y-8 md:space-y-10 overflow-y-auto custom-scrollbar flex-grow",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:"  "}),a.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all font-serif italic text-lg shadow-inner",value:d.name,onChange:y=>f({...d,name:y.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),a.jsx("input",{required:!0,className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all shadow-inner",value:d.age,onChange:y=>f({...d,age:y.target.value})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:""}),a.jsx("input",{className:"w-full bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-4 text-stone-100 outline-none focus:border-emerald-500/30 transition-all shadow-inner",value:d.height,placeholder:". 185 ",onChange:y=>f({...d,height:y.target.value})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-end px-1",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600",children:"  ()"}),a.jsxs("span",{className:"text-[9px] text-stone-800 font-black uppercase tracking-widest",children:[": ",d.tags.length]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 p-6 bg-black/30 border border-stone-900 rounded-[2rem] min-h-[80px] shadow-inner",children:t.length===0?a.jsx("p",{className:"text-stone-800 italic text-xs w-full text-center py-4",children:"     -"}):t.map(y=>{const E=d.tags.includes(y);return a.jsx("button",{type:"button",onClick:()=>x(y,!1),className:`px-4 py-2 rounded-xl text-[10px] uppercase tracking-wider font-black transition-all border ${E?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":"bg-stone-900/20 border-stone-800/40 text-stone-600 hover:border-stone-700 hover:text-stone-400"}`,children:y},y)})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-end px-1",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-amber-600",children:"  ()"}),a.jsxs("span",{className:"text-[9px] text-amber-900/60 font-black uppercase tracking-widest",children:[": ",d.hiddenTags.length]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 p-6 bg-black/30 border border-amber-900/20 rounded-[2rem] min-h-[80px] shadow-inner",children:r.length===0?a.jsx("p",{className:"text-stone-800 italic text-xs w-full text-center py-4",children:"    "}):r.map(y=>{const E=d.hiddenTags.includes(y);return a.jsx("button",{type:"button",onClick:()=>x(y,!0),className:`px-4 py-2 rounded-xl text-[10px] uppercase tracking-wider font-black transition-all border ${E?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":"bg-stone-900/20 border-stone-800/40 text-stone-600 hover:border-amber-900/30 hover:text-amber-500/50"}`,children:y},y)})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" (  )"}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("input",{className:"flex-grow bg-stone-900/30 border border-stone-800 rounded-2xl px-5 py-3 text-xs text-stone-500 outline-none focus:border-emerald-500/30 transition-all",placeholder:"    ...",value:d.imageUrl.startsWith("data:")?"":d.imageUrl,onChange:y=>f({...d,imageUrl:y.target.value})}),a.jsxs("label",{className:`cursor-pointer bg-stone-900/50 hover:bg-stone-800 px-5 py-3 rounded-2xl transition-all flex items-center justify-center border border-stone-800 gap-2 ${p?"opacity-50 cursor-wait":""}`,children:[a.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"hidden",disabled:p}),a.jsx("svg",{className:"w-5 h-5 text-stone-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),d.imageUrl.startsWith("data:")&&a.jsx("span",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-wider",children:""})]})]}),d.imageUrl.startsWith("data:")&&a.jsx("p",{className:"text-[9px] text-emerald-500/70 px-2",children:"    ."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 ml-1",children:" "}),a.jsx("textarea",{required:!0,rows:8,className:"w-full bg-stone-900/30 border border-stone-800 rounded-[2rem] px-8 py-6 text-stone-300 text-base leading-relaxed outline-none focus:border-emerald-900/30 transition-all resize-none shadow-inner custom-scrollbar",value:d.additionalInfo,onChange:y=>f({...d,additionalInfo:y.target.value})})]})]}),a.jsxs("div",{className:"p-6 md:p-10 border-t border-stone-900 bg-stone-900/10 flex gap-4 md:gap-6 shrink-0",children:[a.jsx("button",{type:"button",onClick:c,className:"flex-1 py-4 md:py-5 text-[10px] uppercase tracking-[0.3em] font-black text-stone-600 hover:text-stone-300 transition-all",children:""}),a.jsx("button",{onClick:v,disabled:p,className:"flex-[2] py-4 md:py-5 bg-white hover:bg-emerald-50 text-black rounded-2xl text-[10px] uppercase tracking-[0.3em] font-black transition-all shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:p?"...":""})]})]})})},ax=({characters:s,availableTags:t,availableHiddenTags:r,onDelete:o,onEdit:c,onAdd:d,onUpdateTags:f,onUpdateHiddenTags:p,onDownloadDB:g,onUploadDB:x})=>{const[w,v]=F.useState(""),[y,E]=F.useState(""),O=F.useRef(null),B=L=>{L.preventDefault();const R=w.trim().toLowerCase();R&&!t.includes(R)&&(f([...t,R]),v(""))},Z=L=>{L.preventDefault();const R=y.trim().toLowerCase();R&&!r.includes(R)&&(p([...r,R]),E(""))},ce=L=>{f(t.filter(R=>R!==L))},ee=L=>{p(r.filter(R=>R!==L))},ye=(L,R,me=!1)=>{const le=me?[...r]:[...t],ke=me?p:f;R==="left"&&L>0?[le[L-1],le[L]]=[le[L],le[L-1]]:R==="right"&&L<le.length-1&&([le[L+1],le[L]]=[le[L],le[L+1]]),ke(le)},oe=(L=!1)=>{window.confirm(` ,      ${L?"":""} ?`)&&(L?p([]):f([]))},We=L=>{var le;const R=(le=L.target.files)==null?void 0:le[0];if(!R)return;const me=new FileReader;me.onload=ke=>{var D;const fe=(D=ke.target)==null?void 0:D.result;typeof fe=="string"&&x(fe)},me.readAsText(R),O.current&&(O.current.value="")},K=(L,R)=>a.jsx("div",{className:"flex flex-wrap gap-2 max-h-[300px] overflow-y-auto custom-scrollbar pr-2",children:L.length===0?a.jsx("p",{className:"text-stone-800 italic text-[10px] w-full text-center py-8",children:" ."}):L.map((me,le)=>a.jsxs("div",{className:`group flex items-center border rounded-xl pr-2 pl-1 py-1 transition-all hover:bg-stone-900 ${R?"bg-amber-900/10 border-amber-900/30 hover:border-amber-700":"bg-stone-900/50 border-stone-800/50 hover:border-stone-600"}`,children:[a.jsx("button",{onClick:()=>ye(le,"left",R),disabled:le===0,className:`p-1 text-stone-600 hover:text-emerald-500 transition-all ${le===0?"opacity-0 pointer-events-none":"opacity-0 group-hover:opacity-100"}`,children:a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),a.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-1 select-none ${R?"text-amber-500":"text-stone-500"}`,children:me}),a.jsx("button",{onClick:()=>ye(le,"right",R),disabled:le===L.length-1,className:`p-1 text-stone-600 hover:text-emerald-500 transition-all ${le===L.length-1?"opacity-0 pointer-events-none":"opacity-0 group-hover:opacity-100"}`,children:a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})}),a.jsx("div",{className:`w-px h-3 mx-1 ${R?"bg-amber-900/30":"bg-stone-800"}`}),a.jsx("button",{onClick:()=>R?ee(me):ce(me),className:"text-stone-700 hover:text-red-500 transition-colors ml-1",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]},me))});return a.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 pb-32",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 border-b border-stone-900/50 pb-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""}),a.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-[10px]",children:"   "})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{type:"file",ref:O,onChange:We,accept:".json",className:"hidden"}),a.jsxs("button",{onClick:()=>{var L;return(L=O.current)==null?void 0:L.click()},className:"px-5 py-2.5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 rounded-lg text-[10px] uppercase tracking-widest font-bold text-emerald-500 transition-all flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})," "]}),a.jsxs("button",{onClick:g,className:"px-5 py-2.5 bg-stone-900/80 hover:bg-stone-800 border border-stone-700 rounded-lg text-[10px] uppercase tracking-widest font-bold text-stone-300 transition-all flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})," "]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:" "}),a.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-500 px-2 py-0.5 rounded-full font-black",children:s.length})]}),a.jsx("button",{onClick:d,className:"bg-white hover:bg-emerald-50 text-black px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-black transition-all",children:""})]}),a.jsx("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl overflow-hidden shadow-xl",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-stone-900 bg-stone-900/20",children:[a.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),a.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600",children:""}),a.jsx("th",{className:"px-6 py-5 text-[10px] uppercase tracking-widest font-black text-stone-600 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-stone-900/50",children:s.map(L=>{var R,me,le,ke;return a.jsxs("tr",{className:"hover:bg-stone-900/10 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:a.jsx("img",{src:L.imageUrl,style:{objectFit:"cover",objectPosition:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transformOrigin:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transform:`scale(${L.miniImageScale??1})`},className:"w-full h-full",alt:""})}),a.jsx("span",{className:"font-bold text-stone-200 text-sm tracking-wide",children:L.name})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-wrap gap-1",children:[(R=L.tags)==null?void 0:R.slice(0,3).map(fe=>a.jsx("span",{className:"text-[8px] uppercase bg-stone-900 px-1.5 py-0.5 rounded text-stone-500",children:fe},fe)),(((me=L.tags)==null?void 0:me.length)||0)>3&&a.jsxs("span",{className:"text-[8px] text-stone-700",children:["+",L.tags.length-3]})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[(le=L.hiddenTags)==null?void 0:le.slice(0,3).map(fe=>a.jsx("span",{className:"text-[8px] uppercase bg-amber-900/20 border border-amber-900/30 px-1.5 py-0.5 rounded text-amber-600",children:fe},fe)),(((ke=L.hiddenTags)==null?void 0:ke.length)||0)>3&&a.jsxs("span",{className:"text-[8px] text-amber-700",children:["+",L.hiddenTags.length-3]})]})]})}),a.jsxs("td",{className:"px-6 py-4 text-right space-x-3",children:[a.jsx("button",{onClick:()=>c(L),className:"text-emerald-500/70 hover:text-emerald-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""}),a.jsx("button",{onClick:()=>o(L.id),className:"text-stone-800 hover:text-red-500 text-[10px] font-black uppercase tracking-widest transition-colors",children:""})]})]},L.id)})})]})})})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl p-6 space-y-6 shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-serif text-stone-100 italic",children:" "}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] bg-stone-800 text-stone-400 px-2 py-0.5 rounded-full font-black",children:t.length}),t.length>0&&a.jsx("button",{onClick:()=>oe(!1),className:"text-[8px] text-red-900 hover:text-red-500 uppercase font-black",children:""})]})]}),a.jsxs("form",{onSubmit:B,className:"flex gap-2",children:[a.jsx("input",{type:"text",value:w,onChange:L=>v(L.target.value),placeholder:" ...",className:"flex-grow bg-black/50 border border-stone-800 rounded-xl px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-all"}),a.jsx("button",{className:"bg-stone-800 hover:bg-stone-700 text-white p-2 rounded-xl transition-all",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:2.5})})})]}),K(t,!1)]}),a.jsxs("div",{className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl p-6 space-y-6 shadow-xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-amber-500/5 rounded-full blur-2xl -translate-y-10 translate-x-10 pointer-events-none"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-serif text-amber-500 italic",children:" "}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] bg-amber-900/20 text-amber-500 px-2 py-0.5 rounded-full font-black",children:r.length}),r.length>0&&a.jsx("button",{onClick:()=>oe(!0),className:"text-[8px] text-red-900 hover:text-red-500 uppercase font-black",children:""})]})]}),a.jsxs("form",{onSubmit:Z,className:"flex gap-2",children:[a.jsx("input",{type:"text",value:y,onChange:L=>E(L.target.value),placeholder:"  ...",className:"flex-grow bg-black/50 border border-amber-900/30 rounded-xl px-3 py-2 text-xs text-stone-200 outline-none focus:border-amber-500/50 transition-all placeholder-amber-900/50"}),a.jsx("button",{className:"bg-amber-900/20 hover:bg-amber-900/40 text-amber-500 border border-amber-900/30 p-2 rounded-xl transition-all",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M12 4v16m8-8H4",strokeWidth:2.5})})})]}),K(r,!0)]})]})]})]})},cx="modulepreload",ux=function(s){return"/raz/"+s},vf={},yf=function(t,r,o){let c=Promise.resolve();if(r&&r.length>0){let f=function(x){return Promise.all(x.map(w=>Promise.resolve(w).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=f(r.map(x=>{if(x=ux(x),x in vf)return;vf[x]=!0;const w=x.endsWith(".css"),v=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const y=document.createElement("link");if(y.rel=w?"stylesheet":cx,w||(y.as="script"),y.crossOrigin="",y.href=x,g&&y.setAttribute("nonce",g),document.head.appendChild(y),w)return new Promise((E,O)=>{y.addEventListener("load",E),y.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return c.then(f=>{for(const p of f||[])p.status==="rejected"&&d(p.reason);return t().catch(d)})},dx=({characters:s,availableTags:t,availableHiddenTags:r,filterStates:o,onToggleTag:c,onClearFilters:d,onSelectCharacter:f})=>{var he;const[p,g]=F.useState("graph"),[x,w]=F.useState(""),[v,y]=F.useState(!1),[E,O]=F.useState(""),[B,Z]=F.useState([]),ce=F.useRef(null),[ee,ye]=F.useState(!1),[oe,We]=F.useState(null),[K,L]=F.useState(null),[R,me]=F.useState(0),[le,ke]=F.useState(!0),[fe,D]=F.useState(!1),je=F.useRef(null),Le=F.useRef(null),Me=F.useRef(null),Ie=F.useRef(null),V=F.useRef(new Map),[q,b]=F.useState({x:0,y:0,k:1}),A=Object.keys(o).length;F.useEffect(()=>{if(p==="graph"){D(!0);const C=setTimeout(()=>D(!1),2200);return()=>clearTimeout(C)}},[oe,ee,A,p]),F.useEffect(()=>{const C=ne=>{ce.current&&!ce.current.contains(ne.target)&&y(!1)};return v&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[v]);const{nodes:te,links:M,uniqueColors:P}=F.useMemo(()=>{if(p!=="graph")return{nodes:[],links:[],uniqueColors:[]};const C=s.filter(G=>oe&&G.id===oe?!0:Object.entries(o).every(([U,pe])=>{var nn,Vt;const Re=(nn=G.tags)==null?void 0:nn.includes(U),Be=(Vt=G.hiddenTags)==null?void 0:Vt.includes(U),Ue=Re||Be;return pe==="include"?Ue:pe==="exclude"?!Ue:!0})),ne=new Set(C.map(G=>G.id)),ge=new Set;oe&&(ge.add(oe),C.forEach(G=>{var U,pe;G.id===oe&&((U=G.connections)==null||U.forEach(Re=>{ne.has(Re.id)&&ge.add(Re.id)})),(pe=G.connections)!=null&&pe.some(Re=>Re.id===oe)&&ge.add(G.id)}));const Ee=new Map,Se=[...t],$e=380,Pe=260;Se.forEach((G,U)=>{const pe=U/Se.length*2*Math.PI;Ee.set(G,{x:500+Math.cos(pe)*$e,y:350+Math.sin(pe)*Pe})});const Qe=C.map(G=>{const U=V.current.get(G.id);let pe=!1;if(oe)pe=!ge.has(G.id);else if(ee){const Ue=G.connections||[],nn=C.filter(Vt=>{var lr;return Vt.id!==G.id&&((lr=Vt.connections)==null?void 0:lr.some(ar=>ar.id===G.id))});pe=Ue.length+nn.length===0}let Re=500,Be=350;if(!U)if(G.tags&&G.tags.length>0){let Ue=0,nn=0,Vt=0;G.tags.forEach(lr=>{const ar=Ee.get(lr);ar&&(Ue+=ar.x,nn+=ar.y,Vt++)}),Vt>0?(Re=Ue/Vt,Be=nn/Vt,Re+=(Math.random()-.5)*80,Be+=(Math.random()-.5)*80):(Re+=(Math.random()-.5)*150,Be+=(Math.random()-.5)*150)}else Re+=(Math.random()-.5)*120,Be+=(Math.random()-.5)*120;return{id:G.id,name:G.name,imageUrl:G.imageUrl,miniImageScale:G.miniImageScale,miniImageX:G.miniImageX,miniImageY:G.miniImageY,x:(U==null?void 0:U.x)??Re,y:(U==null?void 0:U.y)??Be,vx:U==null?void 0:U.vx,vy:U==null?void 0:U.vy,isDimmed:pe,tags:G.tags,hiddenTags:G.hiddenTags}}),it=new Map;Qe.forEach(G=>it.set(G.id,G)),V.current=it;const z=[],se=new Set,ve=new Map;return C.forEach(G=>{var U;(U=G.connections)==null||U.forEach(pe=>{if(ne.has(pe.id)){const Re=pe.color||"#10b981";se.add(Re);let Be=!1;oe&&(Be=G.id!==oe&&pe.id!==oe),z.push({source:G.id,target:pe.id,role:pe.role,color:Re,isDouble:!1,isHidden:Be}),ve.set(`${G.id}-${pe.id}`,!0)}})}),z.forEach(G=>{const U=typeof G.source=="string"?G.source:G.source.id,pe=typeof G.target=="string"?G.target:G.target.id;ve.has(`${pe}-${U}`)&&(G.isDouble=!0)}),{nodes:Qe,links:z,uniqueColors:Array.from(se)}},[s,ee,oe,o,t,p]),Q=C=>{if(!je.current||!Ie.current)return;const ne=te.find(ge=>ge.id===C);!ne||ne.x===void 0||ne.y===void 0||yf(()=>import("https://esm.sh/d3@7"),[]).then(ge=>{const Ee=ge.select(je.current),Se=1e3,$e=700,Pe=.8,Qe=Se/2-ne.x*Pe,it=$e/2-ne.y*Pe;Ee.transition().duration(1200).ease(ge.easePolyInOut.exponent(3)).call(Ie.current.transform,ge.zoomIdentity.translate(Qe,it).scale(Pe))})};F.useEffect(()=>{if(oe&&p==="graph"){const C=setTimeout(()=>Q(oe),100);return()=>clearTimeout(C)}},[oe,p]),F.useEffect(()=>{!je.current||p!=="graph"||(ke(!0),yf(()=>import("https://esm.sh/d3@7"),[]).then(C=>{const ne=C.select(je.current),ge=C.select(Le.current),Ee=C.zoom().scaleExtent([.1,4]).on("zoom",Pe=>{ge.attr("transform",Pe.transform),b({x:Pe.transform.x,y:Pe.transform.y,k:Pe.transform.k}),L(null)});Ie.current=Ee,ne.call(Ee);const Se=C.forceSimulation(te).velocityDecay(.4).force("link",C.forceLink(M.filter(Pe=>!Pe.isHidden)).id(Pe=>Pe.id).distance(Pe=>{const Qe=Pe.source.tags||[],it=Pe.target.tags||[],z=Qe.some(se=>it.includes(se));return Qe.length===0||it.length===0?250:z?150:450}).strength(oe?.05:.03)).force("charge",C.forceManyBody().strength(oe?-5e3:-3500)).force("x",C.forceX(500).strength(.05)).force("y",C.forceY(350).strength(.05)).force("collision",C.forceCollide().radius(90)).alphaDecay(.05);Se.on("tick",()=>{me(Pe=>Pe+1),Se.alpha()<.2&&ke(!1)}),Me.current=Se;const $e=Pe=>{function Qe(se,ve){se.active||Pe.alphaTarget(.3).restart(),ve.fx=ve.x,ve.fy=ve.y,L(null)}function it(se,ve){ve.fx=se.x,ve.fy=se.y}function z(se,ve){se.active||Pe.alphaTarget(0),ve.fx=null,ve.fy=null}return C.drag().on("start",Qe).on("drag",it).on("end",z)};return ge.selectAll(".node-group").data(te).call($e(Se)),()=>Se.stop()}))},[te,M,p]);const xe=C=>{const ne=typeof C.source=="string"?te.find(Re=>Re.id===C.source):C.source,ge=typeof C.target=="string"?te.find(Re=>Re.id===C.target):C.target;if(!(ne!=null&&ne.x)||!(ne!=null&&ne.y)||!(ge!=null&&ge.x)||!(ge!=null&&ge.y))return null;const Ee=52,Se=ge.x-ne.x,$e=ge.y-ne.y,Pe=Math.sqrt(Se*Se+$e*$e);if(Pe<Ee*2.2)return null;const Qe=Se/Pe,it=$e/Pe,z=ne.x+Ee*Qe,se=ne.y+Ee*it,ve=ge.x-Ee*Qe,G=ge.y-Ee*it;let U="",pe={x:0,y:0};if(C.isDouble){const Be=(ne.x+ge.x)/2+-it*50,Ue=(ne.y+ge.y)/2+Qe*50;U=`M${z},${se} Q${Be},${Ue} ${ve},${G}`,pe.x=.25*z+.5*Be+.25*ve,pe.y=.25*se+.5*Ue+.25*G}else U=`M${z},${se} L${ve},${G}`,pe.x=(z+ve)/2,pe.y=(se+G)/2;return{path:U,textPos:pe}},Ce=C=>C.replace("#",""),Te=C=>{Z(ne=>ne.includes(C)?ne.filter(ge=>ge!==C):[...ne,C])},Xe=F.useMemo(()=>s.filter(C=>{const ne=C.name.toLowerCase().includes(E.toLowerCase()),ge=B.length===0||B.every(Ee=>{var Se,$e;return((Se=C.tags)==null?void 0:Se.includes(Ee))||(($e=C.hiddenTags)==null?void 0:$e.includes(Ee))});return ne&&ge}).sort((C,ne)=>C.name.localeCompare(ne.name)),[s,E,B]),{outgoingConnections:et,incomingConnections:T,currentTableChar:J}=F.useMemo(()=>{if(p!=="table"||!x)return{outgoingConnections:[],incomingConnections:[],currentTableChar:null};const C=s.find(Ee=>Ee.id===x),ne=((C==null?void 0:C.connections)||[]).map(Ee=>{const Se=s.find($e=>$e.id===Ee.id);return{...Ee,targetChar:Se}}),ge=s.filter(Ee=>{var Se;return(Se=Ee.connections)==null?void 0:Se.some($e=>$e.id===x)}).map(Ee=>{var $e;const Se=($e=Ee.connections)==null?void 0:$e.find(Pe=>Pe.id===x);return{sourceChar:Ee,role:Se==null?void 0:Se.role,color:Se==null?void 0:Se.color}});return{outgoingConnections:ne,incomingConnections:ge,currentTableChar:C}},[s,x,p]);return a.jsxs("div",{className:`flex flex-col h-full space-y-4 md:space-y-4 select-none relative ${fe?"is-mounting":""}`,onClick:()=>L(null),children:[a.jsxs("div",{className:"bg-[#0f0f0f]/50 border border-stone-900 rounded-2xl p-4 flex flex-col gap-4 backdrop-blur-sm shadow-lg relative z-20",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[a.jsxs("div",{className:"bg-stone-950 p-1 rounded-lg border border-stone-800 flex items-center",children:[a.jsx("button",{onClick:()=>g("graph"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${p==="graph"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""}),a.jsx("button",{onClick:()=>g("table"),className:`px-4 py-1.5 rounded-md text-[10px] uppercase font-bold tracking-wider transition-all ${p==="table"?"bg-stone-800 text-stone-100 shadow-sm":"text-stone-500 hover:text-stone-300"}`,children:""})]}),p==="graph"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-6 w-px bg-stone-800 hidden md:block"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:ee,disabled:!!oe,onChange:C=>ye(C.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-4 h-4 border border-stone-700 rounded transition-colors ${ee?"bg-emerald-600 border-emerald-500":"bg-transparent"}`,children:ee&&a.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),a.jsx("span",{className:`text-[11px] uppercase tracking-wider font-bold text-stone-500 group-hover:text-stone-300 transition-colors ${oe?"opacity-30":""}`,children:" "})]})]})]}),p==="graph"?oe&&a.jsx("button",{onClick:()=>{We(null),ke(!0)},className:"w-full md:w-auto bg-emerald-950/30 border border-emerald-900/50 text-emerald-500 px-4 py-2 rounded-full text-[10px] uppercase tracking-[0.2em] font-black hover:bg-emerald-900/40 transition-all",children:" "}):a.jsxs("div",{className:"w-full md:w-80 relative z-50",ref:ce,children:[a.jsxs("button",{onClick:()=>y(!v),className:"w-full bg-stone-950 border border-stone-800 text-stone-300 text-xs py-2.5 pl-4 pr-10 rounded-xl text-left focus:border-emerald-900 transition-colors flex items-center justify-between",children:[a.jsx("span",{className:x?"":"text-stone-500 italic",children:x?(he=s.find(C=>C.id===x))==null?void 0:he.name:"--   --"}),a.jsx("svg",{className:`w-4 h-4 text-stone-600 transition-transform ${v?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#0a0a0a] border border-stone-800 rounded-xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 flex flex-col max-h-[400px]",children:[a.jsxs("div",{className:"p-3 bg-stone-900/50 border-b border-stone-900 space-y-3 shrink-0 backdrop-blur-md",children:[a.jsx("input",{type:"text",placeholder:"...",value:E,onChange:C=>O(C.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",autoFocus:!0}),(t.length>0||r.length>0)&&a.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto custom-scrollbar",children:[t.map(C=>{const ne=B.includes(C);return a.jsx("button",{onClick:()=>Te(C),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${ne?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:C},C)}),r.map(C=>{const ne=B.includes(C);return a.jsx("button",{onClick:()=>Te(C),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${ne?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-amber-500"}`,children:C},C)})]})]}),a.jsx("div",{className:"overflow-y-auto p-1 custom-scrollbar",children:Xe.length>0?Xe.map(C=>a.jsxs("button",{onClick:()=>{w(C.id),y(!1),O(""),Z([])},className:`w-full flex items-center gap-3 p-2 hover:bg-stone-900 rounded-lg text-left transition-colors group ${x===C.id?"bg-stone-900/80":""}`,children:[a.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:a.jsx("img",{src:C.imageUrl,style:{objectPosition:`${C.miniImageX??50}% ${C.miniImageY??50}%`,transform:`scale(${C.miniImageScale??1})`,transformOrigin:`${C.miniImageX??50}% ${C.miniImageY??50}%`},className:"w-full h-full object-cover",alt:""})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("span",{className:`text-xs font-bold block truncate ${x===C.id?"text-emerald-400":"text-stone-300"}`,children:C.name}),C.tags&&C.tags.length>0&&a.jsxs("span",{className:"text-[8px] text-stone-600 truncate block mt-0.5",children:[C.tags.slice(0,3).join(", "),C.tags.length>3?"...":""]})]}),x===C.id&&a.jsx("div",{className:"ml-auto text-emerald-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},C.id)):a.jsx("div",{className:"text-center py-4 text-[10px] text-stone-600 italic",children:"  "})})]})]})]}),p==="graph"&&(t.length>0||r.length>0)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-3 border-t border-stone-800/50 animate-in fade-in slide-in-from-top-1 duration-500",children:[a.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2",children:":"}),t.map(C=>{const ne=o[C]||"none";return a.jsxs("button",{onClick:()=>c(C),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${ne==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":ne==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[ne==="include"&&a.jsx("span",{className:"text-emerald-500",children:"+"}),ne==="exclude"&&a.jsx("span",{className:"text-red-500",children:""}),C]},C)}),r.map(C=>{const ne=o[C]||"none";return a.jsxs("button",{onClick:()=>c(C),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${ne==="include"?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":ne==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-amber-500 hover:border-amber-900/30"}`,children:[ne==="include"&&a.jsx("span",{className:"text-amber-500",children:"+"}),ne==="exclude"&&a.jsx("span",{className:"text-red-500",children:""}),C]},C)}),A>0&&a.jsx("button",{onClick:d,className:"ml-2 text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:""})]})]}),a.jsxs("div",{className:"relative z-0 w-full h-full min-h-[500px] bg-[#030303] border border-stone-900 rounded-2xl overflow-hidden shadow-2xl graph-container-reveal",children:[p==="graph"&&a.jsxs(a.Fragment,{children:[a.jsxs("svg",{ref:je,viewBox:"0 0 1000 700",className:"w-full h-full touch-none cursor-grab active:cursor-grabbing",children:[a.jsx("defs",{children:P.map(C=>a.jsx("marker",{id:`arrow-${Ce(C)}`,markerWidth:"8",markerHeight:"6",refX:"7.5",refY:"3",orient:"auto",children:a.jsx("path",{d:"M0,0 L8,3 L0,6",fill:C})},`arrow-${Ce(C)}`))}),a.jsxs("g",{ref:Le,children:[M.map((C,ne)=>{const ge=xe(C);if(!ge)return null;const Ee=C.color||"#10b981",Se=C.isHidden;return a.jsxs("g",{className:`transition-opacity duration-700 ${Se?"opacity-0":"opacity-100"}`,children:[a.jsx("path",{d:ge.path,fill:"none",stroke:Ee,strokeWidth:oe?"3":"1.5",strokeOpacity:oe?"0.8":"0.3",markerEnd:`url(#arrow-${Ce(Ee)})`,className:"link-path",style:fe?{animationDelay:`${ne*.015}s`}:{}}),oe&&C.role&&!Se&&a.jsxs("g",{transform:`translate(${ge.textPos.x}, ${ge.textPos.y})`,children:[a.jsx("text",{dy:"-14",textAnchor:"middle",className:"fill-[#030303] text-[10px] font-bold uppercase tracking-[0.2em]",style:{paintOrder:"stroke",stroke:"#030303",strokeWidth:"5px"},children:C.role}),a.jsx("text",{dy:"-14",textAnchor:"middle",fill:Ee,className:"text-[10px] font-bold uppercase tracking-[0.2em] opacity-90",children:C.role})]})]},`link-${ne}-${R}`)}),te.map((C,ne)=>{const ge=oe===C.id;return a.jsx("g",{transform:`translate(${C.x||500}, ${C.y||350})`,className:`node-group cursor-pointer group ${C.isDimmed?"opacity-0 pointer-events-none":"opacity-100"}`,onClick:Ee=>{if(Ee.stopPropagation(),C.x&&C.y){const Se=C.x*q.k+q.x,$e=C.y*q.k+q.y;L({id:C.id,x:Se,y:$e})}},children:a.jsxs("g",{className:"node-animator",style:fe?{animationDelay:`${ne*.06}s`}:{},children:[a.jsxs("g",{className:"node-content",children:[a.jsx("circle",{r:"48",fill:"#1c1917"}),a.jsx("circle",{r:"46",fill:"#050505",stroke:ge?"#10b981":"#292524",strokeWidth:ge?"4":"1.5"}),a.jsx("clipPath",{id:`clip-${C.id}`,children:a.jsx("circle",{r:"45"})}),a.jsx("foreignObject",{x:"-45",y:"-45",width:"90",height:"90",clipPath:`url(#clip-${C.id})`,children:a.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center overflow-hidden",children:a.jsx("img",{src:C.imageUrl,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${C.miniImageX??50}% ${C.miniImageY??50}%`,transformOrigin:`${C.miniImageX??50}% ${C.miniImageY??50}%`,transform:`scale(${C.miniImageScale??1})`},className:"opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500"})})})]}),a.jsx("text",{y:"70",textAnchor:"middle",className:"fill-stone-500 text-[12px] font-bold uppercase tracking-[0.15em] group-hover:fill-stone-100 transition-colors drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)] font-serif",children:C.name})]})},C.id)})]})]}),le&&a.jsx("div",{className:"absolute inset-0 bg-[#030303]/40 flex items-center justify-center backdrop-blur-[1px] pointer-events-none",children:a.jsx("div",{className:"text-[10px] uppercase tracking-[0.4em] font-black text-emerald-500/50 animate-pulse",children:" ..."})})]}),p==="table"&&a.jsx("div",{className:"w-full h-full overflow-y-auto custom-scrollbar p-6 md:p-10",children:x?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[a.jsx("span",{className:"text-emerald-500 bg-emerald-900/10 px-2 py-1 rounded text-xs font-bold",children:"OUT"}),a.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",J==null?void 0:J.name,"?"]}),a.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:et.length})]}),a.jsx("div",{className:"space-y-3",children:et.length===0?a.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"       ..."}):et.map((C,ne)=>{var ge,Ee,Se,$e,Pe,Qe;return a.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-emerald-900/30 transition-all group",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:a.jsx("img",{src:(ge=C.targetChar)==null?void 0:ge.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((Ee=C.targetChar)==null?void 0:Ee.miniImageX)??50}% ${((Se=C.targetChar)==null?void 0:Se.miniImageY)??50}%`,transform:`scale(${(($e=C.targetChar)==null?void 0:$e.miniImageScale)??1})`,transformOrigin:`${((Pe=C.targetChar)==null?void 0:Pe.miniImageX)??50}% ${((Qe=C.targetChar)==null?void 0:Qe.miniImageY)??50}%`},alt:""})}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:C.name}),a.jsx("button",{onClick:()=>f(C.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-emerald-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),a.jsx("p",{className:"text-stone-500 text-xs mt-1 font-medium",children:C.role})]}),a.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:C.color||"#10b981"}})]},ne)})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 border-b border-stone-800 pb-4",children:[a.jsx("span",{className:"text-blue-500 bg-blue-900/10 px-2 py-1 rounded text-xs font-bold",children:"IN"}),a.jsxs("h3",{className:"text-lg font-serif text-stone-200 italic",children:["  ",J==null?void 0:J.name,"?"]}),a.jsx("span",{className:"ml-auto text-stone-600 text-xs font-bold",children:T.length})]}),a.jsx("div",{className:"space-y-3",children:T.length===0?a.jsx("p",{className:"text-stone-700 text-xs italic py-4",children:"    ..."}):T.map((C,ne)=>{var ge,Ee,Se,$e,Pe,Qe,it;return a.jsxs("div",{className:"flex items-start gap-4 p-4 bg-stone-900/30 border border-stone-900/50 rounded-xl hover:bg-stone-900/50 hover:border-blue-900/30 transition-all group",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-stone-800 bg-black shrink-0",children:a.jsx("img",{src:(ge=C.sourceChar)==null?void 0:ge.imageUrl,className:"w-full h-full object-cover",style:{objectPosition:`${((Ee=C.sourceChar)==null?void 0:Ee.miniImageX)??50}% ${((Se=C.sourceChar)==null?void 0:Se.miniImageY)??50}%`,transform:`scale(${(($e=C.sourceChar)==null?void 0:$e.miniImageScale)??1})`,transformOrigin:`${((Pe=C.sourceChar)==null?void 0:Pe.miniImageX)??50}% ${((Qe=C.sourceChar)==null?void 0:Qe.miniImageY)??50}%`},alt:""})}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("h4",{className:"text-stone-300 font-bold text-sm truncate",children:(it=C.sourceChar)==null?void 0:it.name}),a.jsx("button",{onClick:()=>f(C.sourceChar.id),className:"text-[9px] uppercase font-bold text-stone-700 hover:text-blue-500 transition-colors opacity-0 group-hover:opacity-100",children:""})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-stone-600 text-[10px] uppercase tracking-wider",children:"  :"}),a.jsx("p",{className:"text-stone-400 text-xs font-medium",children:C.role})]})]}),a.jsx("div",{className:"w-1.5 h-8 rounded-full self-center",style:{backgroundColor:C.color||"#10b981"}})]},ne)})})]})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-stone-600 space-y-4",children:[a.jsx("svg",{className:"w-16 h-16 opacity-30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),a.jsx("p",{className:"text-sm italic font-serif opacity-70",children:"    ,    "})]})}),K&&p==="graph"&&a.jsx("div",{className:"absolute z-[100] animate-in zoom-in-95 fade-in duration-300",style:{left:K.x+40,top:K.y-40},onClick:C=>C.stopPropagation(),children:a.jsxs("div",{className:"bg-[#0f0f0f]/95 border border-stone-800 rounded-xl overflow-hidden shadow-2xl min-w-[200px] backdrop-blur-md",children:[a.jsx("button",{onClick:()=>f(K.id),className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-stone-200 hover:bg-emerald-900/40 border-b border-stone-900",children:" "}),a.jsx("button",{onClick:()=>{We(K.id),L(null),ke(!0)},className:"w-full text-left px-5 py-3 text-[11px] uppercase tracking-wider font-bold text-emerald-400 hover:bg-emerald-900/40",children:" "})]})})]})]})},hx=({realms:s,worlds:t,characters:r,availableTags:o,availableHiddenTags:c,onUpdateRealms:d,onUpdateWorlds:f,isAdmin:p})=>{var ne,ge,Ee,Se,$e,Pe,Qe,it;const[g,x]=F.useState(null),[w,v]=F.useState(null);F.useEffect(()=>{window.scrollTo(0,0)},[g,w]);const[y,E]=F.useState(!1),[O,B]=F.useState(!1),[Z,ce]=F.useState(!1),[ee,ye]=F.useState(null),[oe,We]=F.useState(!1),[K,L]=F.useState(""),[R,me]=F.useState(!1),[le,ke]=F.useState({}),[fe,D]=F.useState({type:""}),[je,Le]=F.useState(""),[Me,Ie]=F.useState([]),V=s.find(z=>z.id===g),q=t.find(z=>z.id===w),b=t.filter(z=>z.realmId===g),A=z=>{var se,ve;for(const G of t){if((se=G.characterIds)!=null&&se.includes(z))return G.name;if(G.subLocations){for(const U of G.subLocations)if((ve=U.characterIds)!=null&&ve.includes(z))return`${G.name} / ${U.name}`}}return null},te=z=>{ke(z||{}),E(!0)},M=()=>{if(!le.name)return;let z;if(le.id)z=s.map(se=>se.id===le.id?{...se,...le}:se);else{const se={id:Date.now().toString(),name:le.name,imageUrl:le.imageUrl||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=1080&auto=format&fit=crop"};z=[...s,se]}d(z),E(!1),ke({})},P=z=>{window.confirm("  ?  ,   .")&&(d(s.filter(se=>se.id!==z)),g===z&&x(null))},Q=z=>{D(z||{type:"",realmId:g}),B(!0)},xe=()=>{if(!fe.name||!g)return;let z;if(fe.id)z=t.map(se=>se.id===fe.id?{...se,...fe}:se);else{const se={id:Date.now().toString(),realmId:g,name:fe.name,type:fe.type||"",description:fe.description||"",imageUrl:fe.imageUrl||"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=800&auto=format&fit=crop",characterIds:[],subLocations:[]};z=[...t,se]}f(z),B(!1),D({type:""})},Ce=z=>{window.confirm("  ?")&&(f(t.filter(se=>se.id!==z)),w===z&&v(null))},Te=()=>{if(!q||!K.trim())return;const z={id:Date.now().toString(),name:K.trim(),characterIds:[]},se=t.map(ve=>ve.id===q.id?{...ve,subLocations:[...ve.subLocations||[],z]}:ve);f(se),L(""),We(!1)},Xe=z=>{if(!q||!window.confirm("  ?        ."))return;const se=t.map(ve=>ve.id===q.id?{...ve,subLocations:(ve.subLocations||[]).filter(G=>G.id!==z)}:ve);f(se)},et=z=>{if(!q)return;let se={...q};if(ee){const G=se.subLocations?[...se.subLocations]:[],U=G.findIndex(pe=>pe.id===ee);if(U>-1){const pe=G[U].characterIds||[],Re=pe.includes(z)?pe.filter(Be=>Be!==z):[...pe,z];G[U]={...G[U],characterIds:Re},se.subLocations=G}}else{const G=se.characterIds||[],U=G.includes(z)?G.filter(pe=>pe!==z):[...G,z];se.characterIds=U}const ve=t.map(G=>G.id===q.id?se:G);f(ve)},T=z=>{Ie(se=>se.includes(z)?se.filter(ve=>ve!==z):[...se,z])},J=(z=null)=>{ye(z),Le(""),Ie([]),ce(!0)},he=async z=>{var ve;const se=(ve=z.target.files)==null?void 0:ve[0];if(se){me(!0);try{const G=await $o(se);ke(U=>({...U,imageUrl:G}))}finally{me(!1)}}},C=async z=>{var ve;const se=(ve=z.target.files)==null?void 0:ve[0];if(se){me(!0);try{const G=await $o(se);D(U=>({...U,imageUrl:G}))}finally{me(!1)}}};if(w&&q){const z=ee?((ge=(ne=q.subLocations)==null?void 0:ne.find(U=>U.id===ee))==null?void 0:ge.characterIds)||[]:q.characterIds||[],se=r.filter(U=>!z.includes(U.id)),ve=se.filter(U=>{const pe=U.name.toLowerCase().includes(je.toLowerCase());if(Me.length===0)return pe;const Re=[...U.tags||[],...U.hiddenTags||[]];return pe&&Me.every(Be=>Re.includes(Be))}),G=(U,pe)=>{const Re=U||[],Be=r.filter(Ue=>Re.includes(Ue.id));return Be.length===0?a.jsx("p",{className:"text-stone-600 italic text-sm py-4",children:"  ..."}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Be.map((Ue,nn)=>a.jsxs("div",{style:{animationDelay:`${nn*50}ms`,animationFillMode:"both"},className:"animate-slide-up-fade bg-stone-900/30 border border-stone-800 rounded-xl p-3 flex items-center gap-3 group relative hover:bg-stone-900/50 hover:border-stone-700 transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-black border border-stone-700 overflow-hidden shrink-0",children:a.jsx("img",{src:Ue.imageUrl,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",alt:"",style:{objectPosition:`${Ue.miniImageX??50}% ${Ue.miniImageY??50}%`,transform:`scale(${Ue.miniImageScale??1})`,transformOrigin:`${Ue.miniImageX??50}% ${Ue.miniImageY??50}%`}})}),a.jsx("span",{className:"text-stone-300 font-bold text-sm truncate group-hover:text-emerald-400 transition-colors",children:Ue.name}),p&&a.jsx("button",{onClick:()=>{ye(pe),setTimeout(()=>et(Ue.id),0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-stone-600 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all p-2",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Ue.id))})};return a.jsxs("div",{className:"space-y-8 animate-epic-reveal pb-20",children:[a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("button",{onClick:()=>v(null),className:"self-start flex items-center gap-2 text-stone-500 hover:text-emerald-500 transition-colors group",children:[a.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest",children:["  ",V==null?void 0:V.name]})]}),a.jsxs("div",{className:"relative h-[300px] md:h-[400px] rounded-3xl overflow-hidden border border-stone-900 group shadow-2xl animate-slide-up-fade",style:{animationDelay:"0.1s"},children:[a.jsx("img",{src:q.imageUrl,className:"w-full h-full object-cover transition-transform duration-[3s] ease-out group-hover:scale-105",alt:q.name}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent opacity-90"}),a.jsx("div",{className:"absolute bottom-0 left-0 p-8 md:p-12 w-full",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[a.jsxs("div",{className:"animate-slide-up-fade",style:{animationDelay:"0.2s"},children:[a.jsx("div",{className:"inline-block px-3 py-1 bg-emerald-900/40 border border-emerald-500/30 rounded-lg text-emerald-400 text-[10px] font-bold uppercase tracking-widest mb-3 backdrop-blur-md",children:q.type}),a.jsx("h1",{className:"text-4xl md:text-6xl font-serif font-medium text-stone-100 drop-shadow-xl",children:q.name})]}),p&&a.jsxs("div",{className:"flex gap-3 animate-slide-up-fade",style:{animationDelay:"0.3s"},children:[a.jsx("button",{onClick:()=>Q(q),className:"bg-white/10 hover:bg-white/20 backdrop-blur-md text-stone-200 px-5 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all border border-white/10",children:""}),a.jsx("button",{onClick:()=>Ce(q.id),className:"bg-red-900/20 hover:bg-red-900/40 backdrop-blur-md text-red-400 px-5 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all border border-red-900/30",children:""})]})]})})]}),a.jsx("div",{className:"max-w-4xl animate-slide-up-fade",style:{animationDelay:"0.4s"},children:a.jsx("p",{className:"text-lg md:text-xl font-serif text-stone-300 leading-relaxed whitespace-pre-wrap",children:q.description})}),a.jsx("div",{className:"h-px bg-stone-900 w-full my-4"}),a.jsxs("div",{className:"space-y-10",children:[a.jsxs("div",{className:"space-y-4 animate-slide-up-fade",style:{animationDelay:"0.5s"},children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-stone-800/50 pb-2",children:[a.jsx("h3",{className:"text-xl font-serif text-stone-200 italic",children:" "}),p&&a.jsx("button",{onClick:()=>J(null),className:"text-emerald-500 hover:text-emerald-400 text-[10px] uppercase font-bold tracking-widest transition-colors flex items-center gap-2",children:"+ "})]}),G(q.characterIds||[],null)]}),(Ee=q.subLocations)==null?void 0:Ee.map((U,pe)=>a.jsxs("div",{className:"space-y-4 pt-4 animate-slide-up-fade",style:{animationDelay:`${(pe+6)*100}ms`},children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-stone-800/50 pb-2",children:[a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsx("h3",{className:"text-xl font-serif text-stone-300 italic",children:U.name}),p&&a.jsx("button",{onClick:()=>Xe(U.id),className:"text-stone-700 hover:text-red-500 transition-colors",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&a.jsx("button",{onClick:()=>J(U.id),className:"text-emerald-500 hover:text-emerald-400 text-[10px] uppercase font-bold tracking-widest transition-colors flex items-center gap-2",children:"+ "})]}),G(U.characterIds||[],U.id)]},U.id)),p&&a.jsx("div",{className:"pt-4 animate-slide-up-fade",style:{animationDelay:"0.8s"},children:oe?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{autoFocus:!0,placeholder:" ...",className:"bg-stone-900 border border-stone-800 rounded-lg px-3 py-2 text-sm text-stone-200 outline-none focus:border-emerald-900 w-64",value:K,onChange:U=>L(U.target.value),onKeyDown:U=>U.key==="Enter"&&Te()}),a.jsx("button",{onClick:Te,className:"text-emerald-500 hover:text-emerald-400 font-bold p-2 bg-stone-900 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>We(!1),className:"text-stone-600 hover:text-stone-400 font-bold p-2",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):a.jsxs("button",{onClick:()=>We(!0),className:"flex items-center gap-2 text-stone-600 hover:text-emerald-500 transition-colors group",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border border-stone-800 group-hover:border-emerald-500/50 flex items-center justify-center transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest",children:" "})]})})]})]}),Z&&a.jsx("div",{className:"fixed inset-0 z-[120] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>ce(!1),children:a.jsxs("div",{className:"bg-[#0f0f0f] border border-stone-800 w-full max-w-lg rounded-2xl shadow-2xl flex flex-col max-h-[85vh] animate-in zoom-in-95 duration-300",onClick:U=>U.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-stone-900 shrink-0 space-y-4 bg-[#0f0f0f] rounded-t-2xl z-10",children:[a.jsxs("h3",{className:"text-xl font-serif text-stone-100 shrink-0",children:[" : ",ee?($e=(Se=q.subLocations)==null?void 0:Se.find(U=>U.id===ee))==null?void 0:$e.name:" "]}),a.jsx("input",{type:"text",placeholder:"  ...",value:je,onChange:U=>Le(U.target.value),className:"w-full bg-stone-900 border border-stone-800 rounded-lg px-3 py-2 text-xs text-stone-200 outline-none focus:border-emerald-500/50 transition-colors",autoFocus:!0}),(o.length>0||c.length>0)&&a.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto custom-scrollbar",children:[o.map(U=>{const pe=Me.includes(U);return a.jsx("button",{onClick:()=>T(U),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${pe?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-stone-400"}`,children:U},U)}),c.map(U=>{const pe=Me.includes(U);return a.jsx("button",{onClick:()=>T(U),className:`px-2 py-1 rounded text-[9px] uppercase font-bold tracking-wider transition-all border ${pe?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-stone-900 border-stone-800 text-stone-600 hover:text-amber-500"}`,children:U},U)})]})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-grow p-4 space-y-1",children:ve.length===0?a.jsx("div",{className:"text-center py-8 text-stone-600 italic text-sm",children:se.length===0?"      .":"  ."}):ve.map(U=>{const pe=A(U.id),Re=!!pe;return a.jsxs("button",{onClick:()=>!Re&&et(U.id),disabled:Re,className:`w-full flex items-center gap-3 p-2 rounded-lg transition-colors group text-left ${Re?"opacity-50 cursor-not-allowed bg-stone-900/20":"hover:bg-stone-900"}`,children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-black border border-stone-800 overflow-hidden shrink-0",children:a.jsx("img",{src:U.imageUrl,className:"w-full h-full object-cover",alt:"",style:{objectPosition:`${U.miniImageX??50}% ${U.miniImageY??50}%`,transform:`scale(${U.miniImageScale??1})`,transformOrigin:`${U.miniImageX??50}% ${U.miniImageY??50}%`}})}),a.jsxs("div",{className:"min-w-0 flex-grow",children:[a.jsx("span",{className:`text-stone-300 text-sm font-bold block truncate ${!Re&&"group-hover:text-emerald-400"}`,children:U.name}),Re?a.jsxs("span",{className:"text-[10px] text-red-500/70 font-bold uppercase tracking-wider block truncate",children:[": ",pe]}):a.jsx(a.Fragment,{children:Me.length>0&&a.jsx("span",{className:"text-[8px] text-stone-600 block truncate",children:Me.filter(Be=>(U.tags||[]).includes(Be)||(U.hiddenTags||[]).includes(Be)).join(", ")})})]}),!Re&&a.jsx("span",{className:"ml-auto text-emerald-500 opacity-0 group-hover:opacity-100",children:"+"})]},U.id)})}),a.jsx("div",{className:"p-4 border-t border-stone-900 shrink-0",children:a.jsx("button",{onClick:()=>ce(!1),className:"w-full py-3 bg-stone-900 hover:bg-stone-800 text-stone-400 rounded-xl text-[10px] uppercase font-bold tracking-widest",children:""})})]})})]})}return g?a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("button",{onClick:()=>x(null),className:"self-start flex items-center gap-2 text-stone-500 hover:text-emerald-500 transition-colors group",children:[a.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"  "})]}),a.jsxs("div",{className:"flex justify-between items-end border-b border-stone-800 pb-8",children:[a.jsxs("div",{className:"flex items-center gap-6 animate-in slide-in-from-bottom-2 duration-700",children:[a.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-2xl overflow-hidden border border-stone-800 bg-black shadow-lg",children:a.jsx("img",{src:V==null?void 0:V.imageUrl,className:"w-full h-full object-cover",alt:""})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-serif font-medium text-stone-100",children:V==null?void 0:V.name}),a.jsxs("p",{className:"text-stone-500 uppercase tracking-widest text-[10px] mt-2",children:[": ",b.length]})]})]}),p&&a.jsxs("div",{className:"flex gap-2 flex-col md:flex-row",children:[a.jsx("button",{onClick:()=>te(V),className:"bg-stone-900/50 border border-stone-800 text-stone-400 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-stone-900 transition-all mb-1",children:". "}),a.jsx("button",{onClick:()=>Q(),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all mb-1",children:"+ "})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[b.length===0&&a.jsx("div",{className:"col-span-full py-20 text-center text-stone-700 italic",children:"     .   ."}),b.map((z,se)=>{var ve,G,U,pe;return a.jsxs("div",{onClick:()=>v(z.id),style:{animationDelay:`${se*100}ms`,animationFillMode:"both"},className:"animate-slide-up-fade bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl overflow-hidden group hover:border-emerald-900/30 transition-all flex flex-col cursor-pointer active:scale-95 shadow-lg",children:[a.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a.jsx("img",{src:z.imageUrl,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-all duration-[2s] group-hover:scale-110 ease-out",alt:""}),a.jsx("div",{className:"absolute top-4 left-4 bg-black/80 px-3 py-1 rounded text-[9px] uppercase tracking-widest font-bold text-emerald-500 border border-emerald-900/50 backdrop-blur-sm",children:z.type}),(((ve=z.characterIds)==null?void 0:ve.length)||0)+(((G=z.subLocations)==null?void 0:G.reduce((Re,Be)=>{var Ue;return Re+(((Ue=Be.characterIds)==null?void 0:Ue.length)||0)},0))||0)>0&&a.jsx("div",{className:"absolute bottom-4 right-4 bg-black/60 backdrop-blur-md px-2 py-1 rounded flex items-center gap-2",children:a.jsxs("span",{className:"text-[9px] text-stone-300 font-bold uppercase tracking-widest",children:[(((U=z.characterIds)==null?void 0:U.length)||0)+(((pe=z.subLocations)==null?void 0:pe.reduce((Re,Be)=>{var Ue;return Re+(((Ue=Be.characterIds)==null?void 0:Ue.length)||0)},0))||0)," ."]})})]}),a.jsxs("div",{className:"p-6 space-y-3 flex-grow flex flex-col relative z-10 bg-[#0f0f0f]",children:[a.jsx("h3",{className:"text-xl font-serif text-stone-100 group-hover:text-emerald-200 transition-colors",children:z.name}),a.jsx("p",{className:"text-stone-500 text-sm leading-relaxed line-clamp-3 mb-2",children:z.description}),p&&a.jsxs("div",{className:"mt-auto pt-4 border-t border-stone-900/50 flex justify-between",children:[a.jsx("button",{onClick:Re=>{Re.stopPropagation(),Q(z)},className:"text-[9px] font-bold uppercase tracking-widest text-stone-600 hover:text-white",children:"."}),a.jsx("button",{onClick:Re=>{Re.stopPropagation(),Ce(z.id)},className:"text-[9px] font-bold uppercase tracking-widest text-stone-600 hover:text-red-500",children:""})]})]})]},z.id)})]}),O&&a.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-2xl p-6 md:p-8 space-y-6 max-h-[90vh] flex flex-col overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",children:[a.jsx("h2",{className:"text-2xl font-serif text-stone-100 shrink-0",children:fe.id?"":" "}),a.jsxs("div",{className:"space-y-4 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),a.jsx("input",{className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:fe.name||"",onChange:z=>D({...fe,name:z.target.value}),placeholder:" ..."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),a.jsxs("select",{className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:fe.type,onChange:z=>D({...fe,type:z.target.value}),children:[a.jsx("option",{children:""}),a.jsx("option",{children:""}),a.jsx("option",{children:""}),a.jsx("option",{children:""})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),a.jsx("textarea",{placeholder:"  ...",className:"w-full bg-stone-900 border border-stone-800 p-3 rounded-lg text-stone-200 h-32 outline-none resize-none focus:border-emerald-900",value:fe.description||"",onChange:z=>D({...fe,description:z.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600",children:""}),a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-3 rounded-lg border border-stone-800 flex items-center justify-center gap-2 transition-colors ${R?"opacity-50":""}`,children:[a.jsx("input",{type:"file",onChange:C,className:"hidden",disabled:R,accept:"image/*"}),a.jsx("span",{className:"text-[10px] text-stone-400 font-bold uppercase",children:R?"...":""})]}),a.jsx("input",{className:"flex-[1.5] bg-stone-900 border border-stone-800 p-3 rounded-lg text-xs text-stone-400 outline-none",placeholder:"...",value:(Pe=fe.imageUrl)!=null&&Pe.startsWith("data:")?"":fe.imageUrl||"",onChange:z=>D({...fe,imageUrl:z.target.value})})]}),fe.imageUrl&&a.jsx("img",{src:fe.imageUrl,className:"h-20 w-full object-cover rounded mt-2 opacity-50"})]})]}),a.jsxs("div",{className:"flex gap-4 shrink-0 pt-2 border-t border-stone-900 mt-2",children:[a.jsx("button",{onClick:()=>B(!1),className:"flex-1 py-3 text-[10px] font-bold uppercase text-stone-500 hover:text-stone-300",children:""}),a.jsx("button",{onClick:xe,disabled:R||!fe.name,className:"flex-1 py-3 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-lg font-bold text-[10px] uppercase disabled:opacity-50 hover:bg-emerald-900/50 transition-colors",children:""})]})]})}),y&&a.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-3xl p-8 space-y-6 shadow-2xl animate-in zoom-in-95 duration-300",children:[a.jsx("h2",{className:"text-2xl font-serif text-stone-100",children:" "}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),a.jsx("input",{className:"w-full bg-stone-900 border border-stone-800 p-4 rounded-xl text-stone-200 outline-none focus:border-emerald-900",value:le.name||"",onChange:z=>ke({...le,name:z.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-4 rounded-xl border border-stone-800 flex items-center justify-center gap-2 ${R?"opacity-50":""}`,children:[a.jsx("input",{type:"file",onChange:he,className:"hidden",disabled:R,accept:"image/*"}),a.jsx("span",{className:"text-xs text-stone-400 font-bold uppercase",children:R?"...":""})]}),a.jsx("input",{className:"flex-[2] bg-stone-900 border border-stone-800 p-4 rounded-xl text-xs text-stone-400 outline-none",placeholder:"...",value:(Qe=le.imageUrl)!=null&&Qe.startsWith("data:")?"":le.imageUrl||"",onChange:z=>ke({...le,imageUrl:z.target.value})})]})]})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-4 text-[10px] uppercase font-bold text-stone-500 hover:text-stone-300",children:""}),a.jsx("button",{onClick:M,disabled:!le.name||R,className:"flex-1 py-4 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-xl font-bold text-[10px] uppercase hover:bg-emerald-900/50 transition-all disabled:opacity-50",children:""})]})]})})]}):a.jsxs("div",{className:"space-y-12 animate-in fade-in duration-700 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("div",{className:"space-y-2",children:a.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""})}),p&&a.jsx("button",{onClick:()=>te(),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all",children:"  "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.length===0&&a.jsx("div",{className:"col-span-full py-20 text-center",children:a.jsx("p",{className:"text-stone-700 italic font-serif text-xl",children:" .   ."})}),s.map((z,se)=>a.jsxs("div",{onClick:()=>x(z.id),style:{animationDelay:`${se*150}ms`,animationFillMode:"both"},className:"animate-slide-up-fade bg-[#0f0f0f]/30 border border-stone-900 rounded-3xl overflow-hidden group cursor-pointer relative shadow-lg hover:shadow-emerald-900/10 hover:border-emerald-900/40 transition-all active:scale-95",children:[a.jsxs("div",{className:"aspect-[16/9] relative",children:[a.jsx("img",{src:z.imageUrl,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-all duration-[2s] ease-out group-hover:scale-110",alt:z.name}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"}),a.jsx("h3",{className:"absolute bottom-6 left-6 text-3xl font-serif text-stone-100 z-10 font-bold group-hover:text-emerald-100 transition-colors drop-shadow-md",children:z.name})]}),p&&a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:ve=>{ve.stopPropagation(),te(z)},className:"bg-black/50 hover:bg-white text-white hover:text-black p-2 rounded-full backdrop-blur-sm transition-all",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),a.jsx("button",{onClick:ve=>{ve.stopPropagation(),P(z.id)},className:"bg-black/50 hover:bg-red-900/80 text-white p-2 rounded-full backdrop-blur-sm transition-all",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},z.id))]}),y&&a.jsx("div",{className:"fixed inset-0 z-[110] bg-black/90 backdrop-blur-md flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[#0a0a0a] border border-stone-800 w-full max-w-lg rounded-3xl p-8 space-y-6 shadow-2xl animate-in zoom-in-95 duration-300",children:[a.jsx("h2",{className:"text-2xl font-serif text-stone-100",children:le.id?" ":" "}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),a.jsx("input",{autoFocus:!0,className:"w-full bg-stone-900 border border-stone-800 p-4 rounded-xl text-stone-200 outline-none focus:border-emerald-900 transition-colors",value:le.name||"",onChange:z=>ke({...le,name:z.target.value}),placeholder:":  "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase tracking-widest font-bold text-stone-600 block mb-2",children:""}),a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsxs("label",{className:`flex-1 cursor-pointer bg-stone-900 hover:bg-stone-800 p-4 rounded-xl border border-stone-800 flex items-center justify-center gap-2 transition-colors ${R?"opacity-50":""}`,children:[a.jsx("input",{type:"file",onChange:he,className:"hidden",disabled:R,accept:"image/*"}),a.jsx("span",{className:"text-xs text-stone-400 font-bold uppercase",children:R?"...":""})]}),a.jsx("input",{className:"flex-[2] bg-stone-900 border border-stone-800 p-4 rounded-xl text-xs text-stone-400 outline-none",placeholder:"...",value:(it=le.imageUrl)!=null&&it.startsWith("data:")?"":le.imageUrl||"",onChange:z=>ke({...le,imageUrl:z.target.value})})]})]})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-4 text-[10px] uppercase font-bold text-stone-500 hover:text-stone-300",children:""}),a.jsx("button",{onClick:M,disabled:!le.name||R,className:"flex-1 py-4 bg-emerald-900/30 text-emerald-500 border border-emerald-900/50 rounded-xl font-bold text-[10px] uppercase hover:bg-emerald-900/50 transition-all disabled:opacity-50",children:""})]})]})})]})},fx=({sessions:s,characters:t,onUpdate:r,isAdmin:o})=>{const[c,d]=F.useState(null),[f,p]=F.useState(null),[g,x]=F.useState("");F.useEffect(()=>{window.scrollTo(0,0)},[c]);const[w,v]=F.useState(!1),[y,E]=F.useState(""),[O,B]=F.useState(""),Z=F.useRef(null),ce=s.find(K=>K.id===c);F.useEffect(()=>{Z.current&&Z.current.scrollIntoView({behavior:"smooth"})},[ce==null?void 0:ce.posts.length,c]);const ee=()=>{if(!y.trim())return;const K={id:Date.now().toString(),name:y,description:O,posts:[]};r([...s,K]),v(!1),E(""),B("")},ye=K=>{window.confirm("     ?")&&(r(s.filter(L=>L.id!==K)),c===K&&d(null))},oe=K=>{if(!g.trim()||!f||!c)return;const L={id:Date.now().toString(),characterId:f,content:g,timestamp:Date.now(),type:"speech"},R=s.map(me=>me.id===c?{...me,posts:[...me.posts,L]}:me);r(R),x("")},We=K=>new Date(K).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return c?a.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col animate-in fade-in duration-300",children:[a.jsx("div",{className:"flex items-center justify-between pb-4 border-b border-stone-900 shrink-0",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-stone-900 rounded-full text-stone-500 transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-serif text-stone-100 italic",children:ce==null?void 0:ce.name}),a.jsx("p",{className:"text-[10px] uppercase tracking-widest text-stone-500",children:ce==null?void 0:ce.description})]})]})}),a.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar py-6 space-y-8 pr-2",children:[(ce==null?void 0:ce.posts.length)===0?a.jsx("div",{className:"text-center text-stone-700 italic text-sm mt-10",children:"...   ,   ."}):ce==null?void 0:ce.posts.map(K=>{const L=t.find(R=>R.id===K.characterId);return L?a.jsxs("div",{className:"flex gap-4 md:gap-6 group animate-in slide-in-from-bottom-2 duration-500",children:[a.jsx("div",{className:"shrink-0 flex flex-col items-center gap-2 mt-1",children:a.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full border border-stone-800 overflow-hidden bg-black shadow-lg",children:a.jsx("img",{src:L.imageUrl,alt:L.name,style:{objectFit:"cover",objectPosition:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transformOrigin:`${L.miniImageX??50}% ${L.miniImageY??50}%`,transform:`scale(${L.miniImageScale??1})`},className:"w-full h-full"})})}),a.jsxs("div",{className:"flex-grow max-w-4xl",children:[a.jsxs("div",{className:"flex items-baseline gap-3 mb-1",children:[a.jsx("span",{className:"text-stone-300 font-bold text-sm tracking-wide",children:L.name}),a.jsx("span",{className:"text-[9px] text-stone-700 font-mono",children:We(K.timestamp)})]}),a.jsx("div",{className:"text-stone-400 leading-relaxed font-serif whitespace-pre-wrap text-[15px] md:text-[16px]",children:K.content})]})]},K.id):null}),a.jsx("div",{ref:Z})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-stone-900 shrink-0 bg-[#050505] z-10",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-3",children:t.map(K=>{const L=f===K.id;return a.jsxs("button",{onClick:()=>p(K.id),className:`flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all shrink-0 border relative ${L?"bg-stone-900/80 border-stone-800 text-stone-100":"bg-transparent border-transparent text-stone-500 hover:text-stone-400"}`,children:[a.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-black shrink-0",children:a.jsx("img",{src:K.imageUrl,style:{objectFit:"cover",objectPosition:`${K.miniImageX??50}% ${K.miniImageY??50}%`,transformOrigin:`${K.miniImageX??50}% ${K.miniImageY??50}%`,transform:`scale(${K.miniImageScale??1})`},className:"w-full h-full",alt:""})}),a.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wider",children:K.name}),L&&a.jsx("div",{className:"ml-1 w-2.5 h-2.5 rounded-sm bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)] animate-in zoom-in-50 duration-300"})]},K.id)})}),a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{value:g,onChange:K=>x(K.target.value),onKeyDown:K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),oe())},placeholder:f?" -...":"  ...",disabled:!f,className:"w-full bg-[#0f0f0f] border border-stone-800 rounded-xl p-4 pr-14 text-stone-300 outline-none focus:border-emerald-900/50 transition-colors resize-none h-24 custom-scrollbar font-serif"}),a.jsx("button",{onClick:()=>oe(),disabled:!g.trim()||!f,className:"absolute right-3 bottom-3 p-2 bg-stone-800 text-stone-400 rounded-lg hover:bg-emerald-600 hover:text-white disabled:opacity-30 disabled:hover:bg-stone-800 disabled:hover:text-stone-400 transition-all",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})]}):a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-medium text-stone-100",children:""}),a.jsx("p",{className:"text-stone-500 uppercase tracking-widest text-[10px]",children:"   "})]}),a.jsx("button",{onClick:()=>v(!0),className:"bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 px-6 py-2 rounded-full text-[10px] uppercase tracking-widest font-bold hover:bg-emerald-900/30 transition-all",children:"+  "})]}),w&&a.jsxs("div",{className:"bg-[#0f0f0f]/50 border border-stone-800 p-6 rounded-2xl space-y-4 animate-in slide-in-from-top-4",children:[a.jsx("input",{autoFocus:!0,placeholder:"   ...",className:"w-full bg-stone-900/50 border border-stone-800 p-3 rounded-lg text-stone-200 outline-none focus:border-emerald-900",value:y,onChange:K=>E(K.target.value)}),a.jsx("input",{placeholder:" ...",className:"w-full bg-stone-900/50 border border-stone-800 p-3 rounded-lg text-stone-400 outline-none focus:border-emerald-900 text-sm",value:O,onChange:K=>B(K.target.value)}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-[10px] uppercase font-bold text-stone-500",children:""}),a.jsx("button",{onClick:ee,className:"px-6 py-2 bg-emerald-700 hover:bg-emerald-600 text-white rounded-lg text-[10px] uppercase font-bold transition-colors",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.length===0&&!w&&a.jsx("div",{className:"col-span-full text-center py-20 opacity-50 italic font-serif",children:"   .   ."}),s.map(K=>a.jsxs("div",{onClick:()=>d(K.id),className:"bg-[#0f0f0f]/30 border border-stone-900 rounded-2xl p-6 cursor-pointer hover:border-emerald-900/50 hover:bg-stone-900/30 transition-all group flex flex-col h-[200px]",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:"text-xl font-serif text-stone-200 group-hover:text-emerald-400 transition-colors",children:K.name}),a.jsxs("span",{className:"text-[10px] bg-stone-900 text-stone-500 px-2 py-1 rounded-md font-mono",children:[K.posts.length," "]})]}),a.jsx("p",{className:"text-sm text-stone-500 mt-2 line-clamp-2",children:K.description}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-stone-900/50 flex justify-between items-center",children:[a.jsx("span",{className:"text-[9px] uppercase tracking-widest text-stone-600 font-bold group-hover:text-stone-400",children:"  "}),o&&a.jsx("button",{onClick:L=>{L.stopPropagation(),ye(K.id)},className:"text-stone-800 hover:text-red-500 p-1 transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},K.id))]})]})},px=({onConnect:s,onDisconnect:t,onClose:r,isConnected:o})=>a.jsx("div",{className:"fixed inset-0 z-[120] bg-black/95 backdrop-blur-md flex items-center justify-center p-6",onClick:r,children:a.jsxs("div",{className:"bg-[#0a0a0a] border border-emerald-900/50 w-full max-w-lg rounded-3xl p-8 space-y-8 shadow-[0_0_80px_rgba(16,185,129,0.05)]",onClick:c=>c.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-serif text-emerald-500 italic",children:" "}),a.jsx("p",{className:"text-stone-500 text-[10px] uppercase tracking-widest mt-2",children:"  "})]}),a.jsx("button",{onClick:r,className:"text-stone-600 hover:text-stone-300 transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o?a.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"p-6 rounded-2xl border bg-emerald-950/20 border-emerald-500/30",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse bg-emerald-500"}),a.jsx("span",{className:"text-sm font-bold uppercase tracking-widest text-emerald-400",children:" "})]}),a.jsx("div",{className:"space-y-2",children:a.jsx("p",{className:"text-[10px] text-stone-600 mt-2 leading-relaxed",children:"     .  ,     ,    ."})})]}),a.jsx("button",{onClick:t,className:"w-full py-4 rounded-xl border border-red-900/30 text-red-500/70 hover:bg-red-950/20 hover:text-red-500 hover:border-red-900/60 transition-all text-[10px] uppercase font-bold tracking-[0.2em]",children:" "})]}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-stone-900/30 border border-stone-800 rounded-2xl p-6 text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-stone-900 rounded-full flex items-center justify-center mx-auto text-stone-600",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsx("p",{className:"text-stone-400 text-sm leading-relaxed",children:"  ,           ."})]}),a.jsx("button",{onClick:s,className:"w-full py-5 bg-emerald-900/20 hover:bg-emerald-900/30 border border-emerald-900/50 hover:border-emerald-500/50 text-emerald-500 rounded-xl text-[11px] uppercase font-bold tracking-[0.25em] transition-all shadow-lg shadow-emerald-900/10",children:""}),a.jsx("p",{className:"text-[9px] text-stone-600 text-center border-t border-stone-900 pt-4",children:":          ."})]})]})}),_f=["","","","","","",""],wf=["","NPC","","",""],ac=[{id:"1",name:" ",age:34,height:"182 ",imageUrl:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=800&auto=format&fit=crop",tags:["","",""],hiddenTags:[""],connections:[{id:"2",name:"  ",role:""}],additionalInfo:"      ,     . ,         ,         .     ,    ."},{id:"2",name:"  ",age:21,height:"168 ",imageUrl:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=800&auto=format&fit=crop",tags:["",""],hiddenTags:["",""],connections:[{id:"1",name:" ",role:"  "}],additionalInfo:"   ,          .         .    ,        ."},{id:"3",name:"",age:"124 ",height:"195 ",imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=800&auto=format&fit=crop",tags:["",""],hiddenTags:["NPC"],connections:[{id:"1",name:" ",role:" "}],additionalInfo:"  ,       .         .      ."}],mx=()=>{};var bf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(s,t){if(!s)throw ds(t)},ds=function(s){return new Error("Firebase Database ("+bp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=function(s){const t=[];let r=0;for(let o=0;o<s.length;o++){let c=s.charCodeAt(o);c<128?t[r++]=c:c<2048?(t[r++]=c>>6|192,t[r++]=c&63|128):(c&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(c=65536+((c&1023)<<10)+(s.charCodeAt(++o)&1023),t[r++]=c>>18|240,t[r++]=c>>12&63|128,t[r++]=c>>6&63|128,t[r++]=c&63|128):(t[r++]=c>>12|224,t[r++]=c>>6&63|128,t[r++]=c&63|128)}return t},gx=function(s){const t=[];let r=0,o=0;for(;r<s.length;){const c=s[r++];if(c<128)t[o++]=String.fromCharCode(c);else if(c>191&&c<224){const d=s[r++];t[o++]=String.fromCharCode((c&31)<<6|d&63)}else if(c>239&&c<365){const d=s[r++],f=s[r++],p=s[r++],g=((c&7)<<18|(d&63)<<12|(f&63)<<6|p&63)-65536;t[o++]=String.fromCharCode(55296+(g>>10)),t[o++]=String.fromCharCode(56320+(g&1023))}else{const d=s[r++],f=s[r++];t[o++]=String.fromCharCode((c&15)<<12|(d&63)<<6|f&63)}}return t.join("")},$c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let c=0;c<s.length;c+=3){const d=s[c],f=c+1<s.length,p=f?s[c+1]:0,g=c+2<s.length,x=g?s[c+2]:0,w=d>>2,v=(d&3)<<4|p>>4;let y=(p&15)<<2|x>>6,E=x&63;g||(E=64,f||(y=64)),o.push(r[w],r[v],r[y],r[E])}return o.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Np(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):gx(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let c=0;c<s.length;){const d=r[s.charAt(c++)],p=c<s.length?r[s.charAt(c)]:0;++c;const x=c<s.length?r[s.charAt(c)]:64;++c;const v=c<s.length?r[s.charAt(c)]:64;if(++c,d==null||p==null||x==null||v==null)throw new xx;const y=d<<2|p>>4;if(o.push(y),x!==64){const E=p<<4&240|x>>2;if(o.push(E),v!==64){const O=x<<6&192|v;o.push(O)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class xx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kp=function(s){const t=Np(s);return $c.encodeByteArray(t,!0)},Uo=function(s){return kp(s).replace(/\./g,"")},_c=function(s){try{return $c.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(s){return Cp(void 0,s)}function Cp(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!yx(r)||(s[r]=Cp(s[r],t[r]));return s}function yx(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=()=>_x().__FIREBASE_DEFAULTS__,bx=()=>{if(typeof process>"u"||typeof bf>"u")return;const s=bf.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Nx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&_c(s[1]);return t&&JSON.parse(t)},Sp=()=>{try{return mx()||wx()||bx()||Nx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},kx=s=>{var t,r;return(r=(t=Sp())==null?void 0:t.emulatorHosts)==null?void 0:r[s]},Cx=s=>{const t=kx(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),o]:[t.substring(0,r),o]},jp=()=>{var s;return(s=Sp())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sx(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},o=t||"demo-project",c=s.iat||0,d=s.sub||s.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${o}`,aud:o,iat:c,exp:c+3600,auth_time:c,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Uo(JSON.stringify(r)),Uo(JSON.stringify(f)),""].join(".")}const si={};function Ex(){const s={prod:[],emulator:[]};for(const t of Object.keys(si))si[t]?s.emulator.push(t):s.prod.push(t);return s}function Ix(s){let t=document.getElementById(s),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),r=!0),{created:r,element:t}}let Nf=!1;function Tx(s,t){if(typeof window>"u"||typeof document>"u"||!Uc(window.location.host)||si[s]===t||si[s]||Nf)return;si[s]=t;function r(y){return`__firebase__banner__${y}`}const o="__firebase__banner",d=Ex().prod.length>0;function f(){const y=document.getElementById(o);y&&y.remove()}function p(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function g(y,E){y.setAttribute("width","24"),y.setAttribute("id",E),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function x(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Nf=!0,f()},y}function w(y,E){y.setAttribute("id",E),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=Ix(o),E=r("text"),O=document.getElementById(E)||document.createElement("span"),B=r("learnmore"),Z=document.getElementById(B)||document.createElement("a"),ce=r("preprendIcon"),ee=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const ye=y.element;p(ye),w(Z,B);const oe=x();g(ee,ce),ye.append(ee,O,Z,oe),document.body.appendChild(ye)}d?(O.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ep(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rx())}function Px(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lx(){return bp.NODE_ADMIN===!0}function Mx(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((s,t)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(o);c.onsuccess=()=>{c.result.close(),r||self.indexedDB.deleteDatabase(o),s(!0)},c.onupgradeneeded=()=>{r=!1},c.onerror=()=>{var d;t(((d=c.error)==null?void 0:d.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="FirebaseError";class yi extends Error{constructor(t,r,o){super(r),this.code=t,this.customData=o,this.name=Ox,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ip.prototype.create)}}class Ip{constructor(t,r,o){this.service=t,this.serviceName=r,this.errors=o}create(t,...r){const o=r[0]||{},c=`${this.service}/${t}`,d=this.errors[t],f=d?Ax(d,o):"Error",p=`${this.serviceName}: ${f} (${c}).`;return new yi(c,p,o)}}function Ax(s,t){return s.replace(Fx,(r,o)=>{const c=t[o];return c!=null?String(c):`<${o}?>`})}const Fx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(s){return JSON.parse(s)}function bt(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=function(s){let t={},r={},o={},c="";try{const d=s.split(".");t=ui(_c(d[0])||""),r=ui(_c(d[1])||""),c=d[2],o=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:o,signature:c}},zx=function(s){const t=Tp(s),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},$x=function(s){const t=Tp(s).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function ls(s,t){if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}function kf(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Wo(s,t,r){const o={};for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=t.call(r,s[c],c,s));return o}function Bo(s,t){if(s===t)return!0;const r=Object.keys(s),o=Object.keys(t);for(const c of r){if(!o.includes(c))return!1;const d=s[c],f=t[c];if(Cf(d)&&Cf(f)){if(!Bo(d,f))return!1}else if(d!==f)return!1}for(const c of o)if(!r.includes(c))return!1;return!0}function Cf(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(s){const t=[];for(const[r,o]of Object.entries(s))Array.isArray(o)?o.forEach(c=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(c))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const o=this.W_;if(typeof t=="string")for(let v=0;v<16;v++)o[v]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let v=0;v<16;v++)o[v]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let v=16;v<80;v++){const y=o[v-3]^o[v-8]^o[v-14]^o[v-16];o[v]=(y<<1|y>>>31)&4294967295}let c=this.chain_[0],d=this.chain_[1],f=this.chain_[2],p=this.chain_[3],g=this.chain_[4],x,w;for(let v=0;v<80;v++){v<40?v<20?(x=p^d&(f^p),w=1518500249):(x=d^f^p,w=1859775393):v<60?(x=d&f|p&(d|f),w=2400959708):(x=d^f^p,w=3395469782);const y=(c<<5|c>>>27)+x+g+w+o[v]&4294967295;g=p,p=f,f=(d<<30|d>>>2)&4294967295,d=c,c=y}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+d&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const o=r-this.blockSize;let c=0;const d=this.buf_;let f=this.inbuf_;for(;c<r;){if(f===0)for(;c<=o;)this.compress_(t,c),c+=this.blockSize;if(typeof t=="string"){for(;c<r;)if(d[f]=t.charCodeAt(c),++f,++c,f===this.blockSize){this.compress_(d),f=0;break}}else for(;c<r;)if(d[f]=t[c],++f,++c,f===this.blockSize){this.compress_(d),f=0;break}}this.inbuf_=f,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let c=this.blockSize-1;c>=56;c--)this.buf_[c]=r&255,r/=256;this.compress_(this.buf_);let o=0;for(let c=0;c<5;c++)for(let d=24;d>=0;d-=8)t[o]=this.chain_[c]>>d&255,++o;return t}}function Wc(s,t){return`${s} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=function(s){const t=[];let r=0;for(let o=0;o<s.length;o++){let c=s.charCodeAt(o);if(c>=55296&&c<=56319){const d=c-55296;o++,X(o<s.length,"Surrogate pair missing trail surrogate.");const f=s.charCodeAt(o)-56320;c=65536+(d<<10)+f}c<128?t[r++]=c:c<2048?(t[r++]=c>>6|192,t[r++]=c&63|128):c<65536?(t[r++]=c>>12|224,t[r++]=c>>6&63|128,t[r++]=c&63|128):(t[r++]=c>>18|240,t[r++]=c>>12&63|128,t[r++]=c>>6&63|128,t[r++]=c&63|128)}return t},ol=function(s){let t=0;for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(s){return s&&s._delegate?s._delegate:s}class di{constructor(t,r,o){this.name=t,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const o=new il;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:r});c&&o.resolve(c)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Yx(t))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[r,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);try{const d=this.getOrInitializeService({instanceIdentifier:c});o.resolve(d)}catch{}}}}clearInstance(t=br){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=br){return this.instances.has(t)}getOptions(t=br){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:o,options:r});for(const[d,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);o===p&&f.resolve(c)}return c}onInit(t,r){const o=this.normalizeInstanceIdentifier(r),c=this.onInitCallbacks.get(o)??new Set;c.add(t),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&t(d,o),()=>{c.delete(t)}}invokeOnInitCallbacks(t,r){const o=this.onInitCallbacks.get(r);if(o)for(const c of o)try{c(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Vx(t),options:r}),this.instances.set(t,o),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=br){return this.component?this.component.multipleInstances?t:br:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vx(s){return s===br?void 0:s}function Yx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Hx(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Je||(Je={}));const Gx={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},Xx=Je.INFO,qx={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},Kx=(s,t,...r)=>{if(t<s.logLevel)return;const o=new Date().toISOString(),c=qx[t];if(c)console[c](`[${o}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Rp{constructor(t){this.name=t,this._logLevel=Xx,this._logHandler=Kx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Je))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Gx[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...t),this._logHandler(this,Je.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...t),this._logHandler(this,Je.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...t),this._logHandler(this,Je.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...t),this._logHandler(this,Je.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...t),this._logHandler(this,Je.ERROR,...t)}}const Jx=(s,t)=>t.some(r=>s instanceof r);let Sf,jf;function Zx(){return Sf||(Sf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ev(){return jf||(jf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pp=new WeakMap,wc=new WeakMap,Lp=new WeakMap,cc=new WeakMap,Bc=new WeakMap;function tv(s){const t=new Promise((r,o)=>{const c=()=>{s.removeEventListener("success",d),s.removeEventListener("error",f)},d=()=>{r(er(s.result)),c()},f=()=>{o(s.error),c()};s.addEventListener("success",d),s.addEventListener("error",f)});return t.then(r=>{r instanceof IDBCursor&&Pp.set(r,s)}).catch(()=>{}),Bc.set(t,s),t}function nv(s){if(wc.has(s))return;const t=new Promise((r,o)=>{const c=()=>{s.removeEventListener("complete",d),s.removeEventListener("error",f),s.removeEventListener("abort",f)},d=()=>{r(),c()},f=()=>{o(s.error||new DOMException("AbortError","AbortError")),c()};s.addEventListener("complete",d),s.addEventListener("error",f),s.addEventListener("abort",f)});wc.set(s,t)}let bc={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return wc.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Lp.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return er(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function rv(s){bc=s(bc)}function sv(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const o=s.call(uc(this),t,...r);return Lp.set(o,t.sort?t.sort():[t]),er(o)}:ev().includes(s)?function(...t){return s.apply(uc(this),t),er(Pp.get(this))}:function(...t){return er(s.apply(uc(this),t))}}function iv(s){return typeof s=="function"?sv(s):(s instanceof IDBTransaction&&nv(s),Jx(s,Zx())?new Proxy(s,bc):s)}function er(s){if(s instanceof IDBRequest)return tv(s);if(cc.has(s))return cc.get(s);const t=iv(s);return t!==s&&(cc.set(s,t),Bc.set(t,s)),t}const uc=s=>Bc.get(s);function ov(s,t,{blocked:r,upgrade:o,blocking:c,terminated:d}={}){const f=indexedDB.open(s,t),p=er(f);return o&&f.addEventListener("upgradeneeded",g=>{o(er(f.result),g.oldVersion,g.newVersion,er(f.transaction),g)}),r&&f.addEventListener("blocked",g=>r(g.oldVersion,g.newVersion,g)),p.then(g=>{d&&g.addEventListener("close",()=>d()),c&&g.addEventListener("versionchange",x=>c(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const lv=["get","getKey","getAll","getAllKeys","count"],av=["put","add","delete","clear"],dc=new Map;function Ef(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(dc.get(t))return dc.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,c=av.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(c||lv.includes(r)))return;const d=async function(f,...p){const g=this.transaction(f,c?"readwrite":"readonly");let x=g.store;return o&&(x=x.index(p.shift())),(await Promise.all([x[r](...p),c&&g.done]))[0]};return dc.set(t,d),d}rv(s=>({...s,get:(t,r,o)=>Ef(t,r)||s.get(t,r,o),has:(t,r)=>!!Ef(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(uv(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function uv(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Nc="@firebase/app",If="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new Rp("@firebase/app"),dv="@firebase/app-compat",hv="@firebase/analytics-compat",fv="@firebase/analytics",pv="@firebase/app-check-compat",mv="@firebase/app-check",gv="@firebase/auth",xv="@firebase/auth-compat",vv="@firebase/database",yv="@firebase/data-connect",_v="@firebase/database-compat",wv="@firebase/functions",bv="@firebase/functions-compat",Nv="@firebase/installations",kv="@firebase/installations-compat",Cv="@firebase/messaging",Sv="@firebase/messaging-compat",jv="@firebase/performance",Ev="@firebase/performance-compat",Iv="@firebase/remote-config",Tv="@firebase/remote-config-compat",Rv="@firebase/storage",Pv="@firebase/storage-compat",Lv="@firebase/firestore",Mv="@firebase/ai",Dv="@firebase/firestore-compat",Ov="firebase",Av="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]",Fv={[Nc]:"fire-core",[dv]:"fire-core-compat",[fv]:"fire-analytics",[hv]:"fire-analytics-compat",[mv]:"fire-app-check",[pv]:"fire-app-check-compat",[gv]:"fire-auth",[xv]:"fire-auth-compat",[vv]:"fire-rtdb",[yv]:"fire-data-connect",[_v]:"fire-rtdb-compat",[wv]:"fire-fn",[bv]:"fire-fn-compat",[Nv]:"fire-iid",[kv]:"fire-iid-compat",[Cv]:"fire-fcm",[Sv]:"fire-fcm-compat",[jv]:"fire-perf",[Ev]:"fire-perf-compat",[Iv]:"fire-rc",[Tv]:"fire-rc-compat",[Rv]:"fire-gcs",[Pv]:"fire-gcs-compat",[Lv]:"fire-fst",[Dv]:"fire-fst-compat",[Mv]:"fire-vertex","fire-js":"fire-js",[Ov]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Map,zv=new Map,Cc=new Map;function Tf(s,t){try{s.container.addComponent(t)}catch(r){Rn.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function Vo(s){const t=s.name;if(Cc.has(t))return Rn.debug(`There were multiple attempts to register component ${t}.`),!1;Cc.set(t,s);for(const r of Ho.values())Tf(r,s);for(const r of zv.values())Tf(r,s);return!0}function $v(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function Uv(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Ip("app","Firebase",Wv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,r,o){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=Av;function Mp(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const o={name:kc,automaticDataCollectionEnabled:!0,...t},c=o.name;if(typeof c!="string"||!c)throw tr.create("bad-app-name",{appName:String(c)});if(r||(r=jp()),!r)throw tr.create("no-options");const d=Ho.get(c);if(d){if(Bo(r,d.options)&&Bo(o,d.config))return d;throw tr.create("duplicate-app",{appName:c})}const f=new Qx(c);for(const g of Cc.values())f.addComponent(g);const p=new Bv(r,o,f);return Ho.set(c,p),p}function Vv(s=kc){const t=Ho.get(s);if(!t&&s===kc&&jp())return Mp();if(!t)throw tr.create("no-app",{appName:s});return t}function rs(s,t,r){let o=Fv[s]??s;r&&(o+=`-${r}`);const c=o.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const f=[`Unable to register library "${o}" with version "${t}":`];c&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&f.push("and"),d&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Rn.warn(f.join(" "));return}Vo(new di(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="firebase-heartbeat-database",Qv=1,hi="firebase-heartbeat-store";let hc=null;function Dp(){return hc||(hc=ov(Yv,Qv,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(hi)}catch(r){console.warn(r)}}}}).catch(s=>{throw tr.create("idb-open",{originalErrorMessage:s.message})})),hc}async function Gv(s){try{const r=(await Dp()).transaction(hi),o=await r.objectStore(hi).get(Op(s));return await r.done,o}catch(t){if(t instanceof yi)Rn.warn(t.message);else{const r=tr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Rn.warn(r.message)}}}async function Rf(s,t){try{const o=(await Dp()).transaction(hi,"readwrite");await o.objectStore(hi).put(t,Op(s)),await o.done}catch(r){if(r instanceof yi)Rn.warn(r.message);else{const o=tr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Rn.warn(o.message)}}}function Op(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=1024,qv=30;class Kv{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Zv(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,r;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Pf();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(f=>f.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:c}),this._heartbeatsCache.heartbeats.length>qv){const f=ey(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Rn.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Pf(),{heartbeatsToSend:o,unsentEntries:c}=Jv(this._heartbeatsCache.heartbeats),d=Uo(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(r){return Rn.warn(r),""}}}function Pf(){return new Date().toISOString().substring(0,10)}function Jv(s,t=Xv){const r=[];let o=s.slice();for(const c of s){const d=r.find(f=>f.agent===c.agent);if(d){if(d.dates.push(c.date),Lf(r)>t){d.dates.pop();break}}else if(r.push({agent:c.agent,dates:[c.date]}),Lf(r)>t){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class Zv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mx()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Gv(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return Rf(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return Rf(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Lf(s){return Uo(JSON.stringify({version:2,heartbeats:s})).length}function ey(s){if(s.length===0)return-1;let t=0,r=s[0].date;for(let o=1;o<s.length;o++)s[o].date<r&&(r=s[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(s){Vo(new di("platform-logger",t=>new cv(t),"PRIVATE")),Vo(new di("heartbeat",t=>new Kv(t),"PRIVATE")),rs(Nc,If,s),rs(Nc,If,"esm2020"),rs("fire-js","")}ty("");var ny="firebase",ry="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(ny,ry,"app");var Mf={};const Df="@firebase/database",Of="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ap="";function sy(s){Ap=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),bt(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:ui(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return Mn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const t=window[s];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new iy(t)}}catch{}return new oy},kr=Fp("localStorage"),ly=Fp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new Rp("@firebase/database"),ay=(function(){let s=1;return function(){return s++}})(),zp=function(s){const t=Bx(s),r=new Wx;r.update(t);const o=r.digest();return $c.encodeByteArray(o)},wi=function(...s){let t="";for(let r=0;r<s.length;r++){const o=s[r];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?t+=wi.apply(null,o):typeof o=="object"?t+=bt(o):t+=o,t+=" "}return t};let ii=null,Af=!0;const cy=function(s,t){X(!0,"Can't turn on custom loggers persistently."),ss.logLevel=Je.VERBOSE,ii=ss.log.bind(ss)},Rt=function(...s){if(Af===!0&&(Af=!1,ii===null&&ly.get("logging_enabled")===!0&&cy()),ii){const t=wi.apply(null,s);ii(t)}},bi=function(s){return function(...t){Rt(s,...t)}},Sc=function(...s){const t="FIREBASE INTERNAL ERROR: "+wi(...s);ss.error(t)},Pn=function(...s){const t=`FIREBASE FATAL ERROR: ${wi(...s)}`;throw ss.error(t),new Error(t)},Bt=function(...s){const t="FIREBASE WARNING: "+wi(...s);ss.warn(t)},uy=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Bt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$p=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},dy=function(s){if(document.readyState==="complete")s();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},as="[MIN_NAME]",Sr="[MAX_NAME]",hs=function(s,t){if(s===t)return 0;if(s===as||t===Sr)return-1;if(t===as||s===Sr)return 1;{const r=Ff(s),o=Ff(t);return r!==null?o!==null?r-o===0?s.length-t.length:r-o:-1:o!==null?1:s<t?-1:1}},hy=function(s,t){return s===t?0:s<t?-1:1},Zs=function(s,t){if(t&&s in t)return t[s];throw new Error("Missing required key ("+s+") in object: "+bt(t))},Hc=function(s){if(typeof s!="object"||s===null)return bt(s);const t=[];for(const o in s)t.push(o);t.sort();let r="{";for(let o=0;o<t.length;o++)o!==0&&(r+=","),r+=bt(t[o]),r+=":",r+=Hc(s[t[o]]);return r+="}",r},Up=function(s,t){const r=s.length;if(r<=t)return[s];const o=[];for(let c=0;c<r;c+=t)c+t>r?o.push(s.substring(c,r)):o.push(s.substring(c,c+t));return o};function Ht(s,t){for(const r in s)s.hasOwnProperty(r)&&t(r,s[r])}const Wp=function(s){X(!$p(s),"Invalid JSON number");const t=11,r=52,o=(1<<t-1)-1;let c,d,f,p,g;s===0?(d=0,f=0,c=1/s===-1/0?1:0):(c=s<0,s=Math.abs(s),s>=Math.pow(2,1-o)?(p=Math.min(Math.floor(Math.log(s)/Math.LN2),o),d=p+o,f=Math.round(s*Math.pow(2,r-p)-Math.pow(2,r))):(d=0,f=Math.round(s/Math.pow(2,1-o-r))));const x=[];for(g=r;g;g-=1)x.push(f%2?1:0),f=Math.floor(f/2);for(g=t;g;g-=1)x.push(d%2?1:0),d=Math.floor(d/2);x.push(c?1:0),x.reverse();const w=x.join("");let v="";for(g=0;g<64;g+=8){let y=parseInt(w.substr(g,8),2).toString(16);y.length===1&&(y="0"+y),v=v+y}return v.toLowerCase()},fy=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},py=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function my(s,t){let r="Unknown Error";s==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?r="Client doesn't have permission to access the desired data.":s==="unavailable"&&(r="The service is unavailable");const o=new Error(s+" at "+t._path.toString()+": "+r);return o.code=s.toUpperCase(),o}const gy=new RegExp("^-?(0*)\\d{1,10}$"),xy=-2147483648,vy=2147483647,Ff=function(s){if(gy.test(s)){const t=Number(s);if(t>=xy&&t<=vy)return t}return null},fs=function(s){try{s()}catch(t){setTimeout(()=>{const r=t.stack||"";throw Bt("Exception was thrown by user callback.",r),t},Math.floor(0))}},yy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},oi=function(s,t){const r=setTimeout(s,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t,r){this.appCheckProvider=r,this.appName=t.name,Uv(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((r,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)==null||r.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){Bt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,r,o){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(c=>this.auth_=c)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(Rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bt(t)}}class zo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}zo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc="5",Bp="v",Hp="s",Vp="r",Yp="f",Qp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gp="ls",Xp="p",jc="ac",qp="websocket",Kp="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,r,o,c,d=!1,f="",p=!1,g=!1,x=null){this.secure=r,this.namespace=o,this.webSocketOnly=c,this.nodeAdmin=d,this.persistenceKey=f,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=g,this.emulatorOptions=x,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&kr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function by(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function Zp(s,t,r){X(typeof t=="string","typeof type must == string"),X(typeof r=="object","typeof params must == object");let o;if(t===qp)o=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(t===Kp)o=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);by(s)&&(r.ns=s.namespace);const c=[];return Ht(r,(d,f)=>{c.push(d+"="+f)}),o+c.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.counters_={}}incrementCounter(t,r=1){Mn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return vx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc={},pc={};function Yc(s){const t=s.toString();return fc[t]||(fc[t]=new Ny),fc[t]}function ky(s,t){const r=s.toString();return pc[r]||(pc[r]=t()),pc[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let c=0;c<o.length;++c)o[c]&&fs(()=>{this.onMessage_(o[c])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="start",Sy="close",jy="pLPCommand",Ey="pRTLPCB",em="id",tm="pw",nm="ser",Iy="cb",Ty="seg",Ry="ts",Py="d",Ly="dframe",rm=1870,sm=30,My=rm-sm,Dy=25e3,Oy=3e4;class ns{constructor(t,r,o,c,d,f,p){this.connId=t,this.repoInfo=r,this.applicationId=o,this.appCheckToken=c,this.authToken=d,this.transportSessionId=f,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bi(t),this.stats_=Yc(r),this.urlFn=g=>(this.appCheckToken&&(g[jc]=this.appCheckToken),Zp(r,Kp,g))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Cy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Oy)),dy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qc((...d)=>{const[f,p,g,x,w]=d;if(this.incrementIncomingBytes_(d),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===zf)this.id=p,this.password=g;else if(f===Sy)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...d)=>{const[f,p]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(f,p)},()=>{this.onClosed_()},this.urlFn);const o={};o[zf]="t",o[nm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[Iy]=this.scriptTagHolder.uniqueCallbackIdentifier),o[Bp]=Vc,this.transportSessionId&&(o[Hp]=this.transportSessionId),this.lastSessionId&&(o[Gp]=this.lastSessionId),this.applicationId&&(o[Xp]=this.applicationId),this.appCheckToken&&(o[jc]=this.appCheckToken),typeof location<"u"&&location.hostname&&Qp.test(location.hostname)&&(o[Vp]=Yp);const c=this.urlFn(o);this.log_("Connecting via long-poll to "+c),this.scriptTagHolder.addTag(c,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ns.forceAllow_=!0}static forceDisallow(){ns.forceDisallow_=!0}static isAvailable(){return ns.forceAllow_?!0:!ns.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!fy()&&!py()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=bt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=kp(r),c=Up(o,My);for(let d=0;d<c.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,c.length,c[d]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const o={};o[Ly]="t",o[em]=t,o[tm]=r,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=bt(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class Qc{constructor(t,r,o,c){this.onDisconnect=o,this.urlFn=c,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ay(),window[jy+this.uniqueCallbackIdentifier]=t,window[Ey+this.uniqueCallbackIdentifier]=r,this.myIFrame=Qc.createIFrame_();let d="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(d='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(p){Rt("frame writing exception"),p.stack&&Rt(p.stack),Rt(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Rt("No IE domain setting required")}catch{const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[em]=this.myID,t[tm]=this.myPW,t[nm]=this.currentSerial;let r=this.urlFn(t),o="",c=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+sm+o.length<=rm;){const f=this.pendingSegs.shift();o=o+"&"+Ty+c+"="+f.seg+"&"+Ry+c+"="+f.ts+"&"+Py+c+"="+f.d,c++}return r=r+o,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,o){this.pendingSegs.push({seg:t,ts:r,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const o=()=>{this.outstandingRequests.delete(r),this.newRequest_()},c=setTimeout(o,Math.floor(Dy)),d=()=>{clearTimeout(c),o()};this.addTag(t,d)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const c=o.readyState;(!c||c==="loaded"||c==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=()=>{Rt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=16384,Fy=45e3;let Yo=null;typeof MozWebSocket<"u"?Yo=MozWebSocket:typeof WebSocket<"u"&&(Yo=WebSocket);class dn{constructor(t,r,o,c,d,f,p){this.connId=t,this.applicationId=o,this.appCheckToken=c,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bi(this.connId),this.stats_=Yc(r),this.connURL=dn.connectionURL_(r,f,p,c,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,c,d){const f={};return f[Bp]=Vc,typeof location<"u"&&location.hostname&&Qp.test(location.hostname)&&(f[Vp]=Yp),r&&(f[Hp]=r),o&&(f[Gp]=o),c&&(f[jc]=c),d&&(f[Xp]=d),Zp(t,qp,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kr.set("previous_websocket_failure",!0);try{let o;Lx(),this.mySock=new Yo(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){dn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(r);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&Yo!==null&&!dn.forceDisallow_}static previouslyFailed(){return kr.isInMemoryStorage||kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){kr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=ui(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(X(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);o!==null&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=bt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Up(r,Ay);o.length>1&&this.sendString_(String(o.length));for(let c=0;c<o.length;c++)this.sendString_(o[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Fy))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dn.responsesRequiredToBeHealthy=2;dn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{static get ALL_TRANSPORTS(){return[ns,dn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=dn&&dn.isAvailable();let o=r&&!dn.previouslyFailed();if(t.webSocketOnly&&(r||Bt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[dn];else{const c=this.transports_=[];for(const d of fi.ALL_TRANSPORTS)d&&d.isAvailable()&&c.push(d);fi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=6e4,$y=5e3,Uy=10*1024,Wy=100*1024,mc="t",$f="d",By="s",Uf="r",Hy="e",Wf="o",Bf="a",Hf="n",Vf="p",Vy="h";class Yy{constructor(t,r,o,c,d,f,p,g,x,w){this.id=t,this.repoInfo_=r,this.applicationId_=o,this.appCheckToken_=c,this.authToken_=d,this.onMessage_=f,this.onReady_=p,this.onDisconnect_=g,this.onKill_=x,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bi("c:"+this.id+":"),this.transportManager_=new fi(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,o)},Math.floor(0));const c=t.healthyTimeout||0;c>0&&(this.healthyTimeout_=oi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Wy?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Uy?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(c)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(mc in t){const r=t[mc];r===Bf?this.upgradeIfSecondaryHealthy_():r===Uf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Wf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=Zs("t",t),o=Zs("d",t);if(r==="c")this.onSecondaryControl_(o);else if(r==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Vf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Bf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Hf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=Zs("t",t),o=Zs("d",t);r==="c"?this.onControl_(o):r==="d"&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=Zs(mc,t);if($f in t){const o=t[$f];if(r===Vy){const c={...o};this.repoInfo_.isUsingEmulator&&(c.h=this.repoInfo_.host),this.onHandshake_(c)}else if(r===Hf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let c=0;c<this.pendingDataMessages.length;++c)this.onDataMessage_(this.pendingDataMessages[c]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===By?this.onConnectionShutdown_(o):r===Uf?this.onReset_(o):r===Hy?Sc("Server Error: "+o):r===Wf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Sc("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,o=t.v,c=t.h;this.sessionId=t.s,this.repoInfo_.host=c,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),Vc!==o&&Bt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),oi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zy))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor($y))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Vf,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{put(t,r,o,c){}merge(t,r,o,c){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,o){}onDisconnectMerge(t,r,o){}onDisconnectCancel(t,r){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t){this.allowedEvents_=t,this.listeners_={},X(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let c=0;c<o.length;c++)o[c].callback.apply(o[c].context,r)}}on(t,r,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:o});const c=this.getInitialEvent(t);c&&r.apply(o,c)}off(t,r,o){this.validateEventType_(t);const c=this.listeners_[t]||[];for(let d=0;d<c.length;d++)if(c[d].callback===r&&(!o||o===c[d].context)){c.splice(d,1);return}}validateEventType_(t){X(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends om{static getInstance(){return new Qo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ep()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return X(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=32,Qf=768;class qe{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let o=0;for(let c=0;c<this.pieces_.length;c++)this.pieces_[c].length>0&&(this.pieces_[o]=this.pieces_[c],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}}function Ye(){return new qe("")}function De(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function rr(s){return s.pieces_.length-s.pieceNum_}function Ze(s){let t=s.pieceNum_;return t<s.pieces_.length&&t++,new qe(s.pieces_,t)}function lm(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function Qy(s){let t="";for(let r=s.pieceNum_;r<s.pieces_.length;r++)s.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(s.pieces_[r])));return t||"/"}function am(s,t=0){return s.pieces_.slice(s.pieceNum_+t)}function cm(s){if(s.pieceNum_>=s.pieces_.length)return null;const t=[];for(let r=s.pieceNum_;r<s.pieces_.length-1;r++)t.push(s.pieces_[r]);return new qe(t,0)}function gt(s,t){const r=[];for(let o=s.pieceNum_;o<s.pieces_.length;o++)r.push(s.pieces_[o]);if(t instanceof qe)for(let o=t.pieceNum_;o<t.pieces_.length;o++)r.push(t.pieces_[o]);else{const o=t.split("/");for(let c=0;c<o.length;c++)o[c].length>0&&r.push(o[c])}return new qe(r,0)}function Fe(s){return s.pieceNum_>=s.pieces_.length}function Ut(s,t){const r=De(s),o=De(t);if(r===null)return t;if(r===o)return Ut(Ze(s),Ze(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+s+")")}function Gc(s,t){if(rr(s)!==rr(t))return!1;for(let r=s.pieceNum_,o=t.pieceNum_;r<=s.pieces_.length;r++,o++)if(s.pieces_[r]!==t.pieces_[o])return!1;return!0}function hn(s,t){let r=s.pieceNum_,o=t.pieceNum_;if(rr(s)>rr(t))return!1;for(;r<s.pieces_.length;){if(s.pieces_[r]!==t.pieces_[o])return!1;++r,++o}return!0}class Gy{constructor(t,r){this.errorPrefix_=r,this.parts_=am(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=ol(this.parts_[o]);um(this)}}function Xy(s,t){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=ol(t),um(s)}function qy(s){const t=s.parts_.pop();s.byteLength_-=ol(t),s.parts_.length>0&&(s.byteLength_-=1)}function um(s){if(s.byteLength_>Qf)throw new Error(s.errorPrefix_+"has a key path longer than "+Qf+" bytes ("+s.byteLength_+").");if(s.parts_.length>Yf)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Yf+") or object contains a cycle "+Nr(s))}function Nr(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends om{static getInstance(){return new Xc}constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(t){return X(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=1e3,Ky=300*1e3,Gf=30*1e3,Jy=1.3,Zy=3e4,e_="server_kill",Xf=3;class Tn extends im{constructor(t,r,o,c,d,f,p,g){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=c,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=p,this.authOverride_=g,this.id=Tn.nextPersistentConnectionId_++,this.log_=bi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ei,this.maxReconnectDelay_=Ky,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xc.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Qo.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const c=++this.requestNumber_,d={r:c,a:t,b:r};this.log_(bt(d)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[c]=o)}get(t){this.initConnection_();const r=new il,c={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const p=f.d;f.s==="ok"?r.resolve(p):r.reject(p)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(d),r.promise}listen(t,r,o,c){this.initConnection_();const d=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),X(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const p={onComplete:c,hashFn:r,query:t,tag:o};this.listens.get(f).set(d,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+o+" for "+c);const d={p:o},f="q";t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest(f,d,p=>{const g=p.d,x=p.s;Tn.warnOnListenWarnings_(g,r),(this.listens.get(o)&&this.listens.get(o).get(c))===t&&(this.log_("listen response",p),x!=="ok"&&this.removeListen_(o,c),t.onComplete&&t.onComplete(x,g))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Mn(t,"w")){const o=ls(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const c='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Bt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||$x(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Gf)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=zx(t)?"auth":"gauth",o={cred:t};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(r,o,c=>{const d=c.s,f=c.d||"error";this.authToken_===t&&(d==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),c=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+c),X(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,c)&&this.connected_&&this.sendUnlisten_(o,c,t._queryObject,r)}sendUnlisten_(t,r,o,c){this.log_("Unlisten on "+t+" for "+r);const d={p:t},f="n";c&&(d.q=o,d.t=c),this.sendRequest(f,d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,c){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,f=>{c&&setTimeout(()=>{c(f.s,f.d)},Math.floor(0))})}put(t,r,o,c){this.putInternal("p",t,r,o,c)}merge(t,r,o,c){this.putInternal("m",t,r,o,c)}putInternal(t,r,o,c,d){this.initConnection_();const f={p:r,d:o};d!==void 0&&(f.h=d),this.outstandingPuts_.push({action:t,request:f,onComplete:c}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,c=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),c&&c(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{if(o.s!=="ok"){const d=o.d;this.log_("reportStats","Error sending stats: "+d)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+bt(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Sc("Unrecognized action received from server: "+bt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Zy&&(this.reconnectDelay_=ei),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Jy)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+Tn.nextConnectionId_++,d=this.lastSessionId;let f=!1,p=null;const g=function(){p?p.close():(f=!0,o())},x=function(v){X(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(v)};this.realtime_={close:g,sendRequest:x};const w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,y]=await Promise.all([this.authTokenProvider_.getToken(w),this.appCheckTokenProvider_.getToken(w)]);f?Rt("getToken() completed but was canceled"):(Rt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,p=new Yy(c,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,o,E=>{Bt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(e_)},d))}catch(v){this.log_("Failed to get token: "+v),f||(this.repoInfo_.nodeAdmin&&Bt(v),g())}}}interrupt(t){Rt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Rt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],kf(this.interruptReasons_)&&(this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;r?o=r.map(d=>Hc(d)).join("$"):o="default";const c=this.removeListen_(t,o);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(t,r){const o=new qe(t).toString();let c;if(this.listens.has(o)){const d=this.listens.get(o);c=d.get(r),d.delete(r),d.size===0&&this.listens.delete(o)}else c=void 0;return c}onAuthRevoked_(t,r){Rt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Xf&&(this.reconnectDelay_=Gf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Rt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Xf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+Ap.replace(/\./g,"-")]=1,Ep()?t["framework.cordova"]=1:Px()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Qo.getInstance().currentlyOnline();return kf(this.interruptReasons_)&&t}}Tn.nextPersistentConnectionId_=0;Tn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new Oe(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const o=new Oe(as,t),c=new Oe(as,r);return this.compare(o,c)!==0}minPost(){return Oe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao;class dm extends ll{static get __EMPTY_NODE(){return Ao}static set __EMPTY_NODE(t){Ao=t}compare(t,r){return hs(t.name,r.name)}isDefinedOn(t){throw ds("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(Sr,Ao)}makePost(t,r){return X(typeof t=="string","KeyIndex indexValue must always be a string."),new Oe(t,Ao)}toString(){return".key"}}const is=new dm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,r,o,c,d=null){this.isReverse_=c,this.resultGenerator_=d,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=r?o(t.key,r):1,c&&(f*=-1),f<0)this.isReverse_?t=t.left:t=t.right;else if(f===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class wt{constructor(t,r,o,c,d){this.key=t,this.value=r,this.color=o??wt.RED,this.left=c??Wt.EMPTY_NODE,this.right=d??Wt.EMPTY_NODE}copy(t,r,o,c,d){return new wt(t??this.key,r??this.value,o??this.color,c??this.left,d??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let c=this;const d=o(t,c.key);return d<0?c=c.copy(null,null,null,c.left.insert(t,r,o),null):d===0?c=c.copy(null,r,null,null,null):c=c.copy(null,null,null,null,c.right.insert(t,r,o)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,c;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),r(t,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY_NODE;c=o.right.min_(),o=o.copy(c.key,c.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}wt.RED=!0;wt.BLACK=!1;class t_{copy(t,r,o,c,d){return this}insert(t,r,o){return new wt(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Wt{constructor(t,r=Wt.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new Wt(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,wt.BLACK,null,null))}remove(t){return new Wt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,wt.BLACK,null,null))}get(t){let r,o=this.root_;for(;!o.isEmpty();){if(r=this.comparator_(t,o.key),r===0)return o.value;r<0?o=o.left:r>0&&(o=o.right)}return null}getPredecessorKey(t){let r,o=this.root_,c=null;for(;!o.isEmpty();)if(r=this.comparator_(t,o.key),r===0){if(o.left.isEmpty())return c?c.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else r<0?o=o.left:r>0&&(c=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Fo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new Fo(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new Fo(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new Fo(this.root_,null,this.comparator_,!0,t)}}Wt.EMPTY_NODE=new t_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(s,t){return hs(s.name,t.name)}function qc(s,t){return hs(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec;function r_(s){Ec=s}const hm=function(s){return typeof s=="number"?"number:"+Wp(s):"string:"+s},fm=function(s){if(s.isLeafNode()){const t=s.val();X(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Mn(t,".sv"),"Priority must be a string or number.")}else X(s===Ec||s.isEmpty(),"priority of unexpected type.");X(s===Ec||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf;class _t{static set __childrenNodeConstructor(t){qf=t}static get __childrenNodeConstructor(){return qf}constructor(t,r=_t.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new _t(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Fe(t)?this:De(t)===".priority"?this.priorityNode_:_t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:_t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=De(t);return o===null?r:r.isEmpty()&&o!==".priority"?this:(X(o!==".priority"||rr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,_t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ze(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+hm(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=Wp(this.value_):t+=this.value_,this.lazyHash_=zp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===_t.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof _t.__childrenNodeConstructor?-1:(X(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,c=_t.VALUE_TYPE_ORDER.indexOf(r),d=_t.VALUE_TYPE_ORDER.indexOf(o);return X(c>=0,"Unknown leaf type: "+r),X(d>=0,"Unknown leaf type: "+o),c===d?o==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-c}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}_t.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm,mm;function s_(s){pm=s}function i_(s){mm=s}class o_ extends ll{compare(t,r){const o=t.node.getPriority(),c=r.node.getPriority(),d=o.compareTo(c);return d===0?hs(t.name,r.name):d}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(Sr,new _t("[PRIORITY-POST]",mm))}makePost(t,r){const o=pm(t);return new Oe(r,new _t("[PRIORITY-POST]",o))}toString(){return".priority"}}const ct=new o_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=Math.log(2);class a_{constructor(t){const r=d=>parseInt(Math.log(d)/l_,10),o=d=>parseInt(Array(d+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const c=o(this.count);this.bits_=t+1&c}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Go=function(s,t,r,o){s.sort(t);const c=function(g,x){const w=x-g;let v,y;if(w===0)return null;if(w===1)return v=s[g],y=r?r(v):v,new wt(y,v.node,wt.BLACK,null,null);{const E=parseInt(w/2,10)+g,O=c(g,E),B=c(E+1,x);return v=s[E],y=r?r(v):v,new wt(y,v.node,wt.BLACK,O,B)}},d=function(g){let x=null,w=null,v=s.length;const y=function(O,B){const Z=v-O,ce=v;v-=O;const ee=c(Z+1,ce),ye=s[Z],oe=r?r(ye):ye;E(new wt(oe,ye.node,B,null,ee))},E=function(O){x?(x.left=O,x=O):(w=O,x=O)};for(let O=0;O<g.count;++O){const B=g.nextBitIsOne(),Z=Math.pow(2,g.count-(O+1));B?y(Z,wt.BLACK):(y(Z,wt.BLACK),y(Z,wt.RED))}return w},f=new a_(s.length),p=d(f);return new Wt(o||t,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc;const ts={};class In{static get Default(){return X(ts&&ct,"ChildrenNode.ts has not been loaded"),gc=gc||new In({".priority":ts},{".priority":ct}),gc}constructor(t,r){this.indexes_=t,this.indexSet_=r}get(t){const r=ls(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof Wt?r:null}hasIndex(t){return Mn(this.indexSet_,t.toString())}addIndex(t,r){X(t!==is,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let c=!1;const d=r.getIterator(Oe.Wrap);let f=d.getNext();for(;f;)c=c||t.isDefinedOn(f.node),o.push(f),f=d.getNext();let p;c?p=Go(o,t.getCompare()):p=ts;const g=t.toString(),x={...this.indexSet_};x[g]=t;const w={...this.indexes_};return w[g]=p,new In(w,x)}addToIndexes(t,r){const o=Wo(this.indexes_,(c,d)=>{const f=ls(this.indexSet_,d);if(X(f,"Missing index implementation for "+d),c===ts)if(f.isDefinedOn(t.node)){const p=[],g=r.getIterator(Oe.Wrap);let x=g.getNext();for(;x;)x.name!==t.name&&p.push(x),x=g.getNext();return p.push(t),Go(p,f.getCompare())}else return ts;else{const p=r.get(t.name);let g=c;return p&&(g=g.remove(new Oe(t.name,p))),g.insert(t,t.node)}});return new In(o,this.indexSet_)}removeFromIndexes(t,r){const o=Wo(this.indexes_,c=>{if(c===ts)return c;{const d=r.get(t.name);return d?c.remove(new Oe(t.name,d)):c}});return new In(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti;class be{static get EMPTY_NODE(){return ti||(ti=new be(new Wt(qc),null,In.Default))}constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&fm(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ti}updatePriority(t){return this.children_.isEmpty()?this:new be(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?ti:r}}getChild(t){const r=De(t);return r===null?this:this.getImmediateChild(r).getChild(Ze(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(X(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const o=new Oe(t,r);let c,d;r.isEmpty()?(c=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(c=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const f=c.isEmpty()?ti:this.priorityNode_;return new be(c,f,d)}}updateChild(t,r){const o=De(t);if(o===null)return r;{X(De(t)!==".priority"||rr(t)===1,".priority must be the last token in a path");const c=this.getImmediateChild(o).updateChild(Ze(t),r);return this.updateImmediateChild(o,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,c=0,d=!0;if(this.forEachChild(ct,(f,p)=>{r[f]=p.val(t),o++,d&&be.INTEGER_REGEXP_.test(f)?c=Math.max(c,Number(f)):d=!1}),!t&&d&&c<2*o){const f=[];for(const p in r)f[p]=r[p];return f}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+hm(this.getPriority().val())+":"),this.forEachChild(ct,(r,o)=>{const c=o.hash();c!==""&&(t+=":"+r+":"+c)}),this.lazyHash_=t===""?"":zp(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const c=this.resolveIndex_(o);if(c){const d=c.getPredecessorKey(new Oe(t,r));return d?d.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Oe(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Oe(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(c=>r(c.name,c.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,c=>c);{const c=this.children_.getIteratorFrom(t.name,Oe.Wrap);let d=c.peek();for(;d!=null&&r.compare(d,t)<0;)c.getNext(),d=c.peek();return c}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,c=>c);{const c=this.children_.getReverseIteratorFrom(t.name,Oe.Wrap);let d=c.peek();for(;d!=null&&r.compare(d,t)>0;)c.getNext(),d=c.peek();return c}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ni?-1:0}withIndex(t){if(t===is||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new be(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===is||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const o=this.getIterator(ct),c=r.getIterator(ct);let d=o.getNext(),f=c.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=o.getNext(),f=c.getNext()}return d===null&&f===null}else return!1;else return!1}}resolveIndex_(t){return t===is?null:this.indexMap_.get(t.toString())}}be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class c_ extends be{constructor(){super(new Wt(qc),be.EMPTY_NODE,In.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return be.EMPTY_NODE}isEmpty(){return!1}}const Ni=new c_;Object.defineProperties(Oe,{MIN:{value:new Oe(as,be.EMPTY_NODE)},MAX:{value:new Oe(Sr,Ni)}});dm.__EMPTY_NODE=be.EMPTY_NODE;_t.__childrenNodeConstructor=be;r_(Ni);i_(Ni);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=!0;function St(s,t=null){if(s===null)return be.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(t=s[".priority"]),X(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const r=s;return new _t(r,St(t))}if(!(s instanceof Array)&&u_){const r=[];let o=!1;if(Ht(s,(f,p)=>{if(f.substring(0,1)!=="."){const g=St(p);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),r.push(new Oe(f,g)))}}),r.length===0)return be.EMPTY_NODE;const d=Go(r,n_,f=>f.name,qc);if(o){const f=Go(r,ct.getCompare());return new be(d,St(t),new In({".priority":f},{".priority":ct}))}else return new be(d,St(t),In.Default)}else{let r=be.EMPTY_NODE;return Ht(s,(o,c)=>{if(Mn(s,o)&&o.substring(0,1)!=="."){const d=St(c);(d.isLeafNode()||!d.isEmpty())&&(r=r.updateImmediateChild(o,d))}}),r.updatePriority(St(t))}}s_(St);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends ll{constructor(t){super(),this.indexPath_=t,X(!Fe(t)&&De(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const o=this.extractChild(t.node),c=this.extractChild(r.node),d=o.compareTo(c);return d===0?hs(t.name,r.name):d}makePost(t,r){const o=St(t),c=be.EMPTY_NODE.updateChild(this.indexPath_,o);return new Oe(r,c)}maxPost(){const t=be.EMPTY_NODE.updateChild(this.indexPath_,Ni);return new Oe(Sr,t)}toString(){return am(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends ll{compare(t,r){const o=t.node.compareTo(r.node);return o===0?hs(t.name,r.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(t,r){const o=St(t);return new Oe(r,o)}toString(){return".value"}}const f_=new h_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(s){return{type:"value",snapshotNode:s}}function cs(s,t){return{type:"child_added",snapshotNode:t,childName:s}}function pi(s,t){return{type:"child_removed",snapshotNode:t,childName:s}}function mi(s,t,r){return{type:"child_changed",snapshotNode:t,childName:s,oldSnap:r}}function p_(s,t){return{type:"child_moved",snapshotNode:t,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this.index_=t}updateChild(t,r,o,c,d,f){X(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(r);return p.getChild(c).equals(o.getChild(c))&&p.isEmpty()===o.isEmpty()||(f!=null&&(o.isEmpty()?t.hasChild(r)?f.trackChildChange(pi(r,p)):X(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?f.trackChildChange(cs(r,o)):f.trackChildChange(mi(r,o,p))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(r,o).withIndex(this.index_)}updateFullNode(t,r,o){return o!=null&&(t.isLeafNode()||t.forEachChild(ct,(c,d)=>{r.hasChild(c)||o.trackChildChange(pi(c,d))}),r.isLeafNode()||r.forEachChild(ct,(c,d)=>{if(t.hasChild(c)){const f=t.getImmediateChild(c);f.equals(d)||o.trackChildChange(mi(c,d,f))}else o.trackChildChange(cs(c,d))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?be.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t){this.indexedFilter_=new Kc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=gi.getStartPost_(t),this.endPost_=gi.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,o=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&o}updateChild(t,r,o,c,d,f){return this.matches(new Oe(r,o))||(o=be.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,o,c,d,f)}updateFullNode(t,r,o){r.isLeafNode()&&(r=be.EMPTY_NODE);let c=r.withIndex(this.index_);c=c.updatePriority(be.EMPTY_NODE);const d=this;return r.forEachChild(ct,(f,p)=>{d.matches(new Oe(f,p))||(c=c.updateImmediateChild(f,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,c,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=r=>{const o=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new gi(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,o,c,d,f){return this.rangedFilter_.matches(new Oe(r,o))||(o=be.EMPTY_NODE),t.getImmediateChild(r).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,o,c,d,f):this.fullLimitUpdateChild_(t,r,o,d,f)}updateFullNode(t,r,o){let c;if(r.isLeafNode()||r.isEmpty())c=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){c=be.EMPTY_NODE.withIndex(this.index_);let d;this.reverse_?d=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;d.hasNext()&&f<this.limit_;){const p=d.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))c=c.updateImmediateChild(p.name,p.node),f++;else break;else continue}}else{c=r.withIndex(this.index_),c=c.updatePriority(be.EMPTY_NODE);let d;this.reverse_?d=c.getReverseIterator(this.index_):d=c.getIterator(this.index_);let f=0;for(;d.hasNext();){const p=d.getNext();f<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?f++:c=c.updateImmediateChild(p.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,c,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,o,c,d){let f;if(this.reverse_){const v=this.index_.getCompare();f=(y,E)=>v(E,y)}else f=this.index_.getCompare();const p=t;X(p.numChildren()===this.limit_,"");const g=new Oe(r,o),x=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),w=this.rangedFilter_.matches(g);if(p.hasChild(r)){const v=p.getImmediateChild(r);let y=c.getChildAfterChild(this.index_,x,this.reverse_);for(;y!=null&&(y.name===r||p.hasChild(y.name));)y=c.getChildAfterChild(this.index_,y,this.reverse_);const E=y==null?1:f(y,g);if(w&&!o.isEmpty()&&E>=0)return d!=null&&d.trackChildChange(mi(r,o,v)),p.updateImmediateChild(r,o);{d!=null&&d.trackChildChange(pi(r,v));const B=p.updateImmediateChild(r,be.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(d!=null&&d.trackChildChange(cs(y.name,y.node)),B.updateImmediateChild(y.name,y.node)):B}}else return o.isEmpty()?t:w&&f(x,g)>=0?(d!=null&&(d.trackChildChange(pi(x.name,x.node)),d.trackChildChange(cs(r,o))),p.updateImmediateChild(r,o).updateImmediateChild(x.name,be.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:as}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ct}copy(){const t=new Jc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function g_(s){return s.loadsAllData()?new Kc(s.getIndex()):s.hasLimit()?new m_(s):new gi(s)}function Kf(s){const t={};if(s.isDefault())return t;let r;if(s.index_===ct?r="$priority":s.index_===f_?r="$value":s.index_===is?r="$key":(X(s.index_ instanceof d_,"Unrecognized index type!"),r=s.index_.toString()),t.orderBy=bt(r),s.startSet_){const o=s.startAfterSet_?"startAfter":"startAt";t[o]=bt(s.indexStartValue_),s.startNameSet_&&(t[o]+=","+bt(s.indexStartName_))}if(s.endSet_){const o=s.endBeforeSet_?"endBefore":"endAt";t[o]=bt(s.indexEndValue_),s.endNameSet_&&(t[o]+=","+bt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?t.limitToFirst=s.limit_:t.limitToLast=s.limit_),t}function Jf(s){const t={};if(s.startSet_&&(t.sp=s.indexStartValue_,s.startNameSet_&&(t.sn=s.indexStartName_),t.sin=!s.startAfterSet_),s.endSet_&&(t.ep=s.indexEndValue_,s.endNameSet_&&(t.en=s.indexEndName_),t.ein=!s.endBeforeSet_),s.limitSet_){t.l=s.limit_;let r=s.viewFrom_;r===""&&(s.isViewFromLeft()?r="l":r="r"),t.vf=r}return s.index_!==ct&&(t.i=s.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends im{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(X(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,r,o,c){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.log_=bi("p:rest:"),this.listens_={}}listen(t,r,o,c){const d=t._path.toString();this.log_("Listen called for "+d+" "+t._queryIdentifier);const f=Xo.getListenId_(t,o),p={};this.listens_[f]=p;const g=Kf(t._queryParams);this.restRequest_(d+".json",g,(x,w)=>{let v=w;if(x===404&&(v=null,x=null),x===null&&this.onDataUpdate_(d,v,!1,o),ls(this.listens_,f)===p){let y;x?x===401?y="permission_denied":y="rest_error:"+x:y="ok",c(y,null)}})}unlisten(t,r){const o=Xo.getListenId_(t,r);delete this.listens_[o]}get(t){const r=Kf(t._queryParams),o=t._path.toString(),c=new il;return this.restRequest_(o+".json",r,(d,f)=>{let p=f;d===404&&(p=null,d=null),d===null?(this.onDataUpdate_(o,p,!1,null),c.resolve(p)):c.reject(new Error(p))}),c.promise}refreshAuthToken(t){}restRequest_(t,r={},o){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([c,d])=>{c&&c.accessToken&&(r.auth=c.accessToken),d&&d.token&&(r.ac=d.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ux(r);this.log_("Sending REST request for "+f);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(o&&p.readyState===4){this.log_("REST Response for "+f+" received. status:",p.status,"response:",p.responseText);let g=null;if(p.status>=200&&p.status<300){try{g=ui(p.responseText)}catch{Bt("Failed to parse JSON response for "+f+": "+p.responseText)}o(null,g)}else p.status!==401&&p.status!==404&&Bt("Got unsuccessful REST response for "+f+" Status: "+p.status),o(p.status);o=null}},p.open("GET",f,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(){return{value:null,children:new Map}}function xm(s,t,r){if(Fe(t))s.value=r,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(t,r);else{const o=De(t);s.children.has(o)||s.children.set(o,qo());const c=s.children.get(o);t=Ze(t),xm(c,t,r)}}function Ic(s,t,r){s.value!==null?r(t,s.value):v_(s,(o,c)=>{const d=new qe(t.toString()+"/"+o);Ic(c,d,r)})}function v_(s,t){s.children.forEach((r,o)=>{t(o,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r={...t};return this.last_&&Ht(this.last_,(o,c)=>{r[o]=r[o]-c}),this.last_=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=10*1e3,__=30*1e3,w_=300*1e3;class b_{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new y_(t);const o=Zf+(__-Zf)*Math.random();oi(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),r={};let o=!1;Ht(t,(c,d)=>{d>0&&Mn(this.statsToReport_,c)&&(r[c]=d,o=!0)}),o&&this.server_.reportStats(r),oi(this.reportStats_.bind(this),Math.floor(Math.random()*2*w_))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(fn||(fn={}));function vm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function eu(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,r,o){this.path=t,this.affectedTree=r,this.revert=o,this.type=fn.ACK_USER_WRITE,this.source=vm()}operationForChild(t){if(Fe(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new qe(t));return new Ko(Ye(),r,this.revert)}}else return X(De(this.path)===t,"operationForChild called for unrelated child."),new Ko(Ze(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,r){this.source=t,this.path=r,this.type=fn.LISTEN_COMPLETE}operationForChild(t){return Fe(this.path)?new xi(this.source,Ye()):new xi(this.source,Ze(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t,r,o){this.source=t,this.path=r,this.snap=o,this.type=fn.OVERWRITE}operationForChild(t){return Fe(this.path)?new jr(this.source,Ye(),this.snap.getImmediateChild(t)):new jr(this.source,Ze(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,r,o){this.source=t,this.path=r,this.children=o,this.type=fn.MERGE}operationForChild(t){if(Fe(this.path)){const r=this.children.subtree(new qe(t));return r.isEmpty()?null:r.value?new jr(this.source,Ye(),r.value):new vi(this.source,Ye(),r)}else return X(De(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new vi(this.source,Ze(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,r,o){this.node_=t,this.fullyInitialized_=r,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Fe(t))return this.isFullyInitialized()&&!this.filtered_;const r=De(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function k_(s,t,r,o){const c=[],d=[];return t.forEach(f=>{f.type==="child_changed"&&s.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&d.push(p_(f.childName,f.snapshotNode))}),ni(s,c,"child_removed",t,o,r),ni(s,c,"child_added",t,o,r),ni(s,c,"child_moved",d,o,r),ni(s,c,"child_changed",t,o,r),ni(s,c,"value",t,o,r),c}function ni(s,t,r,o,c,d){const f=o.filter(p=>p.type===r);f.sort((p,g)=>S_(s,p,g)),f.forEach(p=>{const g=C_(s,p,d);c.forEach(x=>{x.respondsTo(p.type)&&t.push(x.createEvent(g,s.query_))})})}function C_(s,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,s.index_)),t}function S_(s,t,r){if(t.childName==null||r.childName==null)throw ds("Should only compare child_ events.");const o=new Oe(t.childName,t.snapshotNode),c=new Oe(r.childName,r.snapshotNode);return s.index_.compare(o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(s,t){return{eventCache:s,serverCache:t}}function li(s,t,r,o){return al(new Er(t,r,o),s.serverCache)}function ym(s,t,r,o){return al(s.eventCache,new Er(t,r,o))}function Tc(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function Ir(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc;const j_=()=>(xc||(xc=new Wt(hy)),xc);class rt{static fromObject(t){let r=new rt(null);return Ht(t,(o,c)=>{r=r.set(new qe(o),c)}),r}constructor(t,r=j_()){this.value=t,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:Ye(),value:this.value};if(Fe(t))return null;{const o=De(t),c=this.children.get(o);if(c!==null){const d=c.findRootMostMatchingPathAndValue(Ze(t),r);return d!=null?{path:gt(new qe(o),d.path),value:d.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Fe(t))return this;{const r=De(t),o=this.children.get(r);return o!==null?o.subtree(Ze(t)):new rt(null)}}set(t,r){if(Fe(t))return new rt(r,this.children);{const o=De(t),d=(this.children.get(o)||new rt(null)).set(Ze(t),r),f=this.children.insert(o,d);return new rt(this.value,f)}}remove(t){if(Fe(t))return this.children.isEmpty()?new rt(null):new rt(null,this.children);{const r=De(t),o=this.children.get(r);if(o){const c=o.remove(Ze(t));let d;return c.isEmpty()?d=this.children.remove(r):d=this.children.insert(r,c),this.value===null&&d.isEmpty()?new rt(null):new rt(this.value,d)}else return this}}get(t){if(Fe(t))return this.value;{const r=De(t),o=this.children.get(r);return o?o.get(Ze(t)):null}}setTree(t,r){if(Fe(t))return r;{const o=De(t),d=(this.children.get(o)||new rt(null)).setTree(Ze(t),r);let f;return d.isEmpty()?f=this.children.remove(o):f=this.children.insert(o,d),new rt(this.value,f)}}fold(t){return this.fold_(Ye(),t)}fold_(t,r){const o={};return this.children.inorderTraversal((c,d)=>{o[c]=d.fold_(gt(t,c),r)}),r(t,this.value,o)}findOnPath(t,r){return this.findOnPath_(t,Ye(),r)}findOnPath_(t,r,o){const c=this.value?o(r,this.value):!1;if(c)return c;if(Fe(t))return null;{const d=De(t),f=this.children.get(d);return f?f.findOnPath_(Ze(t),gt(r,d),o):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,Ye(),r)}foreachOnPath_(t,r,o){if(Fe(t))return this;{this.value&&o(r,this.value);const c=De(t),d=this.children.get(c);return d?d.foreachOnPath_(Ze(t),gt(r,c),o):new rt(null)}}foreach(t){this.foreach_(Ye(),t)}foreach_(t,r){this.children.inorderTraversal((o,c)=>{c.foreach_(gt(t,o),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,o)=>{o.value&&t(r,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.writeTree_=t}static empty(){return new pn(new rt(null))}}function ai(s,t,r){if(Fe(t))return new pn(new rt(r));{const o=s.writeTree_.findRootMostValueAndPath(t);if(o!=null){const c=o.path;let d=o.value;const f=Ut(c,t);return d=d.updateChild(f,r),new pn(s.writeTree_.set(c,d))}else{const c=new rt(r),d=s.writeTree_.setTree(t,c);return new pn(d)}}}function ep(s,t,r){let o=s;return Ht(r,(c,d)=>{o=ai(o,gt(t,c),d)}),o}function tp(s,t){if(Fe(t))return pn.empty();{const r=s.writeTree_.setTree(t,new rt(null));return new pn(r)}}function Rc(s,t){return Tr(s,t)!=null}function Tr(s,t){const r=s.writeTree_.findRootMostValueAndPath(t);return r!=null?s.writeTree_.get(r.path).getChild(Ut(r.path,t)):null}function np(s){const t=[],r=s.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(ct,(o,c)=>{t.push(new Oe(o,c))}):s.writeTree_.children.inorderTraversal((o,c)=>{c.value!=null&&t.push(new Oe(o,c.value))}),t}function nr(s,t){if(Fe(t))return s;{const r=Tr(s,t);return r!=null?new pn(new rt(r)):new pn(s.writeTree_.subtree(t))}}function Pc(s){return s.writeTree_.isEmpty()}function us(s,t){return _m(Ye(),s.writeTree_,t)}function _m(s,t,r){if(t.value!=null)return r.updateChild(s,t.value);{let o=null;return t.children.inorderTraversal((c,d)=>{c===".priority"?(X(d.value!==null,"Priority writes must always be leaf nodes"),o=d.value):r=_m(gt(s,c),d,r)}),!r.getChild(s).isEmpty()&&o!==null&&(r=r.updateChild(gt(s,".priority"),o)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(s,t){return km(t,s)}function E_(s,t,r,o,c){X(o>s.lastWriteId,"Stacking an older write on top of newer ones"),c===void 0&&(c=!0),s.allWrites.push({path:t,snap:r,writeId:o,visible:c}),c&&(s.visibleWrites=ai(s.visibleWrites,t,r)),s.lastWriteId=o}function I_(s,t){for(let r=0;r<s.allWrites.length;r++){const o=s.allWrites[r];if(o.writeId===t)return o}return null}function T_(s,t){const r=s.allWrites.findIndex(p=>p.writeId===t);X(r>=0,"removeWrite called with nonexistent writeId.");const o=s.allWrites[r];s.allWrites.splice(r,1);let c=o.visible,d=!1,f=s.allWrites.length-1;for(;c&&f>=0;){const p=s.allWrites[f];p.visible&&(f>=r&&R_(p,o.path)?c=!1:hn(o.path,p.path)&&(d=!0)),f--}if(c){if(d)return P_(s),!0;if(o.snap)s.visibleWrites=tp(s.visibleWrites,o.path);else{const p=o.children;Ht(p,g=>{s.visibleWrites=tp(s.visibleWrites,gt(o.path,g))})}return!0}else return!1}function R_(s,t){if(s.snap)return hn(s.path,t);for(const r in s.children)if(s.children.hasOwnProperty(r)&&hn(gt(s.path,r),t))return!0;return!1}function P_(s){s.visibleWrites=wm(s.allWrites,L_,Ye()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function L_(s){return s.visible}function wm(s,t,r){let o=pn.empty();for(let c=0;c<s.length;++c){const d=s[c];if(t(d)){const f=d.path;let p;if(d.snap)hn(r,f)?(p=Ut(r,f),o=ai(o,p,d.snap)):hn(f,r)&&(p=Ut(f,r),o=ai(o,Ye(),d.snap.getChild(p)));else if(d.children){if(hn(r,f))p=Ut(r,f),o=ep(o,p,d.children);else if(hn(f,r))if(p=Ut(f,r),Fe(p))o=ep(o,Ye(),d.children);else{const g=ls(d.children,De(p));if(g){const x=g.getChild(Ze(p));o=ai(o,Ye(),x)}}}else throw ds("WriteRecord should have .snap or .children")}}return o}function bm(s,t,r,o,c){if(!o&&!c){const d=Tr(s.visibleWrites,t);if(d!=null)return d;{const f=nr(s.visibleWrites,t);if(Pc(f))return r;if(r==null&&!Rc(f,Ye()))return null;{const p=r||be.EMPTY_NODE;return us(f,p)}}}else{const d=nr(s.visibleWrites,t);if(!c&&Pc(d))return r;if(!c&&r==null&&!Rc(d,Ye()))return null;{const f=function(x){return(x.visible||c)&&(!o||!~o.indexOf(x.writeId))&&(hn(x.path,t)||hn(t,x.path))},p=wm(s.allWrites,f,t),g=r||be.EMPTY_NODE;return us(p,g)}}}function M_(s,t,r){let o=be.EMPTY_NODE;const c=Tr(s.visibleWrites,t);if(c)return c.isLeafNode()||c.forEachChild(ct,(d,f)=>{o=o.updateImmediateChild(d,f)}),o;if(r){const d=nr(s.visibleWrites,t);return r.forEachChild(ct,(f,p)=>{const g=us(nr(d,new qe(f)),p);o=o.updateImmediateChild(f,g)}),np(d).forEach(f=>{o=o.updateImmediateChild(f.name,f.node)}),o}else{const d=nr(s.visibleWrites,t);return np(d).forEach(f=>{o=o.updateImmediateChild(f.name,f.node)}),o}}function D_(s,t,r,o,c){X(o||c,"Either existingEventSnap or existingServerSnap must exist");const d=gt(t,r);if(Rc(s.visibleWrites,d))return null;{const f=nr(s.visibleWrites,d);return Pc(f)?c.getChild(r):us(f,c.getChild(r))}}function O_(s,t,r,o){const c=gt(t,r),d=Tr(s.visibleWrites,c);if(d!=null)return d;if(o.isCompleteForChild(r)){const f=nr(s.visibleWrites,c);return us(f,o.getNode().getImmediateChild(r))}else return null}function A_(s,t){return Tr(s.visibleWrites,t)}function F_(s,t,r,o,c,d,f){let p;const g=nr(s.visibleWrites,t),x=Tr(g,Ye());if(x!=null)p=x;else if(r!=null)p=us(g,r);else return[];if(p=p.withIndex(f),!p.isEmpty()&&!p.isLeafNode()){const w=[],v=f.getCompare(),y=d?p.getReverseIteratorFrom(o,f):p.getIteratorFrom(o,f);let E=y.getNext();for(;E&&w.length<c;)v(E,o)!==0&&w.push(E),E=y.getNext();return w}else return[]}function z_(){return{visibleWrites:pn.empty(),allWrites:[],lastWriteId:-1}}function Jo(s,t,r,o){return bm(s.writeTree,s.treePath,t,r,o)}function nu(s,t){return M_(s.writeTree,s.treePath,t)}function rp(s,t,r,o){return D_(s.writeTree,s.treePath,t,r,o)}function Zo(s,t){return A_(s.writeTree,gt(s.treePath,t))}function $_(s,t,r,o,c,d){return F_(s.writeTree,s.treePath,t,r,o,c,d)}function ru(s,t,r){return O_(s.writeTree,s.treePath,t,r)}function Nm(s,t){return km(gt(s.treePath,t),s.writeTree)}function km(s,t){return{treePath:s,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,o=t.childName;X(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),X(o!==".priority","Only non-priority child changes can be tracked.");const c=this.changeMap.get(o);if(c){const d=c.type;if(r==="child_added"&&d==="child_removed")this.changeMap.set(o,mi(o,t.snapshotNode,c.snapshotNode));else if(r==="child_removed"&&d==="child_added")this.changeMap.delete(o);else if(r==="child_removed"&&d==="child_changed")this.changeMap.set(o,pi(o,c.oldSnap));else if(r==="child_changed"&&d==="child_added")this.changeMap.set(o,cs(o,t.snapshotNode));else if(r==="child_changed"&&d==="child_changed")this.changeMap.set(o,mi(o,t.snapshotNode,c.oldSnap));else throw ds("Illegal combination of changes: "+t+" occurred after "+c)}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{getCompleteChild(t){return null}getChildAfterChild(t,r,o){return null}}const Cm=new W_;class su{constructor(t,r,o=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=o}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const o=this.optCompleteServerCache_!=null?new Er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ru(this.writes_,t,o)}}getChildAfterChild(t,r,o){const c=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ir(this.viewCache_),d=$_(this.writes_,c,r,1,o,t);return d.length===0?null:d[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(s){return{filter:s}}function H_(s,t){X(t.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),X(t.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function V_(s,t,r,o,c){const d=new U_;let f,p;if(r.type===fn.OVERWRITE){const x=r;x.source.fromUser?f=Lc(s,t,x.path,x.snap,o,c,d):(X(x.source.fromServer,"Unknown source."),p=x.source.tagged||t.serverCache.isFiltered()&&!Fe(x.path),f=el(s,t,x.path,x.snap,o,c,p,d))}else if(r.type===fn.MERGE){const x=r;x.source.fromUser?f=Q_(s,t,x.path,x.children,o,c,d):(X(x.source.fromServer,"Unknown source."),p=x.source.tagged||t.serverCache.isFiltered(),f=Mc(s,t,x.path,x.children,o,c,p,d))}else if(r.type===fn.ACK_USER_WRITE){const x=r;x.revert?f=q_(s,t,x.path,o,c,d):f=G_(s,t,x.path,x.affectedTree,o,c,d)}else if(r.type===fn.LISTEN_COMPLETE)f=X_(s,t,r.path,o,d);else throw ds("Unknown operation type: "+r.type);const g=d.getChanges();return Y_(t,f,g),{viewCache:f,changes:g}}function Y_(s,t,r){const o=t.eventCache;if(o.isFullyInitialized()){const c=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=Tc(s);(r.length>0||!s.eventCache.isFullyInitialized()||c&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&r.push(gm(Tc(t)))}}function Sm(s,t,r,o,c,d){const f=t.eventCache;if(Zo(o,r)!=null)return t;{let p,g;if(Fe(r))if(X(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const x=Ir(t),w=x instanceof be?x:be.EMPTY_NODE,v=nu(o,w);p=s.filter.updateFullNode(t.eventCache.getNode(),v,d)}else{const x=Jo(o,Ir(t));p=s.filter.updateFullNode(t.eventCache.getNode(),x,d)}else{const x=De(r);if(x===".priority"){X(rr(r)===1,"Can't have a priority with additional path components");const w=f.getNode();g=t.serverCache.getNode();const v=rp(o,r,w,g);v!=null?p=s.filter.updatePriority(w,v):p=f.getNode()}else{const w=Ze(r);let v;if(f.isCompleteForChild(x)){g=t.serverCache.getNode();const y=rp(o,r,f.getNode(),g);y!=null?v=f.getNode().getImmediateChild(x).updateChild(w,y):v=f.getNode().getImmediateChild(x)}else v=ru(o,x,t.serverCache);v!=null?p=s.filter.updateChild(f.getNode(),x,v,w,c,d):p=f.getNode()}}return li(t,p,f.isFullyInitialized()||Fe(r),s.filter.filtersNodes())}}function el(s,t,r,o,c,d,f,p){const g=t.serverCache;let x;const w=f?s.filter:s.filter.getIndexedFilter();if(Fe(r))x=w.updateFullNode(g.getNode(),o,null);else if(w.filtersNodes()&&!g.isFiltered()){const E=g.getNode().updateChild(r,o);x=w.updateFullNode(g.getNode(),E,null)}else{const E=De(r);if(!g.isCompleteForPath(r)&&rr(r)>1)return t;const O=Ze(r),Z=g.getNode().getImmediateChild(E).updateChild(O,o);E===".priority"?x=w.updatePriority(g.getNode(),Z):x=w.updateChild(g.getNode(),E,Z,O,Cm,null)}const v=ym(t,x,g.isFullyInitialized()||Fe(r),w.filtersNodes()),y=new su(c,v,d);return Sm(s,v,r,c,y,p)}function Lc(s,t,r,o,c,d,f){const p=t.eventCache;let g,x;const w=new su(c,t,d);if(Fe(r))x=s.filter.updateFullNode(t.eventCache.getNode(),o,f),g=li(t,x,!0,s.filter.filtersNodes());else{const v=De(r);if(v===".priority")x=s.filter.updatePriority(t.eventCache.getNode(),o),g=li(t,x,p.isFullyInitialized(),p.isFiltered());else{const y=Ze(r),E=p.getNode().getImmediateChild(v);let O;if(Fe(y))O=o;else{const B=w.getCompleteChild(v);B!=null?lm(y)===".priority"&&B.getChild(cm(y)).isEmpty()?O=B:O=B.updateChild(y,o):O=be.EMPTY_NODE}if(E.equals(O))g=t;else{const B=s.filter.updateChild(p.getNode(),v,O,y,w,f);g=li(t,B,p.isFullyInitialized(),s.filter.filtersNodes())}}}return g}function sp(s,t){return s.eventCache.isCompleteForChild(t)}function Q_(s,t,r,o,c,d,f){let p=t;return o.foreach((g,x)=>{const w=gt(r,g);sp(t,De(w))&&(p=Lc(s,p,w,x,c,d,f))}),o.foreach((g,x)=>{const w=gt(r,g);sp(t,De(w))||(p=Lc(s,p,w,x,c,d,f))}),p}function ip(s,t,r){return r.foreach((o,c)=>{t=t.updateChild(o,c)}),t}function Mc(s,t,r,o,c,d,f,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,x;Fe(r)?x=o:x=new rt(null).setTree(r,o);const w=t.serverCache.getNode();return x.children.inorderTraversal((v,y)=>{if(w.hasChild(v)){const E=t.serverCache.getNode().getImmediateChild(v),O=ip(s,E,y);g=el(s,g,new qe(v),O,c,d,f,p)}}),x.children.inorderTraversal((v,y)=>{const E=!t.serverCache.isCompleteForChild(v)&&y.value===null;if(!w.hasChild(v)&&!E){const O=t.serverCache.getNode().getImmediateChild(v),B=ip(s,O,y);g=el(s,g,new qe(v),B,c,d,f,p)}}),g}function G_(s,t,r,o,c,d,f){if(Zo(c,r)!=null)return t;const p=t.serverCache.isFiltered(),g=t.serverCache;if(o.value!=null){if(Fe(r)&&g.isFullyInitialized()||g.isCompleteForPath(r))return el(s,t,r,g.getNode().getChild(r),c,d,p,f);if(Fe(r)){let x=new rt(null);return g.getNode().forEachChild(is,(w,v)=>{x=x.set(new qe(w),v)}),Mc(s,t,r,x,c,d,p,f)}else return t}else{let x=new rt(null);return o.foreach((w,v)=>{const y=gt(r,w);g.isCompleteForPath(y)&&(x=x.set(w,g.getNode().getChild(y)))}),Mc(s,t,r,x,c,d,p,f)}}function X_(s,t,r,o,c){const d=t.serverCache,f=ym(t,d.getNode(),d.isFullyInitialized()||Fe(r),d.isFiltered());return Sm(s,f,r,o,Cm,c)}function q_(s,t,r,o,c,d){let f;if(Zo(o,r)!=null)return t;{const p=new su(o,t,c),g=t.eventCache.getNode();let x;if(Fe(r)||De(r)===".priority"){let w;if(t.serverCache.isFullyInitialized())w=Jo(o,Ir(t));else{const v=t.serverCache.getNode();X(v instanceof be,"serverChildren would be complete if leaf node"),w=nu(o,v)}w=w,x=s.filter.updateFullNode(g,w,d)}else{const w=De(r);let v=ru(o,w,t.serverCache);v==null&&t.serverCache.isCompleteForChild(w)&&(v=g.getImmediateChild(w)),v!=null?x=s.filter.updateChild(g,w,v,Ze(r),p,d):t.eventCache.getNode().hasChild(w)?x=s.filter.updateChild(g,w,be.EMPTY_NODE,Ze(r),p,d):x=g,x.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=Jo(o,Ir(t)),f.isLeafNode()&&(x=s.filter.updateFullNode(x,f,d)))}return f=t.serverCache.isFullyInitialized()||Zo(o,Ye())!=null,li(t,x,f,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,c=new Kc(o.getIndex()),d=g_(o);this.processor_=B_(d);const f=r.serverCache,p=r.eventCache,g=c.updateFullNode(be.EMPTY_NODE,f.getNode(),null),x=d.updateFullNode(be.EMPTY_NODE,p.getNode(),null),w=new Er(g,f.isFullyInitialized(),c.filtersNodes()),v=new Er(x,p.isFullyInitialized(),d.filtersNodes());this.viewCache_=al(v,w),this.eventGenerator_=new N_(this.query_)}get query(){return this.query_}}function J_(s){return s.viewCache_.serverCache.getNode()}function Z_(s,t){const r=Ir(s.viewCache_);return r&&(s.query._queryParams.loadsAllData()||!Fe(t)&&!r.getImmediateChild(De(t)).isEmpty())?r.getChild(t):null}function op(s){return s.eventRegistrations_.length===0}function e1(s,t){s.eventRegistrations_.push(t)}function lp(s,t,r){const o=[];if(r){X(t==null,"A cancel should cancel all event registrations.");const c=s.query._path;s.eventRegistrations_.forEach(d=>{const f=d.createCancelEvent(r,c);f&&o.push(f)})}if(t){let c=[];for(let d=0;d<s.eventRegistrations_.length;++d){const f=s.eventRegistrations_[d];if(!f.matches(t))c.push(f);else if(t.hasAnyCallback()){c=c.concat(s.eventRegistrations_.slice(d+1));break}}s.eventRegistrations_=c}else s.eventRegistrations_=[];return o}function ap(s,t,r,o){t.type===fn.MERGE&&t.source.queryId!==null&&(X(Ir(s.viewCache_),"We should always have a full cache before handling merges"),X(Tc(s.viewCache_),"Missing event cache, even though we have a server cache"));const c=s.viewCache_,d=V_(s.processor_,c,t,r,o);return H_(s.processor_,d.viewCache),X(d.viewCache.serverCache.isFullyInitialized()||!c.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=d.viewCache,jm(s,d.changes,d.viewCache.eventCache.getNode(),null)}function t1(s,t){const r=s.viewCache_.eventCache,o=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(ct,(d,f)=>{o.push(cs(d,f))}),r.isFullyInitialized()&&o.push(gm(r.getNode())),jm(s,o,r.getNode(),t)}function jm(s,t,r,o){const c=o?[o]:s.eventRegistrations_;return k_(s.eventGenerator_,t,r,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl;class n1{constructor(){this.views=new Map}}function r1(s){X(!tl,"__referenceConstructor has already been defined"),tl=s}function s1(){return X(tl,"Reference.ts has not been loaded"),tl}function i1(s){return s.views.size===0}function iu(s,t,r,o){const c=t.source.queryId;if(c!==null){const d=s.views.get(c);return X(d!=null,"SyncTree gave us an op for an invalid query."),ap(d,t,r,o)}else{let d=[];for(const f of s.views.values())d=d.concat(ap(f,t,r,o));return d}}function o1(s,t,r,o,c){const d=t._queryIdentifier,f=s.views.get(d);if(!f){let p=Jo(r,c?o:null),g=!1;p?g=!0:o instanceof be?(p=nu(r,o),g=!1):(p=be.EMPTY_NODE,g=!1);const x=al(new Er(p,g,!1),new Er(o,c,!1));return new K_(t,x)}return f}function l1(s,t,r,o,c,d){const f=o1(s,t,o,c,d);return s.views.has(t._queryIdentifier)||s.views.set(t._queryIdentifier,f),e1(f,r),t1(f,r)}function a1(s,t,r,o){const c=t._queryIdentifier,d=[];let f=[];const p=sr(s);if(c==="default")for(const[g,x]of s.views.entries())f=f.concat(lp(x,r,o)),op(x)&&(s.views.delete(g),x.query._queryParams.loadsAllData()||d.push(x.query));else{const g=s.views.get(c);g&&(f=f.concat(lp(g,r,o)),op(g)&&(s.views.delete(c),g.query._queryParams.loadsAllData()||d.push(g.query)))}return p&&!sr(s)&&d.push(new(s1())(t._repo,t._path)),{removed:d,events:f}}function Em(s){const t=[];for(const r of s.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function os(s,t){let r=null;for(const o of s.views.values())r=r||Z_(o,t);return r}function Im(s,t){if(t._queryParams.loadsAllData())return cl(s);{const o=t._queryIdentifier;return s.views.get(o)}}function Tm(s,t){return Im(s,t)!=null}function sr(s){return cl(s)!=null}function cl(s){for(const t of s.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl;function c1(s){X(!nl,"__referenceConstructor has already been defined"),nl=s}function u1(){return X(nl,"Reference.ts has not been loaded"),nl}let d1=1;class cp{constructor(t){this.listenProvider_=t,this.syncPointTree_=new rt(null),this.pendingWriteTree_=z_(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Rm(s,t,r,o,c){return E_(s.pendingWriteTree_,t,r,o,c),c?ki(s,new jr(vm(),t,r)):[]}function Cr(s,t,r=!1){const o=I_(s.pendingWriteTree_,t);if(T_(s.pendingWriteTree_,t)){let d=new rt(null);return o.snap!=null?d=d.set(Ye(),!0):Ht(o.children,f=>{d=d.set(new qe(f),!0)}),ki(s,new Ko(o.path,d,r))}else return[]}function ul(s,t,r){return ki(s,new jr(Zc(),t,r))}function h1(s,t,r){const o=rt.fromObject(r);return ki(s,new vi(Zc(),t,o))}function f1(s,t){return ki(s,new xi(Zc(),t))}function p1(s,t,r){const o=lu(s,r);if(o){const c=au(o),d=c.path,f=c.queryId,p=Ut(d,t),g=new xi(eu(f),p);return cu(s,d,g)}else return[]}function Dc(s,t,r,o,c=!1){const d=t._path,f=s.syncPointTree_.get(d);let p=[];if(f&&(t._queryIdentifier==="default"||Tm(f,t))){const g=a1(f,t,r,o);i1(f)&&(s.syncPointTree_=s.syncPointTree_.remove(d));const x=g.removed;if(p=g.events,!c){const w=x.findIndex(y=>y._queryParams.loadsAllData())!==-1,v=s.syncPointTree_.findOnPath(d,(y,E)=>sr(E));if(w&&!v){const y=s.syncPointTree_.subtree(d);if(!y.isEmpty()){const E=x1(y);for(let O=0;O<E.length;++O){const B=E[O],Z=B.query,ce=Mm(s,B);s.listenProvider_.startListening(ci(Z),rl(s,Z),ce.hashFn,ce.onComplete)}}}!v&&x.length>0&&!o&&(w?s.listenProvider_.stopListening(ci(t),null):x.forEach(y=>{const E=s.queryToTagMap.get(dl(y));s.listenProvider_.stopListening(ci(y),E)}))}v1(s,x)}return p}function m1(s,t,r,o){const c=lu(s,o);if(c!=null){const d=au(c),f=d.path,p=d.queryId,g=Ut(f,t),x=new jr(eu(p),g,r);return cu(s,f,x)}else return[]}function g1(s,t,r,o){const c=lu(s,o);if(c){const d=au(c),f=d.path,p=d.queryId,g=Ut(f,t),x=rt.fromObject(r),w=new vi(eu(p),g,x);return cu(s,f,w)}else return[]}function up(s,t,r,o=!1){const c=t._path;let d=null,f=!1;s.syncPointTree_.foreachOnPath(c,(y,E)=>{const O=Ut(y,c);d=d||os(E,O),f=f||sr(E)});let p=s.syncPointTree_.get(c);p?(f=f||sr(p),d=d||os(p,Ye())):(p=new n1,s.syncPointTree_=s.syncPointTree_.set(c,p));let g;d!=null?g=!0:(g=!1,d=be.EMPTY_NODE,s.syncPointTree_.subtree(c).foreachChild((E,O)=>{const B=os(O,Ye());B&&(d=d.updateImmediateChild(E,B))}));const x=Tm(p,t);if(!x&&!t._queryParams.loadsAllData()){const y=dl(t);X(!s.queryToTagMap.has(y),"View does not exist, but we have a tag");const E=y1();s.queryToTagMap.set(y,E),s.tagToQueryMap.set(E,y)}const w=tu(s.pendingWriteTree_,c);let v=l1(p,t,r,w,d,g);if(!x&&!f&&!o){const y=Im(p,t);v=v.concat(_1(s,t,y))}return v}function ou(s,t,r){const c=s.pendingWriteTree_,d=s.syncPointTree_.findOnPath(t,(f,p)=>{const g=Ut(f,t),x=os(p,g);if(x)return x});return bm(c,t,d,r,!0)}function ki(s,t){return Pm(t,s.syncPointTree_,null,tu(s.pendingWriteTree_,Ye()))}function Pm(s,t,r,o){if(Fe(s.path))return Lm(s,t,r,o);{const c=t.get(Ye());r==null&&c!=null&&(r=os(c,Ye()));let d=[];const f=De(s.path),p=s.operationForChild(f),g=t.children.get(f);if(g&&p){const x=r?r.getImmediateChild(f):null,w=Nm(o,f);d=d.concat(Pm(p,g,x,w))}return c&&(d=d.concat(iu(c,s,o,r))),d}}function Lm(s,t,r,o){const c=t.get(Ye());r==null&&c!=null&&(r=os(c,Ye()));let d=[];return t.children.inorderTraversal((f,p)=>{const g=r?r.getImmediateChild(f):null,x=Nm(o,f),w=s.operationForChild(f);w&&(d=d.concat(Lm(w,p,g,x)))}),c&&(d=d.concat(iu(c,s,o,r))),d}function Mm(s,t){const r=t.query,o=rl(s,r);return{hashFn:()=>(J_(t)||be.EMPTY_NODE).hash(),onComplete:c=>{if(c==="ok")return o?p1(s,r._path,o):f1(s,r._path);{const d=my(c,r);return Dc(s,r,null,d)}}}}function rl(s,t){const r=dl(t);return s.queryToTagMap.get(r)}function dl(s){return s._path.toString()+"$"+s._queryIdentifier}function lu(s,t){return s.tagToQueryMap.get(t)}function au(s){const t=s.indexOf("$");return X(t!==-1&&t<s.length-1,"Bad queryKey."),{queryId:s.substr(t+1),path:new qe(s.substr(0,t))}}function cu(s,t,r){const o=s.syncPointTree_.get(t);X(o,"Missing sync point for query tag that we're tracking");const c=tu(s.pendingWriteTree_,t);return iu(o,r,c,null)}function x1(s){return s.fold((t,r,o)=>{if(r&&sr(r))return[cl(r)];{let c=[];return r&&(c=Em(r)),Ht(o,(d,f)=>{c=c.concat(f)}),c}})}function ci(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(u1())(s._repo,s._path):s}function v1(s,t){for(let r=0;r<t.length;++r){const o=t[r];if(!o._queryParams.loadsAllData()){const c=dl(o),d=s.queryToTagMap.get(c);s.queryToTagMap.delete(c),s.tagToQueryMap.delete(d)}}}function y1(){return d1++}function _1(s,t,r){const o=t._path,c=rl(s,t),d=Mm(s,r),f=s.listenProvider_.startListening(ci(t),c,d.hashFn,d.onComplete),p=s.syncPointTree_.subtree(o);if(c)X(!sr(p.value),"If we're adding a query, it shouldn't be shadowed");else{const g=p.fold((x,w,v)=>{if(!Fe(x)&&w&&sr(w))return[cl(w).query];{let y=[];return w&&(y=y.concat(Em(w).map(E=>E.query))),Ht(v,(E,O)=>{y=y.concat(O)}),y}});for(let x=0;x<g.length;++x){const w=g[x];s.listenProvider_.stopListening(ci(w),rl(s,w))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new uu(r)}node(){return this.node_}}class du{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=gt(this.path_,t);return new du(this.syncTree_,r)}node(){return ou(this.syncTree_,this.path_)}}const w1=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},dp=function(s,t,r){if(!s||typeof s!="object")return s;if(X(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return b1(s[".sv"],t,r);if(typeof s[".sv"]=="object")return N1(s[".sv"],t);X(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},b1=function(s,t,r){switch(s){case"timestamp":return r.timestamp;default:X(!1,"Unexpected server value: "+s)}},N1=function(s,t,r){s.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const o=s.increment;typeof o!="number"&&X(!1,"Unexpected increment value: "+o);const c=t.node();if(X(c!==null&&typeof c<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!c.isLeafNode())return o;const f=c.getValue();return typeof f!="number"?o:f+o},k1=function(s,t,r,o){return hu(t,new du(r,s),o)},Dm=function(s,t,r){return hu(s,new uu(t),r)};function hu(s,t,r){const o=s.getPriority().val(),c=dp(o,t.getImmediateChild(".priority"),r);let d;if(s.isLeafNode()){const f=s,p=dp(f.getValue(),t,r);return p!==f.getValue()||c!==f.getPriority().val()?new _t(p,St(c)):s}else{const f=s;return d=f,c!==f.getPriority().val()&&(d=d.updatePriority(new _t(c))),f.forEachChild(ct,(p,g)=>{const x=hu(g,t.getImmediateChild(p),r);x!==g&&(d=d.updateImmediateChild(p,x))}),d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t="",r=null,o={children:{},childCount:0}){this.name=t,this.parent=r,this.node=o}}function pu(s,t){let r=t instanceof qe?t:new qe(t),o=s,c=De(r);for(;c!==null;){const d=ls(o.node.children,c)||{children:{},childCount:0};o=new fu(c,o,d),r=Ze(r),c=De(r)}return o}function ps(s){return s.node.value}function Om(s,t){s.node.value=t,Oc(s)}function Am(s){return s.node.childCount>0}function C1(s){return ps(s)===void 0&&!Am(s)}function hl(s,t){Ht(s.node.children,(r,o)=>{t(new fu(r,s,o))})}function Fm(s,t,r,o){r&&t(s),hl(s,c=>{Fm(c,t,!0)})}function S1(s,t,r){let o=s.parent;for(;o!==null;){if(t(o))return!0;o=o.parent}return!1}function Ci(s){return new qe(s.parent===null?s.name:Ci(s.parent)+"/"+s.name)}function Oc(s){s.parent!==null&&j1(s.parent,s.name,s)}function j1(s,t,r){const o=C1(r),c=Mn(s.node.children,t);o&&c?(delete s.node.children[t],s.node.childCount--,Oc(s)):!o&&!c&&(s.node.children[t]=r.node,s.node.childCount++,Oc(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=/[\[\].#$\/\u0000-\u001F\u007F]/,I1=/[\[\].#$\u0000-\u001F\u007F]/,vc=10*1024*1024,zm=function(s){return typeof s=="string"&&s.length!==0&&!E1.test(s)},$m=function(s){return typeof s=="string"&&s.length!==0&&!I1.test(s)},T1=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),$m(s)},R1=function(s,t,r,o){mu(Wc(s,"value"),t,r)},mu=function(s,t,r){const o=r instanceof qe?new Gy(r,s):r;if(t===void 0)throw new Error(s+"contains undefined "+Nr(o));if(typeof t=="function")throw new Error(s+"contains a function "+Nr(o)+" with contents = "+t.toString());if($p(t))throw new Error(s+"contains "+t.toString()+" "+Nr(o));if(typeof t=="string"&&t.length>vc/3&&ol(t)>vc)throw new Error(s+"contains a string greater than "+vc+" utf8 bytes "+Nr(o)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let c=!1,d=!1;if(Ht(t,(f,p)=>{if(f===".value")c=!0;else if(f!==".priority"&&f!==".sv"&&(d=!0,!zm(f)))throw new Error(s+" contains an invalid key ("+f+") "+Nr(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xy(o,f),mu(s,p,o),qy(o)}),c&&d)throw new Error(s+' contains ".value" child '+Nr(o)+" in addition to actual children.")}},Um=function(s,t,r,o){if(!$m(r))throw new Error(Wc(s,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},P1=function(s,t,r,o){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Um(s,t,r)},Wm=function(s,t){if(De(t)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},L1=function(s,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!zm(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!T1(r))throw new Error(Wc(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gu(s,t){let r=null;for(let o=0;o<t.length;o++){const c=t[o],d=c.getPath();r!==null&&!Gc(d,r.path)&&(s.eventLists_.push(r),r=null),r===null&&(r={events:[],path:d}),r.events.push(c)}r&&s.eventLists_.push(r)}function Bm(s,t,r){gu(s,r),Hm(s,o=>Gc(o,t))}function Ln(s,t,r){gu(s,r),Hm(s,o=>hn(o,t)||hn(t,o))}function Hm(s,t){s.recursionDepth_++;let r=!0;for(let o=0;o<s.eventLists_.length;o++){const c=s.eventLists_[o];if(c){const d=c.path;t(d)?(D1(s.eventLists_[o]),s.eventLists_[o]=null):r=!1}}r&&(s.eventLists_=[]),s.recursionDepth_--}function D1(s){for(let t=0;t<s.events.length;t++){const r=s.events[t];if(r!==null){s.events[t]=null;const o=r.getEventRunner();ii&&Rt("event: "+r.toString()),fs(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="repo_interrupt",A1=25;class F1{constructor(t,r,o,c){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=o,this.appCheckProvider_=c,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new M1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qo(),this.transactionQueueTree_=new fu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function z1(s,t,r){if(s.stats_=Yc(s.repoInfo_),s.forceRestClient_||yy())s.server_=new Xo(s.repoInfo_,(o,c,d,f)=>{hp(s,o,c,d,f)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>fp(s,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(r)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}s.persistentConnection_=new Tn(s.repoInfo_,t,(o,c,d,f)=>{hp(s,o,c,d,f)},o=>{fp(s,o)},o=>{U1(s,o)},s.authTokenProvider_,s.appCheckProvider_,r),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(o=>{s.server_.refreshAuthToken(o)}),s.appCheckProvider_.addTokenChangeListener(o=>{s.server_.refreshAppCheckToken(o.token)}),s.statsReporter_=ky(s.repoInfo_,()=>new b_(s.stats_,s.server_)),s.infoData_=new x_,s.infoSyncTree_=new cp({startListening:(o,c,d,f)=>{let p=[];const g=s.infoData_.getNode(o._path);return g.isEmpty()||(p=ul(s.infoSyncTree_,o._path,g),setTimeout(()=>{f("ok")},0)),p},stopListening:()=>{}}),vu(s,"connected",!1),s.serverSyncTree_=new cp({startListening:(o,c,d,f)=>(s.server_.listen(o,d,c,(p,g)=>{const x=f(p,g);Ln(s.eventQueue_,o._path,x)}),[]),stopListening:(o,c)=>{s.server_.unlisten(o,c)}})}function $1(s){const r=s.infoData_.getNode(new qe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function xu(s){return w1({timestamp:$1(s)})}function hp(s,t,r,o,c){s.dataUpdateCount++;const d=new qe(t);r=s.interceptServerDataCallback_?s.interceptServerDataCallback_(t,r):r;let f=[];if(c)if(o){const g=Wo(r,x=>St(x));f=g1(s.serverSyncTree_,d,g,c)}else{const g=St(r);f=m1(s.serverSyncTree_,d,g,c)}else if(o){const g=Wo(r,x=>St(x));f=h1(s.serverSyncTree_,d,g)}else{const g=St(r);f=ul(s.serverSyncTree_,d,g)}let p=d;f.length>0&&(p=fl(s,d)),Ln(s.eventQueue_,p,f)}function fp(s,t){vu(s,"connected",t),t===!1&&B1(s)}function U1(s,t){Ht(t,(r,o)=>{vu(s,r,o)})}function vu(s,t,r){const o=new qe("/.info/"+t),c=St(r);s.infoData_.updateSnapshot(o,c);const d=ul(s.infoSyncTree_,o,c);Ln(s.eventQueue_,o,d)}function Vm(s){return s.nextWriteId_++}function W1(s,t,r,o,c){yu(s,"set",{path:t.toString(),value:r,priority:o});const d=xu(s),f=St(r,o),p=ou(s.serverSyncTree_,t),g=Dm(f,p,d),x=Vm(s),w=Rm(s.serverSyncTree_,t,g,x,!0);gu(s.eventQueue_,w),s.server_.put(t.toString(),f.val(!0),(y,E)=>{const O=y==="ok";O||Bt("set at "+t+" failed: "+y);const B=Cr(s.serverSyncTree_,x,!O);Ln(s.eventQueue_,t,B),Q1(s,c,y,E)});const v=qm(s,t);fl(s,v),Ln(s.eventQueue_,v,[])}function B1(s){yu(s,"onDisconnectEvents");const t=xu(s),r=qo();Ic(s.onDisconnect_,Ye(),(c,d)=>{const f=k1(c,d,s.serverSyncTree_,t);xm(r,c,f)});let o=[];Ic(r,Ye(),(c,d)=>{o=o.concat(ul(s.serverSyncTree_,c,d));const f=qm(s,c);fl(s,f)}),s.onDisconnect_=qo(),Ln(s.eventQueue_,Ye(),o)}function H1(s,t,r){let o;De(t._path)===".info"?o=up(s.infoSyncTree_,t,r):o=up(s.serverSyncTree_,t,r),Bm(s.eventQueue_,t._path,o)}function V1(s,t,r){let o;De(t._path)===".info"?o=Dc(s.infoSyncTree_,t,r):o=Dc(s.serverSyncTree_,t,r),Bm(s.eventQueue_,t._path,o)}function Y1(s){s.persistentConnection_&&s.persistentConnection_.interrupt(O1)}function yu(s,...t){let r="";s.persistentConnection_&&(r=s.persistentConnection_.id+":"),Rt(r,...t)}function Q1(s,t,r,o){t&&fs(()=>{if(r==="ok")t(null);else{const c=(r||"error").toUpperCase();let d=c;o&&(d+=": "+o);const f=new Error(d);f.code=c,t(f)}})}function Ym(s,t,r){return ou(s.serverSyncTree_,t,r)||be.EMPTY_NODE}function _u(s,t=s.transactionQueueTree_){if(t||pl(s,t),ps(t)){const r=Gm(s,t);X(r.length>0,"Sending zero length transaction queue"),r.every(c=>c.status===0)&&G1(s,Ci(t),r)}else Am(t)&&hl(t,r=>{_u(s,r)})}function G1(s,t,r){const o=r.map(x=>x.currentWriteId),c=Ym(s,t,o);let d=c;const f=c.hash();for(let x=0;x<r.length;x++){const w=r[x];X(w.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const v=Ut(t,w.path);d=d.updateChild(v,w.currentOutputSnapshotRaw)}const p=d.val(!0),g=t;s.server_.put(g.toString(),p,x=>{yu(s,"transaction put response",{path:g.toString(),status:x});let w=[];if(x==="ok"){const v=[];for(let y=0;y<r.length;y++)r[y].status=2,w=w.concat(Cr(s.serverSyncTree_,r[y].currentWriteId)),r[y].onComplete&&v.push(()=>r[y].onComplete(null,!0,r[y].currentOutputSnapshotResolved)),r[y].unwatcher();pl(s,pu(s.transactionQueueTree_,t)),_u(s,s.transactionQueueTree_),Ln(s.eventQueue_,t,w);for(let y=0;y<v.length;y++)fs(v[y])}else{if(x==="datastale")for(let v=0;v<r.length;v++)r[v].status===3?r[v].status=4:r[v].status=0;else{Bt("transaction at "+g.toString()+" failed: "+x);for(let v=0;v<r.length;v++)r[v].status=4,r[v].abortReason=x}fl(s,t)}},f)}function fl(s,t){const r=Qm(s,t),o=Ci(r),c=Gm(s,r);return X1(s,c,o),o}function X1(s,t,r){if(t.length===0)return;const o=[];let c=[];const f=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const g=t[p],x=Ut(r,g.path);let w=!1,v;if(X(x!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)w=!0,v=g.abortReason,c=c.concat(Cr(s.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=A1)w=!0,v="maxretry",c=c.concat(Cr(s.serverSyncTree_,g.currentWriteId,!0));else{const y=Ym(s,g.path,f);g.currentInputSnapshot=y;const E=t[p].update(y.val());if(E!==void 0){mu("transaction failed: Data returned ",E,g.path);let O=St(E);typeof E=="object"&&E!=null&&Mn(E,".priority")||(O=O.updatePriority(y.getPriority()));const Z=g.currentWriteId,ce=xu(s),ee=Dm(O,y,ce);g.currentOutputSnapshotRaw=O,g.currentOutputSnapshotResolved=ee,g.currentWriteId=Vm(s),f.splice(f.indexOf(Z),1),c=c.concat(Rm(s.serverSyncTree_,g.path,ee,g.currentWriteId,g.applyLocally)),c=c.concat(Cr(s.serverSyncTree_,Z,!0))}else w=!0,v="nodata",c=c.concat(Cr(s.serverSyncTree_,g.currentWriteId,!0))}Ln(s.eventQueue_,r,c),c=[],w&&(t[p].status=2,(function(y){setTimeout(y,Math.floor(0))})(t[p].unwatcher),t[p].onComplete&&(v==="nodata"?o.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):o.push(()=>t[p].onComplete(new Error(v),!1,null))))}pl(s,s.transactionQueueTree_);for(let p=0;p<o.length;p++)fs(o[p]);_u(s,s.transactionQueueTree_)}function Qm(s,t){let r,o=s.transactionQueueTree_;for(r=De(t);r!==null&&ps(o)===void 0;)o=pu(o,r),t=Ze(t),r=De(t);return o}function Gm(s,t){const r=[];return Xm(s,t,r),r.sort((o,c)=>o.order-c.order),r}function Xm(s,t,r){const o=ps(t);if(o)for(let c=0;c<o.length;c++)r.push(o[c]);hl(t,c=>{Xm(s,c,r)})}function pl(s,t){const r=ps(t);if(r){let o=0;for(let c=0;c<r.length;c++)r[c].status!==2&&(r[o]=r[c],o++);r.length=o,Om(t,r.length>0?r:void 0)}hl(t,o=>{pl(s,o)})}function qm(s,t){const r=Ci(Qm(s,t)),o=pu(s.transactionQueueTree_,t);return S1(o,c=>{yc(s,c)}),yc(s,o),Fm(o,c=>{yc(s,c)}),r}function yc(s,t){const r=ps(t);if(r){const o=[];let c=[],d=-1;for(let f=0;f<r.length;f++)r[f].status===3||(r[f].status===1?(X(d===f-1,"All SENT items should be at beginning of queue."),d=f,r[f].status=3,r[f].abortReason="set"):(X(r[f].status===0,"Unexpected transaction status in abort"),r[f].unwatcher(),c=c.concat(Cr(s.serverSyncTree_,r[f].currentWriteId,!0)),r[f].onComplete&&o.push(r[f].onComplete.bind(null,new Error("set"),!1,null))));d===-1?Om(t,void 0):r.length=d+1,Ln(s.eventQueue_,Ci(t),c);for(let f=0;f<o.length;f++)fs(o[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(s){let t="";const r=s.split("/");for(let o=0;o<r.length;o++)if(r[o].length>0){let c=r[o];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch{}t+="/"+c}return t}function K1(s){const t={};s.charAt(0)==="?"&&(s=s.substring(1));for(const r of s.split("&")){if(r.length===0)continue;const o=r.split("=");o.length===2?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Bt(`Invalid query segment '${r}' in query '${s}'`)}return t}const pp=function(s,t){const r=J1(s),o=r.namespace;r.domain==="firebase.com"&&Pn(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&r.domain!=="localhost"&&Pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||uy();const c=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new Jp(r.host,r.secure,o,c,t,"",o!==r.subdomain),path:new qe(r.pathString)}},J1=function(s){let t="",r="",o="",c="",d="",f=!0,p="https",g=443;if(typeof s=="string"){let x=s.indexOf("//");x>=0&&(p=s.substring(0,x-1),s=s.substring(x+2));let w=s.indexOf("/");w===-1&&(w=s.length);let v=s.indexOf("?");v===-1&&(v=s.length),t=s.substring(0,Math.min(w,v)),w<v&&(c=q1(s.substring(w,v)));const y=K1(s.substring(Math.min(s.length,v)));x=t.indexOf(":"),x>=0?(f=p==="https"||p==="wss",g=parseInt(t.substring(x+1),10)):x=t.length;const E=t.slice(0,x);if(E.toLowerCase()==="localhost")r="localhost";else if(E.split(".").length<=2)r=E;else{const O=t.indexOf(".");o=t.substring(0,O).toLowerCase(),r=t.substring(O+1),d=o}"ns"in y&&(d=y.ns)}return{host:t,port:g,domain:r,subdomain:o,secure:f,scheme:p,pathString:c,namespace:d}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,r,o,c){this.eventType=t,this.eventRegistration=r,this.snapshot=o,this.prevName=c}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bt(this.snapshot.exportVal())}}class ew{constructor(t,r,o){this.eventRegistration=t,this.error=r,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t,r,o,c){this._repo=t,this._path=r,this._queryParams=o,this._orderByCalled=c}get key(){return Fe(this._path)?null:lm(this._path)}get ref(){return new ir(this._repo,this._path)}get _queryIdentifier(){const t=Jf(this._queryParams),r=Hc(t);return r==="{}"?"default":r}get _queryObject(){return Jf(this._queryParams)}isEqual(t){if(t=_i(t),!(t instanceof wu))return!1;const r=this._repo===t._repo,o=Gc(this._path,t._path),c=this._queryIdentifier===t._queryIdentifier;return r&&o&&c}toJSON(){return this.toString()}toString(){return this._repo.toString()+Qy(this._path)}}class ir extends wu{constructor(t,r){super(t,r,new Jc,!1)}get parent(){const t=cm(this._path);return t===null?null:new ir(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class sl{constructor(t,r,o){this._node=t,this.ref=r,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new qe(t),o=Ac(this.ref,t);return new sl(this._node.getChild(r),o,ct)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,c)=>t(new sl(c,Ac(this.ref,o),ct)))}hasChild(t){const r=new qe(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Nt(s,t){return s=_i(s),s._checkNotDeleted("ref"),t!==void 0?Ac(s._root,t):s._root}function Ac(s,t){return s=_i(s),De(s._path)===null?P1("child","path",t):Um("child","path",t),new ir(s._repo,gt(s._path,t))}function Si(s){return Wm("remove",s._path),or(s,null)}function or(s,t){s=_i(s),Wm("set",s._path),R1("set",t,s._path);const r=new il;return W1(s._repo,s._path,t,null,r.wrapCallback(()=>{})),r.promise}class bu{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const o=r._queryParams.getIndex();return new Z1("value",this,new sl(t.snapshotNode,new ir(r._repo,r._path),o))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new ew(this,t,r):null}matches(t){return t instanceof bu?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function nw(s,t,r,o,c){const d=new tw(r,void 0),f=new bu(d);return H1(s._repo,s,f),()=>V1(s._repo,s,f)}function ms(s,t,r,o){return nw(s,"value",t)}r1(ir);c1(ir);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="FIREBASE_DATABASE_EMULATOR_HOST",Fc={};let sw=!1;function iw(s,t,r,o){const c=t.lastIndexOf(":"),d=t.substring(0,c),f=Uc(d);s.repoInfo_=new Jp(t,f,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,r),o&&(s.authTokenProvider_=o)}function ow(s,t,r,o,c){let d=o||s.options.databaseURL;d===void 0&&(s.options.projectId||Pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rt("Using default host for project ",s.options.projectId),d=`${s.options.projectId}-default-rtdb.firebaseio.com`);let f=pp(d,c),p=f.repoInfo,g;typeof process<"u"&&Mf&&(g=Mf[rw]),g?(d=`http://${g}?ns=${p.namespace}`,f=pp(d,c),p=f.repoInfo):f.repoInfo.secure;const x=new wy(s.name,s.options,t);L1("Invalid Firebase Database URL",f),Fe(f.path)||Pn("Database URL must point to the root of a Firebase Database (not including a child path).");const w=aw(p,s,x,new _y(s,r));return new cw(w,s)}function lw(s,t){const r=Fc[t];(!r||r[s.key]!==s)&&Pn(`Database ${t}(${s.repoInfo_}) has already been deleted.`),Y1(s),delete r[s.key]}function aw(s,t,r,o){let c=Fc[t.name];c||(c={},Fc[t.name]=c);let d=c[s.toURLString()];return d&&Pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new F1(s,sw,r,o),c[s.toURLString()]=d,d}class cw{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(z1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ir(this._repo,Ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lw(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Pn("Cannot call "+t+" on a deleted database.")}}function uw(s=Vv(),t){const r=$v(s,"database").getImmediate({identifier:t});if(!r._instanceStarted){const o=Cx("database");o&&dw(r,...o)}return r}function dw(s,t,r,o={}){s=_i(s),s._checkNotDeleted("useEmulator");const c=`${t}:${r}`,d=s._repoInternal;if(s._instanceStarted){if(c===s._repoInternal.repoInfo_.host&&Bo(o,d.repoInfo_.emulatorOptions))return;Pn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(d.repoInfo_.nodeAdmin)o.mockUserToken&&Pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new zo(zo.OWNER);else if(o.mockUserToken){const p=typeof o.mockUserToken=="string"?o.mockUserToken:jx(o.mockUserToken,s.app.options.projectId);f=new zo(p)}Uc(t)&&(Sx(t),Tx("Database",!0)),iw(d,c,o,f)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(s){sy(Hv),Vo(new di("database",(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),c=t.getProvider("auth-internal"),d=t.getProvider("app-check-internal");return ow(o,c,d,r)},"PUBLIC").setMultipleInstances(!0)),rs(Df,Of,s),rs(Df,Of,"esm2020")}Tn.prototype.simpleListen=function(s,t){this.sendRequest("q",{p:s},t)};Tn.prototype.echo=function(s,t){this.sendRequest("echo",{d:s},t)};hw();const fw={apiKey:"AIzaSyCIA80U-Nb235O5SG_2d1TzdylvYQrzNUc",authDomain:"razlom-db061.firebaseapp.com",projectId:"razlom-db061",storageBucket:"razlom-db061.firebasestorage.app",messagingSenderId:"343432819418",appId:"1:343432819418:web:73f0fedc8a5e5a32912be3",measurementId:"G-EPLQFH5LMJ",databaseURL:"https://razlom-db061-default-rtdb.firebaseio.com"};let mp,ze;try{mp=Mp(fw),ze=uw(mp),console.log("Firebase initialized successfully (RTDB only)")}catch(s){console.error("Firebase init error:",s)}const ji=s=>{if(!s)return[];const t=Array.isArray(s)?s:Object.values(s),r=new Map;return t.forEach(o=>{o&&typeof o=="object"&&o.id&&r.set(o.id,o)}),Array.from(r.values())},ri=s=>(s||[]).reduce((t,r)=>(r&&r.id&&(t[r.id]=r),t),{}),pw=(s,t)=>{if(!ze)return()=>{};const r=Nt(ze,`rooms/${s}/characters`);return ms(r,o=>{t(ji(o.val()))})},mw=(s,t)=>{if(!ze)return()=>{};const r=Nt(ze,`rooms/${s}/realms`);return ms(r,o=>{t(ji(o.val()))})},gw=(s,t)=>{if(!ze)return()=>{};const r=Nt(ze,`rooms/${s}/worlds`);return ms(r,o=>{t(ji(o.val()))})},xw=(s,t)=>{if(!ze)return()=>{};const r=Nt(ze,`rooms/${s}/notes`);return ms(r,o=>{t(ji(o.val()))})},vw=(s,t)=>{if(!ze)return()=>{};const r=Nt(ze,`rooms/${s}/rpSessions`);return ms(r,o=>{t(ji(o.val()))})},gp=(s,t,r=!1)=>{if(!ze)return()=>{};const c=Nt(ze,`rooms/${s}/${r?"availableHiddenTags":"availableTags"}`);return ms(c,d=>{const f=d.val();t(Array.isArray(f)?f:[])})},yw=async(s,t)=>{if(!ze)return;const r=Nt(ze,`rooms/${s}`),o={...t,characters:ri(t.characters),realms:ri(t.realms),worlds:ri(t.worlds),notes:ri(t.notes),rpSessions:ri(t.rpSessions)};try{await or(r,o)}catch(c){console.error("Firebase write error:",c)}},_w=async(s,t)=>{if(!ze||!t.id)return;const r=Nt(ze,`rooms/${s}/characters/${t.id}`);try{await or(r,t)}catch(o){console.error("Error saving character:",o)}},ww=async(s,t)=>{if(!ze)return;const r=Nt(ze,`rooms/${s}/characters/${t}`);try{await Si(r)}catch(o){console.error("Error deleting character:",o)}},bw=async(s,t)=>{if(!ze||!t.id)return;const r=Nt(ze,`rooms/${s}/realms/${t.id}`);try{await or(r,t)}catch(o){console.error(o)}},Nw=async(s,t)=>{if(!ze)return;const r=Nt(ze,`rooms/${s}/realms/${t}`);try{await Si(r)}catch(o){console.error(o)}},kw=async(s,t)=>{if(!ze||!t.id)return;const r=Nt(ze,`rooms/${s}/worlds/${t.id}`);try{await or(r,t)}catch(o){console.error(o)}},Cw=async(s,t)=>{if(!ze)return;const r=Nt(ze,`rooms/${s}/worlds/${t}`);try{await Si(r)}catch(o){console.error(o)}},Sw=async(s,t)=>{if(!ze||!t.id)return;const r=Nt(ze,`rooms/${s}/notes/${t.id}`);try{await or(r,t)}catch(o){console.error(o)}},jw=async(s,t)=>{if(!ze)return;const r=Nt(ze,`rooms/${s}/notes/${t}`);try{await Si(r)}catch(o){console.error(o)}},Ew=async(s,t)=>{if(!ze||!t.id)return;const r=Nt(ze,`rooms/${s}/rpSessions/${t.id}`);try{await or(r,t)}catch(o){console.error(o)}},Iw=async(s,t)=>{if(!ze)return;const r=Nt(ze,`rooms/${s}/rpSessions/${t}`);try{await Si(r)}catch(o){console.error(o)}},xp=async(s,t,r=!1)=>{if(!ze)return;const c=Nt(ze,`rooms/${s}/${r?"availableHiddenTags":"availableTags"}`);try{await or(c,t)}catch(d){console.error("Error saving tags:",d)}},vp="rp_haven_master_data_v3",ft="global_chronicles_main",$t=(s,t=[])=>Array.isArray(s)?s:t,Tw=()=>{const[s,t]=F.useState("characters"),[r,o]=F.useState(null),[c,d]=F.useState(""),[f,p]=F.useState({}),[g,x]=F.useState(!1),[w,v]=F.useState(!1),[y,E]=F.useState(null),[O,B]=F.useState(!1),[Z,ce]=F.useState(!1),[ee,ye]=F.useState(!0);F.useEffect(()=>{window.scrollTo(0,0)},[s,r]);const[oe,We]=F.useState(!1),[K,L]=F.useState(ac),[R,me]=F.useState(()=>{const M=localStorage.getItem(vp);if(M)try{const P=JSON.parse(M);return{characters:$t(P.characters,ac),realms:$t(P.realms),worlds:$t(P.worlds),notes:$t(P.notes),availableTags:$t(P.availableTags,_f),availableHiddenTags:$t(P.availableHiddenTags,wf),rpSessions:$t(P.rpSessions)}}catch(P){console.error("Failed to parse storage",P)}return{characters:ac,realms:[],worlds:[],notes:[],availableTags:_f,availableHiddenTags:wf,rpSessions:[]}});F.useEffect(()=>{L(R.characters)},[R.characters]),F.useEffect(()=>{if(ee){const M=pw(ft,et=>me(T=>({...T,characters:et}))),P=mw(ft,et=>me(T=>({...T,realms:et}))),Q=gw(ft,et=>me(T=>({...T,worlds:et}))),xe=xw(ft,et=>me(T=>({...T,notes:et}))),Ce=vw(ft,et=>me(T=>({...T,rpSessions:et}))),Te=gp(ft,et=>me(T=>({...T,availableTags:et})),!1),Xe=gp(ft,et=>me(T=>({...T,availableHiddenTags:et})),!0);return()=>{M(),P(),Q(),xe(),Ce(),Te(),Xe()}}},[ee]);const le=()=>{const M=R.characters.filter(P=>{const Q=P.name.toLowerCase().includes(c.toLowerCase()),xe=Object.entries(f).every(([Ce,Te])=>{const Xe=(P.tags||[]).includes(Ce)||(P.hiddenTags||[]).includes(Ce);return Te==="include"?Xe:Te==="exclude"?!Xe:!0});return Q&&xe});We(!0),setTimeout(()=>{L(M),requestAnimationFrame(()=>{We(!1)})},600)};F.useEffect(()=>{le()},[c,f,R.characters]);const ke=M=>{me(M),B(!0),setTimeout(()=>B(!1),2e3);try{const P=JSON.parse(JSON.stringify(M));P.characters.forEach(Q=>{Q.imageUrl&&Q.imageUrl.startsWith("data:")&&(Q.imageUrl="")}),P.worlds.forEach(Q=>{Q.imageUrl&&Q.imageUrl.startsWith("data:")&&(Q.imageUrl="")}),P.realms.forEach(Q=>{Q.imageUrl&&Q.imageUrl.startsWith("data:")&&(Q.imageUrl="")}),localStorage.setItem(vp,JSON.stringify(P))}catch(P){console.warn("Local storage quota exceeded.",P)}},fe=M=>{const P=R.characters.some(Q=>Q.id===M.id)?R.characters.map(Q=>Q.id===M.id?M:Q):[...R.characters,M];ke({...R,characters:P}),v(!1),E(null),ee&&_w(ft,M)},D=M=>{if(window.confirm("    ?")){const P=R.characters.filter(Q=>Q.id!==M);ke({...R,characters:P}),r===M&&o(null),ee&&ww(ft,M)}},je=M=>{ee&&(M.forEach(P=>{const Q=R.notes.find(xe=>xe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&Sw(ft,P)}),R.notes.forEach(P=>{M.find(Q=>Q.id===P.id)||jw(ft,P.id)})),ke({...R,notes:M})},Le=M=>{ee&&(M.forEach(P=>{const Q=R.realms.find(xe=>xe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&bw(ft,P)}),R.realms.forEach(P=>{M.find(Q=>Q.id===P.id)||Nw(ft,P.id)})),ke({...R,realms:M})},Me=M=>{ee&&(M.forEach(P=>{const Q=R.worlds.find(xe=>xe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&kw(ft,P)}),R.worlds.forEach(P=>{M.find(Q=>Q.id===P.id)||Cw(ft,P.id)})),ke({...R,worlds:M})},Ie=M=>{ee&&(M.forEach(P=>{const Q=R.rpSessions.find(xe=>xe.id===P.id);(!Q||JSON.stringify(Q)!==JSON.stringify(P))&&Ew(ft,P)}),R.rpSessions.forEach(P=>{M.find(Q=>Q.id===P.id)||Iw(ft,P.id)})),ke({...R,rpSessions:M})},V=M=>{ke({...R,availableTags:M}),ee&&xp(ft,M,!1)},q=M=>{ke({...R,availableHiddenTags:M}),ee&&xp(ft,M,!0)},b=M=>{p(P=>{const Q=P[M]||"none";let xe="none";Q==="none"?xe="include":Q==="include"?xe="exclude":xe="none";const Ce={...P};return xe==="none"?delete Ce[M]:Ce[M]=xe,Ce})},A=()=>{d(""),p({})},te=Object.keys(f).length;return a.jsxs(nx,{activeTab:s,setActiveTab:M=>{t(M),o(null),p({})},isAdmin:g,onToggleAdmin:()=>x(!g),onOpenSync:()=>ce(!0),isSyncActive:ee,onDownloadDB:()=>{const M=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),P=URL.createObjectURL(M),Q=document.createElement("a");Q.href=P,Q.download=`rp-vault-${new Date().toISOString().slice(0,10)}.json`,Q.click()},onUploadDB:M=>{const P=JSON.parse(M);if(window.confirm("  ?")){const Q={characters:$t(P.characters),realms:$t(P.realms),worlds:$t(P.worlds),notes:$t(P.notes),availableTags:$t(P.availableTags),availableHiddenTags:$t(P.availableHiddenTags),rpSessions:$t(P.rpSessions)};ke(Q),ee&&yw(ft,Q)}},children:[a.jsx("div",{className:`fixed top-20 md:top-6 right-6 z-[90] transition-all duration-500 pointer-events-none ${O?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:a.jsx("div",{className:"bg-emerald-950/80 border border-emerald-500/30 backdrop-blur-2xl px-5 py-2.5 rounded-2xl flex items-center gap-3 shadow-2xl",children:a.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] font-black text-emerald-400",children:""})})}),Z&&a.jsx(px,{isConnected:ee,onConnect:()=>ye(!0),onDisconnect:()=>ye(!1),onClose:()=>ce(!1)}),a.jsxs("div",{className:"animate-tab-switch",children:[s==="characters"&&a.jsx("div",{className:"space-y-8",children:r?a.jsx(ox,{character:R.characters.find(M=>M.id===r),isAdmin:g,allCharacters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,worlds:R.worlds,notes:R.notes,onBack:()=>o(null),onSave:fe,onSelectCharacter:o}):a.jsxs("div",{className:"animate-reveal-list space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6",children:[a.jsx("input",{type:"text",placeholder:"  ...",value:c,onChange:M=>d(M.target.value),className:"w-full bg-transparent border-b border-stone-900 text-3xl outline-none font-serif italic py-4"}),g&&a.jsx("button",{onClick:()=>{E(null),v(!0)},className:"bg-white text-black px-8 py-3.5 rounded-full text-[10px] uppercase font-black transition-all shadow-xl",children:" "})]}),(R.availableTags.length>0||R.availableHiddenTags.length>0)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-4 bg-[#0f0f0f]/30 border border-stone-900/50 rounded-2xl",children:[a.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] font-black text-stone-600 mr-2",children:":"}),R.availableTags.map(M=>{const P=f[M]||"none";return a.jsxs("button",{onClick:()=>b(M),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${P==="include"?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]":P==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-stone-400 hover:border-stone-700"}`,children:[P==="include"&&a.jsx("span",{className:"text-emerald-500 font-black",children:"+"}),P==="exclude"&&a.jsx("span",{className:"text-red-500 font-black",children:""}),M]},M)}),R.availableHiddenTags.map(M=>{const P=f[M]||"none";return a.jsxs("button",{onClick:()=>b(M),className:`px-3 py-1.5 rounded-xl text-[9px] uppercase tracking-wider font-black transition-all border flex items-center gap-2 ${P==="include"?"bg-amber-500/10 border-amber-500/40 text-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.1)]":P==="exclude"?"bg-red-500/10 border-red-500/40 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.1)]":"bg-stone-950/30 border-stone-900/50 text-stone-700 hover:text-amber-500 hover:border-amber-900/30"}`,children:[P==="include"&&a.jsx("span",{className:"text-amber-500 font-black",children:"+"}),P==="exclude"&&a.jsx("span",{className:"text-red-500 font-black",children:""}),M]},M)}),(te>0||c)&&a.jsx("button",{onClick:A,className:"ml-auto text-[9px] uppercase tracking-[0.2em] font-black text-stone-700 hover:text-red-500 transition-colors",children:" "})]}),a.jsxs("div",{className:"flex flex-wrap -mx-5 relative min-h-[400px]",children:[K.map((M,P)=>a.jsx(sx,{character:M,isVisible:!oe,staggerIndex:P,onClick:o},M.id)),K.length===0&&!oe&&a.jsx("div",{className:"w-full py-20 text-center text-stone-700 italic font-serif animate-in fade-in duration-700",children:"       ..."})]})]})}),s==="connections"&&a.jsx(dx,{characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,filterStates:f,onToggleTag:b,onClearFilters:()=>p({}),onSelectCharacter:M=>{o(M),t("characters")}}),s==="roleplay"&&a.jsx(fx,{sessions:R.rpSessions,characters:R.characters,onUpdate:Ie,isAdmin:g}),s==="worlds"&&a.jsx(hx,{realms:R.realms,worlds:R.worlds,characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onUpdateRealms:Le,onUpdateWorlds:Me,isAdmin:g}),s==="notes"&&a.jsx(ix,{notes:R.notes,characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onUpdate:je,isAdmin:g}),s==="admin"&&g&&a.jsx(ax,{characters:R.characters,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onDelete:D,onEdit:M=>{E(M),v(!0)},onAdd:()=>{E(null),v(!0)},onUpdateTags:V,onUpdateHiddenTags:q,onDownloadDB:()=>{},onUploadDB:()=>{}})]}),w&&a.jsx(lx,{initialData:y,availableTags:R.availableTags,availableHiddenTags:R.availableHiddenTags,onSave:fe,onClose:()=>v(!1)})]})},Km=document.getElementById("root");if(!Km)throw new Error("Could not find root element to mount to");const Rw=tx.createRoot(Km);Rw.render(a.jsx(_p.StrictMode,{children:a.jsx(Tw,{})}));
